var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,Pa,x){b!=Array.prototype&&b!=Object.prototype&&(b[Pa]=x.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,Pa,x,z){if(Pa){x=$jscomp.global;b=b.split(".");for(z=0;z<b.length-1;z++){var c=b[z];c in x||(x[c]={});x=x[c]}b=b[b.length-1];z=x[b];Pa=Pa(z);Pa!=z&&null!=Pa&&$jscomp.defineProperty(x,b,{configurable:!0,writable:!0,value:Pa})}};$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,x,z){var c=this.length||0;0>x&&(x=Math.max(0,c+x));if(null==z||z>c)z=c;z=Number(z);0>z&&(z=Math.max(0,c+z));for(x=Number(x||0);x<z;x++)this[x]=b;return this}},"es6","es3");
$jscomp.arrayIteratorImpl=function(b){var Pa=0;return function(){return Pa<b.length?{done:!1,value:b[Pa++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var Pa="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return Pa?Pa.call(b):$jscomp.arrayIterator(b)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function Pa(){this.batch_=null}function x(a){return a instanceof c?a:new c(function(c,e){c(a)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;Pa.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};Pa.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var z=$jscomp.global.setTimeout;Pa.prototype.asyncExecuteFunction=function(a){z(a,
0)};Pa.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var e=a[c];a[c]=null;try{e()}catch(Za){this.asyncThrow_(Za)}}}this.batch_=null};Pa.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var c=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(Ra){c.reject(Ra)}};c.prototype.createResolveAndReject_=
function(){function a(a){return function(h){e||(e=!0,a.call(c,h))}}var c=this,e=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};c.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof c)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var e=null!=a;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};c.prototype.resolveToNonPromiseObj_=function(a){var c=
void 0;try{c=a.then}catch(Ra){this.reject_(Ra);return}"function"==typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};c.prototype.reject_=function(a){this.settle_(2,a)};c.prototype.fulfill_=function(a){this.settle_(1,a)};c.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)e.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var e=new Pa;c.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};c.prototype.settleSameAsThenable_=function(a,c){var e=this.createResolveAndReject_();try{a.call(c,e.resolve,e.reject)}catch(Za){e.reject(Za)}};c.prototype.then=function(a,e){function h(a,c){return"function"==typeof a?function(c){try{Za(a(c))}catch(Ua){r(Ua)}}:
c}var Za,r,Na=new c(function(a,c){Za=a;r=c});this.callWhenSettled_(h(a,Za),h(e,r));return Na};c.prototype["catch"]=function(a){return this.then(void 0,a)};c.prototype.callWhenSettled_=function(a,c){function h(){switch(Za.state_){case 1:a(Za.result_);break;case 2:c(Za.result_);break;default:throw Error("Unexpected state: "+Za.state_);}}var Za=this;null==this.onSettledCallbacks_?e.asyncExecute(h):this.onSettledCallbacks_.push(h)};c.resolve=x;c.reject=function(a){return new c(function(c,e){e(a)})};c.race=
function(a){return new c(function(c,e){for(var h=$jscomp.makeIterator(a),r=h.next();!r.done;r=h.next())x(r.value).callWhenSettled_(c,e)})};c.all=function(a){var e=$jscomp.makeIterator(a),Ra=e.next();return Ra.done?x([]):new c(function(a,c){function h(c){return function(e){r[c]=e;y--;0==y&&a(r)}}var r=[],y=0;do r.push(void 0),y++,x(Ra.value).callWhenSettled_(h(r.length-1),c),Ra=e.next();while(!Ra.done)})};return c},"es6","es3");
$jscomp.checkStringArgs=function(b,Pa,x){if(null==b)throw new TypeError("The 'this' value for String.prototype."+x+" must not be null or undefined");if(Pa instanceof RegExp)throw new TypeError("First argument to String.prototype."+x+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.startsWith",function(b){return b?b:function(b,x){var z=$jscomp.checkStringArgs(this,b,"startsWith");b+="";for(var c=z.length,e=b.length,a=Math.max(0,Math.min(x|0,z.length)),h=0;h<e&&a<c;)if(z[a++]!=b[h++])return!1;return h>=e}},"es6","es3");$jscomp.findInternal=function(b,Pa,x){b instanceof String&&(b=String(b));for(var z=b.length,c=0;c<z;c++){var e=b[c];if(Pa.call(x,e,c,b))return{i:c,v:e}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,x){return $jscomp.findInternal(this,b,x).v}},"es6","es3");$jscomp.polyfill("String.prototype.endsWith",function(b){return b?b:function(b,x){var z=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===x&&(x=z.length);for(var c=Math.max(0,Math.min(x|0,z.length)),e=b.length;0<e&&0<c;)if(z[--c]!=b[--e])return!1;return 0>=e}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var b=0;return function(Pa){return $jscomp.SYMBOL_PREFIX+(Pa||"")+b++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,Pa){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var x=0,z={next:function(){if(x<b.length){var c=x++;return{value:Pa(c,b[c]),done:!1}}z.next=function(){return{done:!0,value:void 0}};return z.next()}};z[Symbol.iterator]=function(){return z};return z};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
$jscomp.polyfill("Math.log10",function(b){return b?b:function(b){return Math.log(b)/Math.LN10}},"es6","es3");$jscomp.polyfill("String.prototype.repeat",function(b){return b?b:function(b){var x=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var z="";b;)if(b&1&&(z+=x),b>>>=1)x+=x;return z}},"es6","es3");
$jscomp.stringPadding=function(b,Pa){var x=void 0!==b?String(b):" ";return 0<Pa&&x?x.repeat(Math.ceil(Pa/x.length)).substring(0,Pa):""};$jscomp.polyfill("String.prototype.padStart",function(b){return b?b:function(b,x){var z=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(x,b-z.length)+z}},"es8","es3");
var isInNode="object"===typeof process&&"function"===typeof require&&"object"===typeof global,isInWorker="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||isInNode;function execBoth(b,Pa,x){return!isInWorker&&b?b.apply(this,x||[]):isInWorker&&Pa?Pa.apply(this,x||[]):{}}function execWorker(b,Pa){return execBoth(void 0,b,Pa)}function execMain(b,Pa){return execBoth(b,void 0,Pa)}
execWorker(function(){isInNode&&(global.self=global);self.$={isArray:Array.isArray||function(b){return"array"===jQuery.type(b)},noop:function(){}}});
execMain(function(){window.onerror=function(b,z,c,e,a){if((c||e)&&!/extension|adsbygoogle/i.exec(z)&&/\.js/i.exec(z)){void 0==a&&(a={});var h="";try{h=$.fingerprint()}catch(Ra){}$.post("bug.php",{version:CSTIMER_VERSION,fp:h,msg:b,url:z,line:c,col:e,stack:a.stack});DEBUG&&console.log(CSTIMER_VERSION,h,b,z,c,e,a)}};for(var b="CSTIMER_VERSION LANG_SET LANG_STR LANG_CUR OK_LANG CANCEL_LANG RESET_LANG ABOUT_LANG ZOOM_LANG BUTTON_TIME_LIST BUTTON_OPTIONS BUTTON_EXPORT BUTTON_DONATE PROPERTY_SR PROPERTY_USEINS PROPERTY_USEINS_STR PROPERTY_SHOWINS PROPERTY_VOICEINS PROPERTY_VOICEINS_STR PROPERTY_VOICEVOL PROPERTY_PHASES PROPERTY_TIMERSIZE PROPERTY_USEMILLI PROPERTY_SMALLADP PROPERTY_SCRSIZE PROPERTY_SCRMONO PROPERTY_SCRLIM PROPERTY_SCRALIGN PROPERTY_SCRALIGN_STR PROPERTY_SCRFAST PROPERTY_SCRKEYM PROPERTY_SCRCLK PROPERTY_SCRCLK_STR PROPERTY_WNDSCR PROPERTY_WNDSTAT PROPERTY_WNDTOOL PROPERTY_WND_STR EXPORT_DATAEXPORT EXPORT_TOFILE EXPORT_FROMFILE EXPORT_TOSERV EXPORT_FROMSERV EXPORT_FROMOTHER EXPORT_USERID EXPORT_INVID EXPORT_ERROR EXPORT_NODATA EXPORT_UPLOADED EXPORT_CODEPROMPT EXPORT_ONLYOPT EXPORT_ACCOUNT EXPORT_LOGINGGL EXPORT_LOGINWCA EXPORT_LOGOUTCFM EXPORT_LOGINAUTHED IMPORT_FINAL_CONFIRM BUTTON_SCRAMBLE BUTTON_TOOLS IMAGE_UNAVAILABLE TOOLS_SELECTFUNC TOOLS_CROSS TOOLS_EOLINE TOOLS_ROUX1 TOOLS_222FACE TOOLS_GIIKER TOOLS_IMAGE TOOLS_STATS TOOLS_HUGESTATS TOOLS_DISTRIBUTION TOOLS_TREND TOOLS_METRONOME TOOLS_BATTLE TOOLS_BATTLE_HEAD TOOLS_BATTLE_TITLE TOOLS_BATTLE_STATUS TOOLS_BATTLE_INFO TOOLS_BATTLE_JOINALERT TOOLS_BATTLE_LEAVEALERT TOOLS_CFMTIME TOOLS_SOLVERS TOOLS_RECONS TOOLS_RECONS_NODATA TOOLS_TRAINSTAT TOOLS_BLDHELPER TOOLS_SYNCSEED TOOLS_SYNCSEED_SEED TOOLS_SYNCSEED_INPUT TOOLS_SYNCSEED_30S TOOLS_SYNCSEED_HELP TOOLS_SYNCSEED_DISABLE TOOLS_SYNCSEED_INPUTA OLCOMP_UPDATELIST OLCOMP_VIEWRESULT OLCOMP_VIEWMYRESULT OLCOMP_START OLCOMP_SUBMIT OLCOMP_SUBMITAS OLCOMP_WCANOTICE OLCOMP_OLCOMP OLCOMP_ANONYM OLCOMP_ME OLCOMP_WCAACCOUNT OLCOMP_ABORT OLCOMP_WITHANONYM PROPERTY_IMGSIZE TIMER_INSPECT TIMER_SOLVE PROPERTY_USEMOUSE PROPERTY_TIMEU PROPERTY_TIMEU_STR PROPERTY_PRETIME PROPERTY_ENTERING PROPERTY_ENTERING_STR PROPERTY_INTUNIT PROPERTY_INTUNIT_STR PROPERTY_COLOR PROPERTY_COLORS PROPERTY_VIEW PROPERTY_VIEW_STR PROPERTY_UIDESIGN PROPERTY_UIDESIGN_STR COLOR_EXPORT COLOR_IMPORT COLOR_FAIL PROPERTY_FONTCOLOR_STR PROPERTY_COLOR_STR PROPERTY_FONT PROPERTY_FONT_STR PROPERTY_FORMAT PROPERTY_USEKSC PROPERTY_NTOOLS PROPERTY_AHIDE SCRAMBLE_LAST SCRAMBLE_NEXT SCRAMBLE_SCRAMBLE SCRAMBLE_SCRAMBLING SCRAMBLE_LENGTH SCRAMBLE_INPUT PROPERTY_VRCSPEED PROPERTY_VRCMP PROPERTY_VRCMPS PROPERTY_GIIKERVRC PROPERTY_GIISOK_DELAY PROPERTY_GIISOK_DELAYS PROPERTY_GIISOK_KEY PROPERTY_GIISOK_MOVE PROPERTY_GIISOK_MOVES PROPERTY_GIISBEEP PROPERTY_GIIRST PROPERTY_GIIRSTS CONFIRM_GIIRST PROPERTY_GIIAED scrdata SCRAMBLE_NOOBST SCRAMBLE_NOOBSS SCROPT_TITLE SCROPT_BTNALL SCROPT_BTNNONE SCROPT_EMPTYALT STATS_CFM_RESET STATS_CFM_DELSS STATS_CFM_DELMUL STATS_CFM_DELETE STATS_COMMENT STATS_REVIEW STATS_DATE STATS_SSSTAT STATS_CURROUND STATS_CURSESSION STATS_CURSPLIT STATS_EXPORTCSV STATS_SSMGR_TITLE STATS_SSMGR_NAME STATS_SSMGR_DETAIL STATS_SSMGR_OPS STATS_SSMGR_ORDER STATS_SSMGR_ODCFM STATS_SSMGR_SORTCFM STATS_ALERTMG STATS_PROMPTSPL STATS_ALERTSPL STATS_AVG STATS_SUM STATS_SOLVE STATS_TIME STATS_SESSION STATS_SESSION_NAME STATS_SESSION_NAMEC STATS_STRING STATS_PREC STATS_PREC_STR STATS_TYPELEN STATS_STATCLR STATS_ABSIDX STATS_XSESSION_DATE STATS_XSESSION_NAME STATS_XSESSION_SCR STATS_XSESSION_CALC STATS_RSFORSS PROPERTY_PRINTSCR PROPERTY_PRINTDATE PROPERTY_SUMMARY PROPERTY_IMRENAME PROPERTY_SCR2SS PROPERTY_SS2SCR PROPERTY_SS2PHASES PROPERTY_STATINV PROPERTY_STATSSUM PROPERTY_STATTHRES PROPERTY_STATAL PROPERTY_STATALU PROPERTY_DELMUL PROPERTY_TOOLSFUNC PROPERTY_TRIM PROPERTY_TRIM_MED PROPERTY_STKHEAD PROPERTY_TOOLPOS PROPERTY_TOOLPOS_STR PROPERTY_HIDEFULLSOL PROPERTY_IMPPREV PROPERTY_AUTOEXP PROPERTY_AUTOEXP_OPT PROPERTY_SCRASIZE MODULE_NAMES BGIMAGE_URL BGIMAGE_INVALID BGIMAGE_OPACITY BGIMAGE_IMAGE BGIMAGE_IMAGE_STR SHOW_AVG_LABEL SHOW_DIFF_LABEL SHOW_DIFF_LABEL_STR USE_LOGOHINT TOOLS_SCRGEN SCRGEN_NSCR SCRGEN_PRE SCRGEN_GEN TOOLS_RECONS_TITLE TOOLS_DLYSTAT TOOLS_DLYSTAT1 TOOLS_DLYSTAT_OPT1 TOOLS_DLYSTAT_OPT2 PROPERTY_GIIMODE PROPERTY_GIIMODES PROPERTY_VRCAH PROPERTY_VRCAHS VRCREPLAY_TITLE VRCREPLAY_ORI VRCREPLAY_SHARE GIIKER_CONNECT GIIKER_RESET PROPERTY_SHOWAD PROPERTY_GIIORI".split(" "),Pa=
0;Pa<b.length;Pa++)window[b[Pa]]=window[b[Pa]]||"|||||||||||||||";window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,z){return window.setTimeout(b,1E3/60)}}();window.localStorage||(window.localStorage={});"properties"in localStorage||"https:"==location.protocol||"localhost"==location.hostname||(location.href="https:"+location.href.substring(location.protocol.length));
window.performance&&window.performance.now&&($.now=function(){return Math.floor(window.performance.now())});$.urlParam=function(b){b=(new RegExp("[?&]"+b+"=([^&#]*)")).exec(window.location.href);return null==b?null:b[1]||0};$.hashParam=function(b){b=(new RegExp("[#&]"+b+"=([^&#]*)")).exec(window.location.hash);return null==b?null:b[1]||0};$.clearUrl=function(b){var x=(new RegExp("[?&]("+b+"=[^&#]*&?)")).exec(window.location.href);b=b?location.href.replace(x[1],"").replace(/\?$/,""):location.pathname;
history&&history.replaceState?history.replaceState(void 0,void 0,b):location.href=b};$.clearHash=function(b){var x=(new RegExp("[#&]("+b+"=[^&#]*&?)")).exec(window.location.href);b=b?location.href.replace(x[1],"").replace(/#$/,""):location.pathname+location.search;history&&history.replaceState?history.replaceState(void 0,void 0,b):location.href=b};$.clipboardCopy=function(b,z){var c=$("<textarea>"+b+"</textarea>").appendTo(document.body);c.focus().select();var e=!1;try{e=document.execCommand("copy")}catch(a){}c.remove();
return e};$.fingerprint=function(){var b=window.screen&&[Math.max(screen.height,screen.width),Math.min(screen.height,screen.width),screen.colorDepth].join("x"),z=(new Date).getTimezoneOffset(),c=$.map(navigator.plugins,function(c){return[c.name,c.description,$.map(c,function(a){return[a.type,a.suffixes].join("~")}).sort().join(",")].join("::")}).sort().join(";");b=[navigator.userAgent,navigator.language,!!window.sessionStorage,!!window.localStorage,!!window.indexedDB,navigator.doNotTrack,b,z,c].join("###");
return $.sha256(b)};$.ctxDrawPolygon=function(b,z,c,e){if(b){e=e||[1,0,0,0,1,0];c=$.ctxTransform(c,e);b.beginPath();b.fillStyle=z;b.moveTo(c[0][0],c[1][0]);for(z=1;z<c[0].length;z++)b.lineTo(c[0][z],c[1][z]);b.closePath();b.fill();b.stroke()}};$.ctxRotate=function(b,z){return $.ctxTransform(b,[Math.cos(z),-Math.sin(z),0,Math.sin(z),Math.cos(z),0])};$.ctxTransform=function(b){for(var x,c=1;c<arguments.length;c++){var e=arguments[c];3==e.length&&(e=[e[0],0,e[1]*e[0],0,e[0],e[2]*e[0]]);x=[[],[]];for(c=
0;c<b[0].length;c++)x[0][c]=b[0][c]*e[0]+b[1][c]*e[1]+e[2],x[1][c]=b[0][c]*e[3]+b[1][c]*e[4]+e[5]}return x};$.delayExec=function(){var b={};return function(x,c,e){b[x]&&(clearTimeout(b[x][0]),delete b[x]);e=setTimeout(c,e);b[x]=[e,c]}}();"serviceWorker"in navigator?$(function(){navigator.serviceWorker.register("sw.js")}):window.applicationCache&&$(function(){applicationCache.addEventListener("updateready",function(b){applicationCache.status==applicationCache.UPDATEREADY&&(applicationCache.swapCache(),
location.reload())},!1)});navigator.storage&&navigator.storage.persisted&&navigator.storage.persisted().then(function(b){if(b)return Promise.resolve(b);if(navigator.storage.persist)return navigator.storage.persist()}).then(function(b){$.persistent=b})});var DEBUGM=!1,DEBUGWK=!1,DEBUG=isInWorker?DEBUGWK:DEBUGM&&!!$.urlParam("debug");Array.prototype.indexOf||(Array.prototype.indexOf=function(b){for(var Pa=0;Pa<this.length;Pa++)if(this[Pa]==b)return Pa;return-1});
Function.prototype.bind||(Function.prototype.bind=function(b){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var Pa=Array.prototype.slice.call(arguments,1),x=this,z=function(){},c=function(){return x.apply(this instanceof z?this:b,Pa.concat(Array.prototype.slice.call(arguments)))};this.prototype&&(z.prototype=this.prototype);c.prototype=new z;return c});execBoth(function(){var b=function(b,z){var c=(b&65535)+(z&65535);return(b>>16)+(z>>16)+(c>>16)<<16|c&65535},Pa=function(b,z){return b>>>z|b<<32-z};$.sha256=function(x){/[\x80-\xFF]/.test(x)&&(x=unescape(encodeURI(x)));for(var z=x,c=[],e=0;e<8*z.length;e+=8)c[e>>5]|=(z.charCodeAt(e/8)&255)<<24-e%32;var a=8*x.length;z=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,
4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];
x=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];e=[64];c[a>>5]|=128<<24-a%32;c[(a+64>>9<<4)+15]=a;for(a=0;a<c.length;a+=16){for(var h=x[0],Ra=x[1],Za=x[2],r=x[3],Na=x[4],Qa=x[5],y=x[6],Wa=x[7],Ua=0;64>Ua;Ua++){var Xa=Ua;if(16>Ua)var Ta=c[a+Ua];else{Ta=e[Ua-2];Ta=Pa(Ta,17)^Pa(Ta,19)^Ta>>>10;Ta=b(Ta,e[Ua-7]);var Ya=e[Ua-15];Ya=Pa(Ya,7)^Pa(Ya,18)^Ya>>>3;Ta=b(b(Ta,Ya),e[Ua-16])}e[Xa]=Ta;Xa=Na;Xa=Pa(Xa,6)^Pa(Xa,11)^Pa(Xa,25);Xa=b(b(b(b(Wa,Xa),Na&Qa^~Na&y),z[Ua]),
e[Ua]);Wa=h;Wa=Pa(Wa,2)^Pa(Wa,13)^Pa(Wa,22);Ta=b(Wa,h&Ra^h&Za^Ra&Za);Wa=y;y=Qa;Qa=Na;Na=b(r,Xa);r=Za;Za=Ra;Ra=h;h=b(Xa,Ta)}x[0]=b(h,x[0]);x[1]=b(Ra,x[1]);x[2]=b(Za,x[2]);x[3]=b(r,x[3]);x[4]=b(Na,x[4]);x[5]=b(Qa,x[5]);x[6]=b(y,x[6]);x[7]=b(Wa,x[7])}c="";for(z=0;z<4*x.length;z++)c+="0123456789abcdef".charAt(x[z>>2]>>8*(3-z%4)+4&15)+"0123456789abcdef".charAt(x[z>>2]>>8*(3-z%4)&15);return c}});
execBoth(function(){function b(a,b){for(var h=a.slice(),r=0;16>r;r++)a[r]=c[h[e[r]]]^b[r]}function Pa(a,c){for(var b=a.slice(),h=0;16>h;h++)a[e[h]]=z[b[h]^c[h]]}function x(e){if(0==a.length){for(var b=0;256>b;b++)c[z[b]]=b;for(b=0;128>b;b++)a[b]=b<<1,a[128+b]=b<<1^27}e=e.slice();b=1;for(var h=16;176>h;h+=4){var r=e.slice(h-4,h);0==h%16&&(r=[z[r[1]]^b,z[r[2]],z[r[3]],z[r[0]]],b=a[b]);for(var Na=0;4>Na;Na++)e[h+Na]=e[h+Na-16]^r[Na]}this.key=e}var z=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,
171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,
20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],c=[],e=[0,13,10,7,4,1,14,11,8,5,2,15,12,9,6,3],a=[];x.prototype.decrypt=function(c){for(var e=this.key.slice(160,176),h=0;16>h;h++)c[h]^=e[h];
for(e=144;16<=e;e-=16){b(c,this.key.slice(e,e+16));h=c;for(var r=0;16>r;r+=4){var Na=h[r+0],x=h[r+1],y=h[r+2],Wa=h[r+3],Ua=Na^x^y^Wa,z=a[Ua],Ta=a[a[z^Na^y]]^Ua;Ua^=a[a[z^x^Wa]];h[r+0]=h[r+0]^Ta^a[Na^x];h[r+1]=h[r+1]^Ua^a[x^y];h[r+2]=h[r+2]^Ta^a[y^Wa];h[r+3]=h[r+3]^Ua^a[Wa^Na]}}b(c,this.key.slice(0,16));return c};x.prototype.encrypt=function(c){Pa(c,this.key.slice(0,16));for(var e=16;160>e;e+=16){for(var b=c,h=12;0<=h;h-=4){var Na=b[h+0],x=b[h+1],y=b[h+2],Wa=b[h+3],Ua=Na^x^y^Wa;b[h+0]=b[h+0]^Ua^a[Na^
x];b[h+1]=b[h+1]^Ua^a[x^y];b[h+2]=b[h+2]^Ua^a[y^Wa];b[h+3]=b[h+3]^Ua^a[Wa^Na]}Pa(c,this.key.slice(e,e+16))}e=this.key.slice(160,176);for(b=0;16>b;b++)c[b]^=e[b];return c};$.aes128=function(a){return new x(a)}});function MersenneTwisterObject(b,Pa){function x(a,c){var b=a&65535,e=c&65535;var h=b*e;var r=h>>>16;r=r+b*((c&4294901760)>>>16)&65535;r+=((a&4294901760)>>>16)*e;r&=65535;b=r<<16|h&65535;return 0>b?b+4294967296:b}function z(c){var b=0<arguments.length&&isFinite(c)?c&4294967295:5489,e;a=[b];h=624;for(e=1;624>e;a[e]=b=x(b^b>>>30,1812433253)+e++);}function c(c,b){var e=c.length,h;z(1<arguments.length&&isFinite(b)?b:19650218);var y=a[0];var r=1;var Ra=0;for(h=Math.max(624,e);h;Ra%=e,h--)a[r]=y=(a[r++]^
x(y^y>>>30,1664525))+c[Ra]+Ra++&4294967295,623<r&&(a[0]=y=a[623],r=1);for(h=623;h;h--)a[r]=y=(a[r]^x(y^y>>>30,1566083941))-r++&4294967295,623<r&&(a[0]=y=a[623],r=1);a[0]=2147483648}function e(){for(var c,b;624<=h||0>h;){h=Math.max(0,h-624);for(b=0;227>b;c=a[b]&2147483648|a[b+1]&2147483647,a[b]=a[b+397]^c>>>1^Ra[c&1],b++);for(;623>b;c=a[b]&2147483648|a[b+1]&2147483647,a[b]=a[b+-227]^c>>>1^Ra[c&1],b++);c=a[623]&2147483648|a[0]&2147483647;a[623]=a[396]^c>>>1^Ra[c&1]}c=a[h++];c^=c>>>11;c^=c<<7&2636928640;
c^=c<<15&4022730752;c^=c>>>18;return 0>c?c+4294967296:c}var a=[],h=NaN,Ra=[0,2567483615];1<arguments.length?c(Pa,b):0<arguments.length?z(b):z();return function(){return(67108864*(e()>>>5)+(e()>>>6))/9007199254740992}}Math.random=new MersenneTwisterObject((new Date).getTime());var mathlib=function(){function b(a,w,f,Oa,ab,c){var Va=a[w];a[w]=a[ab]^c;a[ab]=a[Oa]^c;a[Oa]=a[f]^c;a[f]=Va^c}function Pa(a){for(var w=arguments.length-1,f=a[arguments[w]];1<w;w--)a[arguments[w]]=a[arguments[w-1]];a[arguments[1]]=f;return Pa}function x(a,w,f,Oa){f=f||1;for(var ab=w.length,c=[],Va=0;Va<ab;Va++)c[Va]=a[w[Va]];for(Va=0;Va<ab;Va++){var b=(Va+f)%ab;a[w[b]]=c[Va];Oa&&(a[w[b]]+=Oa[b]-Oa[Va]+Oa[Oa.length-1])}return x}function z(a,w){return a[w>>3]>>((w&7)<<2)&15}function c(a,w){var f,Oa,
ab;for(f=Oa=0;f<w;++f)for(Oa*=w-f,ab=f+1;ab<w;++ab)a[ab]<a[f]&&++Oa;return Oa}function e(a,w){var f;var Oa=0;for(f=w-2;0<=f;--f)Oa^=a%(w-f),a=~~(a/(w-f));return Oa&1}function a(a,w,f){w=w||8;for(var Oa=0,ab=1985229328,c=0;c<w-1;++c){var Va=a[c]<<2;Oa=(w-c)*Oa+(ab>>Va&7);ab-=286331152<<Va}return 0>f?Oa>>1:Oa}function h(a,w,f,Oa){f=(f||8)-1;var ab=1985229328,c=0;0>Oa&&(w<<=1);for(var Va=0;Va<f;++Va){var b=Sa[f-Va],e=~~(w/b);c^=e;w%=b;e<<=2;a[Va]=ab>>e&7;b=(1<<e)-1;ab=(ab&b)+(ab>>4&~b)}0>Oa&&0!=(c&1)?
(a[f]=a[f-1],a[f-1]=ab&7):a[f]=ab&7;return a}function Ra(c,w,f){this.length=w;this.evenbase=f;this.get="p"==c?function(f){return a(f,this.length,this.evenbase)}:function(f){var a=this.evenbase,w=Math.abs(a);a=0>a?0:f[0]%w;for(var Oa=this.length-1;0<Oa;Oa--)a=a*w+f[Oa]%w;return a};this.set="p"==c?function(f,a){return h(f,a,this.length,this.evenbase)}:function(f,a){for(var w=a,Oa=this.length,c=this.evenbase,ab=Math.abs(c),Va=ab*Oa,b=1;b<Oa;b++)f[b]=w%ab,Va-=f[b],w=~~(w/ab);f[0]=(0>c?Va:w)%ab;return f}}
function Za(a,w,f,Oa){Oa=Oa||6;if($.isArray(f)){var c=new Ra(f[1],f[2],f[3]);f=f[0];for(var Va=0;Va<Oa;Va++){a[Va]=[];for(var b=0;b<w;b++){var e=c.set([],b);f(e,Va);a[Va][b]=c.get(e)}}}else for(Va=0;Va<Oa;Va++)for(a[Va]=[],b=0;b<w;b++)a[Va][b]=f(b,Va)}function r(){this.ca=[0,1,2,3,4,5,6,7];this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}function Na(a,w){this.sgs=[];this.sgsi=[];this.Tk=[];this.gen=a;this.invMap={};var f=a[0].length;this.e=[];for(var Oa=0;Oa<f;Oa++)this.e[Oa]=Oa;for(Oa=0;Oa<f;Oa++)this.sgs.push([]),
this.sgsi.push([]),this.Tk.push([]),this.sgs[Oa][Oa]=this.e,this.sgsi[Oa][Oa]=this.e;for(Oa=0;Oa<a.length;Oa++){var c=a[Oa];w&&(c=this.permMult(this.permMult(this.permInv(w),c),w));this.knutha(f-1,c)}}function Qa(a,w,f,Oa,c,b,e,h){var ab=$.isArray(c);b=b||6;e=e||3;h=h||256;Oa=Oa||256;for(var Va=0,n=f+7>>>3;Va<n;Va++)a[Va]=-1;a[w>>3]^=15<<((w&7)<<2);for(Va=w=0;Va<=Oa;Va++){n=0;var hb=Va>=h,Sa=Va+1^15,y=hb?15:Va,Ya=hb?Va:15,r=0;a:for(;r<f;r++,w>>=4){if(0==(r&7)&&(w=a[r>>3],!hb&&-1==w)){r+=7;continue}if((w&
15)==y)for(var Na=0;Na<b;Na++)for(var $a=r,Ra=0;Ra<e;Ra++)if($a=ab?c[Na][$a]:c($a,Na),z(a,$a)==Ya){++n;if(hb){a[r>>3]^=Sa<<((r&7)<<2);continue a}a[$a>>3]^=Sa<<(($a&7)<<2)}}if(0==n)break;DEBUG&&console.log("[prun]",n)}}function y(a,w,f){this.N_STATES=f.length;this.N_MOVES=a;this.N_POWER=w;this.state_params=f;this.inited=!1}function Wa(a){return a}function Ua(a,w,f,Oa,c){this.solvedStates=a;this.doMove=w;this.movesList=[];for(var ab in f)this.movesList.push([ab,f[ab]]);this.state2Idxs=[];this.moveTables=
[];this.prunTables=[];this.isPartial=c||!1;this.prunHashs=Oa||[Wa]}function Xa(a,w,f){this.solvedStates=a;this.doMove=w;this.movesList=[];for(var Oa in f)this.movesList.push([Oa,f[Oa]]);this.prunTable={};this.toUpdateArr=null;this.prunTableSize=0;this.prunDepth=-1;this.cost=0;this.MAX_PRUN_SIZE=1E5}function Ta(a){return~~(gb.random()*a)}for(var Ya=[],Sa=[1],n=0;32>n;++n){Ya[n]=[];for(var db=0;32>db;++db)Ya[n][db]=0}for(n=0;32>n;++n)for(Ya[n][0]=Ya[n][n]=1,Sa[n+1]=Sa[n]*(n+1),db=1;db<n;++db)Ya[n][db]=
Ya[n-1][db-1]+Ya[n-1][db];r.SOLVED=new r;r.EdgeMult=function(a,w,f){for(var Oa=0;12>Oa;Oa++)f.ea[Oa]=a.ea[w.ea[Oa]>>1]^w.ea[Oa]&1};r.CornMult=function(a,w,f){for(var Oa=0;8>Oa;Oa++)f.ca[Oa]=a.ca[w.ca[Oa]&7]&7|((a.ca[w.ca[Oa]&7]>>3)+(w.ca[Oa]>>3))%3<<3};r.CubeMult=function(a,w,f){r.CornMult(a,w,f);r.EdgeMult(a,w,f)};r.prototype.init=function(a,w){this.ca=a.slice();this.ea=w.slice();return this};r.prototype.hashCode=function(){for(var a=0,w=0;20>w;w++)a=0|31*a+(12>w?this.ea[w]:this.ca[w-12]);return a};
r.prototype.isEqual=function(a){a=a||r.SOLVED;for(var w=0;8>w;w++)if(this.ca[w]!=a.ca[w])return!1;for(w=0;12>w;w++)if(this.ea[w]!=a.ea[w])return!1;return!0};var lb=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],cb=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];r.prototype.toFaceCube=function(a,w){a=a||lb;w=w||cb;for(var f=[],Oa=0;54>Oa;Oa++)f[Oa]="URFDLB"[~~(Oa/9)];for(var c=0;8>c;c++){Oa=this.ca[c]&7;for(var b=this.ca[c]>>
3,Va=0;3>Va;Va++)f[a[c][(Va+b)%3]]="URFDLB"[~~(a[Oa][Va]/9)]}for(c=0;12>c;c++)for(Oa=this.ea[c]>>1,b=this.ea[c]&1,Va=0;2>Va;Va++)f[w[c][(Va+b)%2]]="URFDLB"[~~(w[Oa][Va]/9)];return f.join("")};r.prototype.invFrom=function(a){for(var w=0;12>w;w++)this.ea[a.ea[w]>>1]=w<<1|a.ea[w]&1;for(w=0;8>w;w++)this.ca[a.ca[w]&7]=w|32>>(a.ca[w]>>3)&24;return this};r.prototype.fromFacelet=function(a,w,f){w=w||lb;f=f||cb;for(var Oa=0,c=[],b=a[4]+a[13]+a[22]+a[31]+a[40]+a[49],Va=0;54>Va;++Va){c[Va]=b.indexOf(a[Va]);
if(-1==c[Va])return-1;Oa+=1<<(c[Va]<<2)}if(10066329!=Oa)return-1;var e;for(Va=0;8>Va;++Va){for(e=0;3>e&&0!=c[w[Va][e]]&&3!=c[w[Va][e]];++e);a=c[w[Va][(e+1)%3]];Oa=c[w[Va][(e+2)%3]];for(b=0;8>b;++b)if(a==~~(w[b][1]/9)&&Oa==~~(w[b][2]/9)){this.ca[Va]=b|e%3<<3;break}}for(Va=0;12>Va;++Va)for(b=0;12>b;++b){if(c[f[Va][0]]==~~(f[b][0]/9)&&c[f[Va][1]]==~~(f[b][1]/9)){this.ea[Va]=b<<1;break}if(c[f[Va][0]]==~~(f[b][1]/9)&&c[f[Va][1]]==~~(f[b][0]/9)){this.ea[Va]=b<<1|1;break}}return this};r.prototype.verify=
function(){for(var a=0,w=0,f=0;12>f;f++)a|=256<<(this.ea[f]>>1),w^=this.ea[f]&1;f=[];for(var Oa=0;8>Oa;Oa++)a|=1<<(this.ca[Oa]&7),w+=this.ca[Oa]>>3<<1,f.push(this.ca[Oa]&7);return 1048575!=a||0!=w%6||e(c(this.ea,12),12)!=e(c(f,8),8)?-1:0};r.moveCube=function(){for(var a=[],w=0;18>w;w++)a[w]=new r;a[0].init([3,0,1,2,4,5,6,7],[6,0,2,4,8,10,12,14,16,18,20,22]);a[3].init([20,1,2,8,15,5,6,19],[16,2,4,6,22,10,12,14,8,18,20,0]);a[6].init([9,21,2,3,16,12,6,7],[0,19,4,6,8,17,12,14,3,11,20,22]);a[9].init([0,
1,2,3,5,6,7,4],[0,2,4,6,10,12,14,8,16,18,20,22]);a[12].init([0,10,22,3,4,17,13,7],[0,2,20,6,8,10,18,14,16,4,12,22]);a[15].init([0,1,11,23,4,5,18,14],[0,2,4,23,8,10,12,21,16,18,7,15]);for(w=0;18>w;w+=3)for(var f=0;2>f;f++)r.EdgeMult(a[w+f],a[w],a[w+f+1]),r.CornMult(a[w+f],a[w],a[w+f+1]);return a}();r.rotCube=function(){for(var a=(new r).init([3,0,1,2,7,4,5,6],[6,0,2,4,14,8,10,12,23,17,19,21]),w=(new r).init([5,4,7,6,1,0,3,2],[12,10,8,14,4,2,0,6,18,16,22,20]),f=(new r).init([8,20,13,17,19,15,22,10],
[3,16,11,18,7,22,15,20,1,9,13,5]),c=new r,b=new r,e=[],h=0;24>h;h++)e[h]=(new r).init(c.ca,c.ea),r.CornMult(c,a,b),r.EdgeMult(c,a,b),c.init(b.ca,b.ea),3==h%4&&(r.CornMult(c,w,b),r.EdgeMult(c,w,b),c.init(b.ca,b.ea)),7==h%8&&(r.CornMult(c,f,b),r.EdgeMult(c,f,b),c.init(b.ca,b.ea));a=[];w=[];f=[];var n=[],Sa=[];for(h=0;24>h;h++)w[h]=e[h].hashCode(),f[h]=[],n[h]=[],Sa[h]=[];for(h=0;18>h;h++)a[h]=r.moveCube[h].hashCode();for(h=0;24>h;h++)for(var y=0;24>y;y++){r.CornMult(e[h],e[y],c);r.EdgeMult(e[h],e[y],
c);var kb=w.indexOf(c.hashCode());f[h][y]=kb;n[kb][y]=h}for(h=0;24>h;h++)for(y=0;18>y;y++)r.CornMult(e[n[0][h]],r.moveCube[y],c),r.EdgeMult(e[n[0][h]],r.moveCube[y],c),r.CornMult(c,e[h],b),r.EdgeMult(c,e[h],b),kb=a.indexOf(b.hashCode()),Sa[h][y]=kb;r.rotMult=f;r.rotMulI=n;r.rotMulM=Sa;r.rot2str=";y';y2;y;z2;y' z2;y2 z2;y z2;y' x';y2 x';y x';x';y' x;y2 x;y x;x;y z;z;y' z;y2 z;y' z';y2 z';y z';z'".split(";");return e}();r.prototype.edgeCycles=function(){for(var a=[],w=[0,0,0],f=0,c=!1,b=0;12>b;++b)if(!a[b]){var e=
-1,h=!1,n=b;do a[n]=!0,++e,h^=this.ea[n]&1,n=this.ea[n]>>1;while(n!=b);f+=e>>1;e&1&&(c=!c,++f);h&&(0==e?++w[0]:e&1?w[2]^=1:++w[1])}w[1]+=w[2];f=w[0]<w[1]?f+(w[0]+w[1]>>1):f+(w[1]+[0,2,3,5,6,8,9][w[0]-w[1]>>1]);return f-c};var jb=/^\s*([URFDLB]w?|[EMSyxz]|2-2[URFDLB]w)(['2]?)(@\d+)?\s*$/,bb=new r;r.prototype.selfMoveStr=function(a,w){var f=jb.exec(a);if(f){var c=f[1],b="2'".indexOf(f[2]||"-")+2;w&&(b=4-b);f[3]&&(this.tstamp=~~f[3].slice(1));this.ori=this.ori||0;var e="URFDLB".indexOf(c);if(-1!=e)return f=
r.rotMulM[this.ori][3*e+b%4-1],r.EdgeMult(this,r.moveCube[f],bb),r.CornMult(this,r.moveCube[f],bb),this.init(bb.ca,bb.ea),f;e="UwRwFwDwLwBw".indexOf(c);if(-1!=e){e>>=1;f=r.rotMulM[this.ori][(e+3)%6*3+b%4-1];r.EdgeMult(this,r.moveCube[f],bb);r.CornMult(this,r.moveCube[f],bb);this.init(bb.ca,bb.ea);e=[3,15,17,1,11,23][e];for(c=0;c<b;c++)this.ori=r.rotMult[e][this.ori];return f}e="2-2Uw 2-2Rw 2-2Fw 2-2Dw 2-2Lw 2-2Bw".split(" ").indexOf(c);-1==e&&(e=[null,null,"S","E","M",null].indexOf(c));if(-1!=e){c=
(e+3)%6*3+b%4-1;f=r.rotMulM[this.ori][3*e+(4-b)%4-1];r.EdgeMult(this,r.moveCube[f],bb);r.CornMult(this,r.moveCube[f],bb);this.init(bb.ca,bb.ea);c=r.rotMulM[this.ori][c];r.EdgeMult(this,r.moveCube[c],bb);r.CornMult(this,r.moveCube[c],bb);this.init(bb.ca,bb.ea);e=[3,15,17,1,11,23][e];for(c=0;c<b;c++)this.ori=r.rotMult[e][this.ori];return f+18}e="yxz".indexOf(c);if(-1!=e)for(e=[3,15,17][e],c=0;c<b;c++)this.ori=r.rotMult[e][this.ori]}};r.prototype.selfConj=function(a){void 0===a&&(a=this.ori);0!=a&&(r.CornMult(r.rotCube[a],
this,bb),r.EdgeMult(r.rotCube[a],this,bb),r.CornMult(bb,r.rotCube[r.rotMulI[0][a]],this),r.EdgeMult(bb,r.rotCube[r.rotMulI[0][a]],this),this.ori=r.rotMulI[this.ori][a]||0)};n=function(){var a=[11,8,9,10,6,7,4,5,1,2,3,0],w=[[5,1,2,3,4],[10,6,2,0,5],[6,7,3,0,1],[7,8,4,0,2],[8,9,5,0,3],[9,10,1,0,4],[11,7,2,1,10],[11,8,3,2,6],[11,9,4,3,7],[11,10,5,4,8],[11,6,1,5,9],[6,10,9,8,7]];return{doMove:function(f,c,b,e){b=(b%5+5)%5;if(0!=b){for(var Oa=11*c,ab=[[],[],[],[],[]],Va=0;5>Va;Va++){var h=w[c][Va],n=w[h].indexOf(c);
if(0==e||1==e)ab[Va].push(Oa+Va),ab[Va].push(Oa+Va+5),ab[Va].push(11*h+n%5+5),ab[Va].push(11*h+n%5),ab[Va].push(11*h+(n+1)%5);if(1==e||2==e){ab[Va].push(11*h+10);for(var Sa=1;5>Sa;Sa++)ab[Va].push(11*h+(n+Sa)%5+5);for(Sa=2;5>Sa;Sa++)ab[Va].push(11*h+(n+Sa)%5);Sa=4-Va;var y=a[c];h=w[y][Sa];n=w[h].indexOf(y);ab[Va].push(11*y+Sa);ab[Va].push(11*y+Sa+5);ab[Va].push(11*h+10);for(Sa=0;5>Sa;Sa++)ab[Va].push(11*h+(n+Sa)%5+5),ab[Va].push(11*h+(n+Sa)%5)}}for(Va=0;Va<ab[0].length;Va++)mathlib.acycle(f,[ab[0][Va],
ab[1][Va],ab[2][Va],ab[3][Va],ab[4][Va]],b)}},oppFace:a,adjFaces:w}}();Na.prototype.permMult=function(a,c){for(var f=[],w=0;w<a.length;w++)f[w]=c[a[w]];return f};Na.prototype.permInv=function(a){for(var c=[],f=0;f<a.length;f++)c[a[f]]=f;return c};Na.prototype.isMember=function(a,c){c=c||0;for(var f=a.length-1;f>=c;f--){var w=a[f];if(!this.sgs[f][w])return!1;w!==f&&(a=this.permMult(a,this.sgsi[f][w]))}return!0};Na.prototype.minkwitz=function(){var a=[],c=8,f=0;this.words=[];this.isNew=[];for(var b=
0;b<this.e.length;b++){this.words[b]=[];this.words[b][b]=[];this.isNew[b]=[];for(var e=0;e<b;e++)this.sgs[b][e]&&!this.words[b][e]&&(this.words[b][e]=null,f++)}this.invMap={};for(b=0;b<this.gen.length;b++){var h=this.gen[b];for(e=b;e<this.gen.length;e++){for(var n=!0,Sa=0;Sa<this.e.length;Sa++)if(h[this.gen[e][Sa]]!=Sa){n=!1;break}n&&(this.invMap[b]=e,this.invMap[e]=b)}void 0==this.invMap[b]&&(this.invMap[b]=~b,this.invMap[~b]=b)}var y=function(a,f){for(var w=-1,b=a.length-1;0<=b;b--){var e=a[b];
if(!this.sgs[b][e])return-2;if(!this.words[b][e])return this.words[b][e]=f,this.isNew[b][e]=3,this.sgs[b][e]=a,this.sgsi[b][e]=this.permInv(a),1;f.length<this.words[b][e].length&&(w=this.sgs[b][e],this.sgs[b][e]=a,this.sgsi[b][e]=this.permInv(a),a=w,w=this.words[b][e],this.words[b][e]=f,this.isNew[b][e]=3,f=w,w=0);if(f.length+this.words[b][e].length>c)return w;a=this.permMult(a,this.sgsi[b][e]);for(var Oa=this.words[b][e].length-1;0<=Oa;Oa--)f.push(this.invMap[this.words[b][e][Oa]])}},r=function(c,
b,w){if(0>=b)return w.call(this,c,a);for(var e=0;e<this.gen.length&&0<f;e++){a.push(e);var Oa=r.call(this,this.permMult(c,this.gen[e]),b-1,w);a.pop();0>Oa||(a.push(this.invMap[e]),r.call(this,this.permMult(c,this.permInv(this.gen[e])),b-1,w),a.pop())}},Ya=function(){for(var a=0,b=0,w=0;w<this.e.length;w++)for(var e=0;e<w;e++)0<this.isNew[w][e]&&this.isNew[w][e]--,this.isNew[w][e]&&b++;console.log("newCnt",b);for(w=0;w<this.e.length;w++){b=!0;for(e=0;e<w;e++)if(this.sgs[w][e]&&!this.words[w][e]){b=
!1;break}for(e=0;e<w;e++)if(this.words[w][e])for(var Oa=w;Oa<this.e.length;Oa++)if(!b||w==Oa)for(var ab=w==Oa?e:0;ab<Oa;ab++)if(this.words[Oa][ab]){var Va=this.words[w][e].length+this.words[Oa][ab].length;if(!(Va>c||0==this.isNew[w][e]&&0==this.isNew[Oa][ab]&&w==Oa)){var h=this.sgs[w][e][this.sgs[Oa][ab][w]];this.words[w][h]&&this.words[w][h].length<1.5*Va&&w!=Oa||(Va=y.call(this,this.permMult(this.sgs[Oa][ab],this.sgs[w][e]),this.words[Oa][ab].concat(this.words[w][e])),-1<Va&&a++,0<Va&&f--)}}}return a};
e=$.now();var Na=0;for(b=1;100>b&&0<f;b++)r.call(this,this.e,b,function(a,w){var b=y.call(this,a,w.slice());Na++;0<b&&f--;if(0==Na%1E3){var e=Ya.call(this);c=Math.round(1.25*c);console.log(e,f,c)}return b});console.log("final",$.now()-e);Ya.call(this);console.log("init minkwitz",$.now()-e);window.sgs1=this};Na.prototype.getGen=function(a){for(var w=[],f=a.length-1;0<=f;f--){var c=a[f];if(!this.sgs[f][c])return null;c!==f&&(a=this.permMult(a,this.sgsi[f][c]),w.push(this.words[f][c]))}return w.reverse()};
Na.prototype.knutha=function(a,w){this.Tk[a].push(w);for(var f=0;f<this.sgs[a].length;f++)this.sgs[a][f]&&this.knuthb(a,this.permMult(this.sgs[a][f],w))};Na.prototype.knuthb=function(a,w){var f=w[a];if(this.sgs[a][f])f=this.permMult(w,this.sgsi[a][f]),this.isMember(f)||this.knutha(a-1,f);else for(this.sgs[a][f]=w,this.sgsi[a][f]=this.permInv(w),f=0;f<this.Tk[a].length;f++)this.knuthb(a,this.permMult(w,this.Tk[a][f]))};Na.prototype.size=function(){for(var a=this.sgs.length,w=1,f=0;f<a;f++){for(var c=
0,b=0;b<a;b++)this.sgs[f][b]&&c++;w*=c}return w};Na.prototype.intersect=function(a,w){if(this.size()>a.size())return a.intersect(this,w);w=w||1E5;for(var f=new Na([this.sgs[0][0]]),c=this.sgs.length,b=f.cnt=0;b<c;b++)for(var e=0;e<b;e++)if(this.sgs[b][e]&&!f.sgs[b][e]&&(this.enumDFS(b-1,this.sgs[b][e],function(a){f.knutha(c-1,a);return!0},function(c,b){if(f.cnt>w||-1==f.cnt)return f.cnt=-1,!1;f.cnt++;if(!a.isMember(b,c))return!1;for(var e=0;e<f.sgs[c].length-1;e++)if(f.sgs[c][e]&&f.permMult(b,f.sgs[c][e])[c]<
b[c])return!1;return!0}),-1==f.cnt))return f;return f};Na.prototype.enumDFS=function(a,c,f,b){if(!b||b(a+1,c)){if(0==a)return f(c);for(var w=0;w<=a;w++)if(this.sgs[a][w]){var e=this.enumDFS(a-1,this.permMult(this.sgs[a][w],c),f,b);if(e)return e}}};Na.prototype["enum"]=function(a){this.enumDFS(this.sgs.length-1,this.sgs[0][0],a)};Na.prototype.rndElem=function(){for(var a=this.e.slice(),c=this.e.length-1;0<=c;c--){for(var f=0,b=0,e=0;e<=c;e++)this.sgs[c][e]&&1>Ta(++f)&&(b=e);b!==c&&(a=this.permMult(a,
this.sgsi[c][b]))}return a};db=y.prototype;db.search=function(a,c,f){f=(f||99)+1;if(!this.inited){this.move=[];this.prun=[];for(var b=0;b<this.N_STATES;b++){var w=this.state_params[b],e=w[0],h=w[1],Va=w[2],n=w[3];w=w[4];this.move[b]=[];this.prun[b]=[];Za(this.move[b],Va,h,this.N_MOVES);Qa(this.prun[b],e,Va,n,this.move[b],this.N_MOVES,this.N_POWER,w)}this.inited=!0}for(this.sol=[];c<f&&!this.idaSearch(a,c,-1);c++);return c==f?null:this.sol.reverse()};db.toStr=function(a,c,f){for(var b=[],w=0;w<a.length;w++)b.push(c[a[w][0]]+
f[a[w][1]]);return b.join(" ").replace(/ +/g," ")};db.idaSearch=function(a,c,f){for(var b=this.N_STATES,w=0;w<b;w++)if(z(this.prun[w],a[w])>c)return!1;if(0==c)return!0;for(var e=a[0]+c+f+1,h=0;h<this.N_MOVES;h++){var Va=(h+e)%this.N_MOVES;if(Va!=f)for(var n=a.slice(),Sa=0;Sa<this.N_POWER;Sa++){for(w=0;w<b;w++)n[w]=this.move[w][Va][n[w]];if(this.idaSearch(n,c-1,Va))return this.sol.push([Va,Sa]),!0}}return!1};db=Ua.prototype;db.initPrun=function(){if(0==this.moveTables.length)for(var a=0;a<this.prunHashs.length;a++){for(var c=
{},f=[null],b=[],e=0;e<this.solvedStates.length;e++){var h=this.prunHashs[a](this.solvedStates[e]);h in c||(c[h]=f.length<<8,f.push(h))}e=1;for(var n=0,Sa=+new Date;e!=f.length;){h=f[e];var y=(c[h]&255)+1;y!=n&&(DEBUG&&console.log("[phSolver] initPrun",n,f.length-1,+new Date-Sa),n=y,b.push(f.length-1));for(var r=[],Ya=0;Ya<this.movesList.length;Ya++){var Na=this.doMove(h,this.movesList[Ya][0]);Na&&(Na in c||(c[Na]=f.length<<8|y,f.push(Na)),r[Ya]=c[Na]>>8)}f[e]=r;e++}this.moveTables[a]=f;this.prunTables[a]=
b;this.state2Idxs[a]=c}};db.search=function(a,c,f){this.initPrun();this.sol=[];this.subOpt=!1;this.rawState=a;this.state=[];for(var b=0;b<this.prunHashs.length;b++){var w=this.prunHashs[b](a);this.state.push(this.state2Idxs[b][w]>>8)}this.visited={};this.maxl=c||0;return this.searchNext(f)};db.searchNext=function(a,c){this.initPrun();a=a+1||99;this.prevSolStr=this.solArr?this.solArr.join(","):null;this.solArr=null;for(this.cost=c||-1;this.maxl<a;this.maxl++){if(0==this.cost)return null;if(this.idaSearch(this.state,
this.maxl,null,0))break}return this.solArr};db.idaSearch=function(a,c,f,b){if(this.getPruning(a)>c)return!1;if(0==c){c=this.rawState;var w=[],e=[];for(f=0;f<this.sol.length;f++){var h=this.movesList[this.sol[f]][0];c=this.doMove(c,h);w.push(h);e.push(c);if(!this.subOpt&&c in this.visited&&this.visited[a]<b)return!1}if(-1==this.solvedStates.indexOf(c))return!1;for(f=0;f<e.length;f++)this.visited[e[f]]=f;this.subOpt=!0;if(w.join(",")==this.prevSolStr)return!1;this.solArr=w;return!0}if(0<=this.cost){if(0==
this.cost)return!0;this.cost--}w=null==f?"":this.movesList[f][0];e=null==f?-1:this.movesList[f][1];for(var Oa=this.sol[b]||0;Oa<this.movesList.length;Oa++)if(h=this.movesList[Oa],f=h[1]^e,h=h[0],!(0==f||0==(f&15)&&h<=w)){h=!1;var n=!0,Va=[];for(f=0;f<a.length;f++){var Sa=this.moveTables[f][a[f]][Oa];if(Sa)Sa!=a[f]&&(n=!1);else{h=!0;break}Va.push(Sa)}if(!(h||n&&!this.isPartial)){this.sol[b]=Oa;if(this.idaSearch(Va,c-1,Oa,b+1))return!0;this.sol.pop()}}return!1};db.getPruning=function(a){for(var c=0,
f=0;f<a.length;f++)for(var b=this.prunTables[f];b[c]<a[f];)c++;return c};db=Xa.prototype;db.calcNumOfStates=function(){for(var a=this.solvedStates[0].length,c=[],f=0;f<this.movesList.length;f++){for(var b=[],e=0;e<a;e++)b.push(e+32);var h=this.doMove(String.fromCharCode.apply(null,b),this.movesList[f][0]);if(h&&!(h in this.prunTable)){for(e=0;e<a;e++)b[e]=h.charCodeAt(e)-32;c.push(b)}}f=[];b=this.solvedStates[0];var n=[];for(e=0;e<a;e++)n[e]=e;var Sa=[];for(e=0;e<a;e++)if(!Sa[e])for(h=e+1;h<a;h++)if(b[e]==
b[h]&&e%9%2==h%9%2){var y=n.slice();y[e]=h;y[h]=e;Sa[h]=1;f.push(y)}for(b=0;100>b;b++){var r=[];for(e=0;e<a;e++)r[e]=e;for(e=0;e<a;e++){h=~~(Math.random()*(a-e))+e;var Ya=r[e];r[e]=r[h];r[h]=Ya}Ya=new Na(f,r);r=new Na(c,r);var Ra=Ya.intersect(r);if(-1!=Ra.cnt){console.log(b);break}}console.log(Ra.cnt,Ya.size(),r.size(),Ra.size(),r.size()/Ra.size())};db.updatePrun=function(a){a=void 0===a?this.prunDepth+1:a;for(var c=this.prunDepth+1;c<=a;c++){if(this.prevSize>=this.MAX_PRUN_SIZE){DEBUG&&console.log("[gSolver] skipPrun",
c,this.prunTableSize);break}var f=+new Date;if(1>c)for(var b=this.prevSize=0;b<this.solvedStates.length;b++){var e=this.solvedStates[b];e in this.prunTable||(this.prunTable[e]=c,this.prunTableSize++)}else this.updatePrunBFS(c-1);if(0==this.cost)break;this.prunDepth=c;DEBUG&&console.log("[gSolver] updatePrun",c,this.prunTableSize-this.prevSize,+new Date-f);this.prevSize=this.prunTableSize}};db.updatePrunBFS=function(a){if(null==this.toUpdateArr){this.toUpdateArr=[];for(var c in this.prunTable)this.prunTable[c]==
a&&this.toUpdateArr.push(c)}for(;0!=this.toUpdateArr.length;){c=this.toUpdateArr.pop();for(var f=0;f<this.movesList.length;f++){var b=this.doMove(c,this.movesList[f][0]);!b||b in this.prunTable||(this.prunTable[b]=a+1,this.prunTableSize++)}if(0<=this.cost){if(0==this.cost)return;this.cost--}}this.toUpdateArr=null};db.search=function(a,c,f){this.sol=[];this.subOpt=!1;this.state=a;this.visited={};this.maxl=c||0;return this.searchNext(f)};db.searchNext=function(a,c){a=a+1||99;this.prevSolStr=this.solArr?
this.solArr.join(","):null;this.solArr=null;for(this.cost=c||-1;this.maxl<a;this.maxl++){this.updatePrun(Math.ceil(this.maxl/2));if(0==this.cost)return null;if(this.idaSearch(this.state,this.maxl,null,0))break}return this.solArr};db.getPruning=function(a){a=this.prunTable[a];return void 0===a?this.prunDepth+1:a};db.idaSearch=function(a,c,f,b){if(this.getPruning(a)>c)return!1;if(0==c){if(-1==this.solvedStates.indexOf(a))return!1;a=this.getSolArr();this.subOpt=!0;if(a.join(",")==this.prevSolStr)return!1;
this.solArr=a;return!0}if(!this.subOpt){if(a in this.visited&&this.visited[a]<b)return!1;this.visited[a]=b}if(0<=this.cost){if(0==this.cost)return!0;this.cost--}var e=null==f?"":this.movesList[f][0];f=null==f?-1:this.movesList[f][1];for(var w=this.sol[b]||0;w<this.movesList.length;w++){var h=this.movesList[w],Oa=h[1]^f;h=h[0];if(!(0==Oa||0==(Oa&15)&&h<=e)&&(Oa=this.doMove(a,h))&&Oa!=a){this.sol[b]=w;if(this.idaSearch(Oa,c-1,w,b+1))return!0;this.sol.pop()}}return!1};db.getSolArr=function(){for(var a=
[],c=0;c<this.sol.length;c++)a.push(this.movesList[this.sol[c]][0]);return a};var gb=function(){function a(a,e){if(e&&(e!=b||f>a)){for(var w=[],h=0;h<e.length;h++)w[h]=e.charCodeAt(h);c=new MersenneTwisterObject(w[0],w);f=0;b=e}for(;f<a;)c(),f++}var c,f,b;a(0,""+(new Date).getTime());return{random:function(){f++;return c()},getSeed:function(){return[f,b]},setSeed:a}}(),eb=/^\s*(\d+)-(\d+)-(\d+) (\d+):(\d+):(\d+)\s*$/;Math.TAU=2*Math.PI;return{Cnk:Ya,fact:Sa,getPruning:z,setNPerm:function(a,c,f){var b,
e;a[f-1]=0;for(b=f-2;0<=b;--b)for(a[b]=c%(f-b),c=~~(c/(f-b)),e=b+1;e<f;++e)a[e]>=a[b]&&++a[e]},getNPerm:c,getNParity:e,get8Perm:a,set8Perm:h,coord:Ra,createMove:Za,edgeMove:function(a,c){0==c?b(a,0,7,8,4,1):1==c?b(a,3,6,11,7,0):2==c?b(a,0,1,2,3,0):3==c?b(a,2,5,10,6,1):4==c?b(a,1,4,9,5,0):5==c&&b(a,11,10,9,8,0)},circle:Pa,circleOri:b,acycle:x,schreierSims:Na,createPrun:Qa,CubieCube:r,minx:n,SOLVED_FACELET:"UUUUUUUUURRRRRRRRRFFFFFFFFFDDDDDDDDDLLLLLLLLLBBBBBBBBB",fillFacelet:function(a,c,f,b,e){for(var w=
0;w<a.length;w++)for(var h=0;h<a[w].length;h++)c[a[w][(h+b[w])%a[w].length]]=~~(a[f[w]][h]/e)},rn:Ta,rndEl:function(a){return a[~~(gb.random()*a.length)]},rndProb:function(a){for(var c=0,f=0,b=0;b<a.length;b++)0!=a[b]&&(gb.random()<a[b]/(c+a[b])&&(f=b),c+=a[b]);return f},rndHit:function(a){return gb.random()<a},time2str:function(a,c){if(!a)return"N/A";var f=new Date(1E3*a);return(c||"%Y-%M-%D %h:%m:%s").replace("%Y",f.getFullYear()).replace("%M",("0"+(f.getMonth()+1)).slice(-2)).replace("%D",("0"+
f.getDate()).slice(-2)).replace("%h",("0"+f.getHours()).slice(-2)).replace("%m",("0"+f.getMinutes()).slice(-2)).replace("%s",("0"+f.getSeconds()).slice(-2))},str2time:function(a){a=eb.exec(a);if(!a)return null;var c=new Date(0);c.setFullYear(~~a[1]);c.setMonth(~~a[2]-1);c.setDate(~~a[3]);c.setHours(~~a[4]);c.setMinutes(~~a[5]);c.setSeconds(~~a[6]);return~~(c.getTime()/1E3)},obj2str:function(a){return"string"==typeof a?a:JSON.stringify(a)},str2obj:function(a){return"string"!=typeof a?a:JSON.parse(a)},
valuedArray:function(a,c){for(var f=[],b=0;b<a;b++)f[b]=c;return f},idxArray:function(a,c){for(var b=[],e=0;e<a.length;e++)b.push(a[e][c]);return b},Solver:y,rndPerm:function(a,c){for(var b=0,e=[],w=0;w<a;w++)e[w]=w;for(w=0;w<a-1;w++){var h=Ta(a-w);Pa(e,w,w+h);b^=0!=h}c&&b&&Pa(e,0,1);return e},gSolver:Xa,phSolver:Ua,getSeed:gb.getSeed,setSeed:gb.setSeed}}();var sbtree=function(){function b(b,a,h,Ra){this.k=b;this.v=a;this.left=h||c;this.right=Ra||c;this.size=1;this.sum=b;this.sk2=Math.pow(b,2)}function Pa(b){this.root=c;this.cmp=b}function x(b,a,h){return b==c||x(b.get(h),a,h)&&a(b)&&x(b.get(h^1),a,h)}function z(c,a){var b=c.get(a^1);c.set(a^1,b.get(a));b.set(a,c);b.size=c.size;c.size=c.get(0).size+c.get(1).size+1;b.sum=c.sum;c.sum=c.get(0).sum+c.get(1).sum+c.k;b.sk2=c.sk2;c.sk2=c.get(0).sk2+c.get(1).sk2+Math.pow(c.k,2);return b}var c=null;c=new b(0,
0);c.left=c;c.right=c;c.size=0;b.prototype.get=function(c){return c?this.right:this.left};b.prototype.set=function(c,a){c?this.right=a:this.left=a};Pa.prototype.find=function(b){for(var a=this.root;a!=c;){if(b==a.k)return a.v;a=a.get(0>this.cmp(a.k,b)^0)}};Pa.prototype.cumSum=function(c){if(c>=this.root.size||0==this.root.size)return this.root.sum;for(var a=this.root,b=0;0<c;){var e=a.get(0).size;if(c<e)a=a.get(0);else{b+=a.get(0).sum;if(c==e)break;b+=a.k;c-=e+1;a=a.get(1)}}return b};Pa.prototype.cumSk2=
function(c){if(c>=this.root.size||0==this.root.size)return this.root.sk2;for(var a=this.root,b=0;0<c;){var e=a.get(0).size;if(c<e)a=a.get(0);else{b+=a.get(0).sk2;if(c==e)break;b+=Math.pow(a.k,2);c-=e+1;a=a.get(1)}}return b};Pa.prototype.rank=function(b){for(var a=this.root;a!=c;){var e=a.get(0).size;if(b<e)a=a.get(0);else{if(b==e)return a.k;b-=e+1;a=a.get(1)}}return 0>b?-1E300:1E300};Pa.prototype.rankOf=function(b){for(var a=this.root,e=0;a!=c;)0>this.cmp(a.k,b)?(e+=a.get(0).size+1,a=a.get(1)):a=
a.get(0);return e};Pa.prototype.traverse=function(c,a){return x(this.root,c,a^0)};Pa.prototype.insertR=function(e,a,h){if(e==c)return new b(a,h);e.size+=1;e.sum+=a;e.sk2+=Math.pow(a,2);var Ra=0>this.cmp(e.k,a)^0;e.set(Ra,this.insertR(e.get(Ra),a,h));e.get(Ra).get(Ra).size>e.get(Ra^1).size?e=z(e,Ra^1):e.get(Ra).get(Ra^1).size>e.get(Ra^1).size&&(Ra^=1,e.set(Ra^1,z(e.get(Ra^1),Ra^1)),e=z(e,Ra));return e};Pa.prototype.insert=function(c,a){this.root=this.insertR(this.root,c,a);return this};Pa.prototype.remove=
function(c){this.root=this.removeR(this.root,c);return this};Pa.prototype.removeR=function(b,a){if(b==c)return c;--b.size;b.sum-=a;b.sk2-=Math.pow(a,2);if(b.k==a){if(b.get(0)==c||b.get(1)==c)return b.get(b.get(0)==c^0);for(var e=b.get(0);e.get(1)!=c;)e=e.get(1);b.k=e.k;b.v=e.v;a=e.k}e=0>this.cmp(b.k,a)^0;b.set(e,this.removeR(b.get(e),a));return b};return{tree:function(c){return new Pa(c)}}}();var SQLFile=execMain(function(){function b(b,z,c){var e=0;if(c)for(var a=0;a<c;a++)e=e<<8|b[z[0]++];else{do e=e<<7|b[z[0]]&127;while(128<=b[z[0]++])}return e}function Pa(x,z,c){z=1==z?100:(z-1)*b(x,[16],2);var e=x[z],a=x[z+3]<<8|x[z+4],h=[z+8],Ra=-1;e&8||(Ra=b(x,h,4));for(var Za=0;Za<a;Za++){var r=[(100==z?0:z)+b(x,[h[0]+2*Za],2)];if(2!=e&&10!=e)if(5==e)r=b(x,r,4),Pa(x,r,c);else if(13==e){var Na=b(x,r),Qa=x,y=r[0],Wa=c,Ua=[y],Xa=b(Qa,Ua),Ta=y+Xa;y=Ua;Ua=[];for(Xa=[];y[0]<Ta;)Ua.push(b(Qa,y));for(Ta=
0;Ta<Ua.length;Ta++){var Ya=Ua[Ta];0==Ya?Xa[Ta]=null:1<=Ya&&4>=Ya?Xa[Ta]=b(Qa,y,Ya):5==Ya?(Xa[Ta]=void 0,b(Qa,y,6)):6==Ya?(Xa[Ta]=void 0,b(Qa,y,8)):7==Ya?(Xa[Ta]=void 0,b(Qa,y,8)):8==Ya?Xa[Ta]=0:9==Ya?Xa[Ta]=1:10!=Ya&&11!=Ya&&(0==Ua[Ta]%2?(Xa[Ta]=Qa.slice(y[0],y[0]+(Ya-12)/2),y[0]+=(Ya-12)/2):(Xa[Ta]=String.fromCharCode.apply(null,Qa.slice(y[0],y[0]+(Ya-13)/2)),y[0]+=(Ya-13)/2))}Wa(Xa);r[0]+=Na}}-1!=Ra&&Pa(x,Ra,c)}return{loadTableList:function(b){var x={};Pa(b,1,function(c){x[c[2]]=[c[3],c[4]]});
return x},loadPage:Pa}});var TimerDataConverter=execMain(function(){function b(c){try{return decodeURIComponent(escape(c))}catch(e){}return c}function Pa(c,e){c=b(c).split(/\r?\n/g);for(var a=[],h=[],Ra=[],x=0,r=0;r<c.length;r++){for(var Na=c[r].split(e),Qa=0;Qa<Na.length;Qa++)Ra.push(Na[Qa]),x+=(Na[Qa].match(/"/g)||[]).length,0==x%2&&(Ra=Ra.join(","),'"'==Ra[0]&&(Ra=Ra.replace(/""/g,'"').slice(1,-1)),h.push(Ra),Ra=[]);0==x%2&&(a.push(h),h=[],Ra=[],x=0)}return a}var x=/^(DNF)?\(?(\d*?):?(\d*?):?(\d*\.?\d*?)(\+)?\)?$/,z={csTimer:[/^{"session1"/i,
function(c){c=JSON.parse(b(c));var e={};try{e=mathlib.str2obj(mathlib.str2obj(c.properties).sessionData)}catch(Wa){}var a=[],h;for(h in c){var Ra=/^session(\d+)$/.exec(h);if(Ra){var x={},r=[];try{r=mathlib.str2obj(c[h])}catch(Wa){}if($.isArray(r)&&0!=r.length){for(var Na=[],Qa=0;Qa<r.length;Qa++){var y=r[Qa];$.isArray(y)&&$.isArray(y[0])&&(y[0]=$.map(y[0],Number),Na.push(y))}x.times=Na;~~Ra[1]in e?(r=e[~~Ra[1]],x.name=r.name||Ra[1],x.opt=r.opt||{scrType:r.scr||"333",phases:r.phases||1},x.rank=r.rank):
(x.name=Ra[1],x.opt={},x.rank=a.length+1);a.push(x)}}}a.sort(function(a,c){return a.rank-c.rank});return a}],csTimerCSV:[/^No\.;Time;Comment;Scramble;Date;P\.1/i,function(c){c=Pa(c,";");for(var b=[],a=c[0].length-5,h=1;h<c.length;h++){var Ra=c[h],z=[],r=x.exec(Ra[1]);if(r){for(z[0]=r[1]?-1:r[5]?2E3:0;""==Ra[Ra.length-1];)Ra.pop();for(var Na=5;Na<Ra.length;Na++)r=x.exec(Ra[Na]),r=Math.round(36E5*~~r[2]+6E4*~~r[3]+1E3*parseFloat(r[4])),z[Ra.length-Na]=(z[Ra.length-Na+1]||0)+r;z=[z,Ra[3],Ra[2],mathlib.str2time(Ra[4])];
b.push(z)}else console.log("Invalid data detected")}return[{name:"import",opt:{phases:a},times:b}]}],ZYXTimer:[/^Session: /i,function(c){}],TwistyTimer:[/^Puzzle,Category,Time\(millis\),Date\(millis\),Scramble,Penalty,Comment/i,function(c){c=Pa(c,";");for(var b={333:"333",222:"222so",444:"444wca",555:"555wca",pyra:"pyrso",skewb:"skbso",mega:"mgmp",sq1:"sqrs",clock:"clkwca",666:"666wca",777:"777wca"},a={},h=[],Ra=1;Ra<c.length;Ra++){var x=c[Ra];if(7==x.length){var r=x[0]+"-"+x[1],Na=[{0:0,1:2E3,2:-1}[x[5]],
Math.round(x[2])];r in a||(a[r]=h.length,h.push({name:r,opt:{scrType:b[x[0]]||"333"},times:[]}));h[a[r]].times.push([Na,x[4],x[6],Math.round(x[3]/1E3)])}}return h}],BlockKeeper:[/^{"puzzles":\[{"name":/i,function(c){c=JSON.parse(b(c)).puzzles;var e={"3x3x3":"333","2x2x2":"222so","4x4x4":"444wca","5x5x5":"555wca",Pyraminx:"pyrso",Skewb:"skbso",Megaminx:"mgmp","Square-1":"sqrs",Clock:"clkwca","6x6x6":"666wca","7x7x7":"777wca","3x3x3 BLD":"333ni","4x4x4 BLD":"444bld","5x5x5 BLD":"555bld"},a=[];$.each(c,
function(c,b){var h=b.name,r=b.scrambler,Na=b.splits;$.each(b.sessions,function(b,c){var y=c.name,Ra=[];$.each(c.records,function(a,c){var b=[{OK:0,"+2":2E3,DNF:-1}[c.result],Math.round(1E3*c.time)];Array.prototype.push.apply(b,$.map(c.split.reverse(),function(a){return Math.round(1E3*a)}));Ra.push([b,c.scramble,c.comment||"",Math.round(c.date/1E3)])});0!=Ra.length&&a.push({name:h+"-"+y,opt:{phases:Na,scrType:e[r]||"333"},times:Ra})})});return a}],PrismaTimer:[/^[^\t\n]*(\t[^\t\n]*){4}\n/i,function(c){}],
"DCTimer.raw":[/^\d+[\r\n]+[^\t\n]*(\t[^\t\n]*){11}[\r\n]+/i,function(c){c=b(c).split(/[\r\n]+/);for(var e={},a=0,h=[],Ra=0;Ra<c.length;Ra++)if(/^\d+$/.exec(c[Ra]))a=~~c[Ra],e[a]=h.length,h.push({name:a,opt:{},times:[]});else{var x=c[Ra].split("\t");6>x.length||h[e[a]].times.push([["1"==x[2]?"1"==x[1]?2E3:0:-1,~~x[0]],x[3],x[5],mathlib.str2time(x[4])])}return h}],"DCTimer.sqlite":[/^SQLite format 3\0/i,function(c){for(var e=new Uint8Array(c.length),a=0;a<c.length;a++)e[a]=c.charCodeAt(a);c=SQLFile.loadTableList(e);
var h={},Ra=[],x=function(a,c){a in h||(h[a]=Ra.length,Ra.push({name:c||a+1,opt:{},times:[]}))};SQLFile.loadPage(e,c.sessiontb[0],function(a){x(a[0],b(a[1]))});for(var r in c)if(a=/^result(\d+|tb)$/.exec(r)){var Na=("tb"==a[1]?1:~~a[1])-1;SQLFile.loadPage(e,c[r][0],function(a){x(Na);Ra[h[Na]].times.push([["1"==a[3]?"1"==a[2]?2E3:0:-1,~~a[1]],b(a[4]||""),b(a[6]||""),mathlib.str2time(a[5])])})}SQLFile.loadPage(e,c.resultstb[0],function(a){var c=a[1];x(c);Ra[h[c]].times.push([["1"==a[4]?"1"==a[3]?2E3:
0:-1,~~a[2]],b(a[5]||""),b(a[7]||""),mathlib.str2time(a[6])])});return Ra}],"mateus.cubetimer":[/^"Category";"Time \(MM:SS\.SSS\)";"Scrambler";"Date";"Penalty \+2 \(yes or no\)";"DNF \(yes or no\)";"Section"\n/i,function(c){c=Pa(c,";");for(var b={"3x3x3":"333","2x2x2":"222so","4x4x4":"444wca","5x5x5":"555wca",Pyraminx:"pyrso",Skewb:"skbso",Megaminx:"mgmp","Square-1":"sqrs","Rubik's Clock":"clkwca","6x6x6":"666wca","7x7x7":"777wca","3x3x3 Blindfolded":"333ni","4x4x4 Blindfolded":"444bld","5x5x5 Blindfolded":"555bld",
"3x3x3 One-Handed":"333oh","3x3x3 Multi-Blindfolded":"r3ni","3x3x3 With Feet":"333ft","3x3x3 Fewest Moves":"333fm"},a={},h=[],Ra=1;Ra<c.length;Ra++){var z=c[Ra];if(!(7>z.length)){var r=z[0]+"-"+z[6],Na=x.exec(z[1]);if(Na){Na=Math.round(36E5*~~Na[2]+6E4*~~Na[3]+1E3*parseFloat(Na[4]));var Qa=z[2],y=0;"yes"==z[5]?y=-1:"yes"==z[4]&&(y=2E3);r in a||(a[r]=h.length,h.push({name:r,opt:{scrType:b[z[0]]||"333"},times:[]}));h[a[r]].times.push([[y,Na],Qa,"",mathlib.str2time(z[3]+":00")])}else console.log("Invalid data detected")}}return h}],
"CubeDesk.new":[/^{"sessions":\[/i,function(c){c=JSON.parse(b(c));var e={},a={};$.each(c.sessions,function(c,b){e[b.id]=b.name;a[b.id]=b.order});var h={222:"222so",333:"333",444:"444wca",555:"555wca",pyram:"pyrso",skewb:"skbso",minx:"mgmp",sq1:"sqrs",clock:"clkwca",666:"666wca",777:"777wca","333mirror":"333","222oh":"222so","333oh":"333oh","333bl":"333ni"},Ra=[],x={};$.each(c.solves,function(c,b){var r=b.session_id+"-"+b.cube_type;r in x||(x[r]=Ra.length,Ra.push({name:(e[b.session_id]||b.session_id)+
"-"+b.cube_type,opt:{scrType:h[b.cube_type]||"333"},rank:a[b.session_id],times:[]}));r=Ra[x[r]];var y=0;b.dnf?y=-1:b.plus_two&&(y=2E3);r.times.push([[y,1E3*b.raw_time],b.scramble,b.notes||"",Math.round(b.started_at/1E3)]);(y=h[b.cube_type])&&(r.opt.scrType=y)});$.each(Ra,function(a,b){b.times.sort(function(a,b){return a[3]-b[3]})});Ra.sort(function(a,b){return a.rank-b.rank});return Ra}]};return function(b){var c=void 0,a;for(a in z)if(z[a][0].exec(b)){console.log("try read by "+a);try{c=z[a][1](b);
break}catch(h){console.log(h)}}return c}});var LZString=function(){function b(b,e){if(!x[b]){x[b]={};for(var a=0;a<b.length;a++)x[b][b.charAt(a)]=a}return x[b][e]}var Pa=String.fromCharCode,x={},z={compressToBase64:function(b){if(null==b)return"";b=z._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)});switch(b.length%4){default:case 0:return b;case 1:return b+"===";case 2:return b+"==";case 3:return b+"="}},decompressFromBase64:function(c){return null==c?"":""==c?null:z._decompress(c.length,
32,function(e){return b("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c.charAt(e))})},compressToUTF16:function(b){return null==b?"":z._compress(b,15,function(b){return Pa(b+32)})+" "},decompressFromUTF16:function(b){return null==b?"":""==b?null:z._decompress(b.length,16384,function(c){return b.charCodeAt(c)-32})},compressToUint8Array:function(b){b=z.compress(b);for(var c=new Uint8Array(2*b.length),a=0,h=b.length;a<h;a++){var Ra=b.charCodeAt(a);c[2*a]=Ra>>>8;c[2*a+1]=Ra%256}return c},
decompressFromUint8Array:function(b){if(null===b||void 0===b)return z.decompress(b);for(var c=Array(b.length/2),a=0,h=c.length;a<h;a++)c[a]=256*b[2*a]+b[2*a+1];var Ra=[];c.forEach(function(a){Ra.push(Pa(a))});return z.decompress(Ra.join(""))},compressToEncodedURIComponent:function(b){return null==b?"":z._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(b)})},decompressFromEncodedURIComponent:function(c){if(null==c)return"";if(""==c)return null;
c=c.replace(/ /g,"+");return z._decompress(c.length,32,function(e){return b("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c.charAt(e))})},compress:function(b){return z._compress(b,16,function(b){return Pa(b)})},_compress:function(b,e,a){if(null==b)return"";var c,Ra={},x={},r="",Na=2,z=3,y=2,Wa=[],Ua=0,Xa=0,Ta;for(Ta=0;Ta<b.length;Ta+=1){var Ya=b.charAt(Ta);Object.prototype.hasOwnProperty.call(Ra,Ya)||(Ra[Ya]=z++,x[Ya]=!0);var Sa=r+Ya;if(Object.prototype.hasOwnProperty.call(Ra,
Sa))r=Sa;else{if(Object.prototype.hasOwnProperty.call(x,r)){if(256>r.charCodeAt(0)){for(c=0;c<y;c++)Ua<<=1,Xa==e-1?(Xa=0,Wa.push(a(Ua)),Ua=0):Xa++;var n=r.charCodeAt(0);for(c=0;8>c;c++)Ua=Ua<<1|n&1,Xa==e-1?(Xa=0,Wa.push(a(Ua)),Ua=0):Xa++,n>>=1}else{n=1;for(c=0;c<y;c++)Ua=Ua<<1|n,Xa==e-1?(Xa=0,Wa.push(a(Ua)),Ua=0):Xa++,n=0;n=r.charCodeAt(0);for(c=0;16>c;c++)Ua=Ua<<1|n&1,Xa==e-1?(Xa=0,Wa.push(a(Ua)),Ua=0):Xa++,n>>=1}Na--;0==Na&&(Na=Math.pow(2,y),y++);delete x[r]}else for(n=Ra[r],c=0;c<y;c++)Ua=Ua<<
1|n&1,Xa==e-1?(Xa=0,Wa.push(a(Ua)),Ua=0):Xa++,n>>=1;Na--;0==Na&&(Na=Math.pow(2,y),y++);Ra[Sa]=z++;r=String(Ya)}}if(""!==r){if(Object.prototype.hasOwnProperty.call(x,r)){if(256>r.charCodeAt(0)){for(c=0;c<y;c++)Ua<<=1,Xa==e-1?(Xa=0,Wa.push(a(Ua)),Ua=0):Xa++;n=r.charCodeAt(0);for(c=0;8>c;c++)Ua=Ua<<1|n&1,Xa==e-1?(Xa=0,Wa.push(a(Ua)),Ua=0):Xa++,n>>=1}else{n=1;for(c=0;c<y;c++)Ua=Ua<<1|n,Xa==e-1?(Xa=0,Wa.push(a(Ua)),Ua=0):Xa++,n=0;n=r.charCodeAt(0);for(c=0;16>c;c++)Ua=Ua<<1|n&1,Xa==e-1?(Xa=0,Wa.push(a(Ua)),
Ua=0):Xa++,n>>=1}Na--;0==Na&&(Na=Math.pow(2,y),y++);delete x[r]}else for(n=Ra[r],c=0;c<y;c++)Ua=Ua<<1|n&1,Xa==e-1?(Xa=0,Wa.push(a(Ua)),Ua=0):Xa++,n>>=1;Na--;0==Na&&y++}n=2;for(c=0;c<y;c++)Ua=Ua<<1|n&1,Xa==e-1?(Xa=0,Wa.push(a(Ua)),Ua=0):Xa++,n>>=1;for(;;)if(Ua<<=1,Xa==e-1){Wa.push(a(Ua));break}else Xa++;return Wa.join("")},decompress:function(b){return null==b?"":""==b?null:z._decompress(b.length,32768,function(c){return b.charCodeAt(c)})},_decompress:function(b,e,a){var c=[],x=4,z=4,r=3,Na=[],Qa,
y,Wa=a(0),Ua=e,Xa=1;for(Qa=0;3>Qa;Qa+=1)c[Qa]=Qa;var Ta=0;var Ya=Math.pow(2,2);for(y=1;y!=Ya;){var Sa=Wa&Ua;Ua>>=1;0==Ua&&(Ua=e,Wa=a(Xa++));Ta|=(0<Sa?1:0)*y;y<<=1}switch(Ta){case 0:Ta=0;Ya=Math.pow(2,8);for(y=1;y!=Ya;)Sa=Wa&Ua,Ua>>=1,0==Ua&&(Ua=e,Wa=a(Xa++)),Ta|=(0<Sa?1:0)*y,y<<=1;var n=Pa(Ta);break;case 1:Ta=0;Ya=Math.pow(2,16);for(y=1;y!=Ya;)Sa=Wa&Ua,Ua>>=1,0==Ua&&(Ua=e,Wa=a(Xa++)),Ta|=(0<Sa?1:0)*y,y<<=1;n=Pa(Ta);break;case 2:return""}Qa=c[3]=n;for(Na.push(n);;){if(Xa>b)return"";Ta=0;Ya=Math.pow(2,
r);for(y=1;y!=Ya;)Sa=Wa&Ua,Ua>>=1,0==Ua&&(Ua=e,Wa=a(Xa++)),Ta|=(0<Sa?1:0)*y,y<<=1;switch(n=Ta){case 0:Ta=0;Ya=Math.pow(2,8);for(y=1;y!=Ya;)Sa=Wa&Ua,Ua>>=1,0==Ua&&(Ua=e,Wa=a(Xa++)),Ta|=(0<Sa?1:0)*y,y<<=1;c[z++]=Pa(Ta);n=z-1;x--;break;case 1:Ta=0;Ya=Math.pow(2,16);for(y=1;y!=Ya;)Sa=Wa&Ua,Ua>>=1,0==Ua&&(Ua=e,Wa=a(Xa++)),Ta|=(0<Sa?1:0)*y,y<<=1;c[z++]=Pa(Ta);n=z-1;x--;break;case 2:return Na.join("")}0==x&&(x=Math.pow(2,r),r++);if(c[n])n=c[n];else if(n===z)n=Qa+Qa.charAt(0);else return null;Na.push(n);
c[z++]=Qa+n.charAt(0);x--;Qa=n;0==x&&(x=Math.pow(2,r),r++)}}};return z}();var min2phase=function(){function b(){this.move=[];this.moveSol=[];this.nodeUD=[];this.valid1=0;this.allowShorter=!1;this.cc=new a;this.urfCubieCube=[];this.urfCoordCube=[];this.phase1Cubie=[];this.preMoveCubes=[];this.preMoves=[];this.maxPreMoves=this.preMoveLen=0;this.isRec=!1;for(var b=0;21>b;b++)this.nodeUD[b]=new Wa,this.phase1Cubie[b]=new a;for(b=0;6>b;b++)this.urfCubieCube[b]=new a,this.urfCoordCube[b]=new Wa;for(b=0;20>b;b++)this.preMoveCubes[b+1]=new a}function Pa(a,b,c){return c?b<<1|a&
1:b|a&248}function x(a,b){return b?a>>1:a&7}function z(a,b,c){a[b>>3]^=c<<(b<<2)}function c(a,b,c){return Math.min(a,b[c>>3]>>(c<<2)&15)}function e(a,b,c){a=Bb[a];c&&(a^=14540032>>((a&15)<<1)&3);return a&65520|$a[a&15][b]}function a(){this.ca=[0,1,2,3,4,5,6,7];this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}function h(a,b,c,f){c--;for(var w=1985229328,e=0;e<c;++e){var h=db[c-e],n=~~(b/h);b%=h;n<<=2;a[e]=Pa(a[e],w>>n&15,f);h=(1<<n)-1;w=(w&h)+(w>>4&~h)}a[c]=Pa(a[c],w&15,f)}function Ra(a,b,c){for(var f=0,w=
1985229328,e=0;e<b-1;++e){var h=x(a[e],c)<<2;f=(b-e)*f+(w>>h&15);w-=286331152<<h}return f}function Za(a,b,c,f){a[c-1]=Pa(a[c-1],0,f);for(var w=c-2;0<=w;--w){a[w]=Pa(a[w],b%(c-w),f);b=~~(b/(c-w));for(var e=w+1;e<c;++e)x(a[e],f)>=x(a[w],f)&&(a[e]=Pa(a[e],x(a[e],f)+1,f))}}function r(a,b,c){for(var f=0,w=0;w<b;++w){f*=b-w;for(var e=w+1;e<b;++e)x(a[e],c)<x(a[w],c)&&++f}return f}function Na(a,b,c){for(var f=0,w=4,e=a.length-1;0<=e;e--)(x(a[e],c)&12)==b&&(f+=n[e][w--]);return f}function Qa(a,b,c,f){for(var w=
a.length-1,e=4,h=w;0<=w;w--)b>=n[w][e]?(b-=n[w][e--],a[w]=Pa(a[w],e|c,f)):((h&12)==c&&(h-=4),a[w]=Pa(a[w],h--,f))}function y(a,b){for(var c=0,f=b-2;0<=f;f--)c^=a%(b-f),a=~~(a/(b-f));return c&1}function Wa(){this.flipc=this.twistc=this.prun=this.slice=this.fsym=this.flip=this.tsym=this.twist=0}function Ua(){function b(b,c,f,e,w,n,h){for(var Oa=new a,Sa=new a,y=0,r=2<=w?1:2,Ya=1!=w?a.EdgeConjugate:a.CornConjugate,ab=0;ab<b;ab++)if(void 0===f[ab]){n.call(Oa,ab);for(var x=0;16>x;x+=r){Ya(Oa,x,Sa);var Na=
h.call(Sa);0==w&&(Db[y<<3|x>>1]=Na);Na==ab&&(e[y]|=1<<x/r);f[Na]=(y<<4|x)/r}c[y++]=ab}return y}function c(a,b,c,e,n,h,Oa,Sa){for(var y=0;y<c;y++){a[y]=[];n.call(f,b[y]);for(var r=0;r<e;r++)Oa(f,hb[Sa?Sa[r]:r],w),a[y][r]=h.call(w)}}var f=new a,w=new a,e,n=(new a).initCoord(28783,0,259268407,0),Oa=(new a).initCoord(15138,0,119765538,7),Sa=(new a).initCoord(5167,0,83473207,0);for(e=0;8>e;e++)Sa.ca[e]|=24;for(e=0;16>e;e++)nb[e]=(new a).init(f.ca,f.ea),a.CornMultFull(f,Oa,w),a.EdgeMult(f,Oa,w),f.init(w.ca,
w.ea),3==e%4&&(a.CornMultFull(f,Sa,w),a.EdgeMult(f,Sa,w),f.init(w.ca,w.ea)),7==e%8&&(a.CornMultFull(f,n,w),a.EdgeMult(f,n,w),f.init(w.ca,w.ea));for(e=0;16>e;e++)$a[e]=[],fb[e]=[],mb[e]=[],rb[e]=[],kb[e]=[];for(e=0;16>e;e++)for(n=0;16>n;n++)$a[e][n]=e^n^84660>>n&e<<1&2,fb[$a[e][n]][n]=e;f=new a;for(Oa=0;16>Oa;Oa++)for(n=0;18>n;n++){a.CornConjugate(hb[n],fb[0][Oa],f);Sa=0;a:for(;18>Sa;Sa++){for(e=0;8>e;e++)if(hb[Sa].ca[e]!=f.ca[e])continue a;mb[Oa][n]=Sa;kb[Oa][jb[n]]=jb[Sa];break}0==Oa%2&&(rb[n<<3|
Oa>>1]=mb[Oa][n])}b(2048,ob,sb,xb,0,a.prototype.setFlip,a.prototype.getFlip);b(2187,tb,wb,Kb,1,a.prototype.setTwist,a.prototype.getTwist);b(40320,zb,vb,pb,2,a.prototype.setEPerm,a.prototype.getEPerm);n=new a;for(e=0;2768>e;e++)h(n.ea,zb[e],8,!0),Eb[e]=Na(n.ea,0,!0)+70*y(zb[e],8),f.invFrom(n),Bb[e]=vb[f.getEPerm()];f=new a;w=new a;c(qb,ob,336,18,a.prototype.setFlip,a.prototype.getFlipSym,a.EdgeMult);c(Ab,tb,324,18,a.prototype.setTwist,a.prototype.getTwistSym,a.CornMult);c(Fb,zb,2768,10,a.prototype.setEPerm,
a.prototype.getEPermSym,a.EdgeMult,cb);c(Gb,zb,2768,10,a.prototype.setCPerm,a.prototype.getCPermSym,a.CornMult,cb);for(e=0;495>e;e++){Ib[e]=[];ub[e]=[];f.setUDSlice(e);for(n=0;18>n;n++)a.EdgeMult(f,hb[n],w),Ib[e][n]=w.getUDSlice();for(n=0;16>n;n+=2)a.EdgeConjugate(f,fb[0][n],w),ub[e][n>>1]=w.getUDSlice()}for(e=0;24>e;e++){Jb[e]=[];Ob[e]=[];f.setMPerm(e);for(n=0;10>n;n++)a.EdgeMult(f,hb[cb[n]],w),Jb[e][n]=w.getMPerm();for(n=0;16>n;n++)a.EdgeConjugate(f,fb[0][n],w),Ob[e][n]=w.getMPerm()}for(e=0;140>
e;e++){Rb[e]=[];Pb[e]=[];f.setCComb(e%70);for(n=0;10>n;n++)a.CornMult(f,hb[cb[n]],w),Rb[e][n]=w.getCComb()+70*(165>>n&1^~~(e/70));for(n=0;16>n;n++)a.CornConjugate(f,fb[0][n],w),Pb[e][n]=w.getCComb()+70*~~(e/70)}}function Xa(a,b,c,f,e,w,n,h){var Oa=h&15,y=1==(h>>4&1)?14540032:0,r=h>>8&15,Ya=h>>12&15,ab=h>>16&15,x=(1<<Oa)-1,Na=null==f;c*=b;h=1==(h>>5&1)?10:18;var kb=10==h?66:599186,Ra=(a[c>>3]>>(c<<2)&15)-1;if(-1==Ra){for(var Va=0;Va<(c>>3)+1;Va++)a[Va]=4294967295;z(a,0,15);Ra=0}else z(a,c,15^Ra+1);
for(Ya=0<Sa?Math.min(Math.max(Ra+1,ab),Ya):Ya;Ra<Ya;){var Ta=(ab=Ra>r)?15:Ra,Wa=286331153*Ta,$a=ab?Ra:15;Ra++;Qb++;var Ua=Ra^15,hb=0,cb=0;for(Va=0;Va<c;Va++,cb>>=4){if(0==(Va&7)){cb=a[Va>>3];var db=cb^Wa;if(0==(db-286331153&~db&2290649224)){Va+=7;continue}}if((cb&15)==Ta){db=Va%b;var mb=~~(Va/b),Xa=0,lb=0;Na&&(Xa=sb[db],lb=Xa&7,Xa>>=3);for(var Qa=0;Qa<h;Qa++){var fb=w[mb][Qa];var Za=Na?Db[qb[Xa][rb[Qa<<3|lb]]^lb^fb&x]:e[f[db][Qa]][fb&x];fb>>=Oa;var bb=fb*b+Za,wb=a[bb>>3]>>(bb<<2)&15;if(wb!=$a)wb<
Ra-1&&(Qa+=kb>>Qa&3);else{hb++;if(ab){z(a,Va,Ua);break}z(a,bb,Ua);bb=1;for(wb=n[fb];0!=(wb>>=1);bb++)if(1==(wb&1)){var eb=fb*b;eb=Na?eb+Db[sb[Za]^bb]:eb+e[Za][bb^y>>(bb<<1)&3];(a[eb>>3]>>(eb<<2)&15)==$a&&(z(a,eb,Ua),hb++)}}}}}}z(a,c,Ra+1^15);return Ra+1}function Ta(a){Nb=Xa(yb,2048,324,null,null,Ab,Kb,103939);Qb>a||(ac=Xa(Hb,495,324,Ib,ub,Ab,Kb,431619),Qb>a||(Vb=Xa(Mb,495,336,Ib,ub,qb,xb,431619),Qb>a||(Sb=Xa(Lb,24,2768,Jb,Ob,Gb,pb,584244),Qb>a||(Wb=Xa(Tb,140,2768,Rb,Pb,Fb,pb,514084)))))}function Ya(){0>
Qb&&(Ua(),Qb=0);if(0==Qb)Ta(99);else if(54>Qb)Ta(Qb);else return!0;return!1}for(var Sa=2,n=[],db=[1],lb="U ;U2;U';R ;R2;R';F ;F2;F';D ;D2;D';L ;L2;L';B ;B2;B'".split(";"),cb=[0,1,2,4,7,9,10,11,13,16,3,5,6,8,12,14,15,17],jb=[],bb=[],gb=[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],[6,7,8,0,1,2,3,4,5,15,16,17,9,10,11,12,13,14],[3,4,5,6,7,8,0,1,2,12,13,14,15,16,17,9,10,11],[2,1,0,5,4,3,8,7,6,11,10,9,14,13,12,17,16,15],[8,7,6,2,1,0,5,4,3,17,16,15,11,10,9,14,13,12],[5,4,3,8,7,6,2,1,0,14,13,12,17,16,15,
11,10,9]],eb=0;18>eb;eb++)jb[cb[eb]]=eb;for(eb=0;10>eb;eb++)for(var Va=~~(cb[eb]/3),w=bb[eb]=0;10>w;w++){var f=~~(cb[w]/3);bb[eb]|=(Va==f||Va%3==f%3&&Va>=f?1:0)<<w}for(eb=bb[10]=0;13>eb;eb++)for(n[eb]=[],db[eb+1]=db[eb]*(eb+1),w=n[eb][0]=n[eb][eb]=1;13>w;w++)n[eb][w]=w<=eb?n[eb-1][w-1]+n[eb-1][w]:0;a.EdgeMult=function(a,b,c){for(var f=0;12>f;f++)c.ea[f]=a.ea[b.ea[f]>>1]^b.ea[f]&1};a.CornMult=function(a,b,c){for(var f=0;8>f;f++)c.ca[f]=a.ca[b.ca[f]&7]&7|((a.ca[b.ca[f]&7]>>3)+(b.ca[f]>>3))%3<<3};a.CornMultFull=
function(a,b,c){for(var f=0;8>f;f++){var e=a.ca[b.ca[f]&7]>>3,w=b.ca[f]>>3,n=e+(3>e?w:6-w);n=n%3+(3>e==3>w?0:3);c.ca[f]=a.ca[b.ca[f]&7]&7|n<<3}};a.CornConjugate=function(a,b,c){var f=nb[fb[0][b]];b=nb[b];for(var e=0;8>e;e++){var w=a.ca[b.ca[e]&7]>>3;c.ca[e]=f.ca[a.ca[b.ca[e]&7]&7]&7|(3>f.ca[a.ca[b.ca[e]&7]&7]>>3?w:(3-w)%3)<<3}};a.EdgeConjugate=function(a,b,c){var f=nb[fb[0][b]];b=nb[b];for(var e=0;12>e;e++)c.ea[e]=f.ea[a.ea[b.ea[e]>>1]>>1]^a.ea[b.ea[e]>>1]&1^b.ea[e]&1};a.prototype.init=function(a,
b){this.ca=a.slice();this.ea=b.slice();return this};a.prototype.initCoord=function(a,b,c,f){h(this.ca,a,8,!1);this.setTwist(b);Za(this.ea,c,12,!0);this.setFlip(f);return this};a.prototype.isEqual=function(a){for(var b=0;8>b;b++)if(this.ca[b]!=a.ca[b])return!1;for(b=0;12>b;b++)if(this.ea[b]!=a.ea[b])return!1;return!0};a.prototype.setFlip=function(a){for(var b=0,c,f=10;0<=f;f--,a>>=1)b^=c=a&1,this.ea[f]=this.ea[f]&254|c;this.ea[11]=this.ea[11]&254|b};a.prototype.getFlip=function(){for(var a=0,b=0;11>
b;b++)a=a<<1|this.ea[b]&1;return a};a.prototype.getFlipSym=function(){return sb[this.getFlip()]};a.prototype.setTwist=function(a){for(var b=15,c,f=6;0<=f;f--,a=~~(a/3))b-=c=a%3,this.ca[f]=this.ca[f]&7|c<<3;this.ca[7]=this.ca[7]&7|b%3<<3};a.prototype.getTwist=function(){for(var a=0,b=0;7>b;b++)a+=(a<<1)+(this.ca[b]>>3);return a};a.prototype.getTwistSym=function(){return wb[this.getTwist()]};a.prototype.setCPerm=function(a){h(this.ca,a,8,!1)};a.prototype.getCPerm=function(){return Ra(this.ca,8,!1)};
a.prototype.getCPermSym=function(){var a=vb[Ra(this.ca,8,!1)];return a^14540032>>((a&15)<<1)&3};a.prototype.setEPerm=function(a){h(this.ea,a,8,!0)};a.prototype.getEPerm=function(){return Ra(this.ea,8,!0)};a.prototype.getEPermSym=function(){return vb[Ra(this.ea,8,!0)]};a.prototype.getUDSlice=function(){return 494-Na(this.ea,8,!0)};a.prototype.setUDSlice=function(a){Qa(this.ea,494-a,8,!0)};a.prototype.getMPerm=function(){return r(this.ea,12,!0)%24};a.prototype.setMPerm=function(a){Za(this.ea,a,12,!0)};
a.prototype.getCComb=function(){return Na(this.ca,0,!1)};a.prototype.setCComb=function(a){Qa(this.ca,a,0,!1)};a.prototype.URFConjugate=function(){var b=new a;a.CornMult(a.urf2,this,b);a.CornMult(b,a.urf1,this);a.EdgeMult(a.urf2,this,b);a.EdgeMult(b,a.urf1,this)};var Oa=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],ab=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];a.prototype.toFaceCube=function(a,b){a=a||Oa;b=b||
ab;for(var c=[],f=0;54>f;f++)c[f]="URFDLB"[~~(f/9)];for(var e=0;8>e;e++){f=this.ca[e]&7;for(var w=this.ca[e]>>3,n=0;3>n;n++)c[a[e][(n+w)%3]]="URFDLB"[~~(a[f][n]/9)]}for(e=0;12>e;e++)for(f=this.ea[e]>>1,w=this.ea[e]&1,n=0;2>n;n++)c[b[e][(n+w)%2]]="URFDLB"[~~(b[f][n]/9)];return c.join("")};a.prototype.invFrom=function(a){for(var b=0;12>b;b++)this.ea[a.ea[b]>>1]=b<<1|a.ea[b]&1;for(b=0;8>b;b++)this.ca[a.ca[b]&7]=b|32>>(a.ca[b]>>3)&24;return this};a.prototype.fromFacelet=function(a,b,c){b=b||Oa;c=c||ab;
for(var f=0,e=[],w=a[4]+a[13]+a[22]+a[31]+a[40]+a[49],n=0;54>n;++n){e[n]=w.indexOf(a[n]);if(-1==e[n])return-1;f+=1<<(e[n]<<2)}if(10066329!=f)return-1;var h;for(n=0;8>n;++n){for(h=0;3>h&&0!=e[b[n][h]]&&3!=e[b[n][h]];++h);a=e[b[n][(h+1)%3]];f=e[b[n][(h+2)%3]];for(w=0;8>w;++w)if(a==~~(b[w][1]/9)&&f==~~(b[w][2]/9)){this.ca[n]=w|h%3<<3;break}}for(n=0;12>n;++n)for(w=0;12>w;++w){if(e[c[n][0]]==~~(c[w][0]/9)&&e[c[n][1]]==~~(c[w][1]/9)){this.ea[n]=w<<1;break}if(e[c[n][0]]==~~(c[w][1]/9)&&e[c[n][1]]==~~(c[w][0]/
9)){this.ea[n]=w<<1|1;break}}};Wa.prototype.set=function(a){this.twist=a.twist;this.tsym=a.tsym;this.flip=a.flip;this.fsym=a.fsym;this.slice=a.slice;this.prun=a.prun;this.twistc=a.twistc;this.flipc=a.flipc};Wa.prototype.calcPruning=function(a){this.prun=Math.max(Math.max(c(ac,Hb,495*this.twist+ub[this.slice][this.tsym]),c(Vb,Mb,495*this.flip+ub[this.slice][this.fsym])),Math.max(c(Nb,yb,this.twistc>>3<<11|Db[this.flipc^this.twistc&7]),c(Nb,yb,this.twist<<11|Db[this.flip<<3|this.fsym^this.tsym])))};
Wa.prototype.setWithPrun=function(b,f){this.twist=b.getTwistSym();this.flip=b.getFlipSym();this.tsym=this.twist&7;this.twist>>=3;this.prun=c(Nb,yb,this.twist<<11|Db[this.flip^this.tsym]);if(this.prun>f)return!1;this.fsym=this.flip&7;this.flip>>=3;this.slice=b.getUDSlice();this.prun=Math.max(this.prun,Math.max(c(ac,Hb,495*this.twist+ub[this.slice][this.tsym]),c(Vb,Mb,495*this.flip+ub[this.slice][this.fsym])));if(this.prun>f)return!1;var e=new a;a.CornConjugate(b,1,e);a.EdgeConjugate(b,1,e);this.twistc=
e.getTwistSym();this.flipc=e.getFlipSym();this.prun=Math.max(this.prun,c(Nb,yb,this.twistc>>3<<11|Db[this.flipc^this.twistc&7]));return this.prun<=f};Wa.prototype.doMovePrun=function(a,b,f){this.slice=Ib[a.slice][b];this.flip=qb[a.flip][rb[b<<3|a.fsym]];this.fsym=this.flip&7^a.fsym;this.flip>>=3;this.twist=Ab[a.twist][rb[b<<3|a.tsym]];this.tsym=this.twist&7^a.tsym;this.twist>>=3;return this.prun=Math.max(Math.max(c(ac,Hb,495*this.twist+ub[this.slice][this.tsym]),c(Vb,Mb,495*this.flip+ub[this.slice][this.fsym])),
c(Nb,yb,this.twist<<11|Db[this.flip<<3|this.fsym^this.tsym]))};Wa.prototype.doMovePrunConj=function(a,b){b=mb[3][b];this.flipc=qb[a.flipc>>3][rb[b<<3|a.flipc&7]]^a.flipc&7;this.twistc=Ab[a.twistc>>3][rb[b<<3|a.twistc&7]]^a.twistc&7;return c(Nb,yb,this.twistc>>3<<11|Db[this.flipc^this.twistc&7])};b.prototype.solution=function(a,b,c,f,e,w,n){Ya();a=this.verify(a);if(0!=a)return"Error "+Math.abs(a);void 0===b&&(b=21);void 0===c&&(c=1E9);void 0===f&&(f=0);void 0===e&&(e=0);this.sol=b+1;this.probe=0;this.probeMax=
c;this.probeMin=Math.min(f,c);this.verbose=e;this.moveSol=null;this.isRec=!1;this.firstFilters=[0,0,0,0,0,0];this.lastFilters=[0,0,0,0,0,0];for(b=0;3>b;b++)void 0!==w&&(this.firstFilters[b]|=3591<<3*~~(gb[(3-b)%3][3*w]/3),this.lastFilters[b+3]|=3591<<3*~~(gb[(3-b)%3][3*w]/3)),void 0!==n&&(this.lastFilters[b]|=3591<<3*~~(gb[(3-b)%3][3*n]/3),this.firstFilters[b+3]|=3591<<3*~~(gb[(3-b)%3][3*n]/3));this.initSearch();return this.search()};b.prototype.initSearch=function(){this.conjMask=0;this.maxPreMoves=
7<this.conjMask?0:20;for(var b=0;6>b;b++)if(this.urfCubieCube[b].init(this.cc.ca,this.cc.ea),this.urfCoordCube[b].setWithPrun(this.urfCubieCube[b],20),this.cc.URFConjugate(),2==b%3){var c=(new a).invFrom(this.cc);this.cc.init(c.ca,c.ea)}};b.prototype.next=function(a,b,c){this.probe=0;this.probeMax=a;this.probeMin=Math.min(b,a);this.moveSol=null;this.isRec=!0;this.verbose=c;return this.search()};b.prototype.verify=function(a){if(-1==this.cc.fromFacelet(a))return-1;for(var b=a=0,c=0;12>c;c++)b|=1<<
(this.cc.ea[c]>>1),a^=this.cc.ea[c]&1;if(4095!=b)return-2;if(0!=a)return-3;for(c=a=b=0;8>c;c++)b|=1<<(this.cc.ca[c]&7),a+=this.cc.ca[c]>>3;return 255!=b?-4:0!=a%3?-5:0!=(y(r(this.cc.ea,12,!0),12)^y(this.cc.getCPerm(),8))?-6:0};b.prototype.phase1PreMoves=function(b,c,f){if(b==this.maxPreMoves-1&&0!=(this.lastFilter>>c&1))return 1;this.preMoveLen=this.maxPreMoves-b;if(this.isRec?this.depth1==this.length1-this.preMoveLen:0==this.preMoveLen||0==(225207>>c&1))if(this.depth1=this.length1-this.preMoveLen,
this.phase1Cubie[0].init(f.ca,f.ea),this.allowShorter=7==this.depth1&&0!=this.preMoveLen,this.nodeUD[this.depth1+1].setWithPrun(f,this.depth1)&&0==this.phase1(this.nodeUD[this.depth1+1],this.depth1,-1))return 0;if(0==b||this.preMoveLen+7>=this.length1)return 1;var e=0;if(1==b||this.preMoveLen+1+7>=this.length1)e|=225207;c=3*~~(c/3);for(var w=0;18>w;w++)if(w==c||w==c-9||w==c+9)w+=2;else if(!(this.isRec&&w!=this.preMoves[this.maxPreMoves-b]||0!=(e&1<<w))&&(a.CornMult(hb[w],f,this.preMoveCubes[b]),a.EdgeMult(hb[w],
f,this.preMoveCubes[b]),this.preMoves[this.maxPreMoves-b]=w,0==this.phase1PreMoves(b-1,w,this.preMoveCubes[b])))return 0;return 1};b.prototype.search=function(){for(this.length1=this.isRec?this.length1:0;this.length1<this.sol;this.length1++)for(this.urfIdx=this.isRec?this.urfIdx:0;6>this.urfIdx;this.urfIdx++)if(0==(this.conjMask&1<<this.urfIdx)&&(this.firstFilter=this.firstFilters[this.urfIdx],this.lastFilter=this.lastFilters[this.urfIdx],0==this.phase1PreMoves(this.maxPreMoves,-30,this.urfCubieCube[this.urfIdx],
0)))return null==this.moveSol?"Error 8":this.moveSol;return null==this.moveSol?"Error 7":this.moveSol};b.prototype.initPhase2Pre=function(){this.isRec=!1;if(this.probe>=(null==this.moveSol?this.probeMax:this.probeMin))return 0;++this.probe;for(var b=this.valid1;b<this.depth1;b++)a.CornMult(this.phase1Cubie[b],hb[this.move[b]],this.phase1Cubie[b+1]),a.EdgeMult(this.phase1Cubie[b],hb[this.move[b]],this.phase1Cubie[b+1]);this.valid1=this.depth1;b=this.initPhase2(this.phase1Cubie[this.depth1]);if(0==
b||0==this.preMoveLen||2==b)return b;b=3*~~(this.preMoves[this.preMoveLen-1]/3)+1;a.CornMult(hb[b],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]);a.EdgeMult(hb[b],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]);this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2;b=this.initPhase2(this.phase1Cubie[this.depth1+1]);this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2;return b};b.prototype.initPhase2=function(a){var b=a.getCPermSym(),
f=b&15;b>>=4;var e=a.getEPermSym(),w=e&15;e>>=4;a=a.getMPerm();var n=Math.max(c(Wb,Tb,140*e+Pb[Eb[b]&255][fb[w][f]]),c(Sb,Lb,24*b+Ob[a][f])),h=Math.min(13,this.sol-this.length1);if(n>=h)return n>h?2:1;var Oa;for(Oa=h-1;Oa>=n;Oa--){var Sa=this.phase2(e,w,b,f,a,Oa,this.depth1,10);if(0>Sa)break;Oa-=Sa;this.moveSol=[];for(Sa=0;Sa<this.depth1+Oa;Sa++)this.appendSolMove(this.move[Sa]);for(Sa=this.preMoveLen-1;0<=Sa;Sa--)this.appendSolMove(this.preMoves[Sa]);this.sol=this.moveSol.length;this.moveSol=this.solutionToString()}return Oa!=
h-1?this.probe>=this.probeMin?0:1:1};b.prototype.phase1=function(a,b,c){if(b==this.depth1-1&&0!=(this.firstFilter>>c&1))return 1;if(0==a.prun&&5>b){if(this.allowShorter||0==b){this.depth1-=b;var f=this.initPhase2Pre();this.depth1+=b;return f}return 1}for(var e=0;18>e;e+=3)if(e!=c&&e!=c-9)for(var w=0;3>w;w++)if(f=e+w,!this.isRec||f==this.move[this.depth1-b]){var n=this.nodeUD[b].doMovePrun(a,f,!0);if(n>b)break;else if(n==b)continue;n=this.nodeUD[b].doMovePrunConj(a,f);if(n>b)break;else if(n==b)continue;
this.move[this.depth1-b]=f;this.valid1=Math.min(this.valid1,this.depth1-b);f=this.phase1(this.nodeUD[b],b-1,e);if(0==f)return 0;if(2==f)break}return 1};b.prototype.appendSolMove=function(a){if(0==this.moveSol.length)this.moveSol.push(a);else{var b=~~(a/3),c=~~(this.moveSol[this.moveSol.length-1]/3);b==c?(a=(a%3+this.moveSol[this.moveSol.length-1]%3+1)%4,3==a?this.moveSol.pop():this.moveSol[this.moveSol.length-1]=3*b+a):1<this.moveSol.length&&b%3==c%3&&b==~~(this.moveSol[this.moveSol.length-2]/3)?
(a=(a%3+this.moveSol[this.moveSol.length-2]%3+1)%4,3==a?(this.moveSol[this.moveSol.length-2]=this.moveSol[this.moveSol.length-1],this.moveSol.pop()):this.moveSol[this.moveSol.length-2]=3*b+a):this.moveSol.push(a)}};b.prototype.phase2=function(a,b,f,w,n,h,Oa,Sa){if(0==this.depth1&&1==Oa&&0!=(this.firstFilter>>cb[Sa]&1))return-1;if(0==a&&0==f&&0==n&&(0<this.preMoveLen||0==(this.lastFilter>>cb[Sa]&1)))return h;Sa=bb[Sa];for(var y=0;10>y;y++)if(0!=(Sa>>y&1))y+=66>>y&3;else{var r=Jb[n][y],Ya=Gb[f][kb[w][y]],
ab=$a[Ya&15][w];Ya>>=4;if(!(c(Sb,Lb,24*Ya+Ob[r][ab])>=h)){var x=Fb[a][kb[b][y]],Na=$a[x&15][b];x>>=4;if(!(c(Wb,Tb,140*x+Pb[Eb[Ya]&255][fb[Na][ab]])>=h)){var Ra=e(x,Na,!1),Va=e(Ya,ab,!0);if(!(c(Wb,Tb,140*(Ra>>4)+Pb[Eb[Va>>4]&255][fb[Ra&15][Va&15]])>=h)&&(r=this.phase2(x,Na,Ya,ab,r,h-1,Oa+1,y),0<=r))return this.move[Oa]=cb[y],r}}}return-1};b.prototype.solutionToString=function(){var a="",b=0!=(this.verbose&2)?(this.urfIdx+3)%6:this.urfIdx;if(3>b)for(var c=0;c<this.moveSol.length;++c)a+=lb[gb[b][this.moveSol[c]]]+
" ";else for(c=this.moveSol.length-1;0<=c;--c)a+=lb[gb[b][this.moveSol[c]]]+" ";return a};var hb=[],nb=[],$a=[],fb=[],mb=[],kb=[],rb=[],ob=[],sb=[],tb=[],wb=[],zb=[],vb=[],xb=[],Kb=[],pb=[],Db=[],Eb=[],Bb=[],Ib=[],Ab=[],qb=[],ub=[],Hb=[],Mb=[],yb=[],Gb=[],Fb=[],Jb=[],Ob=[],Rb=[],Pb=[],Lb=[],Tb=[],Nb=15,ac=15,Vb=15,Sb=15,Wb=15;for(eb=0;18>eb;eb++)hb[eb]=new a;hb[0].initCoord(15120,0,119750400,0);hb[3].initCoord(21021,1494,323403417,0);hb[6].initCoord(8064,1236,29441808,550);hb[9].initCoord(9,0,5880,
0);hb[12].initCoord(1230,412,2949660,0);hb[15].initCoord(224,137,328552,137);for(eb=0;18>eb;eb+=3)for(Va=0;2>Va;Va++)a.EdgeMult(hb[eb+Va],hb[eb],hb[eb+Va+1]),a.CornMult(hb[eb+Va],hb[eb],hb[eb+Va+1]);a.urf1=(new a).initCoord(2531,1373,67026819,1367);a.urf2=(new a).initCoord(2089,1906,322752913,2040);var Qb=-1;return{Search:b,solve:function(a){return(new b).solution(a)},randomCube:function(){var b=~~(2048*Math.random()),c=~~(2187*Math.random());do{var f=~~(Math.random()*db[12]);var e=~~(Math.random()*
db[8])}while(y(e,8)!=y(f,12));return(new a).initCoord(e,c,f,b).toFaceCube()},initFull:function(){Sa=0;Ya()}}}();"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports=min2phase);var cubeutil=function(){function b(a){for(var b={},c=0;c<a.length;c++){var f=a[c];"-"!=f&&(b[f]=b[f]||[],b[f].push(c))}a=[];for(f in b)1<b[f].length&&a.push(b[f]);return a}function Pa(a,b){var c=gb[a[1]],f=a[0];b=b||bb;for(var e=0;e<b.length;e++)for(var w=b[e],n=f[c[w[0]]],h=1;h<w.length;h++)if(f[c[w[h]]]!=n)return 1;return 0}function x(a){return Pa(a,Qa)?9:Pa(a,Ta)?4+Pa(a,y)+Pa(a,Wa)+Pa(a,Ua)+Pa(a,Xa):Pa(a,Sa)?4:Pa(a,Ya)?3:Pa(a,n)?2:Pa(a)?1:0}function z(a){return Pa(a,Qa)?7:Pa(a,Ta)?2+Pa(a,y)+Pa(a,
Wa)+Pa(a,Ua)+Pa(a,Xa):Pa(a,Ya)?2:Pa(a)?1:0}function c(a){return Pa(a,Qa)?4:Pa(a,Ta)?3:Pa(a,Ya)?2:Pa(a)?1:0}function e(a){return Pa(a,Ta)?2:Pa(a)?1:0}function a(a){return Pa(a,db)?4:Pa(a,lb)?3:Pa(a,cb)?2:Pa(a)?1:0}function h(a,b){return a in eb?Pa(b,eb[a][1]):Pa(b)}function Ra(a,b,c){for(var f=99,e=0;e<c;e++)f=Math.min(f,b([a,e]));return f}function Za(a){var b=[0,1,2,3,4,5];return $.map(a,function(a,c){function f(a,b){0==e.length||~~(e[e.length-1]/3)!=a?e.push(3*a+b):(b=(b+e[e.length-1]%3+1)%4,3==
b?e.pop():e[e.length-1]=3*a+b)}for(var e=[],w=0;w<a.length;w++){var n=b.indexOf("URFDLB".indexOf(a[w][0][0])),h=" 2'".indexOf(a[w][0][1])%3;if(w==a.length-1||100<a[w+1][1]-a[w][1])f(n,h);else{var Oa=b.indexOf("URFDLB".indexOf(a[w+1][0][0])),Sa=" 2'".indexOf(a[w+1][0][1])%3;if(n!=Oa&&n%3==Oa%3&&2==h+Sa){Oa=n%3;n=(h-1)*[1,1,-1,-1,-1,1][n]+1;f(Oa+6,n);for(h=0;h<n+1;h++){Sa=[];for(var y=0;6>y;y++)Sa[y]=b[Va[Oa][y]];b=Sa}w++}else f(n,h)}}return[[$.map(e,function(a){return"URFDLBEMS".charAt(~~(a/3))+" 2'".charAt(a%
3)}).join(""),e.length]]})}function r(a,b,c){for(var f=[],e=0;24>e;e++)0==Pa([a,e],b)&&f.push(e);for(b=0;b<c.length;b++)for(e=0;e<f.length;e++)if(0==Pa([a,f[e]],c[b]))return b;return-1}function Na(a){switch(a){case "cfop":return["pll","oll","f2l","cross"];case "fp":return["op","cf"];case "cf4op":return"pll oll f2l-4 f2l-3 f2l-2 f2l-1 cross".split(" ");case "roux":return["l6e","cmll","sb","fb"];case "cf4o2p2":return"pll cpll oll eoll f2l-4 f2l-3 f2l-2 f2l-1 cross".split(" ");case "n":return["solve"]}}
var Qa=b("----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-"),y=b("----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-"),Wa=b("----U--------R--R----FF-FF-DD-DDD-D-----LL-LL----B--B-"),Ua=b("----U--------RR-RR----F--F--D-DDD-DD----L--L----BB-BB-"),Xa=b("----U--------R--R-----F--F--D-DDDDD----LL-LL-----BB-BB"),Ta=b("----U-------RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),Ya=b("UUUUUUUUU---RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),Sa=b("-U-UUU-U----RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),
n=b("UUUUUUUUUr-rRRRRRRf-fFFFFFFDDDDDDDDDl-lLLLLLLb-bBBBBBB"),db=b("---------------------F--F--D--D--D-----LLLLLL-----B--B"),lb=b("------------RRRRRR---F-FF-FD-DD-DD-D---LLLLLL---B-BB-B"),cb=b("U-U---U-Ur-rRRRRRRf-fF-FF-FD-DD-DD-Dl-lLLLLLLb-bB-BB-B"),jb=b("---------------R-R------F-FD-D---D-D------L-L------B-B"),bb=b(mathlib.SOLVED_FACELET),gb=function(){function a(a,b){for(var c=[],f=0;54>f;f++)c[b[f]]=a[f];return c}for(var b=[2,5,8,1,4,7,0,3,6,18,19,20,21,22,23,24,25,26,36,37,38,39,40,41,42,43,
44,33,30,27,34,31,28,35,32,29,45,46,47,48,49,50,51,52,53,9,10,11,12,13,14,15,16,17],c=[53,52,51,50,49,48,47,46,45,11,14,17,10,13,16,9,12,15,0,1,2,3,4,5,6,7,8,18,19,20,21,22,23,24,25,26,42,39,36,43,40,37,44,41,38,35,34,33,32,31,30,29,28,27],f=[11,14,17,10,13,16,9,12,15,29,32,35,28,31,34,27,30,33,20,23,26,19,22,25,18,21,24,38,41,44,37,40,43,36,39,42,2,5,8,1,4,7,0,3,6,51,48,45,52,49,46,53,50,47],e=[],w=[],n=0;54>n;n++)w[n]=n;for(n=0;24>n;n++)e[n]=w.slice(),w=a(w,n&1?c:f),5==n%6&&(w=a(w,f),w=a(w,f)),
11==n%12&&(w=a(w,b),w=a(w,b));return e}(),eb={cross:[6,Qa],f2l:[6,Ta],oll:[6,Ya],eoll:[6,Sa],cpll:[6,n],fb:[24,db],sb:[24,lb],cmll:[24,cb]},Va=[[0,2,4,3,5,1],[5,1,0,2,4,3],[4,0,2,1,3,5]],w=function(){var a=[];return function(c){if(0==a.length)for(var f=0;22>f;f++){var e=21==f?"UUUUUUUUUFFFRRRBBBLLL":scramble_333.getPLLImage(f)[0];a.push(b("012345678cdeRRRRRR9abFFFFFFDDDDDDDDDijkLLLLLLfghBBBBBB".replace(/[0-9a-z]/g,function(a){return e[parseInt(a,36)].toLowerCase()})))}return r(c,Ya,a)}}(),f=function(){var a=
[];return function(c){if(0==a.length)for(var f=0;58>f;f++){var e=scramble_333.getOLLImage(f)[0].replace(/G/g,"-");a.push(b("012345678cdeRRRRRR9abFFFFFFDDDDDDDDDijkLLLLLLfghBBBBBB".replace(/[0-9a-z]/g,function(a){return e[parseInt(a,36)].toLowerCase()})))}return r(c,Ta,a)}}(),Oa=function(){var a=[];return function(c){if(0==a.length)for(var f=0;40>f;f++){var e=scramble_222.getEGLLImage(f)[0].replace(/G/g,"-");a.push(b("0-1---2-36-7---R-R4-5---F-FD-D---D-Da-b---L-L8-9---B-B".replace(/[0-9a-z]/g,function(a){return e[parseInt(a,
36)].toLowerCase()})))}return r(c,jb,a)}}();return{getProgress:function(b,f){switch(f){case "cfop":return Ra(b,c,6);case "fp":return Ra(b,e,6);case "cf4op":return Ra(b,z,6);case "roux":return Ra(b,a,24);case "cf4o2p2":return Ra(b,x,6);case "n":return Ra(b,Pa,1)}},getStepNames:Na,getStepCount:function(a){return(a=Na(a))?a.length:0},getStepProgress:function(a,b,c){c||(c=a in eb?eb[a][0]:1);return Ra(b,h.bind(null,a),c)},getPrettyMoves:Za,getPrettyReconstruction:function(a,b){for(var c="",f=Za(a),e=
Na(b).reverse(),w=0,n=0;n<f.length;n++)w+=f[n][1],c+=f[n][0].replace(/ /g,"")+(e[n]?" // "+e[n]+" "+f[n][1]+" move(s)":"")+"\n";return{prettySolve:c,totalMoves:w}},moveSeq2str:function(a){return $.map(a,function(a){return a[0].trim()+"@"+a[1]}).join(" ")},getScrambledState:function(a,b){var c=a[1];if(tools.isPuzzle("333",a)){c=kernel.parseScramble(c,"URFDLB");for(var f=new mathlib.CubieCube,e=new mathlib.CubieCube,w=f.ori=0;w<c.length;w++){var n=c[w][0],h=c[w][2],Oa=3*n+h-1;if(!(0>Oa||18<=Oa)){if(2==
c[w][1]){Oa=[3,15,17,1,11,23][n];for(var Sa=0;Sa<h;Sa++)f.ori=mathlib.CubieCube.rotMult[Oa][f.ori];Oa=mathlib.CubieCube.rotMulM[f.ori][(n+3)%6*3+h-1]}mathlib.CubieCube.EdgeMult(f,mathlib.CubieCube.moveCube[Oa],e);mathlib.CubieCube.CornMult(f,mathlib.CubieCube.moveCube[Oa],e);f.init(e.ca,e.ea)}}return b?f.toFaceCube():f}},identStep:function(a,b){switch(a){case "PLL":return w(b);case "OLL":return f(b);case "C2CLL":return Oa(b)}},getIdentData:function(a){var b={PLL:[w,scramble_333.getPLLImage,0,21,0],
OLL:[f,scramble_333.getOLLImage,1,58,1],CLL:[Oa,scramble_222.getEGLLImage,0,40,1]};return a?b[a]:b}}}();var puzzleFactory=execMain(function(){function b(a,b){this.twistyScene=a;this.twisty=b}function Pa(h,Ra,Za,r){if(void 0==window.twistyjs)e=Pa.bind(null,h,Ra,Za,r),!z&&document.createElement("canvas").getContext?(z=!0,$.getScript("js/twisty.js",function(){e&&e()})):r(void 0,!0);else{for(var Na=/^q[2l]?$/.exec(h.style)?"q":"v",Qa=null,y=0;y<a.length;y++)if(a[y][0]==Za){Qa=a[y];break}if(y=!Qa||Qa[1]!=Na)Qa?Qa[1]=Na:(Qa=[Za,Na],a.push(Qa)),c="q"==Na?new twistyjs.qcube.TwistyScene:new twistyjs.TwistyScene,
Qa[2]=new b(c,null),Za.empty().append(Qa[2].getDomElement()),Qa[2].addMoveListener(Ra);Ra=h.puzzle;Ra.startsWith("cube")?(h.type="cube",h.faceColors=x(kernel.getProp("colcube"),[3,4,5,0,1,2]),h.dimension=~~Ra.slice(4)||3,h.stickerWidth=1.7):"skb"==Ra?(h.type="skewb",h.faceColors=x(kernel.getProp("colskb"),[0,5,4,2,1,3])):"mgm"==Ra?(h.type="mgm",h.faceColors=x(kernel.getProp("colmgm"),[0,2,1,5,4,3,11,9,8,7,6,10])):"pyr"==Ra?(h.type="pyr",h.faceColors=x(kernel.getProp("colpyr"),[3,1,2,0])):"sq1"==Ra?
(h.type="sq1",h.faceColors=x(kernel.getProp("colsq1"),[0,5,4,2,1,3])):"clk"==Ra&&(h.type="clk",h.faceColors=x(kernel.getProp("colclk"),[1,2,0,3,4]));h.scale=.9;Qa[2].twistyScene.initializeTwisty(h);Qa[2].twisty=Qa[2].twistyScene.getTwisty();Qa[2].resize();r(Qa[2],y)}}function x(a,b){var c=[];a=(a||"").match(/#[0-9a-fA-F]{3}/g)||[];for(var e=0;e<a.length;e++)c.push(~~kernel.ui.nearColor(a[b[e]],0,!0).replace("#","0x"));return c}var z=!1,c;b.prototype.keydown=function(a){return this.twistyScene.keydown(a)};
b.prototype.resize=function(){return this.twistyScene.resize()};b.prototype.addMoves=function(a){return this.twistyScene.addMoves(a)};b.prototype.applyMoves=function(a){return this.twistyScene.applyMoves(a)};b.prototype.addMoveListener=function(a){return this.twistyScene.addMoveListener(a)};b.prototype.getDomElement=function(){return this.twistyScene.getDomElement()};b.prototype.isRotation=function(a){return this.twisty.isInspectionLegalMove(this.twisty,a)};b.prototype.move2str=function(a){return this.twisty.move2str(a)};
b.prototype.moveInv=function(a){return this.twisty.moveInv(a)};b.prototype.toggleColorVisible=function(a){return this.twisty.toggleColorVisible(this.twisty,a)};b.prototype.isSolved=function(a){return this.twisty.isSolved(this.twisty,a)};b.prototype.moveCnt=function(a){return this.twisty.moveCnt(a)};b.prototype.parseScramble=function(a,b){return this.twisty.parseScramble(a,b)};var e=null,a=[];return{init:Pa}});var gripRecons=execBoth(function(){function b(){for(var b=[[2,0,"R ",100,3,null],[0,1,"R ",100,3,null],[2,1,"R2",150,4,null],[1,2,"R2",150,4,null],[1,0,"R'",100,5,null],[0,2,"R'",100,5,null],[2,2,"F ",150,6,null],[2,2,"F'",200,8,null],[0,0,"M ",300,21,11],[0,0,"M2",300,22,6],[0,0,"M'",200,23,15],[1,4,"x'",30,null,11],[2,3,"x ",30,null,15],[0,0,"y ",150,null,3],[0,0,"y'",150,null,1],[1,1,"y ",100,null,3],[1,1,"y'",100,null,1],[2,2,"y ",100,null,3],[2,2,"y'",100,null,1],[0,1,"G01",80,null,null],[1,
0,"G10",80,null,null],[0,2,"G02",80,null,null],[2,0,"G20",80,null,null],[1,2,"G12",120,null,null],[2,1,"G21",120,null,null]],e=0;3>e;e++){var a=[0,3,4][e];b.push([a,a,"D ",300,9,null]);b.push([a,a,"D2",250,10,null]);b.push([a,a,"D'",150,11,null]);b.push([a,a,"U ",100,0,null]);b.push([a,a,"U2",150,1,null]);b.push([a,a,"U'",200,2,null])}var h={U:"U",R:"L",D:"D",F:"F",E:"E",S:"S",y:"y"},x={" ":"'",2:"2","'":" "},z={0:0,1:3,2:4,3:1,4:2};a=[/^([URFDLBESyz])([ 2'])|G(\d)(\d)$/,function(a,b,c,e,y){return"G"==
a[0]?"G"+z[~~e]+z[~~y]:b in h?h[b]+x[c]:a}];var r=function(a){return null==a||7==~~(a/3)?a:3*[0,4,2,3,1,5,6,7,8][~~(a/3)]+(2-a%3)},Na=function(a){return null==a?a:{3:1,1:3}[a]||a},Qa=b.length;for(e=0;e<Qa;e++){var y=b[e];b.push([z[y[0]],z[y[1]],y[2].replace(a[0],a[1]),y[3]+30,r(y[4]),Na(y[5])])}return b}function Pa(b,e,a){var c=new z,x={};c.push([0,b]);x[b]=[0,b,null];for(b=0;;){var Za=c.pop();if(!Za)break;else if(Za[1]==a)break;else if(Za[0]>x[Za[1]][0])continue;b++;for(var r=x[Za[1]][0],Na=e(Za[1]),
Qa=0;Qa<Na.length;Qa++){var y=Na[Qa];if(!(y[1]in x)||r+y[0]<x[y[1]][0])x[y[1]]=[r+y[0],Za[1],y[2]],c.push([r+y[0],y[1]])}}return x}function x(c,e,a){for(var h=b(),x=Pa(-1,function(b){var y=[];if(-1==b){for(b=0;24>b;b++)if(!(e>>b&1))for(var r=0;5>r;r++)y.push([0,b<<3|r,[0,0,mathlib.CubieCube.rot2str[b]]]);return y}r=b>>8;var x=b>>3&31,Na=b&7;r==c.length&&(a>>x&1||y.push([0,-2,[0,0,"Gend ori="+x+" hand="+Na]]));for(b=0;b<h.length;b++){var Ra=h[b];if(Ra[0]==Na){var Ya=Ra[1],Sa=x,n=r;if(null!=Ra[4]){if(mathlib.CubieCube.rotMulM[x][Ra[4]%
18]+(18<=Ra[4]?18:0)!=c[r])continue;n++}null!=Ra[5]&&(Sa=mathlib.CubieCube.rotMult[Ra[5]][Sa]);y.push([Ra[3],n<<8|Sa<<3|Ya,Ra])}}return y},-2),z=-2,r=[];-1!=z;){var Na=x[z];if(!Na)break;Na.splice(2,0,z);r.push(Na);z=Na[1]}r.reverse();return r}var z=function(){function b(){this.arr=[]}b.prototype.pop=function(){var b=this.arr,a=b.pop();if(!b.length)return a;for(var c=b[0],x=0;;){var z=2*x+1;z+1<b.length&&b[z][0]>b[z+1][0]&&z++;if(z>=b.length||a[0]<=b[z][0])break;b[x]=b[z];x=z}b[x]=a;return c};b.prototype.push=
function(b){for(var a=this.arr,c=a.length,e;0<=(e=c-1>>1)&&b[0]<a[e][0];)a[c]=a[e],c=e;a[c]=b};return b}();return{getBestAlgorithmStr:function(b,e,a){var c=new mathlib.CubieCube;c.ori=0;b=b.split(/ +/);for(var Ra=[],z=0;z<b.length;z++){var r=c.selfMoveStr(b[z]);void 0!=r&&Ra.push(r)}return x(Ra,e,a)},getBestAlgorithm:x,getPrettyReconstruction:function(b,e){var a="",c=[],Ra=new mathlib.CubieCube;Ra.ori=0;var z=[];b=cubeutil.getPrettyMoves(b);for(var r=0;r<b.length;r++){for(var Na=b[r][0],Qa=0;Qa<Na.length;Qa+=
2){var y=Ra.selfMoveStr(Na.slice(Qa,Qa+2));void 0!=y&&c.push(y)}z.push(c.length)}Ra=x(c);var Wa=Na=0;Qa=cubeutil.getStepNames(e).reverse();for(r=0;r<Ra.length;r++)for(y=Ra[r][2];y>>8>=z[Na];){Wa=Ra.slice(Wa,r+1);for(var Ua=[],Xa=0;Xa<Wa.length;Xa++){var Ta=Wa[Xa];"G"!=Ta[3][2][0]&&Ua.push(Ta[3][2])}Wa=Ua.join(" ").replace(/ +/g," ");a+=Wa+(Qa[Na]?" // "+Qa[Na]+" "+(z[Na]-(z[Na-1]||0))+" move(s)":"")+"\n";Wa=r+1;Na++}return{prettySolve:a,totalMoves:c.length}},updateReconsOri:function(b){var c=b.split(" "),
a=[];b=[];for(var h=new mathlib.CubieCube,Ra=h.ori=0;Ra<c.length;Ra++){var z=/^(.*)@(\d+)$/.exec(c[Ra]);if(z){var r=h.selfMoveStr(z[1]);void 0!=r&&(a.push(r),b.push(~~z[2]))}}c=x(a);a=[];h=[];var Na=0;for(Ra=z=0;Ra<c.length;Ra++){var Qa=c[Ra];if("G"!=Qa[3][2][0]){var y=Qa[2]>>8;if(y==Na)for(Qa=Qa[3][2].split(" "),r=0;r<Qa.length;r++)Qa[r]&&h.push(Qa[r]);else{var Wa=b[y-1];for(r=0;r<h.length;r++)Na=z+Math.floor((Wa-z)*(r+1)/(h.length+1)),a.push(h[r].trim()+"@"+Na);a.push(Qa[3][2].trim()+"@"+Wa);Na=
y;z=Wa;h=[]}}}return a.join(" ").replace(/[EMS]/g,function(a){return["2-2Dw","2-2Lw","2-2Fw"]["EMS".indexOf(a)]})}}});var JSON;JSON||(JSON={});
(function(){function b(a){return 10>a?"0"+a:a}function Pa(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=h[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function x(b,c){var h,r,y=e,z=c[b];z&&"object"===typeof z&&"function"===typeof z.toJSON&&(z=z.toJSON(b));"function"===typeof Ra&&(z=Ra.call(c,b,z));switch(typeof z){case "string":return Pa(z);case "number":return isFinite(z)?""+z:"null";case "boolean":case "null":return""+z;
case "object":if(!z)return"null";e+=a;var Ua=[];if("[object Array]"===Object.prototype.toString.apply(z)){var Xa=z.length;for(h=0;h<Xa;h+=1)Ua[h]=x(h,z)||"null";var Ta=0===Ua.length?"[]":e?"[\n"+e+Ua.join(",\n"+e)+"\n"+y+"]":"["+Ua.join(",")+"]";e=y;return Ta}if(Ra&&"object"===typeof Ra)for(Xa=Ra.length,h=0;h<Xa;h+=1)"string"===typeof Ra[h]&&(r=Ra[h],(Ta=x(r,z))&&Ua.push(Pa(r)+(e?": ":":")+Ta));else for(r in z)Object.prototype.hasOwnProperty.call(z,r)&&(Ta=x(r,z))&&Ua.push(Pa(r)+(e?": ":":")+Ta);
Ta=0===Ua.length?"{}":e?"{\n"+e+Ua.join(",\n"+e)+"\n"+y+"}":"{"+Ua.join(",")+"}";e=y;return Ta}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var z=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,a,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},Ra;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,h){var r;a=e="";if("number"===typeof h)for(r=0;r<h;r+=1)a+=" ";else"string"===typeof h&&(a=h);if((Ra=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return x("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,e){var h,y,r=a[e];if(r&&"object"===typeof r)for(h in r)Object.prototype.hasOwnProperty.call(r,h)&&(y=c(r,h),void 0!==y?r[h]=y:delete r[h]);return b.call(a,e,r)}var e;a=""+a;z.lastIndex=0;z.test(a)&&(a=a.replace(z,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})})();var kernel=execMain(function(){function b(a,b){DEBUG&&console.log("[signal]",a,b);if(void 0!=Ra[a])for(var c in Ra[a])if(void 0===Ra[a][c][1]||Ra[a][c][1].exec(b[0]))Ra[a][c][0](a,b)}function Pa(a,b,c,e){void 0==Ra[b]&&(Ra[b]={});Ra[b][a]=[c,e]}function x(a,b){if(0>a)return"DNF";var c=r("useMilli");a=Math.floor(a/(c?1:10));var e=a%(c?1E3:100);a=Math.floor(a/(c?1E3:100));var h=r("timeFormat"),Sa=0,y=0;"h"==h?(h=a%60,Sa=Math.floor(a/60)%60,y=Math.floor(a/3600)):"m"==h?(h=a%60,Sa=Math.floor(a/60)):h=
a;var x=(b=b&&r("smallADP"))?["</span>"]:[];x.push(e);10>e&&x.push("0");100>e&&c&&x.push("0");x.push(h+"."+(b?'<span style="font-size:0.75em;">':""));10>h&&0<Sa+y&&x.push("0");0<Sa+y&&x.push(Sa+":");10>Sa&&0<y&&x.push("0");0<y&&x.push(y+":");return x.reverse().join("")}function z(){for(var a=r(tools.isCurTrainScramble()?"preScrT":"preScr","").split(" "),b=new mathlib.CubieCube,c=0;c<a.length;c++)b.selfMoveStr(a[c]);return b.ori||0}function c(a){if(0>=a)return a;var b=r("useMilli")?1:10;return Math.round(a/
b)*b}function e(){timer.refocus()}$.ajaxSetup({cache:!0});var a=$("<div />").css("visibility","hidden"),h=$('<div id="wndctn" />'),Ra={},Za=function(){function a(){var a=$(this).data("module");c(a);e(a)}function c(a){if(!ab[a][0].hasClass("enable")){for(var b in ab)ab[b][0].removeClass("enable");ab[a][0].addClass("enable");rb=a}}function e(a){setTimeout(function(){Wa.scrollTop(a?Wa.scrollTop()+ab[a][1].position().top-3:ob)},0)}function h(){ob=Wa.scrollTop();var a="kernel",b;for(b in ab)50<ab[b][1].position().top||
(a=b);c(a)}function r(a){a=$(this);var b=a.prop("name");if(a.is(".opthelp"))" [?] "==a.html()?a.html("<br> [?] "+$('strong[data="opt_'+a.attr("data")+'"]').parent().html().split("</strong>. ")[1]):a.html(" [?] ");else if(a.is("select"))Ra(b,a.val());else switch(a.prop("type")){case "checkbox":Ra(b,a.prop("checked"));break;case "color":if(a.attr("data")){var c=4*~~a.attr("data")-4,f=z(b);Ra(b,[f.slice(0,c),y.nearColor(a.val()),f.slice(c+4)].join(""))}else Ra(b,a.val());break;case "text":case "button":for(c in Oa)if(b in
Oa[c]){c=Oa[c][b];f=z(b);switch(a.val()){case "+":f=Math.min(f+1,c[3][2]);break;case "-":f=Math.max(f-1,c[3][1]);break;default:a.val().match(/^\d+$/)&&(f=+a.val().match(/^0*(.+)$/)[1],f=Math.max(Math.min(f,c[3][2]),c[3][1]))}c[0].val(f);Ra(b,f);break}}}function x(){ab={};Qa.empty();$a.empty();Wa.unbind("scroll").scroll(h);for(var b in MODULE_NAMES){0===rb&&(rb=b);var c=ab[b]=[$("<div>"),$("<tr>")];c[0].html('<span class="icon" style="font-size:1em;">'+Za[b]+"</span><span>"+MODULE_NAMES[b]+"</span>").addClass("tab").data("module",
b).click(a).appendTo(Qa);c[1].append($("<th>").html('<span class="icon">'+Za[b]+"</span> "+MODULE_NAMES[b].replace(/-?<br>-?/g,"")),$('<th class="sr">').html(PROPERTY_SR),$('<th class="sr">').html('<span class="icon"></span>'));$a.append(c[1]);for(var f in Oa[b]){c=Oa[b][f];var e=z(f),w=c[1],n=z("sr_"+f),Sa=$('<td class="sr">');c[4]&1&&Sa.append($('<input type="checkbox" name="sr_'+f+'"'+(n?" checked":"")+">").click(r));n=$("<td colspan=2>");if(0>w)if($.urlParam("debug"))w=~w;else continue;if(0==
w)c[0]=$('<input type="checkbox" name="'+f+'">').prop("checked",e).click(r),n.append($("<label>").append(c[0],c[2]));else if(1==w){c[0]=$('<select name="'+f+'">');var x=c[3][1],Ya=c[3][2];for(w=0;w<x.length;w++)c[0].append($("<option />").val(x[w]).html(Ya[w]));c[0].val(e);c[0].change(r);n.append(c[2],": ",c[0])}else if(2==w)c[0]=$('<input type="text" maxlength="4" name="'+f+'">').val(e).change(r),e=$('<input type="button" style="width: 1.5em;" value="+" name="'+f+'">').click(r),w=$('<input type="button" style="width: 1.5em;" value="-" name="'+
f+'">').click(r),n.append(c[2]+"("+c[3][1]+"~"+c[3][2]+")",$("<span>").css("white-space","nowrap").append(w,c[0],e));else if(3==w)c[0]=$('<input type="color" name="'+f+'">').val(e).change(r),n.append(c[2],": ",c[0]);else if(4==w){x=e.match(/#[0-9a-fA-F]{3}/g)||[];c[0]=$('<input type="text" name="'+f+'" style="display:none">').val(e);e=[];for(w=0;w<x.length;w++)e.push($('<input type="color" name="'+f+'" data="'+(w+1)+'" class="mulcolor">').val(y.nearColor(x[w],0,!0)).change(r));n.append(c[2],": ",
c[0],e)}else 5==w&&($.urlParam("debug")?(c[0]=$('<input type="text" name="'+f+'" readonly>').val(e),n.append(c[2]+" ("+f+"): ",c[0])):(c[0]=$('<input type="text" name="'+f+'" style="display:none">').val(e),n.append(c[2],c[0])));0<$('strong[data="opt_'+f+'"]').length&&n.append($('<span class="click opthelp" data="'+f+'"/>').html(" [?] ").click(r));$a.append($("<tr>").append(n,Sa))}}$a.append($('<tr style="height: 10em;">'));ab[rb][0].click()}function Na(){Ua&&(x(),Ua=!1);$(".opthelp").html(" [?] ");
e();y.showDialog([Xa,$.noop,void 0,$.noop,[RESET_LANG,function(){for(var a in f){var c=f[a];void 0===c||z(a)===c||a.startsWith("session")||(delete w[a],b("property",[a,c,"reset"]))}x();return!1}],[BUTTON_EXPORT.replace(/-?<br>-?/g,""),exportFunc.exportProperties]],"option",BUTTON_OPTIONS.replace(/-?<br>-?/g,""),function(){kb.find('select[name="lang"]').focus().blur();e()})}function z(a,c){void 0!=c&&void 0==f[a]&&(f[a]=c,b("property",[a,z(a),"set"]));w[a]===f[a]&&delete w[a];return a in w?w[a]:f[a]}
function Ra(a,c,f){for(var e in Oa)if(a in Oa[e]&&void 0!==Oa[e][a][0]&&Oa[e][a][0].val()!=c){Oa[e][a][0].val(c);break}z(a)!==c&&(w[a]=c,b("property",[a,z(a),f||"modify"]))}function Ta(){localStorage.properties=JSON.stringify(w)}function Va(){var a=localStorage.properties;void 0!=a&&""!=a&&(w=JSON.parse(a))}var w={},f={},Oa={},ab={},Ua=!0,Wa=$('<div class="noScrollBar">'),$a=$('<table class="opttable">'),Xa=$('<table class="options" />'),Qa=$("<td />"),kb=$("<td />").addClass("tabValue");Xa.append($("<tr />").append(Qa,
kb.append(Wa.append($a))));var rb=0,ob=0,Za={kernel:"",ui:"",color:"",timer:"",scramble:"",stats:"",tools:"",vrc:""};$(function(){Va();y.addButton("property",BUTTON_OPTIONS,Na,1);Pa("property","property",Ta)});return{get:z,set:Ra,reg:function(a,c,e,w,n,h){Ua=!0;void 0==Oa[a]&&(Oa[a]={});Oa[a][c]=[void 0,e,w,n,h];f[c]=n[0];f["sr_"+c]=2==(h&2);b("property",[c,z(c),"set"])},getSProps:function(){var a={},b;for(b in w)0!=b.indexOf("sr_")&&z("sr_"+b,!1)&&(a[b]=z(b));return a},setSProps:function(a){for(var b in f)0!=
b.indexOf("sr_")&&z("sr_"+b,!1)&&(b in a?Ra(b,a[b],"session"):Ra(b,f[b],"session"))},load:Va,reload:x}}(),r=Za.get,Na=Za.set,Qa=Za.reg;$(function(){var a=LANG_CUR||"en-us";Qa("kernel","lang",1,"Language",[a,(LANG_SET+"|h").split("|").slice(1),(LANG_STR+"|help translation").split("|")]);Na("lang",a);Qa("kernel","showad",0,PROPERTY_SHOWAD,[!0]);Pa("kernel","property",function(b,c){c[1]!=a&&"modify"==c[2]&&("h"==c[1]?confirm("Press OK to redirect to crowdin for translating cstimer")&&(window.location.href=
"https://crowdin.com/project/cstimer"):window.location.href="?lang="+c[1],Na("lang",a))},/^lang$/);if($.urlParam("lang")){var b="lang="+$.urlParam("lang");document.cookie=b+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/";$.clearUrl("lang")}});var y=function(){function c(a,b,c,f){sb=sb||$("#leftbar");sb.children(".c"+f).click(c).find("span:first").html(b)}function Sa(){var a=$(this),c=a.data("module");mb[c].button?(a.removeClass("enable"),kb&&mb[c].auto||mb[c].div.stop(!0,!0).fadeOut(200,function(a){return function(){b("button",
[a,!1])}}(c))):(a.addClass("enable"),b("button",[c,!0]),mb[c].div.stop(!0,!0).fadeIn(200),kb&&mb[c].auto&&mb[c].div.hide());mb[c].button=!mb[c].button;Na(c,mb[c].button)}function n(){var a=$(this).attr("data");Na(a,!r(a,!1))}function y(){if(document.fullscreenElement)document.exitFullscreen&&document.exitFullscreen();else{var a=$("body")[0];a.requestFullscreen&&a.requestFullscreen()}}function x(b,c,f,e){rb=!0;zb.removeClass().addClass("dialog").addClass("dialog"+c);vb.html(f);"option"==c?vb.prepend(Eb.unbind("click").click(y)):
"logo"==c&&vb.prepend(Bb.unbind("click").click(function(){location.reload(!0)}));xb.children().appendTo(a);b[0].appendTo(xb.empty());Kb.empty();2>b.length?xb.css("bottom","0"):xb.css("bottom","2.5em");void 0!=b[1]&&Kb.append(pb.unbind("click").click(function(){b[1]&&b[1]();z()}));void 0!=b[2]&&Kb.append(Db.unbind("click").click(function(){b[2]&&b[2]();z()}));ob.unbind("click");void 0!=b[3]&&ob.click(function(){b[3]&&b[3]();z()});for(c=4;c<b.length;c++)Kb.append($('<input type="button" class="buttonOK">').val(b[c][0]).unbind("click").click(function(a){return function(){a()&&
z()}}(b[c][1])));zb.stop(!0,!0).fadeTo(100,.98,function(){b[0].focus();e&&e()});ob.stop(!0,!0).fadeTo(100,.25)}function z(){zb.stop(!0,!0).fadeOut(100,function(){rb||(xb.children().appendTo(a),zb.removeClass(),e())});ob.hide();rb=!1}function Ra(){if(!kb){kb=!0;Ua();for(var a in mb)mb[a].auto&&mb[a].button&&mb[a].div.stop(!0,!0).fadeOut(100);b("ashow",!1)}}function Ta(){if(kb){kb=!1;Ua();for(var a in mb)mb[a].auto&&mb[a].button&&mb[a].div.stop(!0,!0).fadeIn(100);b("ashow",!0)}}function Ua(a){var b=
!1,c;for(c in mb)if(mb[c].button){b=!0;break}b&&!kb||a||jQuery.fx.off?sb.stop(!0,!0).fadeTo(200,1):sb.stop(!0,!0).fadeTo(200,.01)}function Wa(a){for(var b=0;7>b;b++)ub[b]=w(a.substr(4*b,4));Na("col-font",w(ub[0],0,!0));Na("col-back",w(ub[1],0,!0));Na("col-board",w(ub[2],0,!0));Na("col-button",w(ub[3],0,!0));Na("col-link",w(ub[4],0,!0));Na("col-logo",w(ub[5],0,!0));Na("col-logoback",w(ub[6],0,!0));Va()}function Va(){for(var a="ns"==r("uidesign")||"mtns"==r("uidesign")?Ab[1]:Ab[0],b="#000"==w(ub[0])?
-1:1,c=0;c<Hb.length;c++)a=a.replace("?",w(ub[Hb[c]&15],(Hb[c]<<20>>24)*b));Ib[0].styleSheet?Ib[0].styleSheet.cssText=a:Ib[0].innerHTML=a}function w(a,b,c){var f,e;b=b||0;(e=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/.exec(a))&&(f=[e[1]+e[1],e[2]+e[2],e[3]+e[3]]);(e=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/.exec(a))&&(f=[e[1],e[2],e[3]]);for(a=0;3>a;a++)f[a]=parseInt(f[a],16),f[a]+=b,f[a]=Math.min(Math.max(f[a],0),255),f[a]=Math.round(f[a]/17).toString(16);return"#"+(c?f[0]+f[0]+f[1]+
f[1]+f[2]+f[2]:f[0]+f[1]+f[2])}function f(a){return(a=/^\s*((#[0-9a-fA-F]{3}){7})\s*$/.exec(a))?(Wa(a[1]),!0):!1}function Oa(){return ub.join("")}function ab(){"mt"==r("uidesign")||"mtns"==r("uidesign")?$("html").addClass("mtds"):$("html").removeClass("mtds")}function Xa(){var a=$(window).width(),b=$(window).height(),c=r("view");(yb="m"==c?!0:"d"==c?!1:1.2>a/b)?$("html").addClass("m"):$("html").removeClass("m")}function nb(a,b){if("property"==a)switch(b[0]){case "color":if("u"!=b[1])if("i"==b[1]||
"e"==b[1]){var c=Oa(),e=prompt(EXPORT_CODEPROMPT,c);e&&e!=c&&!f(e)&&alert(COLOR_FAIL);Za.set("color","u")}else Wa(qb["r"==b[1]?~~(Math.random()*qb.length):b[1]-1]);break;case "font":"r"==b[1]?$("#container, #multiphase").css("font-family",["lcd","lcd2","lcd3","lcd4","lcd5"][~~(5*Math.random())]):$("#container, #multiphase").css("font-family",b[1]);break;case "col-font":case "col-back":case "col-board":case "col-button":case "col-link":case "col-logo":case "col-logoback":c=Mb.indexOf(b[0].substring(4,
b[0].length));e=b[1];e=w(e);ub[c]!=e&&(ub[c]=e,Na("color","u"),Va());break;case "zoom":$("html").removeClass("p70 p80 p90 p100 p110 p125 p150").addClass("p"+~~(100*b[1])),$(window).trigger("resize"),ab();case "view":Xa();break;case "uidesign":ab();Va();break;case "wndScr":$a("scramble","f"==b[1]);break;case "wndStat":$a("stats","f"==b[1]);break;case "wndTool":$a("tools","f"==b[1])}}function $a(a,b){mb[a]?b?mb[a].div.addClass("fixed"):mb[a].div.removeClass("fixed"):$($a.bind(void 0,a,b))}function fb(){f(window.location.hash)&&
(Za.set("color","u"),$.clearHash())}var mb={},kb=!1,rb=!1,ob,sb,tb=$("<div />"),wb={scramble:"scrHide",tools:"toolHide",stats:"statHide"},zb=$("<div />").addClass("dialog"),vb=$("<div />").addClass("title"),xb=$("<div />").addClass("value"),Kb=$("<div />").addClass("button"),pb=$('<input type="button" class="buttonOK">').val(OK_LANG),Db=$('<input type="button" class="buttonOK">').val(CANCEL_LANG);zb.append(vb,xb,Kb);var Eb=$('<span style="position:absolute;left:0.5em" class="click">&nbsp;&nbsp;</span>'),
Bb=$('<span style="float:left;" class="click">&nbsp;&nbsp;</span>'),Ib=$("<style>").appendTo("head"),Ab="html,body,textarea,#leftbar{color:?;background-color:?}#leftbar{border-color:?}#logo{color:?;border-color:?;background-color:?}.mybutton,.tab,.cntbar{border-color:?}html:not(.m) .mybutton:hover,.mybutton:active,.tab:active,.mywindow,.popup,.dialog{background-color:?}.mybutton.enable,.tab.enable,.cntbar,.selected,table.opttable tr th:first-child,div.helptable h2,div.helptable h3,.sflt div.sgrp{background-color:?}#gray{background-color:?}html:not(.m) .times:hover,html:not(.m) .click:hover,.times:active,.click:active,textarea{background-color:?}.click{color:?}.mywindow,.popup,.dialog,.table,.table td,.table th,textarea,.tabValue,.opttable td.sr,.sflt .bimg{border-color:?}html:not(.m) #avgstr .click:hover,#avgstr .click:active{background-color:?}select,input[type='button'],input[type='text']{color:?;background:?;border-color:?}input:disabled,table.opttable tr:nth-child(odd) td:first-child,div.helptable li:nth-child(odd){background:?}.mywindow::before,.popup,.dialog,#leftbar::before";
Ab=[Ab+"{box-shadow:0 0 .6em ?}",Ab+"{box-shadow:none}"];var qb="#000#efc#fdd#fbb#00f#ff0#000 #000#ffe#ff9#ff0#00f#fa0#000 #fff#600#668#408#ccf#0ff#000 #fff#000#555#888#aaa#000#aaa #000#fff#ccc#ddd#555#fff#888 #fff#227#9c3#563#580#dad#000 #9aa#023#034#b80#28d#678#034 #678#ffe#eed#ffe#28d#678#eed".split(" "),ub="#000 #efc #fdd #fbb #dbb #ff0 #000".split(" "),Hb=[0,1,545,5,549,6,546,2,3,0,546,4,546,545,0,3826,546,274,0],Mb="font back board button link logo logoback".split(" "),yb=!1;$(function(){ob=
$("#gray");Pa("ui","property",nb,/^(?:color|font|col-.+|zoom|view|uidesign|wnd(?:Scr|Stat|Tool))/);Qa("ui","zoom",1,ZOOM_LANG,["1","0.7 0.8 0.9 1 1.1 1.25 1.5".split(" "),"70% 80% 90% 100% 110% 125% 150%".split(" ")]);Qa("ui","font",1,PROPERTY_FONT,["lcd","r Arial lcd lcd2 lcd3 lcd4 lcd5 Roboto".split(" "),PROPERTY_FONT_STR.split("|").concat("Roboto")]);Qa("kernel","ahide",0,PROPERTY_AHIDE,[!0]);Qa("ui","uidesign",1,PROPERTY_UIDESIGN,["n",["n","mt","ns","mtns"],PROPERTY_UIDESIGN_STR.split("|")]);
Qa("ui","view",1,PROPERTY_VIEW,["a",["a","m","d"],PROPERTY_VIEW_STR.split("|")]);Qa("color","color",1,PROPERTY_COLOR,["1","uer12345678".split(""),PROPERTY_COLOR_STR.split("|")]);var a=PROPERTY_COLORS.split("|");Qa("color","col-font",3,a[0],["#000000"]);Qa("color","col-back",3,a[1],["#eeffcc"]);Qa("color","col-board",3,a[2],["#ffdddd"]);Qa("color","col-button",3,a[3],["#ffbbbb"]);Qa("color","col-link",3,a[4],["#0000ff"]);Qa("color","col-logo",3,a[5],["#ffff00"]);Qa("color","col-logoback",3,a[6],["#000000"]);
Qa("color","colcube",4,"Cube",["#ff0#fa0#00f#fff#f00#0d0"]);Qa("color","colpyr",4,"Pyraminx",["#0f0#f00#00f#ff0"]);Qa("color","colskb",4,"Skewb",["#fff#00f#f00#ff0#0f0#f80"]);Qa("color","colmgm",4,"Megaminx",["#fff#d00#060#81f#fc0#00b#ffb#8df#f83#7e0#f9f#999"]);Qa("color","colsq1",4,"SQ1",["#ff0#f80#0f0#fff#f00#00f"]);Qa("color","colclk",4,"Clock",["#f00#37b#5cf#ff0#850"]);Qa("color","col15p",4,"15 Puzzle",["#f99#9f9#99f#fff"]);Qa("color","colfto",4,"FTO",["#fff#808#f00#0d0#00f#bbb#ff0#fa0"]);Qa("ui",
"wndScr",1,PROPERTY_WNDSCR,["n",["n","f"],PROPERTY_WND_STR.split("|")]);Qa("ui","wndStat",1,PROPERTY_WNDSTAT,["n",["n","f"],PROPERTY_WND_STR.split("|")]);Qa("ui","wndTool",1,PROPERTY_WNDTOOL,["n",["n","f"],PROPERTY_WND_STR.split("|")]);$(".donate").appendTo(tb);c("donate",BUTTON_DONATE,function(){x([tb,0,void 0,0],"stats",BUTTON_DONATE.replace(/-?<br>-?/g,""))},5);sb.appendTo(h).mouseenter(function(){Ua(!0)}).mouseleave(function(){Ua()});setTimeout(Ua,3E3);zb.appendTo("body");$(window).resize(Xa);
$(window).bind("hashchange",fb);fb();"https:"!=location.protocol&&(document.title="[UNSAFE] "+document.title);if(navigator.wakeLock&&navigator.wakeLock.request){var b=function(){return navigator.wakeLock.request("screen").then(function(a){DEBUG&&console.log("[ui]","Screen Wake Lock is active");a.addEventListener("release",function(){DEBUG&&console.log("[ui]","Screen Wake Lock is released")})})};b();document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&b()})}});
return{addWindow:function(a,c,f,e,w,Oa){f.appendTo(h);f.addClass("mywindow");f.append($('<span class="chide" data="'+wb[a]+'"></span>').click(n));e=r(a,e);sb=sb||$("#leftbar");sb.children(".c"+Oa).addClass(e?"enable":"").data("module",a).click(Sa).find("span:first").html(c);mb[a]={button:e,div:f,auto:w};e?f.show():f.hide();b("button",[a,e])},addButton:c,showDialog:x,hideDialog:z,isDialogShown:function(a){return zb.hasClass("dialog"+a)},exportColor:Oa,nearColor:w,setAutoShow:function(a){(a=a||!r("ahide"))?
Ta():Ra();timer.showAvgDiv(a)},hide:Ra,show:Ta,isPop:function(){return rb},toggleLeftBar:Ua}}(),Wa=function(){function a(a,b,c,e,n){this.data=a;this.callback=b;this.select1=c;this.select2=e;this.reset(n)}function b(a,b,c){for(var e=0;e<a.length;e++)if($.isArray(a[e][1]))for(var n=0;n<a[e][1].length;n++){if(a[e][1][n][1]==b){c(e,n);return}}else if(a[e][1]==b){c(e,null);break}}var c=a.prototype;c.loadSelect2=function(a){e();a=a||0;var b=~~this.select1.prop("selectedIndex");b=(this.data[b]||[])[1];this.select2.empty();
if($.isArray(b)){this.select2.show();for(var c=0;c<b.length;c++)this.select2.append($("<option>").html(b[c][0]).val(b[c][1]));this.select2.prop("selectedIndex",a)}else this.select2.hide();this.onSelect2Change()};c.onSelect1Change=function(){this.loadSelect2()};c.onSelect2Change=function(){this.callback&&this.callback(this.getSelected())};c.getSelIdx=function(){var a=~~this.select1.prop("selectedIndex");if(!$.isArray((this.data[a]||[])[1]))return[a];var b=~~this.select2.prop("selectedIndex");return[a,
b]};c.getSelected=function(){var a=this.getSelIdx(),b=(this.data[a[0]]||[])[1];return 1==a.length?b:(b&&b[a[1]]||[])[1]};c.reset=function(a){a=a||this.getSelected();this.select1.empty();for(var b=0;b<this.data.length;b++)this.select1.append($("<option>").html(this.data[b][0]).val($.isArray(this.data[b][1])?b:this.data[b][1]));this.select1.unbind("change").change(this.onSelect1Change.bind(this));this.select2.unbind("change").change(this.onSelect2Change.bind(this));a&&this.loadVal(a)};c.loadVal=function(a){var c=
this.callback;this.callback=null;b(this.data,a,function(a,b){this.select1.prop("selectedIndex",a);this.loadSelect2(b)}.bind(this));this.callback=c};c.getValName=function(a){var c=null;b(this.data,a,function(a,b){c=this.data[a][0];null!=b&&(c+=">"+this.data[a][1][b][0])}.bind(this));return c};c.getValIdx=function(a){var c=null;b(this.data,a,function(a,b){c=100*a+(null==b?b:99)});return c};return a}();(function(){function a(a,n){if("bgImgO"==n[0])e.stop(!0,!0).fadeTo(0,n[1]/100);else if("bgImgS"==n[0])if("n"==
n[1])e.hide(),h="n";else if(e.show(),"u"==n[1])if("modify"==n[2]){var Sa=prompt(BGIMAGE_URL,b);y.exec(Sa)&&2048>Sa.length?(b=Sa,e.attr("src",b),Na("bgImgSrc",b)):(alert(BGIMAGE_INVALID),Na("bgImgS",h),Za.reload())}else b=r("bgImgSrc",b),e.attr("src",b);else"f"==n[1]?(storage.getKey("bgImgFile").then(function(a){a?e.attr("src",URL.createObjectURL(a)):"modify"!=n[2]&&(Na("bgImgS","n"),Za.reload())}),"modify"==n[2]&&(x.unbind("change").change(function(){if(x[0].files.length){var a=x[0].files[0];e.attr("src",
URL.createObjectURL(a));storage.setKey("bgImgFile",a)}}),x.click())):(h=n[1],e.attr("src",c[n[1]]))}var b="",c=["https://i.imgur.com/X7Xi7D1.png","https://i.imgur.com/K4zbMsu.png","https://i.imgur.com/Fsh6MaM.png"],e,h=0,y=/^((http|https|ftp):\/\/)?(\w(:\w)?@)?([0-9a-z_-]+\.)*?([a-z0-9-]+\.[a-z]{2,6}(\.[a-z]{2})?(:[0-9]{2,6})?)((\/[^?#<>\/\\*":]*)+(\?[^#]*)?(#.*)?)?$/i,x=$('<input type="file" id="imgfile" accept="image/*"/>');$(function(){e=$("#bgImage");Pa("bgImage","property",a,/^bgImg[OS]$/);Qa("ui",
"bgImgO",2,BGIMAGE_OPACITY,[25,0,100]);Qa("ui","bgImgS",1,BGIMAGE_IMAGE,["n",["n","u",0,1,2,"f"],BGIMAGE_IMAGE_STR.split("|").slice(0,-1).concat(1,2,3,"upload")])})})();var Ua=/^([\d]+(?:-\d+)?)?([FRUBLDfrubldzxySME])(?:([w])|&sup([\d]);)?([2'])?$/,Xa=function(){function a(){c&&clearTimeout(c)}function b(){a();timer.onkeydown({which:28})}var c=0;return{startLongTouch:function(){a();c=setTimeout(b,2E3)},clearLongTouch:a}}(),Ta=!0;$(function(){Qa("kernel","useMilli",0,PROPERTY_USEMILLI,[!1],1);Qa("kernel",
"timeFormat",1,PROPERTY_FORMAT,["h",["h","m","s"],["hh:mm:ss.XX(X)","mm:ss.XX(X)","ss.XX(X)"]],1);a.appendTo("body");h.appendTo("body");$(document).keydown(function(a){Ta=!0;b("keydown",a);timer.onkeydown(a);return Ta});$(document).keyup(function(a){Ta=!0;b("keyup",a);timer.onkeyup(a);return Ta});$("#container").bind("touchstart",function(a){$(a.target).is(".click")||(Xa.startLongTouch(),e(),timer.onkeydown({which:32}),a.preventDefault&&a.preventDefault())});$("#container").bind("touchend",function(a){Xa.clearLongTouch();
$(a.target).is(".click")||(e(),timer.onkeyup({which:32}),a.preventDefault&&a.preventDefault())});$("#container").bind("touch",function(a){$(a.target).is(".click")||a.preventDefault&&a.preventDefault()});$("#touch").remove();$("#container").mousedown(function(a){!$(a.target).is(".click")&&1==a.which&&r("useMouse")&&(timer.onkeydown({which:32}),a.preventDefault&&a.preventDefault())});$("#container").mouseup(function(a){!$(a.target).is(".click")&&1==a.which&&r("useMouse")&&(timer.onkeyup({which:32}),
a.preventDefault&&a.preventDefault())});try{document.cookie="fp="+$.fingerprint()+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"}catch(Ya){}});$(function(){for(var a="properties cachedScr devData wcaData gglData locData".split(" "),b=0;b<a.length;b++)try{JSON.parse(localStorage[a[b]]||"{}")}catch(lb){delete localStorage[a[b]]}var c=[];for(b=1;b<=~~r("sessionN",15);b++)a.push("session"+b);for(b=0;b<localStorage.length;b++){var e=localStorage.key(b);-1==a.indexOf(e)&&c.push(e)}for(b=0;b<c.length;b++)delete localStorage[c[b]]});
return{pretty:x,getProp:r,setProp:Na,regProp:Qa,getSProps:Za.getSProps,setSProps:Za.setSProps,regListener:Pa,addWindow:y.addWindow,addButton:y.addButton,pushSignal:b,showDialog:y.showDialog,hideDialog:y.hideDialog,isDialogShown:y.isDialogShown,exportColor:y.exportColor,clrKey:function(){Ta=!1},temp:a,reprop:Za.reload,loadProp:Za.load,parseScramble:function(a,b,c){a=a||"";c&&(a=r(tools.isCurTrainScramble()?"preScrT":"preScr")+" "+a);c=[];a=a.split(" ");for(var e,n,h,y=0;y<a.length;y++)if(e=Ua.exec(a[y]),
null!=e)if(h="FRUBLDfrubldzxySME".indexOf(e[2]),14<h)e="2'".indexOf(e[5]||"X")+2,h=[0,4,5][h%3],c.push([b.indexOf("FRUBLD".charAt(h)),2,e]),c.push([b.indexOf("FRUBLD".charAt(h)),1,4-e]);else{n=(e[1]||"").split("-");var x=~~n[1]||-1;n=12>h?~~n[0]||~~e[4]||("w"==e[3]||5<h)&&2||1:-1;e=(12>h?1:-1)*("2'".indexOf(e[5]||"X")+2);c.push([b.indexOf("FRUBLD".charAt(h%6)),n,e,x])}return c},getConjMoves:function(a,b,c){if(!a)return a;void 0===c&&(c=z());b&&(c=mathlib.CubieCube.rotMulI[0][c||0]);return a.replace(/[URFDLB]/g,
function(a){return"URFDLB".charAt(mathlib.CubieCube.rotMulM[c][3*"URFDLB".indexOf(a)]/3)})},getPreConj:z,blur:e,ui:y,TwoLvMenu:Wa,pround:function(a,b){return x(c(a),b)},round:c}});var exportFunc=execMain(function(){function b(){return storage.exportAll().then(function(a){a.properties=mathlib.str2obj(localStorage.properties);ob=JSON.stringify(a)})}function Pa(){var a=null;try{a=JSON.parse(this.result)}catch(zb){logohint.push("Invalid Data");return}x(a)}function x(a){var b=0,c=0,f=0;storage.exportAll().then(function(e){for(var w=1;w<=~~kernel.getProp("sessionN");w++){var n=mathlib.str2obj(e["session"+w]||[]),h=mathlib.str2obj(a["session"+w]||[]);n.length!=h.length&&(b++,c+=Math.max(h.length-
n.length,0),f+=Math.max(n.length-h.length,0))}return confirm(IMPORT_FINAL_CONFIRM.replace("%d",b).replace("%a",c).replace("%r",f))?Promise.resolve():Promise.reject()}).then(function(){if("properties"in a){var b=localStorage.devData||"{}",c=localStorage.wcaData||"{}",f=localStorage.gglData||"{}",e=localStorage.locData||"{}";localStorage.clear();localStorage.devData=b;localStorage.wcaData=c;localStorage.gglData=f;localStorage.locData=e;localStorage.properties=mathlib.obj2str(a.properties);kernel.loadProp()}storage.importAll(a).then(function(){location.reload()})},
$.noop)}function z(a){this.files.length&&a.readAsText(this.files[0],"UTF-8")}function c(a){return a&&/^[A-Za-z0-9]+$/.exec(a)}function e(a,b){try{return JSON.parse(localStorage[a])[b]||""}catch(vb){return""}}function a(a){if(a.target===f[0]||a.target===w[0])a=e("wcaData","cstimer_token");else{a=prompt(EXPORT_USERID,e("locData","id"));if(null==a)return;localStorage.locData=JSON.stringify({id:a,compid:e("locData","compid")});kernel.pushSignal("export",["account","locData"])}if(c(a))return a;alert(EXPORT_INVID)}
function h(a){return new Promise(function(b,c){var f=LZString.compressToEncodedURIComponent(ob);$.post("https://cstimer.net/userdata.php",{id:a,data:f},function(a){0==a.retcode?b(a):c(a)},"json").error(c)})}function Ra(b){var c=a(b);if(c){var f=$(b.target),e=f.html();f.html("...");h(c).then(function(){alert(EXPORT_UPLOADED)},function(){alert(EXPORT_ERROR)}).then(function(){f.html(e)})}}function Za(b){var c=a(b);if(c){var f=$(b.target),e=f.html();f.html("Check File List...");var w=function(){alert(EXPORT_ERROR)},
n=function(){f.html(e)};b=function(a){a=~~a.data;if(0==a)return alert("No Data Found"),n();var b=1;if(kernel.getProp("expp")&&(b=~~prompt("You have %d file(s), load (1 - lastest one, 2 - lastest but one, etc) ?".replace("%d",a),"1"),0>=b||b>a))return n();f.html("Import Data...");$.post("https://cstimer.net/userdata.php",{id:c,offset:b-1},h,"json").error(w).always(n)};var h=function(a){var b=a.retcode;if(0==b)try{x(JSON.parse(LZString.decompressFromEncodedURIComponent(a.data)))}catch(Ib){alert(EXPORT_ERROR)}else 404==
b?alert(EXPORT_NODATA):alert(EXPORT_ERROR);n()};kernel.getProp("expp")?$.post("https://cstimer.net/userdata.php",{id:c,cnt:1},b,"json").error(w).always(n):b({data:1})}}function r(){var a=e("gglData","access_token");a&&(hb.html("Check File List..."),$.ajax("https://www.googleapis.com/drive/v3/files?spaces=appDataFolder&orderBy=modifiedTime desc&q=name%3D%27cstimer.txt%27",{type:"GET",beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}}).success(function(b,c,f){b=b.files;if(0==b.length)return alert("No Data Found"),
Ta();c=1;if(kernel.getProp("expp")&&(c=~~prompt("You have %d file(s), load (1 - lastest one, 2 - lastest but one, etc) ?".replace("%d",b.length),"1"),0>=c||c>b.length))return Ta();hb.html("Import Data...");$.ajax("https://www.googleapis.com/drive/v3/files/"+b[c-1].id+"?alt=media",{type:"GET",beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}}).success(function(a){try{a=JSON.parse(LZString.decompressFromEncodedURIComponent(a))}catch(pb){return alert("No Valid Data Found"),Ta()}Ta();
x(a)}).error(function(){alert(EXPORT_ERROR+"\nPlease Re-login");Sa()});for(c=10;c<b.length;c++)$.ajax("https://www.googleapis.com/drive/v3/files/"+b[c].id,{type:"DELETE",beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}})}).error(function(){alert(EXPORT_ERROR+"\nPlease Re-login");Sa()}))}function Na(){var a=e("gglData","access_token");a&&(nb.html("Create File..."),$.ajax("https://www.googleapis.com/upload/drive/v3/files?uploadType=resumable",{type:"POST",contentType:"application/json",
data:JSON.stringify({parents:["appDataFolder"],name:"cstimer.txt"}),beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}}).success(function(a,b,c){a=c.getResponseHeader("location");nb.html("Uploading Data...");$.ajax(a,{type:"PUT",contentType:"text/plain",data:LZString.compressToEncodedURIComponent(ob)}).success(function(a,b,c){alert("Export Success");Ta()}).error(function(a,b,c){alert(EXPORT_ERROR);Sa()})}).error(function(a,b,c){401==a.status?alert("Timeout, Please Re-login"):
alert(EXPORT_ERROR);Sa()}))}function Qa(){b().then(function(){if(window.Blob){var a=new Blob([ob],{type:"text/plain"});mb.attr("href",URL.createObjectURL(a));mb.attr("download","cstimer_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+".txt")}kernel.showDialog([bb,0,void 0,0,[EXPORT_ONLYOPT,Wa],[EXPORT_ACCOUNT,Ua]],"export",EXPORT_DATAEXPORT)})}function y(a){a=LZString.compressToEncodedURIComponent(JSON.stringify(a));var b=prompt(EXPORT_CODEPROMPT,a);if(b&&b!=a){try{b=JSON.parse(LZString.decompressFromEncodedURIComponent(b))}catch(vb){return}return b}}
function Wa(){var a=JSON.parse(localStorage.properties),b={},c;for(c in a)c.startsWith("session")||(b[c]=a[c]);b=y(b);if(!b)return!1;a=JSON.parse(localStorage.properties);for(c in a)c.startsWith("session")&&(b[c]=a[c]);localStorage.properties=mathlib.obj2str(b);location.reload();return!1}function Ua(){var a={wcaData:localStorage.wcaData,gglData:localStorage.gglData,locData:localStorage.locData},b=y(a);if(!b)return!1;for(var c in a)b[c]&&(localStorage[c]=b[c],kernel.pushSignal("export",["account",
c]));location.reload();return!1}function Xa(){var a=JSON.parse(localStorage.wcaData||"{}");Va.unbind("click");w.unbind("click").removeClass("click");f.unbind("click").removeClass("click");a.access_token?(a=a.wca_me,eb.html("WCAID: "+a.wca_id+"<br>Name: "+a.name),Va.click(Ya.bind(void 0,!0)).addClass("click"),w.addClass("click").click(Za),f.addClass("click").click(Ra)):(eb.html(EXPORT_LOGINWCA),Va.click(function(){location.href=cb}).addClass("click"))}function Ta(){var a=JSON.parse(localStorage.gglData||
"{}");ab.unbind("click");hb.unbind("click").removeClass("click").html(EXPORT_FROMSERV+" (Google)");nb.unbind("click").removeClass("click").html(EXPORT_TOSERV+" (Google)");a.access_token?(a=a.ggl_me,Oa.html("Name: "+a.displayName+"<br>Email: "+a.emailAddress),ab.click(Sa.bind(void 0,!0)).addClass("click"),hb.addClass("click").click(r),nb.addClass("click").click(Na)):(Oa.html(EXPORT_LOGINGGL),ab.click(function(){location.href=jb}).addClass("click"))}function Ya(a){if(!a||confirm(EXPORT_LOGOUTCFM))delete localStorage.wcaData,
kernel.pushSignal("export",["account","wcaData"])}function Sa(a){if(!a||confirm(EXPORT_LOGOUTCFM))delete localStorage.gglData,kernel.pushSignal("export",["account","gglData"])}function n(a,b){if("atexpa"==a)if("id"==b[1]){var f=e("locData","id");c(f)&&"modify"!=b[2]||(f=prompt(EXPORT_USERID,f),c(f)?(localStorage.locData=JSON.stringify({id:f,compid:e("locData","compid")}),kernel.pushSignal("export",["account","locData"])):(null!=f&&alert(EXPORT_INVID),kernel.setProp("atexpa","n")))}else"wca"!=b[1]||
c(e("wcaData","cstimer_token"))||(alert("Please Login with WCA Account in Export Panel First"),kernel.setProp("atexpa","n"));else"export"==a&&("wcaData"==b[1]?Xa():"gglData"==b[1]&&Ta())}function db(){var a=kernel.getProp("atexpa","n");"n"!=a&&(b().then(function(){if("id"==a||"wca"==a){var b="id"==a?e("locData","id"):e("wcaData","cstimer_token");c(b)?h(b).then(function(){logohint.push("Auto Export Success")},function(){logohint.push("Auto Export Failed")}):(logohint.push("Auto Export Abort"),kernel.setProp("atexpa",
"n"))}else if("f"==a&&window.Blob){b=new Blob([ob],{type:"text/plain"});var f=$('<a class="click"/>');f.attr("href",URL.createObjectURL(b));f.attr("download","cstimer_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+".txt");f.appendTo("body");f[0].click();f.remove()}}),tb=sb=0)}function lb(){"n"!=kernel.getProp("atexpa","n")&&(tb+=1,tb>=kernel.getProp("atexpi",100)&&(sb&&clearTimeout(sb),sb=setTimeout(db,1E3)))}var cb="https://www.worldcubeassociation.org/oauth/authorize?client_id=63a89d6694b1ea2d7b7cbbe174939a4d2adf8dd26e69acacd1280af7e7727554&response_type=code&scope=public&redirect_uri="+
encodeURI(location.href.split("?")[0]),jb="https://accounts.google.com/o/oauth2/v2/auth?client_id=738060786798-octf9tngnn8ibd6kau587k34au263485.apps.googleusercontent.com&response_type=token&scope=https://www.googleapis.com/auth/drive.appdata&redirect_uri="+encodeURI(location.href.split("?")[0]),bb=$("<div />"),gb=$('<table class="expOauth expUpDown">'),eb=$("<td></td>"),Va=$("<tr>").append('<td class="img"/>',eb),w=$('<a class="click"/>').html(EXPORT_FROMSERV+" (csTimer)").click(Za),f=$('<a class="click"/>').html(EXPORT_TOSERV+
" (csTimer)").click(Ra),Oa=$("<td></td>"),ab=$("<tr>").append('<td class="img"/>',Oa),hb=$('<a class="click"/>'),nb=$('<a class="click"/>'),$a=$('<input type="file" id="file" accept="text/*"/>'),fb=$('<input type="file" id="file" accept="text/*"/>'),mb=$('<a class="click"/>').html(EXPORT_TOFILE),kb=$('<a class="click"/>').html(EXPORT_FROMSERV+" (csTimer)").click(Za),rb=$('<a class="click"/>').html(EXPORT_TOSERV+" (csTimer)").click(Ra),ob;gb.append($("<tr>").append($("<td>").append($('<a class="click"/>').html(EXPORT_FROMFILE).click(function(){$a.click()})),
$("<td>").append(mb)),$("<tr>").append($("<td>").append(kb),$("<td>").append(rb)),$("<tr>").append($("<td colspan=2>").append($('<a class="click"/>').html(EXPORT_FROMOTHER).click(function(){fb.click()}))));var sb,tb=0;$(function(){kernel.regListener("export","time",lb);kernel.regListener("export","property",n,/^atexpa$/);kernel.regListener("export","export",n,/^account$/);kernel.regProp("kernel","atexpa",1,PROPERTY_AUTOEXP,["n",["n","f","id","wca"],PROPERTY_AUTOEXP_OPT.split("|")]);kernel.regProp("kernel",
"atexpi",-2,"Auto Export Interval (Solves)",[100,[50,100,200,500],["50","100","200","500"]]);kernel.regProp("kernel","expp",0,PROPERTY_IMPPREV,[!1]);kernel.addButton("export",BUTTON_EXPORT,Qa,2);bb.append("<br>",$('<div class="expOauth">').append($('<table id="wcaLogin">').append(Va),$('<table class="expUpDown">').append($("<tr>").append($("<td>").append(w),$("<td>").append(f)))),$('<div class="expOauth">').append($('<table id="gglLogin">').append(ab),$('<table class="expUpDown">').append($("<tr>").append($("<td>").append(hb),
$("<td>").append(nb)))),gb);if(window.FileReader&&window.Blob){var a=new FileReader;a.onload=Pa;var b=new FileReader;b.onload=function(){0==stats.importSessions(TimerDataConverter(this.result))&&logohint.push("No session imported")};$a.change(z.bind($a[0],a));fb.change(z.bind(fb[0],b))}$.urlParam("code")?(eb.html(EXPORT_LOGINAUTHED),$.post("oauthwca.php",{code:$.urlParam("code")},function(a){"access_token"in a?(localStorage.wcaData=JSON.stringify(a),kernel.pushSignal("export",["account","wcaData"])):
(alert(EXPORT_ERROR),Ya())},"json").error(function(){alert(EXPORT_ERROR);Ya()}).always(function(){Xa();$.clearUrl("code")}),Qa()):Xa();if($.hashParam("access_token")){var c=$.hashParam("access_token");Oa.html(EXPORT_LOGINAUTHED);$.get("https://www.googleapis.com/drive/v3/about",{fields:"user",access_token:c},function(a){"user"in a?(localStorage.gglData=JSON.stringify({access_token:c,ggl_me:a.user}),kernel.pushSignal("export",["account","gglData"])):(alert(EXPORT_ERROR),Sa())},"json").error(function(a,
b,c){401==a.status?alert("Timeout, Please Re-login"):alert(EXPORT_ERROR);Sa()}).always(function(){Ta();$.clearHash()});Qa()}else Ta()});return{exportProperties:Wa,isValidId:c,getDataId:e,logoutFromWCA:Ya,wcaLoginUrl:cb}});var logohint=execMain(function(){function b(){c=void 0;Pa()}function Pa(){if(h)a.removeClass("hint"),a.html("ABOUT"),c=void 0;else if(void 0==c)if(c=z.shift(),void 0==c)a.removeClass("hint"),a.html("csTimer");else{a.html('<div class="pad" style="width: '+e.width()+'px; ">csTimer</div><span style="font-family: sans-serif; margin: 0 1em 0 1em;">'+c+'</span><div class="pad" style="width: '+e.width()+'px; position: absolute;">csTimer</div>');a.removeClass("hint");var b=.1*(c.length+15)+"s";a.css({"-webkit-animation-duration":b,
"-moz-animation-duration":b,"animation-duration":b});setTimeout(function(){a.addClass("hint")})}}function x(){var a=["Webkit","Moz","O","ms","Khtml"],b=document.createElement("div");if(void 0!==b.style.animationName)return!0;for(var c=0;c<a.length;c++)if(void 0!==b.style[a[c]+"AnimationName"])return!0;return!1}var z=[],c,e,a,h=!1,Ra=!1;$(function(){e=$("#logo");a=e.children().children();a.bind("oanimationend animationend webkitAnimationEnd",b);var c=$("#about"),r=c.children("h1").appendTo(kernel.temp).html();
e.mouseenter(function(){h=!0;Pa()});e.mouseleave(function(){h=!1;Pa()});e.click(function(){"https:"!=location.protocol&&confirm("Your access to csTimer is unsafe. Press OK for safe access.")&&(location.protocol="https:");c.show();kernel.showDialog([c,0,void 0,0],"logo",r)});c.hide();kernel.regProp("kernel","useLogo",0,USE_LOGOHINT,[!0],1);Ra=x()});return{push:function(a){Ra&&kernel.getProp("useLogo",!0)&&(z.push(a),Pa())}}});var timer=execMain(function(b,Pa,x,z,c,e){function a(a){a!=y&&(y=a,bb.renderUtil(),kernel.pushSignal("timerStatus",y))}function h(){var a=x("useIns");if(!0===a||"a"==a)return!0;if(!1===a||"n"==a)return!1;if("b"==a)return null==/^(333ni|444bld|555bld|r3ni)$/.exec(x("scrType"))}function Ra(b,c,f){if(c<y)for(b=y;b>c;b--)Wa[b]=f-Ua;a(Math.min(c,y)||1)}function Za(a){DEBUG&&console.log("[timer] update timer offset");if($("html").hasClass("m")&&!a){a=$("html").hasClass("toolt");var b=$("body").height(),
c=$("#scrambleDiv").is(":visible")?$("#scrambleDiv").outerHeight():0,f=$("#stats").offset().top||b;a?c+=$("#toolsDiv").is(":visible")?$("#toolsDiv").outerHeight():0:f=Math.min(f,$("#toolsDiv").offset().top||b);a=c+f-b;$("#timer,#rtimer").css({"padding-bottom":Math.max(-a,0),"padding-top":Math.max(a,0)})}else $("#timer,#rtimer").css({"padding-bottom":0,"padding-top":0})}function r(a){$.delayExec("timer_offset",Za.bind(null,a),50)}function Na(a){var b=a.which;if(17==b)if(a=a.originalEvent,1==a.location||
1==a.keyLocation)b=256;else if(2==a.location||2==a.keyLocation)b=257;return b}var Qa,y=-1,Wa=[],Ua,Xa,Ta=[],Ya=[],Sa={play:$.noop},n=Sa,db=Sa,lb=Sa,cb=Sa;void 0!==window.Audio&&(n=new Audio("data:audio/mp3;base64,//M4xAATSYYMAUxAAFnLyWJYln7RIAmBMD5PP7MLFh+v9gwMDBZyIn6JW5Ydg3AXBeH59S7vomiV+iILi7veiV///6In/wgoKGI7/+CbwQDH/gg7/5QEP5QMKs/q0cGlVL/ljQ06DnN/5yXn//M4xBEYsl6gAZmQASxhYji4zI0B9iVDm+gt1kQHSPZI/sgyZbMyXMRcn6bsgzk2M2J3LBLCgP5fSQQW7ikxUiqM2RpJiFP/f+Sw5hE80QQb//qbbzpPigBWhVKI71IfgLsD/GxF3etnsPVA//M4xA0YQhbUVc9IAYJsgBw94rEX5Zn32GB9ZJjM7WRsZByUJeG5tRzP///Pf5e/fnvj/6fnaROkqmWIVzyANulyUmy0y1+SM9qVIYeNThdSTt+Mr1dybYemoxoARO2BkwVpYBgP+hht2G3h//M4xAsXug7E9VgwA7hYwgWS6ksd1YZlz3SGJu9Tf9Nnh/QES1GjUas4DDPRsz6mUfOZ3RfFmnfdROWbCX//9enmoPCRJo0UuSOVVU+V6fM7/5rt///nr+Ei8PQumSH7twFhltkx/BAAAFsm//M4xAsYCnKY95k4ABXvCvTG+ZhpjLmGBPUOxY3uVbnhYC4i/qKgAl+s8ajiCcam+fG70NEYoMjT/vwWlhsMgsAjmx1l/gwsIok2JGjyp+n9yZUajYIgaaj///UfPJqlScmqAFAtFAtFottF//M4xAkXS38GX4EoArXUKwIPwD8ku8n7kImb5JCZqG+RnJ9PnezvO6//xA8+8g+tVcRFjauathAUMIAg8OCgodAezJxwoKOn/djpbbVGFFOQUZkIuqDVK7HdP6bt///jx1VoiZeQAK3+k2aJ//M4xAoX40MLHcg4AlCJVEGgLifPIFMGlO////2X6/6SbmA9JMKweDx2qhCSf/1Pfi1TVnqpD/55tUNLr/1qk5p6O2utkSc8w0003od7sk9roq6oceebQ46drqNR5yw+xpV1WIZlWJqoxBjD//M4xAkXIOsTGs4GXjzGCDgkBTJvzm+iZZL5OW2BQRQBdEfi9JG599JMa2qxISC8DMToZwZIgjTOMAiYj/MZDgIJ2fNmfZFBebWkAANCaSsG/c0cwBRxz//sPu///i3+hZvpd//JGObwoVXH//M4xAsXCPseWMMRI8KLBT5VTQZUaR+psYbbV0pcQAUJGtAxqeZjEEUMqUIQMQiIkmrChKdhgrzxluLhsqa6EwWtCAvBcUQPulnoHANyQxiijuwFEl1g/ilr/3+2/SqCVmRApRzgVEsmKcqa//M4xA0S+KLxv0lIAhehSRNXiyJCQgBBEhJYImmHiEERSGUIpCoBh7FgaUDLuoeCsFgayolLVHg0VO6w1LAXLfrLD8l9n2Tv//iIO5R88yRoxfLP60GESF0/nDMiacux54YAujYBIUHPuRFR//M4xCAcMsawAZhQAODgtEJMKyu88L8FgVhXC4IU1e74kCDGBMhIcWIyMSDf3GotCEFUPwGBgxceEQvKHf88kHCckfod///7Hj8w8uSD99yMyQyY3+Z/2c40nLu+VQKFvTbkoA8CijpNUkRQ//M4xA4UohrVn8YoAhQVpc+iJgUeAYryHnlIYPHDplFSoYxSxEVp6loHgsMDxxIWyzGo6lMY0vyiI4xUMpfvZ9v+WVkMpBIPIZyoJCTyKYKh1QEk3DdbkAgLmdaIAcZrvsZeRo1qN88WJe2b//M4xBoU0nq1t08oAkWHSapRERYpS1ZNEOpyCp0Z++Uhjcm/mvnRL9Dv6nRT3br/9a/daqivOpyT8pTzgdIm56oH3p//+tVpyS2yWSSWyWi261igBtlcTNuVMBDryxNmQvt1gMnh+q60Ycbs//M4xCUeAybGX5g4AkzzRWNhIP6tk+xpFjEOmsZHS80mXQ8xH5r/NJFqHl6Hdf4nJElTqabU3/uYY4PRuJghEUkNweCKPgJKVRTen+aNyZDdP////zFJsJA0nEDxuhAcDEgkEYjEkkgkjUJZ//M4xAwXgx7yX4IoAgCeXYgZ9oovHihUXv7Ob1OeQaRxi+hFflYXMXqt/92vlci/8+rttZXrai+ScQFMgn+Zv+1DvnPJDjTnnTd2UUIKCjyD55GfPCQixBcxX/z//BO33bDbW2PRBjsKUcCg//M4xA0UGqL2W8gQAtSYFFPQa5Z7v//KBhBHkIrkVz/oxFc4s7//5SlKvXuV35So77I900dv1///09f/SoslqKxA4cB8FoiEsBLGq7ksGoGKm+utulrklKqGKg0DDy3oNQvNH1uL2O9JZx/n//M4xBsUYQLiWsCMqo2CtyElAU930DGtGeUSEkYJXP///9Mk4BAkwIKORLN/LB2eh3K2nip0RZW3/DX/+HSxP/+s7spJrvAhfRAKXHSVTp/qR1yZwT//SsEOql7ChW9Q/OMbWcqTwk5mHqx3//M4xCgVUiJ0VEjKfJvMY0oqpWoY8RDupfzZhIqlN///0EmUDU9LHg0HOCodwVU8AnQaBUFfrKkt5CppLbfCQZI1EFRdF8qqmnnCQw/NfiYYhS57l/GgCLKyId/5H+VALvUe/75r5Xyx5n8e//M4xDENOQJoHjBKtLM67iEbxmn4ZnCdCLoqFQ9kxWiedXM7lVzLTKYul04P0UbpIFFAR5lxub6eFzRpwGWZebNGnFXF5s0//7s7O+bm5RpxRYJhmKEv//5UKiwtrUxBTUUzLjk5LjVVVVVV//M4xFsTMXHgAHsMHFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"),
db=new Audio("data:audio/mp3;base64,//M4xAASgV4kFUwQACCAxs7JZPjOBIJicEBEdOxLJ6/6P3mlKTvt5zn5CBCEbI2c7oc57qf/XyEZTnQOBgYGLP/5c/1ygICQEP//EYPh+XBAMQ+Xf/wfbFqFNoEQoEFQEAoFAB+AVB4IMjon//M4xBUaKkrKX48oAFfHUmf89zpuUPoIoH/EBQgAD2Doh8EcCEYrHQOfg5IqAYuEADFAFIHufiYfOwfFyFFBYcHRAO/9XIRpJyy1dxT/+MFHac/xYuZar/fl+6pO7///UgWBacsstohOUoCw//M4xAsYGUbNn8wwAAMnmZ+cDu8djuSCYwYOmCwwdXtktWsTP35ZVoIgRJ5bXk6qf1VUR/f45seXnP2/2UZaUqN4JCMUOZ/QXBZBJxhp0akGam/eSOtFNysFTrfvaRb86SJV/8UPUrp+zSj1//M4xAkWefLEAMMG6O9KX1ERIatSpfyIuESQIBoKtVAipJxzbQQL48CaGZwhwiYAxOflcSz+973gNziP9c/v5/0/PsIzp/FcDcOP1BFm4cWZOejhzT30AwOIEAKnIInmpCW45KAB9YbUZ/KO//M4xA4XWgcGXnnS9wSLgdo+4uIZd65P8BmAVW7Y7RdHPK0MI1NPaSAaisaW6PReado2a3tr53Z8shskyFmpyIk2z3asoILchTb6As0mgosPDodNkqQyWtyzkN9VAOkEPxM62BmWyoOLzh2U//M4xA8Wo0bYVmBTPhU4VyIfetOVNubJtJwyjshE7b2ZpJtlITxc1n/J8XP///PMvDxcXPIwoA2s1hyf////4epZ4XqCenBIuF2M//9QvWE0dqBj/xLGEsUPE0jEFdMCsIqJSpRLJos62sp0//M4xBMZMz68BGoN5Wl11LRQpL29v/6e3///639n///10zdl8ltVyki9kGU76S73MSKDiwVgLnoYqS8dkGQxmRWYCIdkDyemBEJt8sECJ2ygAEKBwu6AY8ogACBZO52rx//7v/////6///////M4xA0WszrIAAhS/P6/8eVUMxJ6xGbUUV4y5GK2pLIUAIUTHlEKNVUUhYRFAMCkbC4YGRWQHAYoRJsg2ygsiFIlCSHN7VkjS8W1rJ2LYOTYG2bOm0LajK9swZdtrdttoNb7LQuMMOlQ3VRo//M4xBEZGU8SWMPS0tIV9Mkfd/1pqxzFRKswhSTgwWwQgQwhCwHACoEwdQyVi3qp5kt5l4gufzHb1ftPqNOHREJQLGOQMB6sJEcosEZvF0clGJo0hQoSQm2gQNrHxOBCKpL/dt/t4P83PyNq//M4xAsWcU8uWU9gA8fiEqmxOxkCxR4akYDKVhCQ5ihISWhdx7Aacl4qxKysejiaMq0RKVKjw1EIlXx7kNyh+YhTYQTIuJ6qH1XMejdTtLLsn1CrEeL7987UtHZP8DNiNI+8XNT2ZP9/uW15//M4xBAYwl6sAZhQAFu1p+7QEoFEBV6g1nEhETM/vMKP1RNwuAaAayAeGj0oc6q/i2hhO+PSRjjjX/FwXAsFAWAaAQzeahzov+TmOYx/5pqev7f9jx4WAgbOC3//B9weLoMQSAOtHnOtlwEc//M4xAwYUX64AY94ADqMNCC4LhWjHbCcscWKI+gkIRT5wve2X0GfevrOLVi2pfW/m3v4L2Die0CG/rPiJDe/fhRLzvp9YpesOBPrWKfGcRgVO0IKLecj34HDowGogX0kfwaqGKkalAB07DTR//M4xAkVUXa4988oA96hJKmadYbXjLDpmV8xPo1k6wuL0PCxnMJGMhSyrzFKVW7Sh0OgUtEsVmKxerFKpf0Q4iHg87wUFGhQV/pgoKCjcgoKahBS/0L/v/XqRrkvl1uuAHPRw8YD6obbAZWC//M4xBIUulrVv0YYAsy5WpzC/FjkoESgR4UTt+wwhRQCEFLAKVdjpuarL+uveMFSGZM6nmZMaEOIWDlW/5/+0r5//SO+5f3a+jXFKZxDY3GQ/s1JvAR00Bwm8O7JGQqoMUFo+y7mpgYG2r2Z//M4xB4bcyaYAY+AANJE6Zpfv7lAmES+t//rfSMzhikn//v2djA6YGqX//rdb6ponW8jSfJ8ibkXHX//3y4gabqQ8Zw1DEgm8QXFPFzCAAEwcY4A9QdIpc9///iBPL////////3//6M9cxlS//M4xA8XA0bMC8A4AsjHnuerv7VVCh9rmHodKIIiiUY7mD6VLmXU0bsJZcfcyYaPisRxwBgOwHnjQeMG4TgVGQhDhUTEwinA9B6g6NmFprmIhYajYcHygjk2V4VncGh/pRDV74GwDcP0CGGr//M4xBITSQr3GHgSwgw5n97yKxUMaHpRn1/7kgiEwoT78OtpAEDCCkDp+fpVl4UQo5o98MXf/aeWXBfInf////X4SBp//7b0qgCIGi9cuqFSVYVE2qotihQ5KWrE2fOIiAMVuhpaCTI7/0Dw//M4xCMUaO6dskgKwLA0WAQe/sCeCz8RJOxE10qrOhphGAQkGn1nexseGgoPBWMWAhKWWRDTIK5UA5ZtAroFgVAmNWRLlixNLy/xbJKikZ29gwqyerczBhX/o6Kibf/0+/1bYxSlaitzCKf3//M4xDAVGx5cFEiKzEdAiCD1rIHqlm6GpKZeWj6Gh46mGkVqGKVhIPHby1Zy8pfCQqpAWOqAYgcSGJhoGRGZHsMxdJkWFmegGRWgKiMBC6xUMgJn8e2aBkUDxrjxVMCirFixoKioo3FW/4sS//M4xDoR2CIEAkiEADQVFG4q38BBIRhkyEm1TEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"),
lb=new Audio("data:audio/mp3;base64,//M4xAATEZoICUEQACAAAAAAVjGPIABjGMYxjGQhG/qc7znAAAQQhCEIBgZzn//nfIT///OACCAgCAIA+D4f1AgCDu/4Pg//BAEAQBD+D4Pg4CDogB8PlAQV/lyZtCAp/v2yc4zIHc/+UWAK//M4xBIZMvKIAZqQAQy6fRSNAxgABQc3y4i7ilB2l4t/20mIGbn//xmCKEgXDEr/+2w43WSBgVCJ/+mtTILdRIHCXMRzx3kQZD/9uympqz5UM0lui5eOEQNP/+r//N5Z/e8LkFm0AKioK/UN//M4xAwX0eawAdhAAUrHCF0Xyt8mH+FmJNO7GaWW0L6MPJXkR+2bc26/iL/uuZmIOmYGTZtbRo0aTfrOMMts4YKnqUUfYjnHGhktCIExYjMNlU6UuxpZy0mb/nM+giFCFaQQgI7LAFMBlv/y//M4xAsX4mbGXsIKnHpCwXElk/qwtoiMigBBRYYAMG6v9geFWqiha0rlTWVobWLi5m11Vmyl9ZVVaWYqKvf+yGsipuxhoULRZkKJGs9SX4wt/f67oUPCYo0ih1Et/Of4NOUpySxlRsf7ZHkf//M4xAoXSl68flmEulpKJzj4HRAjce2at13fUYlVa81Ao7xm5DvuRGYrbf1B1ZtrXZqLSczrZVqtDG85ZwpvKJarJLMnQxnUvK2//CiRQaXEHfWHyDUPGvKdAnuygnfJqiqqAaP/y5zeISIf//M4xAsWMzKwVBhTraE4JQMQ82CUXHSsAKLmIWCKLSuDZK6KLh/93cGBwg5oV5fy3/////5f/cqr14yU5IbSzejWjcl3qChaEaQIIGKuYrKMJvAILCg9DdUmbiO/5EAFgTgHV3kXGB5LzZhY//M4xBEXU0K8CkCTPLCnbWj/8LVfenb+v/9lMdhLkuZ////+h1e0////ZWuiu25JXU4gIdVOhgZI5auESAnYXYPtGLUVNkw7AZqT2UR1DRMOtEiMdJ1sojbqlksl0lij/vaaaWCAoUoOsOYj//M4xBIZWW7yWNMHKgmVLqEkBMvdl3bkthguWpAMJL5dmCBEMMvMFyiijcL0EPwsO/78WKl4Qx4ODxz9SJW37VEMH3l3Vxg5RrFjA8GI/soju6ZTz88GLg1nCLfLsQODdZMRym1ANb0zCehG//M4xAsU4SrBjgvMHF48ZpdH8XJp18bP0yXW60P4TU4WFxtISSN2WosJZ57tW1Wz5kjP9f1uU8oycSAssqs7rDT4iJCUaBn01bMlSOf1AZ5D3f4l4hWAC+VSUH1YSABA8DgzLD94INFxHhUG//M4xBYUgzq09kBFXhnywvc/I/749Tqi5YJPyMGAtWO9FRGXONgyKILofPtDMho9WsaEq/9P/9eZGWRgyPkdzI/V9NCXBB+oZTwx/5ZkohiZfFYWGUnhLK43nk8bR3byGp2OQCms4M5k3dYz//M4xCMUYUqgKsFNDAaLS6pDeQeM4oGqVgmMfV/0df0+e75mZaYIerAmcBUFUJFXNty0TEQM06bMf/jVoBMla1FwGt16zGA8NQefkpVAN0tnbzz1C06KzuUensbO9SV2RyYMOpFsarqJI2lK//M4xDAVQXalH1kYAK/2GsnDmUuZ6l+FJuXQlnlBR08KxEVjwEKmGf/rKgLDpVyG/5QgguSRiMOCQQOSyqMhGmSI0qtdpYGVsYNfgCHScsHWrAQqDrQckoEi/yCXUjSk/79aKf+tajBVaCz7//M4xDojc86+X5loAn+t02X//f7r9bplxtM2HeRmHqp0/93U2b3TlQ8xzl8e6kEFIG6mMEDI31/TTdvYvpM7oJjHGDJURsphZqqLhgSBcUZnkhwkoPw/f//5IHv//x5CJQBtaN/99owR/who//M4xAsVOd7mX8FAAsYFIH97r8ivyxIagvaf/+l6J/+44QAExgoMmpeCDHv///WmHpMo1Q7I9pQ4RgqFjCyGND0Wg0tx4RPLWFfkXvhVMOs//yhIeIwEkmhE332M1sAGU0ua+qxgESxhRLOA//M4xBUTyKKa/ghGBJqX1Y3AokRAV3UCp3w6dBqJRj/wKWbIhICjGB0iGjxLKlfqCvJMO5ICkg6GvhUSkQkBSAFIgsEgyk7VBP1OmAhQMBDCArw0eOsDoSPFSowOkiEYBe0CkAqAkUCIkggI//M4xCQSKB4U0hiCALz3UDICqAtg0sVLFSXCj0ZEJAXrLLHu3niRH8e4iSlS06dh0NJMQU1FMy45OS41qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),
cb=new Audio("data:audio/mp3;base64,//M4xAASgSo1hUMQAIAgkWD33c9AN9ELeOf9d85/5CanO6HOhCNO//+hGUIQ5lw/EDogh8uH9YYLg+/UCEoCCwfLh/5Q4JDgPwQD6gQcDhwT/WDjidYYH41Hok//1+vs9vT8Aq1dS2NBQo9g//M4xBUaQmL2X4dAALQ2Nv44Xi2W/qxHUQblV/6FjBgoCtYppT/xUXgeJR7XVZl//o6MtmtX//9V+PR4UurefhUiY9P/v+HYURyEZPn2FUyg0IfGvlAQE4nuPo+d//Of6skEArDfvp+iADgm//M4xAsWqQbBZ88wAI8Z4TAwlzUxOFRqMwLkt7PBjyPCAzN57EJBCEQ7AhBUQ9J+MoqjYeqLUyR06dGBVigkZSuiSkjqVA08t/50tzOeqOg0HZglErtv+wsDIx9qsCCVRS8ugA0eMpdgLnQG//M4xA8Y+N7OVg4eHLkxaawiYEAmMzp+pVi0QgyWuSbfaLu2JCPMS48djN2OjQPo8Gm+1MTkQMvbWocLgBnJur3ebwmcLuKCc5bAgWU5jkzRmh7dVJw5hgQGKdTD4rLwfD/TApD6T3GsZ+jo//M4xAoVsMbllgvSOoaajtekUtnRNv4yigtZDycK1KCSjIEDHoXy5yCw8KkJoEIdZuEOmhM5IuAjwKlxUSmGXpCh5P7V0accB0u6n2KTHs/+J5P4YiA5EjpdEQKAAbh9B4FwOix3NYbHKio4//M4xBIWU0bg9jgfcoo1b0Gx3zTUfScea3RH////////j/////6huEM0ydj1nWzrgtgR8MM7g1AmhYF2q9N5b1G5qxk0wODIi0UWAfZJ4g3yTn+q1Q5KzlECQfkaxWsgj0I/RRb/2/v//9Vn//M4xBcaw0rBl0FoAHpf////sy1rrb///X//9kzydJBKkiipmY6O8Yom4cw0Lw+HguQW4KkIodoUAHsGwDYC1iJEUSQl5CFMcBNJIqCiC8hVRGw6AP4LeBlCxD0BcBVDFxaPvr/f9//9/t/L//M4xAsX2j8eX404AtuxjqjEzRIDwC51mFMl6MqmiWPEEbHnxoe62msPLMPPJsxnnBRvKtc+e6/LDrecjN+Y6DpnoPkzmXvmkjvb8z+hpR/FQ0fVKkELosVELRvtIqHf8qqbyaTMDIgnGhw1//M4xAoXiV7Yy494AId4yhnCcPiNF1KghyHyKgIIj2VKqcJqpPDrepyth2GrAcR63Fmhap8aeZtrEPE1J7TUjYiapaTTJjUCZuxLP8534sKLvX6+C4hRnyd0DLYhIa//DdW4SwYlwqtK1Zk1//M4xAoWEa64AZloABtJuengjtCaHvhxARYZEw5I8VtBIRvIKJJF4vLXxLjIzQLyKNFvpHx3Eqo7UmkZGX47RhB7ukbKMdnZt/cwmKNFmSQRnale8WIoQL1XARX18OEI5r/AaBcP1ehjqz4B//M4xBAXUuasAY84AAD8RB4wufax6mmJf3WY046i/zjS3OU//PQ0uPKg3dB48anHo0z5NmGhojnMTOHWGhxU1f/5U51m2tOpr+v//PtY2etxwtYLAVa3Fv/kFQpAY3wDgA//5BYdMtqpa7qi//M4xBEVET7Bt9iAAKTOTxnaPGEt9Kbeq7T3to8ZWvAPiGSMzEig4TiSjIqpKYpmyNlq9dSq+kg99n99MvhEXLFp27/U0OmrQK7fT6LGtJPVSABDsRjmAGH14mKnQlMUeVmib52Ev1vKSCGb//M4xBsU6MK5v1gYAMWnvrRa/zK6+rut4USRcWHkoCREFWw8SVVdAQdBo8HRLeCsc4JPLfaeI5aSK/4dEqVAwHyIVGvtUgAIKPKv/z/gAHxAkOJGEARIEghZOYmCTCxgEhs/SVqNzJ2S2uDz//M4xCYei86plZpoAGGcep4x54vonz6NvVVur6+YKXNqmQSPaS0UEqnQ7amo+j//Q01ejW3/6v+7et+gTDpTX//9PU03WmbvtQLhoMASZsSR0iCmE8GACQf//7f//xwgr9UCSgS2iC2oEfkI//M4xAoUC0LuX8EoAkdUf8b5/89Cd0///qqi5G///yodv50YXKLlExcABN0KYgoJoVxgmKkDpSOAwmKCwFDrGPRuzt6/00Zyr///1+jWOR0U0WKqEAls1wn0iBHCH/MIKAQktE4BU5EiRASW//M4xBgTIbrOXgmKlv/7y8scFEknl8///NZQ6KwiKiQecrf//5qVYxpQ64iCRKFDQVT88VBU7/1Q7/9raCJGRCTaAkYG01QNZFtww1LYo1EwKhNwSArlhI8Ej0OiURAIed1FQEPksJu8qIiS//M4xCoSsGIcFDBGQIqWW7wCAvkbSQiKjDp5YSDgdyxYe4986HQ0HdodEpUiSkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"));
var jb,bb=function(){function a(a){a&&void 0==Ya?(requestAnimFrame(b),Ya=1,jb=0):a||void 0==Ya||(Ya=void 0);Va=Za?Na:Ra}function b(a){if(0!=y&&-1!=y&&-4!=y&&void 0!=Ya){a=$.now()-Ua;if(-3==y||-2==y&&h())w(Va,"n"!=x("timeU")?17E3<a?"DNF":15E3<a?"+2":15-~~(a/1E3):TIMER_INSPECT);else{var c=z(0<a?a:0,!0);w(Va,{u:c,c:c.replace(/([.>])(\d)\d+(<|$)/,"$1$2$3"),s:c.split(".")[0],n:TIMER_SOLVE,i:TIMER_SOLVE}[x("timeU")])}-3==y||-2==y?(Va!==Na&&(12E3<=a?w(Na,'<div style="font-family: Arial;">Go!!!</div>'):8E3<=
a&&w(Na,'<div style="font-family: Arial;">8s!</div>')),"n"!=x("voiceIns")&&(c=Sa,7900<=a&&7900>jb&&(c="1"==x("voiceIns")?n:lb),11900<=a&&11900>jb&&(c="1"==x("voiceIns")?db:cb),c.volume=~~x("voiceVol")/100,c.play())):Va!==Na&&w(Na,"");jb=a;requestAnimFrame(b)}}function f(a){Ra.css("color",a);Na.css("color",a)}function e(a){w(Za?Na:Ra,(void 0!=a?z(a,!0):"--:--")+'<div class="insplabel">&#59062;</div><div class="difflabel"/>')}function w(a,b){var c=a===Na?1:0;Pa[c]!==b&&(Pa[c]=b,a.html(b))}function Oa(a,
b){eb=b?eb+a:a}function r(a,b){for(var c=[],f=b;f>a;f--)c.push(z(Wa[f]-~~Wa[f+1],!0));return a==b||1==b||0==c.length?"":'<div style="font-size: 0.65em">='+c.join("<br>+")+"</div>"}var Ra,Na=$("<div />"),Va,Ya,ab=$('<div style="line-height:0.6em;" />'),Qa=$('<div style="position:relative;font-size:0.3em;">'),hb=$('<span class="click" style="position:relative;z-index:20;font-family:Arial;">'),eb="",Pa=["",""],Za=!1,jb=0,nb,qb=!1;$(function(){Ra=$("#lcd");$("#multiphase").append(Na,ab,Qa.append(hb))});
return{setRunning:a,color:f,val:e,setEnable:function(a){a?Ra.show():Ra.hide()},append:function(a){w(Na,Na.html()+a)},setStaticAppend:Oa,fixDisplay:function(b,e){var w=!1;0==y?bb.color("red"):-1==y||-4==y?f(b&&e?h()?"#0d0":"#f00":""):-2==y?(f(b&&e?"#0d0":""),w=h()):(-3==y?f(b&&e?"#dd0":"#f00"):f(b?"#0d0":""),w=!0);c.setAutoShow(0==y||-1==y);a(w)},renderUtil:function(a){h()&&-1!=[-1,-4].indexOf(y)&&x("showIns")?(Ra.addClass("insp"),Na.addClass("insp")):(Ra.removeClass("insp"),Na.removeClass("insp"));
a&&-1==y?qb=!0:-1!=y&&(qb=!1);a=-2<y&&!qb?r(Math.max(0,y),Math.max(Wa.length-1,y)):"";ab.html(a+eb);if(-1==y||0==y){if(-1!="sb".indexOf(x("input")))bb.val(Xa);else if(bb.val(qb?0:Wa[1]||0),!qb&&Wa[1]&&Ta&&Ta[1]&&"n"!=x("showDiff")){a=Wa[1]-Ta[1];var b=$(".difflabel").html("("+(0<a?"+":0==a?"":"-")+z(Math.abs(Ta[1]-Wa[1]))+")"),c=x("showDiff");0!=a&&"b"!=c&&b.css("color",0<a==("gr"==c)?"green":"red")}if(nb&&nb[4]&&!qb){Qa.show();var f="string"==typeof nb[4][1]&&nb[4][1]||tools.getCurPuzzle()||"333";
a="333"==f?recons.getMoveCnt(nb[4][0]):nb[4][2];b=STATS_REVIEW;0<a&&(b=a+" turns<br>"+~~(1E5*a/nb[0][1])/100+" tps");hb.html(b).unbind("click").click(function(){replay.popupReplay(nb[1],nb[4][0],f)})}else Qa.hide()}else Qa.hide()},setRecons:function(a){nb=a},reset:function(b){Za=b;Ra.empty();Na.empty();Za?(Ra.removeClass("activetimer"),Na.addClass("activetimer")):(Ra.addClass("activetimer"),Na.removeClass("activetimer"));Pa[0]="";Pa[1]="";Oa("",!1);e(0,Za);a(!1);gb.updatePos(Za)}}}(),gb=function(){function a(a){a&&
(e.html(a[0]).unbind("click"),void 0!=a[2]?e.addClass("click").click(function(){a[4](a[2][0],a[2][1],a[2][2],a[2][3])}):e.removeClass("click"),w.html(a[1]).unbind("click"),void 0!=a[3]?w.addClass("click").click(function(){a[4](a[3][0],a[3][1],a[3][2],a[3][3])}):w.removeClass("click"),Wa=a[5]?a[5][0].slice():[0],Ta=a[6]?a[6][0].slice():null,bb.setRecons(a[5]),bb.renderUtil())}function c(b,c){Oa=c;a(Oa)}var f,e=$('<span class="click">'),w=$('<span class="click">'),n=!0,h=!1,Oa;$(function(){f=$("#avgstr").append(e,
"<br>",w);b("timer","avg",c)});return{showAvgDiv:function(a){a&&x("showAvg")?n||(f.show(),n=!0):n&&(f.hide(),n=!1)},updatePos:function(b){h!=!!b&&((h=!!b)?f.appendTo("#multiphase"):f.appendTo("#container"),a(Oa))}}}(),eb=function(){function b(){void 0!=r&&(clearTimeout(r),r=void 0)}function c(){if(-1==y||-3==y)-1==y&&(bb.reset(z),f()),a(-2),r=void 0,bb.fixDisplay(!0,!0)}function f(){z&&(Sa.is(":hidden")&&(Sa.show().appendTo("#container"),Sa.empty().append(Ra)),Sa.css("height",x("timerSize")*$("#logo").width()/
12+"px"),image.llImage.drawImage("GGGGGGGGGGGGGGGGGGGGG",[],Ra[0]))}function w(a,b,c){var f=Na;255<a?Na=b?Na&~(1<<a):Na|1<<a:c.ctrlKey||(Na=0);return 32==a||3==f&&255<a||3==Na}var n=0,Oa=0,r=void 0,Sa=$("<div>"),Ra=$('<canvas style="height:100%;">'),z=!1,Na=0;return{onkeydown:function(Sa,Na){if(28!=Sa){var z=w(Sa,0,Na);if(!DEBUG||z){var Ra=$.now();if(!(200>Ra-n)){if(0<y){n=Ra;Wa[y]=n-Ua;if(27==Sa){Ra=[-1];for(var Va=1;y<Wa.length;)Ra[Va++]=Wa[y++];Wa=Ra;a(1)}a(y-1);0==y&&(Oa=n,32!=Sa&&a(-1),bb.fixDisplay(!1,
z),e("time",Wa))}else z?y==(h()?-3:-1)&&void 0==r?r=setTimeout(c,x("preTime")):-1==y&&h()&&(a(-4),f()):27==Sa&&-1>=y&&(b(),a(-1),bb.fixDisplay(!1,!1),f());bb.fixDisplay(!0,z);z&&kernel.clrKey()}}}},onkeyup:function(c,f){a:{var e=w(c,1,f);var n=$.now();if(e)if(0==y)a(-1);else if(-1==y||-3==y){if(b(),500>n-Oa){bb.fixDisplay(!1,e);e=void 0;break a}}else if(-2==y){var r=h()?n-Ua:0;Ua=n;Wa=[17E3<r?-1:15E3<r?2E3:0];a(x("phases"));z&&"333"==tools.getCurPuzzle()&&(n=tools.getCurScramble(),image.llImage.draw(3,
n[1],Ra[0]))}else-4==y&&(Ua=n,a(-3));bb.fixDisplay(!1,e);e&&kernel.clrKey();e=void 0}return e},reset:function(a){void 0!=r&&(clearTimeout(r),r=void 0);n=Oa=0;(z="l"==a)?f():Sa.hide()}}}(),Va=function(){var a=$('<textarea id="inputTimer" rows="1" />'),b=0;$(function(){$("#lcd").after(a)});return{setEnable:function(b){b?a.show():a.hide();b?(nb=a,a[0].select(),a.unbind("click").click(function(){a[0].select()})):nb=void 0},parseInput:function(){var c=/^\s*(?:[\d]+\. )?\(?(DNF)?\(?(\d*?):?(\d*?):?(\d*\.?\d*?)(\+)?\)?(?:=([\d:.+]+?))?(?:\[([^\]]+)\])?\)?\s*(?:   ([^@].*?))?(?:   @(.*?))?\s*$/,
f=/^(\d*?):?(\d*?):?(\d*\.?\d*?)$/,w=a.val(),n=$.now();if(/^[\s\n]*$/.exec(w)&&n>b+500)kernel.pushSignal("ctrl",["scramble","next"]),b=n;else for(w=w.split(/\s*[,\n]\s*/),n=0;n<w.length;n++){var h=c.exec(w[n]);if(null!=h&&""!=h[4]){var Oa=~~Math.round(36E5*Math.floor(h[2])+6E4*Math.floor(h[3])+1E3*parseFloat(h[4]));if(!(0>=Oa)){if(""==h[2]&&""==h[3]&&/^\d+$/.exec(h[4])){var r=kernel.getProp("intUN")||20100;Oa=Math.floor(Oa/(r%1E4));var y=Math.floor(Oa/1E7);var Sa=Math.floor(Oa/1E5)%100;var x=Oa%1E5;
2E4<r?Oa=6E4*(60*y+Sa)+x:1E4<r&&(Oa=6E4*(100*y+Sa)+x)}"DNF"==h[1]?r=-1:"+"==h[5]&&2E3<Oa?(r=2E3,Oa-=2E3):r=0;y=[];if(h[6]){y=h[6].split("+").reverse();Sa=Oa;for(x=0;x<y.length;x++){var z=f.exec(y[x]);if(null==z){Sa=1E8;break}Sa-=Math.round(36E5*Math.floor(z[1])+6E4*Math.floor(z[2])+1E3*parseFloat(z[3]));y[x]=Math.max(0,Sa)}Math.abs(Sa)>10*y.length?y=[]:y.pop()}Sa=h[7]||"";x=h[8];Wa=[Sa,x,[r,Oa].concat(y)];(Oa=mathlib.str2time(h[9]))&&Wa.push(Oa);e("time",Wa);kernel.clrKey()}}}a.val("")},clear:function(){a.val("")}}}(),
w=function(){function b(b){if(c){var n=$.now();if(b.on){Xa=b.time_milli;bb.renderUtil();if(b.running){if(-3==y||-4==y)w=n-Ua-Xa,bb.reset();Wa=[0];a(1);Ua=n-Xa;bb.fixDisplay(!1,!0)}else-1!=y||!h()||0!=Xa||"R"!=b.signalHeader&&"L"!=b.signalHeader?-3!=y&&-4!=y&&(a(-1),bb.fixDisplay(!1,!0)):(a(-3),Ua=n,bb.fixDisplay(!1,!0));f.running&&!b.running&&0!=b.time_milli&&(w=h()?17E3<w?-1:15E3<w?2E3:0:0,Wa=[w,~~Xa],e("time",Wa));b.greenLight?bb.color("#0d0"):b.rightHand&&b.leftHand?bb.color("#f00"):-4==y?bb.color("#0d0"):
bb.color("");bb.setRunning(-3==y||b.running&&67!=b.signalHeader)}else Xa=void 0,a(-1),bb.fixDisplay(!1,!0);f=b}}var c=!1,f={},w;return{setEnable:function(a){(c="s"==a||"m"==a)?(stackmatutil.setCallBack(b),stackmatutil.init(a,!1).then($.noop,function(){kernel.showDialog([$("<div>Press OK To Connect To Stackmat</div>"),function(){stackmatutil.init(a,!0).then($.noop,console.log)},0,0],"share","Stackmat Connect")})):stackmatutil.stop()},onkeyup:function(b){var c=$.now();32==b&&-4==y&&(a(-3),bb.reset(),
Ua=c,bb.fixDisplay(!1,32==b));32==b&&kernel.clrKey()},onkeydown:function(b){var c=$.now();32==b&&-1==y&&h()&&f.on&&0==f.time_milli?(a(-4),Ua=c,bb.fixDisplay(!0,!0)):27==b&&-1>=y&&(a(-1),bb.fixDisplay(!0,!1));32==b&&kernel.clrKey()}}}(),f=function(){function b(b){if(c)switch(b.state){case GanTimerState.HANDS_ON:bb.color("#f00");break;case GanTimerState.HANDS_OFF:bb.fixDisplay(!1,!0);break;case GanTimerState.GET_SET:bb.color("#0d0");break;case GanTimerState.IDLE:f=0;0<Xa||-1!=y?(Xa=0,a(-1),bb.reset(),
bb.fixDisplay(!1,!0)):-1==y&&h()&&(a(-3),Ua=$.now(),bb.fixDisplay(!1,!0));bb.renderUtil();break;case GanTimerState.RUNNING:-3==y&&(f=$.now()-Ua,f=h()?17E3<f?-1:15E3<f?2E3:0:0);Ua=$.now();bb.reset();Wa=[f];a(1);bb.fixDisplay(!1,!0);break;case GanTimerState.STOPPED:Xa=b.recordedTime.asTimestamp;Wa[1]=Xa;a(-1);bb.renderUtil();bb.fixDisplay(!1,!0);e("time",Wa);break;case GanTimerState.DISCONNECT:Xa=void 0,a(-1),bb.renderUtil(),bb.fixDisplay(!1,!0)}}var c=!1,f=0;return{setEnable:function(f){(c="b"==f)?
(Xa=void 0,kernel.showDialog([$("<div><br><br><b>Press OK to connect to GAN Smart Timer</b><br><br>If you have enabled WCA inspections in settings, use GAN Smart Timer RESET button to start/cancel inspection timer.</div>").append(jb),function(){GanTimerDriver.connect().then(function(){GanTimerDriver.setStateUpdateCallback(b);Xa=0;a(-1);bb.reset();bb.renderUtil();bb.fixDisplay(!1,!0)})["catch"](function(a){alert(a)})},0,0],"share","GAN Smart Timer")):GanTimerDriver.disconnect()},onkeyup:$.noop,onkeydown:$.noop}}(),
Oa=function(){function c(b,c,Oa){if(1!=c){Oa=Oa||$.now();if(-3==y||-2==y){if(Sa.isRotation(b)&&!/^(333ni|444bld|555bld)$/.exec(Qa)){0==c&&Ya[0].push([Sa.move2str(b),0]);return}Na=h()?Oa-Ua:0;Ua=Oa;Va=0;Wa=[17E3<Na?-1:15E3<Na?2E3:0];a(3==hb&&"r3"!=Qa?cubeutil.getStepCount(x("vrcMP","n")):1);var r=Ya[0];Ya=[];for(var z=0;z<y;z++)Ya[z]=[];Ya[y]=r;Ta=y;Ra(Ta,Sa.isSolved(x("vrcMP","n")),Oa);w();bb.fixDisplay(!1,!0)}if(1<=y){/^(333ni|444bld|555bld)$/.exec(Qa)&&!Sa.isRotation(b)&&Sa.toggleColorVisible(0==
Sa.isSolved(x("vrcMP","n")));0==c&&Ya[y-1].push([Sa.move2str(b),Oa-Ua]);if(2==c){var kb=Sa.isSolved(x("vrcMP","n"));Ra(Ta,kb,Oa);w()}2==c&&0==kb&&(Va+=Sa.moveCnt(),/^r\d+$/.exec(Qa)&&0!=ab.length?("r3"!=Qa&&hb++,f(!0),n()):(bb.setStaticAppend(""),a(-1),$("#lcd").css({visibility:"unset"}),bb.fixDisplay(!1,!0),Ya.reverse(),e("time",["",0,Wa,0,[$.map(Ya,cubeutil.moveSeq2str).filter($.trim).join(" "),cb,Va]])))}}}function f(a){if((!lb||x("input")!=z)&&db){lb=!0;z=x("input");var b=hb;b||(b=3);b={puzzle:"cube"+
b,allowDragging:!0};-1!=["skb","mgm","pyr","sq1","clk"].indexOf(cb)&&(b={puzzle:cb});b.style=x("input");puzzleFactory.init(b,c,Pa,function(b,c){Sa=b;c&&!Sa&&(Pa.css("height",""),Pa.html("--:--"));if(!a||c)bb.setStaticAppend(""),bb.fixDisplay(!1,!0),bb.renderUtil(),r(x("timerSize"))})}}function w(){/^r\d+$/.exec(Qa)&&(bb.setStaticAppend(ab.length+1+"/"+Xa.length),bb.renderUtil())}function n(){f();var a=ab;/^r\d+$/.exec(Qa)&&(a=ab.shift().match(/\d+\) (.*)$/)[1],w());a=Sa.parseScramble(a,!0);lb=!1;
Sa.applyMoves(a);Sa.moveCnt(!0);Ya=[[]]}function Oa(a,b){if("scramble"==a||"scrambleX"==a){Qa=b[0];ab=b[1];var c=tools.puzzleType(Qa),e=eb.indexOf(c);"cubennn"==c&&(e=b[2]);-1==e||hb==e&&cb==c||(hb=e,cb=c,lb=!1,f());(c=b[0].match(/^r(\d)\d*$/))?(Xa=ab.split("\n"),hb!=~~c[1]&&(hb=~~c[1],lb=!1,f())):Xa=null}}function r(a){Pa.css("height",a*$("#logo").width()/9+"px");Sa&&Sa.resize()}var Sa,z="",Na=0,Va=0,Ta=1,ab,Xa,Qa,hb,cb,eb=" sq1 222 333 444 555 666 777 888 999 101010 111111 skb mgm pyr clk".split(" "),
lb=!1,Pa=$("<div />"),db=!1;$(function(){b("timer","scramble",Oa);b("timer","scrambleX",Oa);Pa.appendTo("#container")});return{onkeydown:function(b){if(void 0!=Sa){var c=$.now();if(-1==y)32==b&&(Xa&&(ab=Xa.slice()),n(),h()?(Ua=c,a(-3)):(bb.val(0),a(-2)),$("#lcd").css({visibility:"hidden"}),bb.fixDisplay(!1,!0));else if(-3==y||-2==y||1<=y)if(27==b||28==b){var w=1<=y;bb.setStaticAppend("");a(-1);f();$("#lcd").css({visibility:"unset"});bb.fixDisplay(!1,!0);w&&(Ya.reverse(),e("time",["",0,[-1,c-Ua],0,
[$.map(Ya,cubeutil.moveSeq2str).filter($.trim).join(" "),cb,Va]]))}else c={keyCode:help.getMappedCode(b)},Sa.keydown(c);27!=b&&32!=b||kernel.clrKey()}},setEnable:function(a){(db=a)?Pa.show():(Pa.hide(),lb=!1)},setSize:r,reset:f}}(),ab=function(){function c(){z&&(clearTimeout(z),z=0);Na&&(clearTimeout(Na),Na=0)}function f(b,f,Oa){var Ta=Oa[1]||$.now(),kb=Xa;Xa=b;if(r){Sa&&Qa.setState(b,f,!1);c();var hb=x("vrcMP","n");if(-1==y){if(!w(Xa,!0)){var cb=x("giiSD");"s"==cb?giikerutil.checkScramble()&&n(Ta):
"n"!=cb&&(z=setTimeout(function(){n(Ta)},1E3*~~cb));cb=x("giiSM");"n"!=cb&&{x4:/^([URFDLB][ '])\1\1\1/,xi2:/^([URFDLB])( \1'\1 \1'|'\1 \1'\1 )/}[cb].exec(f.join(""))&&(Na=setTimeout(function(){n(Ta)},1E3))}}else if(-3==y||-2==y){Va=h()?Ta-Ua:0;Ua=Ta;Wa=[17E3<Va?-1:15E3<Va?2E3:0];a(cubeutil.getStepCount(hb));Ya=[];for(cb=0;cb<y;cb++)Ya[cb]=[];ab=y;cb=cubeutil.getProgress(kb,hb);Ra(ab,cb,Ta);bb.reset(Sa);bb.fixDisplay(!1,!0)}if(1<=y&&(Ya[y-1].push([f[0],Oa[0],Oa[1]]),b=cubeutil.getProgress(b,hb),Ra(ab,
b,Ta),w(Xa,!1)))if(Ya.reverse(),hb=cubeutil.getPrettyReconstruction(Ya,hb),giikerutil.setLastSolve(hb.prettySolve),Wa[1]=Ta-Ua,a(-1),giikerutil.reSync(),bb.fixDisplay(!1,!0),0!=Wa[1]){hb=giikerutil.tsLinearFix(Ya.flat());b=0;DEBUG&&console.log("time fit, old=",Wa);for(cb=0;cb<Ya.length;cb++)b+=Ya[cb].length,Wa[Ya.length-cb]=0==b?0:hb[b-1][1];DEBUG&&console.log("time fit, new=",Wa);hb=kernel.getConjMoves(cubeutil.moveSeq2str(hb),!0);e("time",["",0,Wa,0,[hb,"333"]])}else"t"==x("giiMode")&&kernel.pushSignal("ctrl",
["scramble","next"])}}function w(a,b){if(b)return a==mathlib.SOLVED_FACELET&&"n"==x("giiMode");if("t"==x("giiMode")){var c={coll:"cpll",cmll:"cmll",oll:"oll",eols:"oll",wvls:"oll",zbls:"eoll"}[(tools.getCurScramble()||[])[0]];if(c)return 0==cubeutil.getStepProgress(c,a)}return a==mathlib.SOLVED_FACELET}function n(b){c();if(-1==y){if("n"==kernel.getProp("giiMode")){if(!giikerutil.checkScramble()){var f=scramble_333.genFacelet(Xa);e("scramble",["333",kernel.getConjMoves(f,!0),0])}giikerutil.markScrambled()}else giikerutil.markScrambled(!0);
a(-2);Ua=b;bb.reset(Sa);bb.fixDisplay(!0,!0);x("giiBS")&&metronome.playTick()}}function Oa(a){(Sa=a)?Ta.show():Ta.hide();a&&Qa.resetVRC(!0,!0)}var r=!1,Sa=!1,z=0,Na=0,Va=0,Ta=$("<div />"),ab=1,Xa=mathlib.SOLVED_FACELET,Qa=function(){function a(a,w){if((!f||w)&&Sa){var h={puzzle:"cube3",style:x("giiVRC")};puzzleFactory.init(h,$.noop,Ta,function(f,w){n=f;w&&!n&&(Ta.css("height",""),Ta.html("--:--"));if(!a||w)bb.fixDisplay(!1,!0),b(x("timerSize"));e.fromFacelet(mathlib.SOLVED_FACELET);if(n){for(var h=
n.parseScramble("U2 U2",!0),Oa=e.ori=0;Oa<h.length;Oa++)e.selfMoveStr(n.move2str(h[Oa]));n.applyMoves(h);h=x("giiOri");c("auto"==h?-1:~~h)}});f=!0}}function b(a){Ta.css("height",a*$("#logo").width()/9+"px");n&&n.resize()}function c(a){h=a;if(-1!=h&&e.ori!=h){a=mathlib.CubieCube.rot2str[mathlib.CubieCube.rotMulI[h][e.ori]].split(/\s+/);for(var b=0;b<a.length;b++)e.selfMoveStr(a[b]);n.applyMoves(n.parseScramble(a.join(" ")))}}var f=!1,e=new mathlib.CubieCube,w=new mathlib.CubieCube,n,h=-1;return{resetVRC:a,
setState:function(b,c,h){if(void 0!=n&&Sa){w.fromFacelet(b);h=[];for(var Oa=!0,r=0;r<c.length;r++)if(h.push(c[r]),w.selfMoveStr(c[r],!0),w.isEqual(e)){Oa=!1;break}Oa?(a(!1),e.fromFacelet(mathlib.SOLVED_FACELET),h=scramble_333.genFacelet(b)):h=h.reverse().join(" ");c=h.match(/^\s*$/)||!n?[]:n.parseScramble(kernel.getConjMoves(h,!0,e.ori));5>c.length?n.addMoves(c):n.applyMoves(c);f=!1;e.fromFacelet(b)}},setOri:c,setSize:b}}();$(function(){Ta.appendTo("#container");b("giikerVRC","property",function(a,
b){Sa&&(Qa.resetVRC(!0,!0),Qa.setState(Xa,["U2","U2"],!1))},/^(?:preScrT?|isTrainScr|giiOri)$/)});return{setEnable:function(a){(r="g"==a)&&!GiikerCube.isConnected()?(giikerutil.setCallback(f),kernel.showDialog([$("<div>Press OK To Connect To Bluetooth Cube</div>").append(jb),function(){giikerutil.init()["catch"](function(a){DEBUG&&console.log("[giiker] init failed",a)})},0,0],"share","Bluetooth Connect")):r||giikerutil.stop();Oa(r&&"n"!=x("giiVRC"))},onkeydown:function(b){$.now();if(27==b||28==b){if(b=
1<=y,c(),a(-1),giikerutil.reSync(),bb.fixDisplay(!1,!0),b){Wa[0]=-1;Ya.reverse();b=giikerutil.tsLinearFix(Ya.flat());var f=0;DEBUG&&console.log("time fit, old=",Wa);for(var h=0;h<Ya.length;h++)f+=Ya[h].length,Wa[Ya.length-h]=0==f?0:b[f-1][1];DEBUG&&console.log("time fit, new=",Wa);b=kernel.getConjMoves(cubeutil.moveSeq2str(b),!0);e("time",["",0,Wa,0,[b,"333"]])}}else 32==b&&x("giiSK")&&(w(Xa,!0)||-1==y&&n($.now()))},setVRC:Oa,setSize:Qa.setSize}}(),hb="input phases preScrT? isTrainScr giiOri useMilli showDiff smallADP giiVRC".split(" ");
$(function(){Qa=$("#container");jb=$(".instruction").appendTo(kernel.temp);b("timer","property",function(b,c){"timerSize"==c[0]&&(Qa.css("font-size",c[1]+"em"),Oa.setSize(c[1]),ab.setSize(c[1]));"timerSize"!=c[0]&&"phases"!=c[0]||$("#multiphase").css("font-size",x("timerSize")/Math.max(x("phases"),4)+"em");"input"==c[0]&&(w.setEnable(c[1]),ab.setEnable(c[1]),f.setEnable(c[1]));"showAvg"==c[0]&&gb.showAvgDiv(c[1]);"giiVRC"==c[0]&&"set"!=c[2]&&ab.setEnable(x("input"));0<=["toolPos","scrHide","toolHide",
"statHide"].indexOf(c[0])&&r(!1);0<=["useIns","scrType","showIns"].indexOf(c[0])&&bb.renderUtil();if(-1!=$.inArray(c[0],hb)){var e=x("input");a(-1);Oa.setEnable("v"==e||"q"==e);Oa.reset();bb.setEnable("i"!=e);bb.reset("l"==e||"v"==e||"q"==e||"g"==e&&"n"!=x("giiVRC"));eb.reset(e);Va.setEnable("i"==e);bb.renderUtil();bb.fixDisplay(!1,!0)}},/^(?:input|phases|scrType|preScrT?|isTrainScr|giiOri|timerSize|showAvg|showDiff|useMilli|smallADP|giiVRC|toolPos|scrHide|toolHide|statHide|useIns|showIns)$/);b("timer",
"ashow",function(a,b){r(!b)});b("timer","button",r.bind(null,!1));b("timer","session",r.bind(null,!1));b("timer","scrfix",r.bind(null,!1));$(window).bind("resize",r.bind(null,!1));Pa("vrc","vrcSpeed",1,PROPERTY_VRCSPEED,[100,[0,50,100,200,500,1E3]," 20 10 5 2 1".split(" ")],1);Pa("vrc","vrcOri",-2,"PROPERTY_VRCORI",["6,12",["6,12","10,11"],["UF","URF"]],1);Pa("vrc","vrcMP",1,PROPERTY_VRCMP,["n","n cfop fp cf4op cf4o2p2 roux".split(" "),PROPERTY_VRCMPS.split("|")],1);Pa("vrc","vrcAH",1,PROPERTY_VRCAH,
["01",["00","01","10","11"],PROPERTY_VRCAHS.split("|")],1);Pa("vrc","giiMode",1,PROPERTY_GIIMODE,["n",["n","t"],PROPERTY_GIIMODES.split("|")],1);Pa("vrc","giiVRC",1,PROPERTY_GIIKERVRC,["v",["n","v","q","ql","q2"],["None","Virtual","qCube","qLast","q2Look"]],1);Pa("vrc","giiOri",1,PROPERTY_GIIORI,["auto","auto 0 3 2 1 4 5 6 7 23 14 19 8 17 10 21 12 11 22 13 18 15 16 9 20".split(" "),"auto;(UF);(UR) y;(UB) y2;(UL) y';(DF) z2;(DL) z2 y;(DB) z2 y2;(DR) z2 y';(RF) z';(RD) z' y;(RB) z' y2;(RU) z' y';(LF) z;(LU) z y;(LB) z y2;(LD) z y';(BU) x';(BR) x' y;(BD) x' y2;(BL) x' y';(FD) x;(FR) x y;(FU) x y2;(FL) x y'".split(";")],
1);Pa("vrc","giiSD",1,PROPERTY_GIISOK_DELAY,["s","2345ns".split(""),PROPERTY_GIISOK_DELAYS.split("|")],1);Pa("vrc","giiSK",0,PROPERTY_GIISOK_KEY,[!0],1);Pa("vrc","giiSM",1,PROPERTY_GIISOK_MOVE,["n",["x4","xi2","n"],PROPERTY_GIISOK_MOVES.split("|")],1);Pa("vrc","giiBS",0,PROPERTY_GIISBEEP,[!0],1);Pa("vrc","giiRST",1,PROPERTY_GIIRST,["p",["a","p","n"],PROPERTY_GIIRSTS.split("|")]);Pa("vrc","giiAED",0,PROPERTY_GIIAED,[!1]);Pa("timer","useMouse",0,PROPERTY_USEMOUSE,[!1],1);Pa("timer","useIns",1,PROPERTY_USEINS,
["n",["a","b","n"],PROPERTY_USEINS_STR.split("|")],1);Pa("timer","showIns",0,PROPERTY_SHOWINS,[!0],1);Pa("timer","voiceIns",1,PROPERTY_VOICEINS,["1",["n","1","2"],PROPERTY_VOICEINS_STR.split("|")],1);Pa("timer","voiceVol",2,PROPERTY_VOICEVOL,[100,1,100],1);Pa("timer","input",1,PROPERTY_ENTERING,["t","tismvgqbl".split(""),PROPERTY_ENTERING_STR.split("|")],1);Pa("timer","intUN",1,PROPERTY_INTUNIT,[20100,[1,100,1E3,10001,10100,11E3,20001,20100,21E3],"X X.XX X.XXX X:XX X:XX.XX X:XX.XXX X:XX:XX X:XX:XX.XX X:XX:XX.XXX".split(" ")],
1);Pa("timer","timeU",1,PROPERTY_TIMEU,["c",["u","c","s","i","n"],PROPERTY_TIMEU_STR.split("|")],1);Pa("timer","preTime",1,PROPERTY_PRETIME,[300,[0,300,550,1E3],["0","0.3","0.55","1"]],1);Pa("timer","phases",2,PROPERTY_PHASES,[1,1,10],3);Pa("kernel","showAvg",0,SHOW_AVG_LABEL,[!0],1);Pa("kernel","showDiff",1,SHOW_DIFF_LABEL,["rg",["rg","gr","b","n"],SHOW_DIFF_LABEL_STR.split("|")],1);Pa("ui","timerSize",2,PROPERTY_TIMERSIZE,[20,1,100],1);Pa("ui","smallADP",0,PROPERTY_SMALLADP,[!0],1)});var nb;return{onkeydown:function(a){if(!c.isPop()){var b=
Na(a),e=$(document.activeElement);if(e.is("input, textarea, select"))"i"==x("input")&&"inputTimer"==e.prop("id")&&13==b&&Va.parseInput();else switch(e.blur(),-1==y&&27==b&&bb.renderUtil(!0),x("input")){case "t":case "l":eb.onkeydown(b,a);break;case "s":w.onkeydown(b,a);break;case "b":f.onkeydown(b,a);break;case "v":case "q":Oa.onkeydown(b,a);break;case "g":ab.onkeydown(b,a)}}},onkeyup:function(a){if(!c.isPop()){var b=Na(a),e=$(document.activeElement);if(e.is("input, textarea, select"))"i"==x("input")&&
"inputTimer"==e.prop("id")&&13==b&&Va.clear();else switch(e.blur(),x("input")){case "t":case "l":eb.onkeyup(b,a);break;case "s":w.onkeyup(b,a);break;case "b":f.onkeyup(b,a)}}},showAvgDiv:gb.showAvgDiv,refocus:function(){void 0!=nb?nb.focus():document.activeElement&&document.activeElement.blur&&document.activeElement.blur()},getStatus:function(){return y},getCurTime:function(a){return 0<y?(a||$.now())-Ua:0},getStartTime:function(){return Ua||$.now()}}},[kernel.regListener,kernel.regProp,kernel.getProp,
kernel.pretty,kernel.ui,kernel.pushSignal]);var scrMgr=function(b,Pa){function x(a,c,e){a=a||[[""]];c=c||[""];e=e||0;for(var h=0,r=-1,y=[],x,z,Ra=0;Ra<e;Ra++){do x=b(a.length),z=b(a[x].length),x!=r&&(h=0,r=x);while(0!=(h>>z&1));h|=1<<z;a[x][z].constructor==Array?y.push(Pa(a[x][z])+Pa(c)):y.push(a[x][z]+Pa(c))}return y.join(" ")}function z(b,x,r){DEBUG&&console.log("[regscr]",b);if($.isArray(b))for(r=0;r<b.length;r++)c[b[r]]=x;else c[b]=x,void 0!=r&&(e[b]=r[0],a[b]=r[1],h[b]=r[2]);return z}var c={blank:function(){return"N/A"}},e={},a={},h={};
return{reg:z,scramblers:c,filters:e,probs:a,imgGens:h,mega:x,formatScramble:function(a){return a.replace(/[$#]\{([^\}]+)\}/g,function(a,b){if("$"==a[0]){var e=[b];"["==b[0]&&(e=JSON.parse(b));return c[e[0]].apply(this,e)}return"#"==a[0]?x.apply(this,JSON.parse("["+b+"]")):""})},rndState:function(a,b){if(void 0!=b){var c=b.slice();void 0==a&&(a=c);if(0==b[0])return a.slice();for(var e=0;e<a.length;e++)a[e]||(c[e]=0);return mathlib.rndProb(c)}},fixCase:function(a,b){return void 0==a?mathlib.rndProb(b):
a}}}(mathlib.rn,mathlib.rndEl),scramble=execMain(function(b,Pa){function x(){kernel.blur();kernel.pushSignal("scrambling",$a);f.html(SCRAMBLE_SCRAMBLING+"...");sb=!$a||/^(remote|input$)/.exec($a)?sb:$a;tb||(kb=$a,rb=fb,ob=mb);tb=!1;rb&&wb.addClass("click").unbind("click").click(z);$a=cb.getSelected();mb=~~w.val();kb!=$a&&kernel.setProp("scrType",$a);fb="";requestAnimFrame(h)}function z(){tb=!0;f.html(a(kb,rb,ob,!0));wb.removeClass("click").unbind("click");void 0!=rb&&kernel.pushSignal("scrambleX",
a(kb,rb,ob))}function c(){tb?(tb=!1,f.html(a($a,fb,mb,!0)),wb.addClass("click").unbind("click").click(z),kernel.pushSignal("scrambleX",a($a,fb,mb))):x()}function e(){if(fb){var a=kernel.getProp("scrClk","n");"c"==a?$.clipboardCopy(f.text())&&logohint.push("scramble copied"):"+"==a&&c()}}function a(a,b,c,e,w){b=b||"";c=c||0;var n=/^\$T([a-zA-Z0-9]+)(-[0-9]+)?\$\s*(.*)$/.exec(b);n&&(a=n[1],b=n[3],c=~~n[2]);return e?(a=b.replace(/~/g,"").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,"$1").length,a=kernel.getProp("scrASize")?
Math.max(.25,Math.round(20*Math.pow(50/Math.max(a,10),.3))/20):1,f.css("font-size",a+"em"),DEBUG&&console.log("[scrFontSize]",a),b.replace(/~/g,"&nbsp;").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,w||kernel.getProp("scrKeyM",!1)?"<u>$1</u>":"$1")):[a,b.replace(/~/g,"").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,"$1"),c]}function h(){r();fb?(fb=fb.replace(/(\s*)$/,""),f.html(a($a,fb,mb,!0)),kernel.pushSignal("scramble",a($a,fb,mb))):f.html(SCRAMBLE_SCRAMBLING+"... ")}function Ra(a,b,c){vb&&!a[0].startsWith("nocache_")&&
(csTimerWorker&&csTimerWorker.getScramble?xb=xb||csTimerWorker.getScramble(a,function(a,b){DEBUG&&console.log("[scrcache]",a+" cached by csTimerWorker");Za(a,b)}.bind(void 0,b)):c||(xb=xb||setTimeout(function(a,b){var c=Xa[b[0]];Za(a,c.apply(c,b))}.bind(void 0,b,a),500)))}function Za(a,b){var c=JSON.parse(localStorage.cachedScr||null)||{};$.isArray(c)&&(c={});c[a]=b;localStorage.cachedScr=JSON.stringify(c);xb=0}function r(){if($a){fb="";var a=ab[$a]||$a;if("input"==a)fb=pb.next();else if(pb.clear(),
a.startsWith("remote"))fb=Kb.next(a);else if(Kb.clear(),a in Xa){var b=JSON.parse(localStorage.cachedScr||null)||{},c=JSON.stringify([a,mb,hb[1]]);vb&&c in b&&!a.startsWith("nocache_")?(fb=b[c],delete b[c],localStorage.cachedScr=JSON.stringify(b)):fb=Xa[a](a,mb,Bb(hb[1],Ya[a]));Ra([a,mb,Bb(hb[1],Ya[a])],c)}else requestAnimFrame(h)}}function Na(){kernel.blur();var a=cb.getSelIdx();a=scrdata[a[0]][1][a[1]][2];w.val(Math.abs(a));w[0].disabled=0>=a;a=cb.getSelected();hb=JSON.parse(kernel.getProp("scrFlt",
JSON.stringify([a,Ta[a]])));jb[0].disabled=w[0].disabled&&!(a in Ta);hb[0]!=a&&(hb=[a,Ta[a]&&mathlib.valuedArray(Ta[a].length,1)],kernel.setProp("scrFlt",JSON.stringify(hb),"session"))}function Qa(){Na();x()}function y(){function a(){if($a in Ta){for(var a=mathlib.valuedArray(Ta[$a].length,1),c=!1,e=0;e<b.length;e++)b[e][0].checked?c=!0:a[e]=0;c?(hb=[$a,a],a=JSON.stringify(hb),kernel.getProp("scrFlt")!=a&&(f=!0,kernel.setProp("scrFlt",a))):alert(SCROPT_EMPTYALT);f&&x()}}gb.empty();var b=[],c=[],f=
!1;if($a in Ta){var e=Ta[$a],w=Sa[$a],n=e;hb[0]==$a&&(n=hb[1]||e);gb.append("<br>",eb,Va,"<br><br>");for(var h={},Oa=0;Oa<e.length;Oa++){var r=e[Oa].indexOf("-");-1==r?h[e[Oa]]=[Oa]:(r=e[Oa].slice(0,r),h[r]=h[r]||[],h[r].push(Oa))}for(Oa=0;Oa<e.length;Oa++){r=$('<input type="checkbox">').val(Oa);n[Oa]&&(r[0].checked=!0);b.push(r);r=$("<label>").append(r,e[Oa]);if(w){var y=$("<canvas>");y.width("5em");y.height("5em");r.append("<br>",y);w(Oa,y);r.addClass("bimg")}c.push(r)}var z=function(a){var c=0;
$.each(h[a],function(a,f){c+=b[f][0].checked?1:0});return c+"/"+h[a].length},Na;for(Na in h)1==h[Na].length&&gb.append(c[h[Na][0]]);for(Na in h)1!=h[Na].length&&gb.append($("<div>").attr("data",Na).append($('<div class="sgrp">').append($("<span>").html(Na+" "+z(Na))," | ",$('<span class="click">').html(SCROPT_BTNALL).click(function(){var a=$(this).parent().parent().attr("data");$.each(h[a],function(a,c){b[c][0].checked=!0});$(this).parent().children().first().html(a+" "+z(a))})," | ",$('<span class="click">').html(SCROPT_BTNNONE).click(function(){var a=
$(this).parent().parent().attr("data");$.each(h[a],function(a,c){b[c][0].checked=!1});$(this).parent().children().first().html(a+" "+z(a))})," | ",$('<span class="click">[+]</span>').click(function(){$(this).parent().next().toggle()})),$("<div>").append($.map(h[Na],function(a){b[a].change(function(){var a=$(this).parent().parent().parent().attr("data");$(this).parent().parent().parent().find("span:first").html(a+" "+z(a))});return c[a]}))));eb.unbind("click").click(function(){for(var a=0;a<b.length;a++)b[a][0].checked||
(b[a][0].checked=!0),b[a].change()});Va.unbind("click").click(function(){for(var a=0;a<b.length;a++)b[a][0].checked&&(b[a][0].checked=!1),b[a].change()})}kernel.showDialog([bb,a,null,a],"scropt",SCROPT_TITLE)}function Wa(b,e){"time"==b?Db?x():(f.empty(),kernel.pushSignal("scramble",["-","",0])):"property"==b?"scrSize"==e[0]?Oa.css("font-size",e[1]/7+"em"):"scrMono"==e[0]?n.css("font-family",e[1]?"Monospace":"Arial"):"scrType"==e[0]?e[1]!=cb.getSelected()&&(cb.loadVal(e[1]),Qa()):"scrLim"==e[0]?e[1]?
Oa.addClass("limit"):Oa.removeClass("limit"):"scrAlign"==e[0]?"c"==e[1]?n.css("text-align","center"):"l"==e[1]?n.css("text-align","left"):"r"==e[1]&&n.css("text-align","right"):"scrFast"==e[0]?(ab["444wca"]=e[1]?"444m":"444wca","444wca"==$a&&x()):"scrKeyM"==e[0]?f.html(tb?a(kb,rb||"",ob||0,!0):a($a,fb||"",mb,!0)):"scrHide"==e[0]&&(e[1]?db.hide():db.show()):"button"==b&&"scramble"==e[0]?(Db=e[1])&&""==f.html()&&x():"ctrl"==b&&"scramble"==e[0]?"last"==e[1]?z():"next"==e[1]&&c():"scrfix"==b&&e&&f.html(a($a,
e,mb,!0,!0))}function Ua(a,b){for(var c=0;c<scrdata.length;c++)for(var f=0;f<scrdata[c][1].length;f++)if(scrdata[c][1][f][1]==a){b(c,f);return}}var Xa=scrMgr.scramblers,Ta=scrMgr.filters,Ya=scrMgr.probs,Sa=scrMgr.imgGens,n=$('<div id="scrambleDiv"/>'),db=$("<div />").addClass("title"),lb=[$("<select />"),$("<select />")],cb=new kernel.TwoLvMenu(scrdata,Qa,lb[0],lb[1],"333"),jb=$('<input type="button" class="icon">').val(""),bb=$("<div>"),gb=$('<div class="sflt">'),eb=$('<input type="button">').val(SCROPT_BTNALL),
Va=$('<input type="button">').val(SCROPT_BTNNONE),w=$('<input type="text" maxlength="3">'),f=$("<div>"),Oa=$('<div id="scrambleTxt"/>'),ab={"333oh":"333","333ft":"333"},hb="",nb=$("<textarea />"),$a,fb,mb=0,kb,rb,ob=0,sb="333",tb=!1,wb=$("<span />").html(SCRAMBLE_LAST),zb=$("<span />").addClass("click").html(SCRAMBLE_NEXT).click(c),vb=!0,xb=0;$(function(){if(csTimerWorker&&csTimerWorker.getScramble){var a=['["444wca",40,null]'],b=JSON.parse(localStorage.cachedScr||null)||{};$.isArray(b)&&(b={});for(var c=
0;c<a.length;c++)a[c]in b||setTimeout(Ra.bind(void 0,JSON.parse(a[c]),a[c],!0),2500+~~(5E3*Math.random()))}});var Kb=function(){function a(){kernel.setProp("scrType",sb)}function b(a){if(!$.isArray(a))return!1;c=a;return 0!=c.length}var c=[];return{next:function(f){for(var e=null;!e&&0!=c.length;)e=c.shift();if(e)return e;"remoteComp"==f?window.onlinecomp?onlinecomp.getScrambles().then(function(c){b(c)?requestAnimFrame(h):a()},a):a():"remoteBattle"==f?window.battle?battle.getScrambles().then(function(c){b(c)?
requestAnimFrame(h):a()},a):a():"remoteURL"==f&&$.getJSON("https://cstimer.net/testRemoteScramble.php",function(c){b(c)?requestAnimFrame(h):a()}).error(a);return""},clear:function(){c=[]}}}(),pb=function(){function a(){var a=nb.val();if(a.match(/^\s*$/))a=!1;else{c=[];a=a.split("\n");for(var b=0;b<a.length;b++){var f=a[b];null==f.match(/^\s*$/)&&c.push(f.replace(/^\d+[\.\),]\s*/,""))}a=0!=c.length}a?h():kernel.setProp("scrType",sb)}function b(){kernel.setProp("scrType",sb)}var c=[];return{next:function(){for(var f=
null;!f&&0!=c.length;)f=c.shift();if(f)return f;nb.val("");kernel.showDialog([nb,a,b],"input",SCRAMBLE_INPUT);return""},clear:function(){c=[]}}}(),Db=!1,Eb=function(){function a(){var a=~~e.val();Sa="";for(var b=fb,c=h.val(),f=0;f<a;f++)r(),Sa+=c.replace("1",f+1)+fb+"\n";fb=b;w.text(Sa);w.select()}function b(a){if(Sa){a=new Blob([Sa],{type:"text/plain"});var b=$('<a class="click"/>').appendTo("body");b.attr("href",URL.createObjectURL(a));b.attr("download","Scrambles_"+mathlib.time2str(new Date/1E3,
"%Y%M%D_%h%m%s")+".txt");b[0].click();b.remove()}}var c=$("<div />").css("text-align","center").css("font-size","0.7em"),f=$("<span />").addClass("click").html(SCRGEN_GEN),e=$('<input type="text" maxlength="3">').val(5),w=$('<textarea rows="10" style="width: 100%" readonly />'),h=$('<select><option value="1. ">1. </option><option value="1) ">1) </option><option value="(1) ">(1) </option><option value=""></option></select>'),Oa=$('<span class="click">').html("Download");c.append(SCRGEN_NSCR,e,"&nbsp;",
SCRGEN_PRE).append(h,"<br>",f," | ",Oa,"<br>",w);var Sa="";return function(e){e&&(e.empty().append(c.width(n.width()/2)),h.unbind("change").change(kernel.blur),f.unbind("click").click(a),Oa.unbind("click").click(b))}}(),Bb=scrMgr.rndState;$(function(){kernel.regListener("scramble","time",Wa);kernel.regListener("scramble","property",Wa,/^scr(?:Size|Mono|Type|Lim|Align|Fast|KeyM|Hide)$/);kernel.regListener("scramble","button",Wa,/^scramble$/);kernel.regListener("scramble","ctrl",Wa,/^scramble$/);kernel.regListener("scramble",
"scrfix",Wa);kernel.regProp("scramble","scrSize",2,PROPERTY_SCRSIZE,[15,5,50],1);kernel.regProp("scramble","scrASize",0,PROPERTY_SCRASIZE,[!0],1);kernel.regProp("scramble","scrMono",0,PROPERTY_SCRMONO,[!0],1);kernel.regProp("scramble","scrLim",0,PROPERTY_SCRLIM,[!1],1);kernel.regProp("scramble","scrAlign",1,PROPERTY_SCRALIGN,["c",["c","l","r"],PROPERTY_SCRALIGN_STR.split("|")],1);kernel.regProp("scramble","preScr",1,"pre-scramble",["",";y;y2;y';z2;z2 y;z2 y2;z2 y';z';z' y;z' y2;z' y';z;z y;z y2;z y';x';x' y;x' y2;x' y';x;x y;x y2;x y'".split(";"),
"(UF);(UR) y;(UB) y2;(UL) y';(DF) z2;(DL) z2 y;(DB) z2 y2;(DR) z2 y';(RF) z';(RD) z' y;(RB) z' y2;(RU) z' y';(LF) z;(LU) z y;(LB) z y2;(LD) z y';(BU) x';(BR) x' y;(BD) x' y2;(BL) x' y';(FD) x;(FR) x y;(FU) x y2;(FL) x y'".split(";")],1);kernel.regProp("scramble","preScrT",1,"training pre-scramble",["z2",";y;y2;y';z2;z2 y;z2 y2;z2 y';z';z' y;z' y2;z' y';z;z y;z y2;z y';x';x' y;x' y2;x' y';x;x y;x y2;x y'".split(";"),"(UF);(UR) y;(UB) y2;(UL) y';(DF) z2;(DL) z2 y;(DB) z2 y2;(DR) z2 y';(RF) z';(RD) z' y;(RB) z' y2;(RU) z' y';(LF) z;(LU) z y;(LB) z y2;(LD) z y';(BU) x';(BR) x' y;(BD) x' y2;(BL) x' y';(FD) x;(FR) x y;(FU) x y2;(FL) x y'".split(";")],
1);kernel.regProp("scramble","scrFast",0,PROPERTY_SCRFAST,[!1]);kernel.regProp("scramble","scrKeyM",0,PROPERTY_SCRKEYM,[!1],1);kernel.regProp("scramble","scrClk",1,PROPERTY_SCRCLK,["n",["n","c","+"],PROPERTY_SCRCLK_STR.split("|")],1);kernel.regProp("scramble","scrType",-6,"Scramble Type",["333"],3);w.change(x);jb.click(y);bb.append($("<div>").append(SCRAMBLE_LENGTH+": ",w),gb);db.append($("<nobr>").append(lb[0]," ",lb[1]," ",jb)," <wbr>");db.append($("<nobr>").append(wb,"/",zb,SCRAMBLE_SCRAMBLE));
n.append(db,Oa.append(f).click(e));tools.regTool("scrgen",TOOLS_SCRGEN,Eb);Oa.click(function(){db.show();kernel.blur();kernel.setProp("scrHide",!1)});kernel.regProp("ui","scrHide",-1,"Hide Scramble Selector",[!1]);kernel.addWindow("scramble",BUTTON_SCRAMBLE,n,!0,!0,3);Na()});return{getTypeName:function(a){var b="";Ua(a,function(a,c){b=scrdata[a][0]+">"+scrdata[a][1][c][0]});return b},getTypeIdx:function(a){var b=1E300;Ua(a,function(a,c){b=100*a+c});return b},scrStd:a,setCacheEnable:function(a){vb=
a}}},[mathlib.rn,mathlib.rndEl]);(function(b,Pa,x){function z(a,c){var e=Ra[a];switch(e.length){case 1:return b(e[0],[""],c);case 2:return b(e[0],e[1],c);case 3:return b(e[0],e[1],e[2])}}function c(b,c){var e=r[b],h=e[1],y=e[2],z=0,Na=0,Sa=[],n=[["R","R'"],["R'","R"],["L","L'"],["L'","L"],["F'","F"],["F","F'"],["B","B'"],["B'","B"]],Ra=["U","D"];e=e[0];for(var Qa=0;Qa<y.length;Qa++)Sa[Qa]=0;for(Qa=0;Qa<c;Qa++){for(var cb=!1;!cb;)for(var Za="",bb=0;bb<y.length;bb++){var gb=Pa(4);Sa[bb]+=gb;0!=gb&&(cb=!0,Za+=" "+y[bb]+a[gb-1])}cb=
Pa(8);bb=Pa(2);gb=Pa(3);e+=Za+" "+n[cb][0]+" "+Ra[bb]+a[gb]+" "+n[cb][1];0==bb&&(z+=gb+1);1==bb&&(Na+=gb+1)}for(Qa=0;Qa<y.length;Qa++)gb=4-Sa[Qa]%4,4>gb&&(e+=" "+y[Qa]+a[gb-1]);z=4-z%4;Na=4-Na%4;4>z&&(e+=" U"+a[z-1]);4>Na&&(e+=" D"+a[Na-1]);return e+=" "+x(h)}function e(a,b){var c=Za[a].replace(/%l/g,b).replace(/%c/g,'["","2","\'"]');return scrMgr.formatScramble(c)}var a=["","2","'"],h=["","2","'","2'"],Ra={111:[[["x"],["y"],["z"]],a],2223:[[["U"],["R"],["F"]],a],2226:[[[["U","D"]],[["R","L"]],[["F",
"B"]]],a],"333o":[[["U","D"],["R","L"],["F","B"]],a],334:[[[["U","U'","U2"],["u","u'","u2"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],336:[[[["U","U'","U2"],["u","u'","u2"],["3u","3u2","3u'"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],888:[["U D u d 3u 3d 4u".split(" "),"R L r l 3r 3l 4r".split(" "),"F B f b 3f 3b 4f".split(" ")],a],999:[["U D u d 3u 3d 4u 4d".split(" "),"R L r l 3r 3l 4r 4l".split(" "),"F B f b 3f 3b 4f 4b".split(" ")],a],101010:[["U D u d 3u 3d 4u 4d 5u".split(" "),"R L r l 3r 3l 4r 4l 5r".split(" "),
"F B f b 3f 3b 4f 4b 5f".split(" ")],a],111111:[["U D u d 3u 3d 4u 4d 5u 5d".split(" "),"R L r l 3r 3l 4r 4l 5r 5l".split(" "),"F B f b 3f 3b 4f 4b 5f 5b".split(" ")],a],444:[[["U","D","u"],["R","L","r"],["F","B","f"]],a],"444m":[[["U","D","Uw"],["R","L","Rw"],["F","B","Fw"]],a],555:[[["U","D","u","d"],["R","L","r","l"],["F","B","f","b"]],a],"555wca":[[["U","D","Uw","Dw"],["R","L","Rw","Lw"],["F","B","Fw","Bw"]],a],"666p":[[["U","D","2U","2D","3U"],["R","L","2R","2L","3R"],["F","B","2F","2B","3F"]],
a],"666wca":[[["U","D","Uw","Dw","3Uw"],["R","L","Rw","Lw","3Rw"],["F","B","Fw","Bw","3Fw"]],a],"666s":[[["U","D","U&sup2;","D&sup2;","U&sup3;"],["R","L","R&sup2;","L&sup2;","R&sup3;"],["F","B","F&sup2;","B&sup2;","F&sup3;"]],a],"666si":[[["U","D","u","d","3u"],["R","L","r","l","3r"],["F","B","f","b","3f"]],a],"777p":[["U D 2U 2D 3U 3D".split(" "),"R L 2R 2L 3R 3L".split(" "),"F B 2F 2B 3F 3B".split(" ")],a],"777wca":[["U D Uw Dw 3Uw 3Dw".split(" "),"R L Rw Lw 3Rw 3Lw".split(" "),"F B Fw Bw 3Fw 3Bw".split(" ")],
a],"777s":[["U D U&sup2; D&sup2; U&sup3; D&sup3;".split(" "),"R L R&sup2; L&sup2; R&sup3; L&sup3;".split(" "),"F B F&sup2; B&sup2; F&sup3; B&sup3;".split(" ")],a],"777si":[["U D u d 3u 3d".split(" "),"R L r l 3r 3l".split(" "),"F B f b 3f 3b".split(" ")],a],cm3:[[[["U<","U>","U2"],["E<","E>","E2"],["D<","D>","D2"]],[["R^","Rv","R2"],["M^","Mv","M2"],["L^","Lv","L2"]]]],cm2:[[[["U<","U>","U2"],["D<","D>","D2"]],[["R^","Rv","R2"],["L^","Lv","L2"]]]],233:[[[["U","U'","U2"]],["R2","L2"],["F2","B2"]]],
fto:[[["U","D"],["F","B"],["L","BR"],["R","BL"]],["","'"]],gear:[[["U"],["R"],["F"]]," 2 3 4 5 6 ' 2' 3' 4' 5'".split(" ")],sfl:[[["R","L"],["U","D"]],a],ufo:[[["A"],["B"],["C"],[["U","U'","U2'","U2","U3"]]]],"2gen":[[["U"],["R"]],a],"2genl":[[["U"],["L"]],a],roux:[[["U"],["M"]],a],"3gen_F":[[["U"],["R"],["F"]],a],"3gen_L":[[["U"],["R","L"]],a],RrU:[[["U"],["R","r"]],a],RrUu:[[["U","u"],["R","r"]],a],minx2g:[[["U"],["R"]],h],half:[[["U","D"],["R","L"],["F","B"]],["2"]],lsll:[[[["R U R'","R U2 R'",
"R U' R'"]],[["F' U F","F' U2 F","F' U' F"]],[["U","U2","U'"]]]],prco:[[["F","B"],["U","D"],["L","DBR"],["R","DBL"],["BL","DR"],["BR","DL"]],h],skb:[[["R"],["L"],["B"],["U"]],["","'"]],ivy:[[["R"],["L"],["D"],["B"]],["","'"]],112:[[["R"],["R"]],a],eide:[[["OMG"],["WOW"],["WTF"],["WOO-HOO WOO-HOO MATYAS YES YES YAY YEEEEEEEEEEEES".split(" ")],["HAHA"],["XD"],[":D"],["LOL"]],["","","","!!!"]]},Za={sia113:'#{[["U","u"],["R","r"]],%c,%l} z2 #{[["U","u"],["R","r"]],%c,%l}',sia123:'#{[["U"],["R","r"]],%c,%l} z2 #{[["U"],["R","r"]],%c,%l}',
sia222:'#{[["U"],["R"],["F"]],%c,%l} z2 y #{[["U"],["R"],["F"]],%c,%l}',335:'#{[[["U","U\'","U2"],["D","D\'","D2"]],["R2","L2"],["F2","B2"]],0,%l} / ${333}',337:'#{[[["U","U\'","U2","u","u\'","u2","U u","U u\'","U u2","U\' u","U\' u\'","U\' u2","U2 u","U2 u\'","U2 u2"],["D","D\'","D2","d","d\'","d2","D d","D d\'","D d2","D\' d","D\' d\'","D\' d2","D2 d","D2 d\'","D2 d2"]],["R2","L2"],["F2","B2"]],0,%l} / ${333}',r234:"2) ${222so}\\n3) ${333}\\n4) ${[444,40]}",r2345:'${r234}\\n5) ${["555",60]}',r23456:'${r2345}\\n6) ${["666p",80]}',
r234567:'${r23456}\\n7) ${["777p",100]}',r234w:'2) ${222so}\\n3) ${333}\\n4) ${["444m",40]}',r2345w:'${r234w}\\n5) ${["555wca",60]}',r23456w:'${r2345w}\\n6) ${["666wca",80]}',r234567w:'${r23456w}\\n7) ${["777wca",100]}',rmngf:'${r2345w}\\n3oh) ${333}\\npyr) ${["pyrso",10]}\\n skb) ${skbso}\\nsq1) ${sqrs}\\nclk) ${clkwca}\\nmgm) ${["mgmp",70]}',"333ni":'${333}#{[[""]],["","Rw ","Rw2 ","Rw\' ","Fw ","Fw\' "],1}#{[[""]],["","Uw","Uw2","Uw\'"],1}',"444bld":'${444wca}#{[[""]],[""," x"," x2"," x\'"," z"," z\'"],1}#{[[""]],[""," y"," y2"," y\'"],1}',
"555bld":'${["555wca",%l]}#{[[""]],[""," 3Rw"," 3Rw2"," 3Rw\'"," 3Fw"," 3Fw\'"],1}#{[[""]],[""," 3Uw"," 3Uw2"," 3Uw\'"],1}'},r={"4edge":["r b2",["b2 r'","b2 U2 r U2 r U2 r U2 r"],["u"]],"5edge":["r R b B",["B' b' R' r'","B' b' R' U2 r U2 r U2 r U2 r"],["u","d"]],"6edge":["3r r 3b b",["3b' b' 3r' r'","3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r","3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","d"]],"7edge":["3r r 3b b",["3b' b' 3r' r'","3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r",
"3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","3d","d"]]},Na;for(Na in Ra)scrMgr.reg(Na,z);for(Na in Za)scrMgr.reg(Na,e);for(Na in r)scrMgr.reg(Na,c);scrMgr.reg("cubennn",function(c,e){if(1>=e)return"N/A";for(var h=[[],[],[]],r=0;r<e-1;r++)0==r%2?(h[0].push((4>r?"":~~(r/2+1))+(2>r?"U":"u")),h[1].push((4>r?"":~~(r/2+1))+(2>r?"R":"r")),h[2].push((4>r?"":~~(r/2+1))+(2>r?"F":"f"))):(h[0].push((4>r?"":~~(r/2+1))+(2>r?"D":"d")),h[1].push((4>r?"":~~(r/2+1))+(2>r?"L":"l")),h[2].push((4>r?"":~~(r/2+
1))+(2>r?"B":"b")));return b(h,a,10*e)})})(scrMgr.mega,mathlib.rn,mathlib.rndEl);var scramble_333=function(b,Pa,x,z,c,e){function a(a){a.cp=[0,1,2,3,4,5,6,7];a.co=[0,0,0,0,0,0,0,0];a.ep=[0,1,2,3,4,5,6,7,8,9,10,11];a.eo=[0,0,0,0,0,0,0,0,0,0,0,0]}function h(a,b,c){var f;for(f=0;8>f;++f){c.cp[f]=a.cp[b.cp[f]];var e=a.co[b.cp[f]];var w=b.co[f];var n=e;n+=3>e?w:6-w;n%=3;3<=e!==3<=w&&(n+=3);c.co[f]=n}}function Ra(){a(this)}function Za(b,c,f,e){a(this);x(this.cp,b);b=c;var w=0;for(c=6;0<=c;--c)w+=this.co[c]=b%3,b=~~(b/3);this.co[7]=(15-w)%3;Pa(this.ep,f,12);f=e;b=0;for(e=10;0<=e;--e)b^=
this.eo[e]=f&1,f>>=1;this.eo[11]=b}function r(a,b,c){var f;for(f=0;12>f;++f)c.ep[f]=a.ep[b.ep[f]],c.eo[f]=b.eo[f]^a.eo[b.ep[f]]}function Na(){Na=$.noop;var a,b;nb[0]=new Za(15120,0,119750400,0);nb[3]=new Za(21021,1494,323403417,0);nb[6]=new Za(8064,1236,29441808,550);nb[9]=new Za(9,0,5880,0);nb[12]=new Za(1230,412,2949660,0);nb[15]=new Za(224,137,328552,137);for(a=0;18>a;a+=3)for(b=0;2>b;++b)nb[a+b+1]=new Ra,r(nb[a+b],nb[a],nb[a+b+1]),h(nb[a+b],nb[a],nb[a+b+1])}function Qa(){return Ta(0xffffffffffff,
0xffffffffffff,4294967295,4294967295)}function y(a){for(var b=0,c=0;c<a.length;c++)-1==a[c]&&b++;return b}function Wa(a,b,f){for(var e=0,w=0,n=0;n<a.length;n++)-1!=a[n]&&(e+=a[n]);e%=f;for(n=0;n<a.length-1;n++)-1==a[n]&&(1==b--?a[n]=((f<<4)-e)%f:(a[n]=c(f),e+=a[n])),w*=f,w+=a[n];return w}function Ua(a,f,e){for(var w=[0,1,2,3,4,5,6,7,8,9,10,11],n=0;n<a.length;n++)-1!=a[n]&&(w[a[n]]=-1);for(var h=n=0;n<w.length;n++)-1!=w[n]&&(w[h++]=w[n]);var Oa;for(n=0;n<a.length&&0<f;n++)if(-1==a[n]){h=c(f);for(a[n]=
w[h];11>h;h++)w[h]=w[h+1];2==f--&&(Oa=n)}z(b(a,a.length),a.length)==1-e&&(f=a[n-1],a[n-1]=a[Oa],a[Oa]=f);return b(a,a.length)}function Xa(a,b){if("number"!==typeof a)return a;for(var c=[],f=0;f<b;f++){var e=a&15;c[f]=15==e?-1:e;a/=16}return c}function Ta(a,c,f,w,n,Oa,Sa,x){Na();n=n||sb;Oa=Oa||sb;a=Xa(a,12);c=Xa(c,12);f=Xa(f,8);w=Xa(w,8);var Va="";do{var Ta=c.slice(),ab=a.slice(),Ya=w.slice(),kb=f.slice();Ta=Wa(Ta,y(Ta),2);Ya=Wa(Ya,y(Ya),3);var Qa=y(ab),cb=y(kb);1==Qa&&(Ua(ab,Qa,-1),Qa=0);1==cb&&(Ua(kb,
cb,-1),cb=0);0==Qa&&0==cb?(ab=b(ab,12),kb=b(kb,8)):0!=Qa&&0==cb?(kb=b(kb,8),ab=Ua(ab,Qa,z(kb,8))):(ab=0==Qa&&0!=cb?b(ab,12):Ua(ab,Qa,-1),kb=Ua(kb,cb,z(ab,12)));if(0!=kb+Ya+ab+Ta){Va=new Za(kb,Ya,ab,Ta);ab=new Ra;kb=e(Oa);Ta=e(n);for(Ya=0;Ya<kb.length;Ya++)h(nb[kb[Ya]],Va,ab),r(nb[kb[Ya]],Va,ab),Qa=ab,ab=Va,Va=Qa;for(Ya=0;Ya<Ta.length;Ya++)h(Va,nb[Ta[Ya]],ab),r(Va,nb[Ta[Ya]],ab),Qa=ab,ab=Va,Va=Qa;kb=Va;ab=[];Va=[85,82,70,68,76,66];for(Ta=0;54>Ta;++Ta)ab[Ta]=Va[~~(Ta/9)];for(cb=0;8>cb;++cb)for(Qa=kb.cp[cb],
Ta=kb.co[cb],Ya=0;3>Ya;++Ya)ab[$a[cb][(Ya+Ta)%3]]=Va[~~($a[Qa][Ya]/9)];for(cb=0;12>cb;++cb)for(Qa=kb.ep[cb],Ta=kb.eo[cb],Ya=0;2>Ya;++Ya)ab[fb[cb][(Ya+Ta)%2]]=Va[~~(fb[Qa][Ya]/9)];Va=String.fromCharCode.apply(null,ab);Va=(new min2phase.Search).solution(Va,21,1E9,50,2,x,Sa)}}while(3>=Va.length);return Va.replace(/ +/g," ")}function Ya(){return Ta(0xffffffffffff,0xffffffffffff,1985229328,0)}function Sa(){return Ta(0xba9876543210,0,4294967295,4294967295)}function n(){return Ta(0xba987654ffff,65535,1985282047,
65535)}function db(a,b,c){a=tb[scrMgr.fixCase(c,wb)];b=Math.pow(16,a&15);c=Math.pow(16,a>>8&15);return Ta(0xba9f7654ffff-7*b,64424574975-(15^a>>4&1)*b,1986002943-11*c,1048575-(15^a>>12&3)*c,kb)}function lb(a,b,c,f,e){var w=b[scrMgr.fixCase(f,c)];b=[[5,10],[7,19],[3,-1],[1,-1],null,null,null,null,[23,12]][w&15];c=w>>4&1;f=[[8,20,9],[6,-1,18],[0,-1,-1],[2,11,-1],[-1,15,26]][w>>8&15];w=w>>12&3;a=a.split("");for(var n=0;3>n;n++)2>n&&0<=b[n]&&(a[b[n]]="BR".charAt(c^n)),0<=f[n]&&(a[f[n]]="URB".charAt((w+
3+n)%3));image.face3Image(a.join(""),e)}function cb(){return Ta(0xffff7654ffff,0xffff0000ffff,4294967295,4294967295)}function jb(a,b,c){a=Hb[scrMgr.fixCase(c,Mb)];return Ta(0xba987654ffff,0,a[0]+1985216512,a[1],kb,kb)}function bb(a,b,f){a=Hb[scrMgr.fixCase(f,Mb)];b=c(4);f=[];for(var e=0;e<kb.length;e++)f.push(kb[e].concat(rb[b]));return Ta(0xba98f6f4ffff,4042326015,a[0]+1985216512,a[1],f,kb)+ob[b]}function gb(a,b,c){a=Hb[b][2].replace(/e/g,a||"U");image.llImage.drawImage(a,null,c)}function eb(){return Ta(0xba9876543f1f,
0,1985282047,65535,kb)}function Va(a,b,c){a=yb[scrMgr.fixCase(c,Gb)];return Ta(0xba9876540000+a[1],0,1984954368+a[0],0,kb,kb)}function w(){var a=c(4);return Ta(0xba98f6f4ffff,4042326015,1985229328,0,[rb[a]],kb)+ob[a]}function f(a,b,c){a=Hb[scrMgr.fixCase(c,Mb)];return Ta(0xba987654ffff,65535,a[0]+1985216512,a[1],kb,kb)}function Oa(){return Ta(0xba987654ffff,65535,1985229328,0)}function ab(a,b){var c=Pb[a].slice(1);2==c.length&&(c=c.concat([[c[0][1],c[0][0]],[c[1][1],c[1][0]]]));c=["DDDDDDDDD"+Pb[a][0],
c];if(!b)return c.concat([Rb[a]]);image.llImage.drawImage(c[0],c[1],b)}function hb(a,b){for(var c="",f=ac[a],e=0;21>e;e++)4==e?c+="D":(c+=f&1?"D":"G",f>>=1);if(!b)return[c,null,Nb[a]];image.llImage.drawImage(c,null,b)}Za.prototype=Ra.prototype;for(var nb=[],$a=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],fb=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]],mb=new min2phase.Search,kb=[[],[0],[1],[2]],rb=[[],[3,14],
[4,13],[5,12]],ob=["","x'","x2","x"],sb=[[]],tb=[8192,4113,8210,4099,8195,4114,8194,4115,8211,4098,8208,4097,8209,4096,8193,4112,0,17,3,18,2,19,1,16,1024,1041,5120,9233,5137,9216,24,8,8200,4104,8216,4120,1048,5128,9224,5144,9240,1032],wb=[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1],zb="Easy-01 Easy-02 Easy-03 Easy-04 RE-05 RE-06 RE-07 RE-08 REFC-09 REFC-10 REFC-11 REFC-12 REFC-13 REFC-14 SPGO-15 SPGO-16 SPGO-17 SPGO-18 PMS-19 PMS-20 PMS-21 PMS-22 Weird-23 Weird-24 CPEU-25 CPEU-26 CPEU-27 CPEU-28 CPEU-29 CPEU-30 EPCU-31 EPCU-32 EPCU-33 EPCU-34 EPCU-35 EPCU-36 ECP-37 ECP-38 ECP-39 ECP-40 ECP-41 Solved-42".split(" "),
vb=[],xb=[],Kb=[],pb=0;pb<tb.length;pb++)tb[pb]&240||(vb.push(tb[pb]),xb.push(wb[pb]),Kb.push(zb[pb]));var Db=[],Eb=[];for(pb=0;27>pb;pb++)Db[pb]=~~(pb/9)<<12|~~(pb/3)%3<<8|pb%3,Eb[pb]=1;var Bb=[],Ib=[],Ab=[];for(pb=0;216>pb;pb++){var qb=pb%27,ub=~~(pb/27);Bb[pb]=[~~(qb/9)%3<<12|~~(qb/3)%3<<8|qb%3,(ub>>2&1)<<12|(ub>>1&1)<<8|ub&1];Ib[pb]=1;Ab[pb]="WVLS;UB;UF;UF UB;UL;UB UL;UF UL;No Edge".split(";")[ub]+"-"+(qb+1)}var Hb=[[12816,8481,"FeFeeeBeBLGRDGDRGLDGD"],[8961,4626,"ReLeeeReLBGBDGDFGFDGD"],[4611,
4626,"ReBeeeLeBFGRDGDLGFDGD"],[8211,4626,"LeReeeFeFRGLDGDBGBDGD"],[8961,258,"DeBeeeLeDFGRFGRDGLBGD"],[12321,4128,"DeLeeeReDBGRFGBDGFLGD"],[8211,513,"DeReeeReDBGLBGFDGFLGD"],[12546,4128,"DeLeeeLeDFGBRGBDGRFGD"],[12816,4128,"DeLeeeFeDRGFLGBDGBRGD"],[4611,513,"DeReeeLeDFDBRDFDGLBGD"],[12546,4386,"BeFeeeFeBRGDLGLDGRDGD"],[4611,4641,"ReLeeeReLBGDFGBDGFDGD"],[8961,8466,"FeLeeeFeRRGDBGBDGLDGD"],[12321,4386,"BeReeeLeBFGDLGFDGRDGD"],[12816,4386,"LeFeeeReFBGDRGLDGBDGD"],[8211,4641,"BeLeeeLeFFGDRGBDGRDGD"],
[4611,8706,"LeReeeFeDRGLBGDBGDFGD"],[12546,8736,"FeBeeeLeDFGBRGDLGDRGD"],[12816,8736,"ReBeeeFeDRGFLGDLGDBGD"],[8211,8706,"ReBeeeLeDFGRFGDLGDBGD"],[12321,8736,"BeReeeFeDRGFLGDBGDLGD"],[8961,546,"BeReeeLeDFGRFGDBGDLGD"],[12816,8448,"FeFeeeDeDBGBRGDRGLDGL"],[8961,528,"BeFeeeDeDBGFLGDRGRDGL"],[8211,4098,"BeBeeeDeDLGRFGDLGRDGF"],[4611,4098,"BeLeeeDeDBGRFGDFGRDGL"],[12546,8448,"ReBeeeDeDLGBRGDLGFDGF"],[12321,8448,"FeBeeeDeDRGRFGDLGLDGB"],[12321,4608,"FeFeeeDeDBGBRGLDGDRGL"],[8211,8193,"BeFeeeDeDFGBRGLDGDLGR"],
[8961,288,"LeLeeeDeDFGBRGBDGDFGR"],[4611,8193,"ReFeeeDeDBGRFGLDGDBGL"],[12546,4608,"LeBeeeDeDBGRFGRDGDFGL"],[12816,4608,"LeReeeDeDBGBRGFDGDFGL"],[12546,4353,"FeBeeeDeRBGFDGRDGLDGL"],[4611,4113,"FeBeeeDeLFGBDGRDGLDGR"],[8961,4368,"ReFeeeDeLRGBDGLDGFDGB"],[12321,4353,"LeBeeeDeFFGLDGRDGBDGR"],[12816,4353,"LeFeeeDeRRGFDGLDGBDGB"],[8211,4113,"LeFeeeDeBFGRDGLDGBDGR"],[12321,0,"DeDeeeDeDBGRFGBRGFLGL"],[8961,0,"DeDeeeDeDBGFLGRFGBRGL"],[12816,0,"DeDeeeDeDBGBRGRFGFLGL"]],Mb=[2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1];qb="H-BBFF H-FBFB H-RFLF H-RLFF L-FBRL L-LBFF L-LFFB L-LFFR L-LRFF L-RFBL Pi-BFFB Pi-FBFB Pi-FRFL Pi-FRLF Pi-LFRF Pi-RFFL S-FBBF S-FBFB S-FLFR S-FLRF S-LFFR S-LFRF T-BBFF T-FBFB T-FFLR T-FLFR T-RFLF T-RLFF U-BBFF U-BFFB U-FFLR U-FRLF U-LFFR U-LRFF aS-FBBF aS-FBFB aS-FRFL aS-FRLF aS-LFRF aS-RFFL O-Adj O-Diag O-AUF".split(" ");var yb=[[205840,12816,"FBar-1"],[205840,12546,"FBar-2"],[205840,12321,"FBar-3"],[205840,8961,"FBar-4"],[205840,8496,"FBar-5"],
[205840,8211,"FBar-6"],[205840,4896,"FBar-7"],[205840,4611,"FBar-8"],[205840,4146,"FBar-9"],[205840,786,"FBar-10"],[205840,561,"FBar-11"],[205840,291,"FBar-12"],[205825,12801,"2Opp-1"],[205825,12576,"2Opp-2"],[205825,12306,"2Opp-3"],[205825,8976,"2Opp-4"],[205825,8451,"2Opp-5"],[205825,8241,"2Opp-6"],[205825,4866,"2Opp-7"],[205825,4656,"2Opp-8"],[205825,4131,"2Opp-9"],[205825,801,"2Opp-10"],[205825,531,"2Opp-11"],[205825,306,"2Opp-12"],[201760,12801,"ROpp-1"],[201760,12576,"ROpp-2"],[201760,12306,
"ROpp-3"],[201760,8976,"ROpp-4"],[201760,8451,"ROpp-5"],[201760,8241,"ROpp-6"],[201760,4866,"ROpp-7"],[201760,4656,"ROpp-8"],[201760,4131,"ROpp-9"],[201760,801,"ROpp-10"],[201760,531,"ROpp-11"],[201760,306,"ROpp-12"],[201730,12816,"RBar-1"],[201730,12546,"RBar-2"],[201730,12321,"RBar-3"],[201730,8961,"RBar-4"],[201730,8496,"RBar-5"],[201730,8211,"RBar-6"],[201730,4896,"RBar-7"],[201730,4611,"RBar-8"],[201730,4146,"RBar-9"],[201730,786,"RBar-10"],[201730,561,"RBar-11"],[201730,291,"RBar-12"],[197665,
12816,"2Bar-1"],[197665,12546,"2Bar-2"],[197665,12321,"2Bar-3"],[197665,8961,"2Bar-4"],[197665,8496,"2Bar-5"],[197665,8211,"2Bar-6"],[197665,4896,"2Bar-7"],[197665,4611,"2Bar-8"],[197665,4146,"2Bar-9"],[197665,786,"2Bar-10"],[197665,561,"2Bar-11"],[197665,291,"2Bar-12"],[197650,12801,"FOpp-1"],[197650,12576,"FOpp-2"],[197650,12306,"FOpp-3"],[197650,8976,"FOpp-4"],[197650,8451,"FOpp-5"],[197650,8241,"FOpp-6"],[197650,4866,"FOpp-7"],[197650,4656,"FOpp-8"],[197650,4131,"FOpp-9"],[197650,801,"FOpp-10"],
[197650,531,"FOpp-11"],[197650,306,"FOpp-12"]],Gb=[],Fb=[];for(pb=0;pb<yb.length;pb++)Gb[pb]=1,Fb[pb]=yb[pb][2];var Jb=[[4146,12816],[12546,12816],[12321,12816],[8961,12816],[12816,12321],[12816,12546],[12816,8961],[12306,12801],[8496,12321],[4896,12546],[12321,12546],[12546,12321],[12801,12801],[12576,12801],[4656,12306],[12306,12306],[531,12801],[8976,12801],[4656,12801],[12576,12306],[12801,12306]],Ob=[1,4,4,2,4,4,2,4,4,4,4,4,4,4,1,1,4,4,4,4,4],Rb="H Ua Ub Z Aa Ab E F Ga Gb Gc Gd Ja Jb Na Nb Ra Rb T V Y".split(" "),
Pb=[["BFBRLRFBFLRL",[1,7],[3,5]],["BRBRLRFFFLBL",[3,7],[7,5],[5,3]],["BLBRBRFFFLRL",[3,5],[5,7],[7,3]],["LFLBRBRBRFLF",[1,5],[3,7]],["LBBRRLBFRFLF",[0,2],[2,6],[6,0]],["RBFLRRFFLBLB",[0,6],[6,8],[8,0]],["LBRFRBRFLBLF",[0,6],[2,8]],["BFRFRBRBFLLL",[1,7],[2,8]],["BRRFLBRBFLFL"],["BFRFBBRLFLRL"],["BFRFLBRRFLBL"],["BLRFFBRBFLRL"],["BBRFFBRRFLLL",[1,5],[2,8]],["LBBRLLBRRFFF",[2,8],[5,7]],["FBBRLLBFFLRR",[2,6],[3,5]],["BBFLLRFFBRRL",[0,8],[3,5]],["LLBRBLBFRFRF",[1,3],[2,8]],["RBFLFRFLLBRB",[2,8],[3,7]],
["BBRFLBRFFLRL",[2,8],[3,5]],["BBFLFRFRBRLL",[0,8],[1,5]],["BBFLRRFLBRFL",[0,8],[1,3]]],Lb=[[0,0],[4369,4626],[4369,4386],[4369,546],[4369,273],[17,8226],[17,4113],[17,8706],[17,273],[17,4368],[17,8736],[17,546],[17,4353],[257,8226],[257,273],[257,546],[257,4113],[4369,258],[4369,18],[4369,33],[4369,0],[0,4626],[0,4386],[0,18],[0,33],[0,258],[0,273],[0,546],[17,0],[17,528],[17,8448],[17,33],[17,4098],[257,33],[257,528],[17,4128],[17,258],[17,8208],[17,513],[257,4128],[257,258],[17,4608],[17,288],
[17,18],[17,8193],[257,18],[257,288],[17,4641],[17,4386],[17,8466],[17,8721],[257,4641],[257,4386],[17,8481],[17,4626],[257,8481],[257,4626],[257,0]],Tb=[1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,2,2],Nb="PLL Point-1 Point-2 Point-3 Point-4 Square-5 Square-6 SLBS-7 SLBS-8 Fish-9 Fish-10 SLBS-11 SLBS-12 Knight-13 Knight-14 Knight-15 Knight-16 Point-17 Point-18 Point-19 CO-20 OCLL-21 OCLL-22 OCLL-23 OCLL-24 OCLL-25 OCLL-26 OCLL-27 CO-28 Awkward-29 Awkward-30 P-31 P-32 T-33 C-34 Fish-35 W-36 Fish-37 W-38 BLBS-39 BLBS-40 Awkward-41 Awkward-42 P-43 P-44 T-45 C-46 L-47 L-48 L-49 L-50 I-51 I-52 L-53 L-54 I-55 I-56 CO-57".split(" "),
ac=[255,965120,907776,374304,447360,538123,396054,79402,410514,152458,627788,595470,281363,108088,181144,566809,166684,308097,300805,825861,299685,83290,672858,82170,66014,132222,133470,74874,4783,70542,144042,328598,22059,99228,172728,303569,803475,13195,72238,100924,574105,86698,38221,918166,14891,688796,276579,338706,677386,935442,967760,109336,342338,345874,87818,116504,698904,33469],Vb=[[],[9],[10],[11]],Sb=["","y","y2","y'"];ub="UR UF UL UB DR DF DL DB RF LF LB RB URF UFL ULB UBR DFR DLF DBL DRB".split(" ");
for(pb=0;20>pb;pb++){var Wb=ub[pb];ub[pb+20]=(2==Wb.length?"OriE-":"OriC-")+Wb;ub[pb]=(2==Wb.length?"PermE-":"PermC-")+Wb}pb=mathlib.valuedArray(40,0);scrMgr.reg("333",Qa)("333fm",function(){return"R' U' F "+Ta(0xffffffffffff,0xffffffffffff,4294967295,4294967295,void 0,void 0,2,1)+"R' U' F"})("edges",Ya)("corners",Sa)("333custom",function(a,b,c){var f=b=a=0,e=0,w=4352;c=c||mathlib.valuedArray(40,1);for(var n=0;12>n;n++)w+=(c[n]?69632:0)+(c[n+20]?16:0),a+=(c[n]?15:n)*Math.pow(16,n),b+=(c[n+20]?15:
0)*Math.pow(16,n);for(n=0;8>n;n++)w+=(c[n+12]?65792:0)+(c[n+32]?1:0),f+=(c[n+12]?15:n)*Math.pow(16,n),e+=(c[n+32]?15:0)*Math.pow(16,n);return 0==(w&1887470)?"U' U ":Ta(a,b,f,e)},[ub,pb])("ll",n)("lsll2",db,[zb,wb,lb.bind(null,"GGGGDGGGGGGGGRRGRRGGGBBGBBG",tb,wb)])("f2l",cb)("zbll",jb,[qb,Mb,gb.bind(null,"D")])("zzll",eb)("zbls",db,[zb,wb,lb.bind(null,"GGGGDGGGGGGGGRRGRRGGGBBGBBG",tb,wb)])("ttll",Va,[Fb,Gb,function(a,b){for(var c=[],f=yb[a],e=3;0<=e;e--)c.push(["FR","LF","BL","RB","GG"][f[0]>>4*e&
15]),c.push("RFLB".charAt(f[1]>>4*e&15));c=c.join("");c=c.slice(7)+c.slice(0,7);c=["GDDDDDDDD"+c,null];if(!b)return c.concat([Fb[a]]);image.llImage.drawImage(c[0],c[1],b)}])("eols",function(a,b,c){a=vb[scrMgr.fixCase(c,xb)];b=Math.pow(16,a>>8&15);return Ta(0xba9f7654ffff-7*Math.pow(16,a&15),0,1986002943-11*b,1048575-(15^a>>12&3)*b,kb)},[Kb,xb,lb.bind(null,"GDGDDDGDGGGGGRRGRRGGGBBDBBG",vb,xb)])("wvls",function(a,b,c){a=Db[scrMgr.fixCase(c,Eb)];return Ta(0xba9f7654ff8f,0,1986002767,983072|a)},["Oriented Rectangle-1 Rectangle-2 Tank-1 Bowtie-1 Bowtie-3 Tank-2 Bowtie-2 Bowtie-4 Snake-1 Adjacent-1 Adjacent-2 Gun-Far Sune-1 Pi-Near Gun-Back Pi-Front H-Side Snake-2 Adjacent-3 Adjacent-4 Gun-Sides H-Front Pi-Back Gun-Near Pi-Far Sune-2".split(" "),
Eb,function(a,b){var c=Db[scrMgr.fixCase(a,Eb)],f=["DGG","GDG","GGD"];f=f[c&3]+f[c>>8&3]+f[c>>12&3];image.llImage.drawImage("3D6DDDBB0RR21G87G54GU".replace(/[0-9]/g,function(a){return f[~~a]}),null,b)}])("vls",function(a,b,c){a=Bb[scrMgr.fixCase(c,Ib)];return Ta(0xba9f7654ff8f,64424509440+a[1],1986002767,983072+a[0],[[2]])},[Ab,Ib,function(a,b){var c=Bb[scrMgr.fixCase(a,Ib)],f=["DGG","GDG","GGD"];f=f[c[0]&3]+f[c[0]>>8&3]+f[c[0]>>12&3];var e=["DG","GD"];e=e[c[1]&3]+e[c[1]>>8&3]+e[c[1]>>12&3];image.llImage.drawImage("6a0eDR3cR4dUFF21b87f5".replace(/[0-9]/g,
function(a){return f[~~a]}).replace(/[a-z]/g,function(a){return e[a.charCodeAt(0)-97]}),null,b)}])("lse",w)("cmll",bb,[qb,Mb,gb.bind(null,"G")])("cll",f,[qb,Mb,gb.bind(null,"G")])("coll",jb,[qb,Mb,gb.bind(null,"D")])("ell",Oa)("pll",function(a,b,c){a=Jb[scrMgr.fixCase(c,Ob)];return Ta(a[0]+0xba9876540000,0,a[1]+1985216512,0,kb,kb)},[Rb,Ob,ab])("oll",function(a,b,c){a=Lb[scrMgr.fixCase(c,Tb)];return Ta(0xba987654ffff,a[0],1985282047,a[1],kb,kb)},[Nb,Tb,hb])("2gll",function(){return Ta(0xba987654ffff,
0,1985229328,65535,kb)})("sbrx",function(a,b,f){a=c(4);return Ta(0xfa9ff6ffffff,0xf00ff0ffffff,4133486591,4027580415,[rb[a]])+ob[a]})("mt3qb",function(){var a=mathlib.rn(4);return Ta(0xffff765fffff,0xffff000fffff,4133486591,4027580415,[Vb[a]])+Sb[a]})("mteole",function(){var a=mathlib.rn(4),b=mathlib.rn(4);return Ta(0xba98765fffff+4294967296*(17767&15<<4*a),1048575+4294967296*(15<<4*a),4133486591,4027580415,[Vb[b]])+Sb[b]})("mttdr",function(){return Ta(0xba98765fffff,0,4133486591,4027580415)})("mt6cp",
function(){return Ta(0xba98765fffff,0,4133486591,0)})("mtl5ep",function(){return Ta(0xba98765fffff,0,1985229328,0)})("mtcdrll",function(){return Ta(0xba98765fffff,0,1985282047,65535)})("easyc",function(a,b){var c=cross.getEasyCross(b);return Ta(c[0],c[1],4294967295,4294967295)})("easyxc",function(a,b){var c=cross.getEasyXCross(b);return Ta(c[0],c[1],c[2],c[3])})("eoline",function(){return Ta(0xffff7f5fffff,0,4294967295,4294967295)});return{getRandomScramble:Qa,getEdgeScramble:Ya,getCornerScramble:Sa,
getLLScramble:n,getLSLLScramble:db,getZBLLScramble:jb,getZZLLScramble:eb,getTTLLScramble:Va,getF2LScramble:cb,getLSEScramble:w,getCMLLScramble:bb,getCLLScramble:f,getELLScramble:Oa,getAnyScramble:Ta,getPLLImage:ab,getOLLImage:hb,genFacelet:function(a){return mb.solution(a,21,1E9,50,2)},solvFacelet:function(a){return mb.solution(a,21,1E9,50,0)}}}(mathlib.getNPerm,mathlib.setNPerm,mathlib.set8Perm,mathlib.getNParity,mathlib.rn,mathlib.rndEl);var scramble_444=function(b,Pa,x){function z(a,b){var c;var f=Array(a);if(void 0!=b)for(c=0;c<a;c++)f[c]=Array(b);return f}function c(a,b,c){var f=lc[a];f&&!f.___clazz$?Cb=f.prototype:(!f&&(f=lc[a]=function(){}),Cb=f.prototype=0>b?{}:new lc[b],Cb.castableTypeMap$=c);for(var e=3;e<arguments.length;++e)arguments[e].prototype=Cb;f.___clazz$&&(Cb.___clazz$=f.___clazz$,f.___clazz$=null)}function e(a){for(var b={},c=0,f=a.length;c<f;++c)b[a[c]]=1;return b}function a(){}function h(){}function Ra(a,b){var c=
Array(b);if(3==a)for(var f=0;f<b;++f){var e={};e.l=e.m=e.h=0;c[f]=e}else if(0<a)for(e=[null,0,!1][a],f=0;f<b;++f)c[f]=e;return c}function Za(a,b,c,f,e){f=Ra(e,f);r(a,b,c,f);return f}function r(a,b,c,f){Na();var e=Dc,w=Ec;Na();for(var n=0,h=e.length;n<h;++n)f[e[n]]=w[n];f.___clazz$=a;f.castableTypeMap$=b;f.queryId$=c;return f}function Na(){Na=a;Dc=[];Ec=[];var b=new h,c=Dc,f=Ec,e=0,w,n;for(n in b)if(w=b[n])c[e]=n,f[e]=w,++e}function Qa(){Qa=a;vc=z(15582,36);mc=z(15582);Yb=z(15582);fc=z(48,48);Zb=z(48,
36);gc=z(48);Fc=z(48)}function y(a,b){var c;if(null!=b&&b.castableTypeMap$&&b.castableTypeMap$[21]){for(c=0;24>c;++c)if(a.ct[c]!=b.ct[c])return!1;return!0}return!1}function Wa(a){var b;var c=0;var f=8;for(b=23;0<=b;--b)1==a.ct[b]&&(c+=Pa[b][f--]);return c}function Ua(a){var b;if(null!=hc)return hc[Wa(a)];for(b=0;48>b;++b){var c=Wa(a);a:{var f;var e=0;for(f=mc.length-1;e<=f;){var w=e+(~~(f-e)>>1);var n=mc[w];if(n<c)e=w+1;else if(n>c)f=w-1;else{c=w;break a}}c=-e-1}c=0<=c?c:-1;if(-1!=c)return 64*c+b;
Ta(a,0);1==b%2&&Ta(a,1);7==b%8&&Ta(a,2);15==b%16&&Ta(a,3)}}function Xa(a,b){var c=b%3;switch(~~(b/3)){case 0:ib(a.ct,0,1,2,3,c);break;case 1:ib(a.ct,16,17,18,19,c);break;case 2:ib(a.ct,8,9,10,11,c);break;case 3:ib(a.ct,4,5,6,7,c);break;case 4:ib(a.ct,20,21,22,23,c);break;case 5:ib(a.ct,12,13,14,15,c);break;case 6:ib(a.ct,0,1,2,3,c);ib(a.ct,8,20,12,16,c);ib(a.ct,9,21,13,17,c);break;case 7:ib(a.ct,16,17,18,19,c);ib(a.ct,1,15,5,9,c);ib(a.ct,2,12,6,10,c);break;case 8:ib(a.ct,8,9,10,11,c);ib(a.ct,2,19,
4,21,c);ib(a.ct,3,16,5,22,c);break;case 9:ib(a.ct,4,5,6,7,c);ib(a.ct,10,18,14,22,c);ib(a.ct,11,19,15,23,c);break;case 10:ib(a.ct,20,21,22,23,c);ib(a.ct,0,8,4,14,c);ib(a.ct,3,11,7,13,c);break;case 11:ib(a.ct,12,13,14,15,c),ib(a.ct,1,20,7,18,c),ib(a.ct,0,23,6,17,c)}}function Ta(a,b){switch(b){case 0:Xa(a,19);Xa(a,28);break;case 1:Xa(a,21);Xa(a,32);break;case 2:ib(a.ct,0,3,1,2,1);ib(a.ct,8,11,9,10,1);ib(a.ct,4,7,5,6,1);ib(a.ct,12,15,13,14,1);ib(a.ct,16,19,21,22,1);ib(a.ct,17,18,20,23,1);break;case 3:Xa(a,
18),Xa(a,29),Xa(a,24),Xa(a,35)}}function Ya(a,b){var c;for(c=0;c<b;++c)Ta(a,0),1==c%2&&Ta(a,1),7==c%8&&Ta(a,2),15==c%16&&Ta(a,3)}function Sa(a,b){var c;var f=8;for(c=23;0<=c;--c)a.ct[c]=0,b>=Pa[c][f]&&(b-=Pa[c][f--],a.ct[c]=1)}function n(a,b){var c;for(c=0;24>c;++c)a.ct[c]=b.ct[c]}function db(){var a;this.ct=z(24);for(a=0;8>a;++a)this.ct[a]=1;for(a=8;24>a;++a)this.ct[a]=0}function lb(a,b){var c;this.ct=z(24);for(c=0;24>c;++c)this.ct[c]=~~(a.ct[c]/2)==b?1:0}function cb(a){var b;this.ct=z(24);for(b=
0;24>b;++b)this.ct[b]=a[b]}function jb(){jb=a;wc=z(70,28);xc=z(6435,28);ed=z(70,16);fd=z(6435,16);Ub=z(450450);gd=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,1,0,0,0]}function bb(a){var b;var c=0;var f=8;for(b=14;0<=b;--b)a.ct[b]!=a.ct[15]&&(c+=Pa[b][f--]);return c}function gb(a){var b;var c=0;var f=4;for(b=6;0<=b;--b)a.rl[b]!=a.rl[7]&&(c+=Pa[b][f--]);return 2*c+a.parity}function eb(a,b){a.parity^=gd[b];var c=b%3;switch(~~(b/3)){case 0:ib(a.ct,0,1,2,3,c);break;case 1:ib(a.rl,
0,1,2,3,c);break;case 2:ib(a.ct,8,9,10,11,c);break;case 3:ib(a.ct,4,5,6,7,c);break;case 4:ib(a.rl,4,5,6,7,c);break;case 5:ib(a.ct,12,13,14,15,c);break;case 6:ib(a.ct,0,1,2,3,c);ib(a.rl,0,5,4,1,c);ib(a.ct,8,9,12,13,c);break;case 7:ib(a.rl,0,1,2,3,c);ib(a.ct,1,15,5,9,c);ib(a.ct,2,12,6,10,c);break;case 8:ib(a.ct,8,9,10,11,c);ib(a.rl,0,3,6,5,c);ib(a.ct,3,2,5,4,c);break;case 9:ib(a.ct,4,5,6,7,c);ib(a.rl,3,2,7,6,c);ib(a.ct,11,10,15,14,c);break;case 10:ib(a.rl,4,5,6,7,c);ib(a.ct,0,8,4,14,c);ib(a.ct,3,11,
7,13,c);break;case 11:ib(a.ct,12,13,14,15,c),ib(a.rl,1,4,7,2,c),ib(a.ct,1,0,7,6,c)}}function Va(a,b){switch(b){case 0:eb(a,19);eb(a,28);break;case 1:eb(a,21);eb(a,32);break;case 2:ib(a.ct,0,3,1,2,1),ib(a.ct,8,11,9,10,1),ib(a.ct,4,7,5,6,1),ib(a.ct,12,15,13,14,1),ib(a.rl,0,3,5,6,1),ib(a.rl,1,2,4,7,1)}}function w(a,b,c){var f;for(f=0;16>f;++f)a.ct[f]=~~(b.ct[f]/2);for(f=0;8>f;++f)a.rl[f]=b.ct[f+16];a.parity=c}function f(a,b){var c;var f=8;a.ct[15]=0;for(c=14;0<=c;--c)b>=Pa[c][f]?(b-=Pa[c][f--],a.ct[c]=
1):a.ct[c]=0}function Oa(a,b){var c;a.parity=b&1;b>>>=1;var f=4;a.rl[7]=0;for(c=6;0<=c;--c)b>=Pa[c][f]?(b-=Pa[c][f--],a.rl[c]=1):a.rl[c]=0}function ab(){this.rl=z(8);this.ct=z(16)}function hb(){hb=a;nc=z(29400,20);hd=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1];bc=z(29400);Gc=[0,9,14,23,27,28,41,42,46,55,60,69];Hc=z(70)}function nb(a){var b;var c=0;var f=4;for(b=6;0<=b;--b)a.ud[b]!=a.ud[7]&&(c+=Pa[b][f--]);c*=35;f=4;for(b=6;0<=b;--b)a.fb[b]!=a.fb[7]&&(c+=Pa[b][f--]);var e=a.fb[7]^a.ud[7];var w=0;f=4;
for(b=7;0<=b;--b)a.rl[b]!=e&&(w+=Pa[b][f--]);return a.parity+2*(12*c+Hc[w])}function $a(a,b,c){var f;var e=b.ct[0]>b.ct[8]^b.ct[8]>b.ct[16]^b.ct[0]>b.ct[16]?1:0;for(f=0;8>f;++f)a.ud[f]=b.ct[f]&1^1,a.fb[f]=b.ct[f+8]&1^1,a.rl[f]=b.ct[f+16]&1^1^e;a.parity=e^c}function fb(){this.ud=z(8);this.rl=z(8);this.fb=z(8)}function mb(){mb=a}function kb(){var a;this.ct=z(24);for(a=0;24>a;++a)this.ct[a]=~~(a/4)}function rb(a){kb.call(this);for(a=0;23>a;++a){var c=a+b(24-a);if(this.ct[c]!=this.ct[a]){var f=this.ct[a];
this.ct[a]=this.ct[c];this.ct[c]=f}}}function ob(){ob=a;Xb=z(18);var b,c;Xb[0]=new vb(15120,0);Xb[3]=new vb(21021,1494);Xb[6]=new vb(8064,1236);Xb[9]=new vb(9,0);Xb[12]=new vb(1230,412);Xb[15]=new vb(224,137);for(b=0;18>b;b+=3)for(c=0;2>c;++c)Xb[b+c+1]=new zb,wb(Xb[b+c],Xb[b],Xb[b+c+1])}function sb(a){a.cp=[0,1,2,3,4,5,6,7];a.co=[0,0,0,0,0,0,0,0]}function tb(a,b){var c;for(c=0;8>c;++c)a.cp[c]=b.cp[c],a.co[c]=b.co[c]}function wb(a,b,c){var f;for(f=0;8>f;++f){c.cp[f]=a.cp[b.cp[f]];var e=a.co[b.cp[f]];
var w=b.co[f];var n=e;n+=3>e?w:6-w;n%=3;3<=e^3<=w&&(n+=3);c.co[f]=n}}function zb(){sb(this)}function vb(a,b){sb(this);mathlib.set8Perm(this.cp,a);var c=b,f;var e=0;for(f=6;0<=f;--f)e+=this.co[f]=c%3,c=~~(c/3);this.co[7]=(15-e)%3}function xb(a){vb.call(this,b(40320),b(2187))}function Kb(){Kb=a;$b=z(1937880);yc=z(1538);zc=z(1538);ic=z(11880);id=[0,1,6,3,4,5,2,7];Ic=z(160,12);Jc=z(160,12);Kc=[1,1,1,3,12,60,360,2520,20160,181440,1814400,19958400,239500800];Lc=[0,2,4,6,1,3,7,5,8,9,10,11]}function pb(a,
b,c,f,e){var w=a.edgeo[e];a.edgeo[e]=a.edge[f];a.edge[f]=a.edgeo[c];a.edgeo[c]=a.edge[b];a.edge[b]=w}function Db(a,b){var c;a.isStd||Mb(a);var f=0;var e=1985229328;var w=47768;for(c=0;c<b;++c){var n=a.edge[c]<<2;f*=12-c;32<=n?(f+=w>>n-32&15,w-=4368<<n-32):(f+=e>>n&15,w-=4369,e-=286331152<<n)}return f}function Eb(a){var b=Db(a,4);b=ic[b];var c=b&7;b>>=3;Ab(a,c);a=Db(a,10)%20160;return 20160*b+a}function Bb(a,b){a.isStd=!1;switch(b){case 0:x(a.edge,0,4,1,5);x(a.edgeo,0,4,1,5);break;case 1:yb(a.edge,
0,4,1,5);yb(a.edgeo,0,4,1,5);break;case 2:x(a.edge,0,5,1,4);x(a.edgeo,0,5,1,4);break;case 3:yb(a.edge,5,10,6,11);yb(a.edgeo,5,10,6,11);break;case 4:x(a.edge,0,11,3,8);x(a.edgeo,0,11,3,8);break;case 5:yb(a.edge,0,11,3,8);yb(a.edgeo,0,11,3,8);break;case 6:x(a.edge,0,8,3,11);x(a.edgeo,0,8,3,11);break;case 7:x(a.edge,2,7,3,6);x(a.edgeo,2,7,3,6);break;case 8:yb(a.edge,2,7,3,6);yb(a.edgeo,2,7,3,6);break;case 9:x(a.edge,2,6,3,7);x(a.edgeo,2,6,3,7);break;case 10:yb(a.edge,4,8,7,9);yb(a.edgeo,4,8,7,9);break;
case 11:x(a.edge,1,9,2,10);x(a.edgeo,1,9,2,10);break;case 12:yb(a.edge,1,9,2,10);yb(a.edgeo,1,9,2,10);break;case 13:x(a.edge,1,10,2,9);x(a.edgeo,1,10,2,9);break;case 14:yb(a.edge,0,4,1,5);yb(a.edgeo,0,4,1,5);x(a.edge,9,11);x(a.edgeo,8,10);break;case 15:yb(a.edge,5,10,6,11);yb(a.edgeo,5,10,6,11);x(a.edge,1,3);x(a.edgeo,0,2);break;case 16:yb(a.edge,0,11,3,8);yb(a.edgeo,0,11,3,8);x(a.edge,5,7);x(a.edgeo,4,6);break;case 17:yb(a.edge,2,7,3,6);yb(a.edgeo,2,7,3,6);x(a.edge,8,10);x(a.edgeo,9,11);break;case 18:yb(a.edge,
4,8,7,9);yb(a.edgeo,4,8,7,9);x(a.edge,0,2);x(a.edgeo,1,3);break;case 19:yb(a.edge,1,9,2,10),yb(a.edgeo,1,9,2,10),x(a.edge,4,6),x(a.edgeo,5,7)}}function Ib(a,b){a.isStd=!1;switch(b){case 0:Bb(a,14);Bb(a,17);break;case 1:pb(a,11,5,10,6);pb(a,5,10,6,11);pb(a,1,2,3,0);pb(a,4,9,7,8);pb(a,8,4,9,7);pb(a,0,1,2,3);break;case 2:Gb(a,4,5),Gb(a,5,4),Gb(a,11,8),Gb(a,8,11),Gb(a,7,6),Gb(a,6,7),Gb(a,9,10),Gb(a,10,9),Gb(a,1,1),Gb(a,0,0),Gb(a,3,3),Gb(a,2,2)}}function Ab(a,b){for(;2<=b;)b-=2,Ib(a,1),Ib(a,2);0!=b&&Ib(a,
0)}function qb(a,b){var c,f;var e=1985229328;var w=47768;for(c=f=0;11>c;++c){var n=Kc[11-c];var h=~~(b/n);b%=n;f^=h;h<<=2;32<=h?(h-=32,a.edge[c]=w>>h&15,n=(1<<h)-1,w=(w&n)+(w>>4&~n)):(a.edge[c]=e>>h&15,n=(1<<h)-1,e=(e&n)+(e>>>4&~n)+(w<<28),w>>=4)}0==(f&1)?a.edge[11]=e:(a.edge[11]=a.edge[10],a.edge[10]=e);for(c=0;12>c;++c)a.edgeo[c]=c;a.isStd=!0}function ub(a,b){var c;for(c=0;12>c;++c)a.edge[c]=b.edge[c],a.edgeo[c]=b.edgeo[c];a.isStd=b.isStd}function Hb(a,b){var c;null==a.temp&&(a.temp=z(12));for(c=
0;12>c;++c)a.temp[c]=c,a.edge[c]=b.ep[Lc[c]+12]%12;var f=1;for(c=0;12>c;++c)for(;a.edge[c]!=c;){var e=a.edge[c];a.edge[c]=a.edge[e];a.edge[e]=e;var w=a.temp[c];a.temp[c]=a.temp[e];a.temp[e]=w;f^=1}for(c=0;12>c;++c)a.edge[c]=a.temp[b.ep[Lc[c]]%12];return f}function Mb(a){var b;null==a.temp&&(a.temp=z(12));for(b=0;12>b;++b)a.temp[a.edgeo[b]]=b;for(b=0;12>b;++b)a.edge[b]=a.temp[a.edge[b]],a.edgeo[b]=b;a.isStd=!0}function yb(a,b,c,f,e){var w=a[b];a[b]=a[f];a[f]=w;w=a[c];a[c]=a[e];a[e]=w}function Gb(a,
b,c){var f=a.edge[b];a.edge[b]=a.edgeo[c];a.edgeo[c]=f}function Fb(){this.edge=z(12);this.edgeo=z(12)}function Jb(a,b){return a[b>>4]>>((b&15)<<1)&3}function Ob(a,b,c){var f=Jc[b];var e=Ic[b];var w=0;var n=1985229328;var h=47768;for(b=0;b<c;++b){var Oa=f[a[e[b]]]<<2;w*=12-b;32<=Oa?(w+=h>>Oa-32&15,h-=4368<<Oa-32):(w+=n>>Oa&15,h-=4369,n-=286331152<<Oa)}return w}function Rb(a){var b=new Fb;var c=0;var f=Jb($b,a);if(3==f)return 10;for(;0!=a;){0==f?f=2:--f;var e=~~(a/20160);e=yc[e];var w=a%20160;qb(b,
20160*e+w);for(e=0;17>e;++e){w=Ob(b.edge,e<<3,4);w=ic[w];var n=w&7;w>>=3;n=Ob(b.edge,e<<3|n,10)%20160;w=20160*w+n;if(Jb($b,w)==f){++c;a=w;break}}}return c}function Pb(a,b,c){a[b>>4]^=(3^c)<<((b&15)<<1)}function Lb(){Lb=a}function Tb(){var a;this.ep=z(24);for(a=0;24>a;++a)this.ep[a]=a}function Nb(a){Tb.call(this);for(a=0;23>a;++a){var c=a+b(24-a);if(c!=a){var f=this.ep[a];this.ep[a]=this.ep[c];this.ep[c]=f}}}function ac(){ac=a;Mc=[35,1,34,2,4,6,22,5,19]}function Vb(a,b){var c=a.edge;var f=b.edge,e;
for(e=0;24>e;++e)c.ep[e]=f.ep[e];c=a.center;f=b.center;for(e=0;24>e;++e)c.ct[e]=f.ct[e];tb(a.corner,b.corner);a.value=b.value;a.add1=b.add1;a.length1=b.length1;a.length2=b.length2;a.length3=b.length3;a.sym=b.sym;for(c=0;60>c;++c)a.moveBuffer[c]=b.moveBuffer[c];a.moveLength=b.moveLength;a.edgeAvail=b.edgeAvail;a.centerAvail=b.centerAvail;a.cornerAvail=b.cornerAvail}function Sb(a){for(;a.centerAvail<a.moveLength;){var b=a.center,c=a.moveBuffer[a.centerAvail++];var f=c%3;switch(~~(c/3)){case 0:ib(b.ct,
0,1,2,3,f);break;case 1:ib(b.ct,16,17,18,19,f);break;case 2:ib(b.ct,8,9,10,11,f);break;case 3:ib(b.ct,4,5,6,7,f);break;case 4:ib(b.ct,20,21,22,23,f);break;case 5:ib(b.ct,12,13,14,15,f);break;case 6:ib(b.ct,0,1,2,3,f);ib(b.ct,8,20,12,16,f);ib(b.ct,9,21,13,17,f);break;case 7:ib(b.ct,16,17,18,19,f);ib(b.ct,1,15,5,9,f);ib(b.ct,2,12,6,10,f);break;case 8:ib(b.ct,8,9,10,11,f);ib(b.ct,2,19,4,21,f);ib(b.ct,3,16,5,22,f);break;case 9:ib(b.ct,4,5,6,7,f);ib(b.ct,10,18,14,22,f);ib(b.ct,11,19,15,23,f);break;case 10:ib(b.ct,
20,21,22,23,f);ib(b.ct,0,8,4,14,f);ib(b.ct,3,11,7,13,f);break;case 11:ib(b.ct,12,13,14,15,f),ib(b.ct,1,20,7,18,f),ib(b.ct,0,23,6,17,f)}}return a.center}function Wb(a){for(;a.cornerAvail<a.moveLength;){var b=a.corner,c=a.moveBuffer[a.cornerAvail++]%18;!b.temps&&(b.temps=new zb);wb(b,Xb[c],b.temps);tb(b,b.temps)}return a.corner}function Qb(a){for(;a.edgeAvail<a.moveLength;){var b=a.edge,c=a.moveBuffer[a.edgeAvail++];var f=c%3;switch(~~(c/3)){case 0:ib(b.ep,0,1,2,3,f);ib(b.ep,12,13,14,15,f);break;case 1:ib(b.ep,
11,15,10,19,f);ib(b.ep,23,3,22,7,f);break;case 2:ib(b.ep,0,11,6,8,f);ib(b.ep,12,23,18,20,f);break;case 3:ib(b.ep,4,5,6,7,f);ib(b.ep,16,17,18,19,f);break;case 4:ib(b.ep,1,20,5,21,f);ib(b.ep,13,8,17,9,f);break;case 5:ib(b.ep,2,9,4,10,f);ib(b.ep,14,21,16,22,f);break;case 6:ib(b.ep,0,1,2,3,f);ib(b.ep,12,13,14,15,f);ib(b.ep,9,22,11,20,f);break;case 7:ib(b.ep,11,15,10,19,f);ib(b.ep,23,3,22,7,f);ib(b.ep,2,16,6,12,f);break;case 8:ib(b.ep,0,11,6,8,f);ib(b.ep,12,23,18,20,f);ib(b.ep,3,19,5,13,f);break;case 9:ib(b.ep,
4,5,6,7,f);ib(b.ep,16,17,18,19,f);ib(b.ep,8,23,10,21,f);break;case 10:ib(b.ep,1,20,5,21,f);ib(b.ep,13,8,17,9,f);ib(b.ep,14,0,18,4,f);break;case 11:ib(b.ep,2,9,4,10,f),ib(b.ep,14,21,16,22,f),ib(b.ep,7,15,1,17,f)}}return a.edge}function od(a){var b,c,f;var e=Array(a.moveLength-(a.add1?2:0));for(b=c=0;b<a.length1;++b)e[c++]=a.moveBuffer[b];var w=a.sym;for(b=a.length1+(a.add1?2:0);b<a.moveLength;++b)if(27<=Zb[w][a.moveBuffer[b]]){e[c++]=Zb[w][a.moveBuffer[b]]-9;var n=Mc[Zb[w][a.moveBuffer[b]]-27];w=fc[w][n]}else e[c++]=
Zb[w][a.moveBuffer[b]];b=fc[gc[w]];a:{a=Sb(a);a=new cb(a.ct);for(f=0;48>f;++f){n=!0;for(w=0;24>w;++w)if(a.ct[w]!=~~(w/4)){n=!1;break}if(n){a=f;break a}Ta(a,0);1==f%2&&Ta(a,1);7==f%8&&Ta(a,2);15==f%16&&Ta(a,3)}a=-1}b=b[a];a=[];w=b;for(b=c-1;0<=b;--b)n=e[b],n=3*~~(n/3)+(2-n%3),27<=Zb[w][n]?(a.push(Zb[w][n]-9),n=Mc[Zb[w][n]-27],w=fc[w][n]):a.push(Zb[w][n]);w=-1;c=0;f=[0,0,0];for(b=0;b<a.length;++b){n=a[b];if(w!=~~(n/3)%3){for(e=0;3>e;e++)f[e]%4&&(a[c++]=Nc[9*e+3*w+f[e]-1]+" ",f[e]=0);w=~~(n/3)%3}f[~~(n/
9)]+=n%3+1}for(e=0;3>e;e++)f[e]%4&&(a[c++]=Nc[9*e+3*w+f[e]-1]+" ",f[e]=0);return a=a.slice(0,c).join("")}function cc(a,b){a.moveBuffer[a.moveLength++]=b}function qc(){this.moveBuffer=z(60);this.edge=new Tb;this.center=new kb;this.corner=new zb}function rc(a){qc.call(this);Vb(this,a)}function Qc(a){this.moveBuffer=z(60);this.edge=new Nb(a);this.center=new rb(a);this.corner=new xb(a)}function Rc(){}function Sc(){Sc=a;var b,c;Nc="U  ;U2 ;U' ;R  ;R2 ;R' ;F  ;F2 ;F' ;D  ;D2 ;D' ;L  ;L2 ;L' ;B  ;B2 ;B' ;Uw ;Uw2;Uw';Rw ;Rw2;Rw';Fw ;Fw2;Fw';Dw ;Dw2;Dw';Lw ;Lw2;Lw';Bw ;Bw2;Bw'".split(";");
dc=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,21,22,23,25,28,30,31,32,34,36];oc=[0,1,2,4,6,7,8,9,10,11,13,15,16,17,19,22,25,28,31,34,36];jd=z(37);kd=z(37);jc=z(37,36);Ac=z(29,28);Bc=z(21,20);Oc=z(36);pc=z(28);kc=z(20);for(b=0;29>b;++b)jd[dc[b]]=b;for(b=0;21>b;++b)kd[oc[b]]=b;for(b=0;36>b;++b){for(c=0;36>c;++c)jc[b][c]=~~(b/3)==~~(c/3)||~~(b/3)%3==~~(c/3)%3&&b>c;jc[36][b]=!1}for(b=0;29>b;++b)for(c=0;28>c;++c)Ac[b][c]=jc[dc[b]][dc[c]];for(b=0;21>b;++b)for(c=0;20>c;++c)Bc[b][c]=jc[oc[b]][oc[c]];
for(b=0;36>b;++b)for(Oc[b]=36,c=b;36>c;++c)if(!jc[b][c]){Oc[b]=c-1;break}for(b=0;28>b;++b)for(pc[b]=28,c=b;28>c;++c)if(!Ac[b][c]){pc[b]=c-1;break}for(b=0;20>b;++b)for(kc[b]=20,c=b;20>c;++c)if(!Bc[b][c]){kc[b]=c-1;break}}function pd(a){a.solution="";var b=Ua(new lb(Sb(a.c),0));var c=Ua(new lb(Sb(a.c),1));var f=Ua(new lb(Sb(a.c),2));var n=Yb[~~b>>6];var h=Yb[~~c>>6];var Oa=Yb[~~f>>6];a.p1SolsCnt=0;a.arr2idx=0;rd(a.p1sols.heap);for(a.length1=(n<h?n:h)<Oa?n<h?n:h:Oa;100>a.length1&&!(Oa<=a.length1&&sc(a,
~~f>>>6,f&63,a.length1,-1,0)||n<=a.length1&&sc(a,~~b>>>6,b&63,a.length1,-1,0)||h<=a.length1&&sc(a,~~c>>>6,c&63,a.length1,-1,0));++a.length1);Oa=td(a.p1sols,Za(ud,e([25,30,40]),24,0,0));Oa.sort(function(a,b){return a.value-b.value});h=9;do{f=Oa[0].value;a:for(;100>f;++f)for(c=0;c<Oa.length&&!(Oa[c].value>f);++c)if(!(f-Oa[c].length1>h)&&(Vb(a.c1,Oa[c]),w(a.ct2,Sb(a.c1),tc(Qb(a.c1).ep)),b=bb(a.ct2),n=gb(a.ct2),a.length1=Oa[c].length1,a.length2=f-Oa[c].length1,Tc(a,b,n,a.length2,28,0)))break a;++h}while(100==
f);a.arr2.sort(function(a,b){return a.value-b.value});Oa=0;f=13;do{h=a.arr2[0].value;a:for(;100>h;++h)for(c=0;c<Math.min(a.arr2idx,100)&&!(a.arr2[c].value>h);++c)if(!(h-a.arr2[c].length1-a.arr2[c].length2>f)){b=Hb(a.e12,Qb(a.arr2[c]));$a(a.ct3,Sb(a.arr2[c]),b^tc(Wb(a.arr2[c]).cp));b=nb(a.ct3);n=Db(a.e12,10);var r=Rb(Eb(a.e12));if(r<=h-a.arr2[c].length1-a.arr2[c].length2&&Uc(a,n,b,r,h-a.arr2[c].length1-a.arr2[c].length2,20,0)){Oa=c;break a}}++f}while(100==h);f=new rc(a.arr2[Oa]);a.length1=f.length1;
a.length2=f.length2;h=h-a.length1-a.length2;for(c=0;c<h;++c)cc(f,oc[a.move3[c]]);a.solution=od(f)}function qd(a,b){if(!ld){var c,e,w;var h=new db;for(c=0;24>c;++c)h.ct[c]=c;var r=new cb(h.ct);var x=new cb(h.ct);var Na=new cb(h.ct);for(c=0;48>c;++c){for(e=0;48>e;++e){for(w=0;48>w;++w)y(h,r)&&(fc[c][e]=w,0==w&&(gc[c]=e)),Ta(r,0),1==w%2&&Ta(r,1),7==w%8&&Ta(r,2),15==w%16&&Ta(r,3);Ta(h,0);1==e%2&&Ta(h,1);7==e%8&&Ta(h,2);15==e%16&&Ta(h,3)}Ta(h,0);1==c%2&&Ta(h,1);7==c%8&&Ta(h,2);15==c%16&&Ta(h,3)}for(c=
0;48>c;++c)for(n(h,x),Ya(h,gc[c]),e=0;36>e;++e)for(n(r,h),Xa(r,e),Ya(r,c),w=0;36>w;++w)if(n(Na,x),Xa(Na,w),y(Na,r)){Zb[c][e]=w;break}Sa(h,0);for(c=0;48>c;++c)Fc[gc[c]]=Wa(h),Ta(h,0),1==c%2&&Ta(h,1),7==c%8&&Ta(h,2),15==c%16&&Ta(h,3);hc=z(735471);h=new db;e=z(22984);for(x=0;22984>x;x++)e[x]=0;for(x=r=0;735471>x;++x)if(0==(e[~~x>>>5]&1<<(x&31))){Sa(h,x);for(c=0;48>c;++c)Na=Wa(h),e[~~Na>>>5]|=1<<(Na&31),null!=hc&&(hc[Na]=r<<6|gc[c]),Ta(h,0),1==c%2&&Ta(h,1),7==c%8&&Ta(h,2),15==c%16&&Ta(h,3);mc[r++]=x}h=
new db;r=new db;for(x=0;15582>x;++x)for(Sa(r,mc[x]),Na=0;36>Na;++Na)n(h,r),Xa(h,Na),vc[x][Na]=Ua(h);hc=null;uc(Yb);r=Yb[0]=0;for(x=1;15582!=x;){var Ra=(e=4<r)?-1:r;h=e?r:-1;++r;for(Na=0;15582>Na;++Na)if(Yb[Na]==Ra)for(w=0;27>w;++w)if(c=~~vc[Na][w]>>>6,Yb[c]==h)if(++x,e){Yb[Na]=r;break}else Yb[c]=r}x=new ab;for(h=0;70>h;++h)for(r=0;28>r;++r)Oa(x,h),eb(x,dc[r]),wc[h][r]=gb(x);for(h=0;70>h;++h)for(Oa(x,h),r=0;16>r;++r)ed[h][r]=gb(x),Va(x,0),1==r%2&&Va(x,1),7==r%8&&Va(x,2);for(h=0;6435>h;++h)for(f(x,
h),r=0;16>r;++r)fd[h][r]=bb(x)&65535,Va(x,0),1==r%2&&Va(x,1),7==r%8&&Va(x,2);for(h=0;6435>h;++h)for(r=0;28>r;++r)f(x,h),eb(x,dc[r]),xc[h][r]=bb(x)&65535;uc(Ub);Na=Ub[0]=Ub[18]=Ub[28]=Ub[46]=Ub[54]=Ub[56]=0;for(c=6;450450!=c;){Ra=(w=6<Na)?-1:Na;var kb=w?Na:-1;++Na;for(h=0;450450>h;++h)if(Ub[h]==Ra)for(x=~~(h/70),e=h%70,r=0;23>r;++r){var Qa=xc[x][r];var hb=wc[e][r];Qa=70*Qa+hb;if(Ub[Qa]==kb)if(++c,w){Ub[h]=Na;break}else Ub[Qa]=Na}}for(h=0;12>h;++h)Hc[Gc[h]]=h;x=new fb;for(h=0;29400>h;++h)for(r=0;20>
r;++r){e=x;w=h;e.parity=w&1;w>>>=1;Ra=Gc[w%12];w=~~(w/12);Na=4;for(c=7;0<=c;--c)e.rl[c]=0,Ra>=Pa[c][Na]&&(Ra-=Pa[c][Na--],e.rl[c]=1);Ra=w%35;w=~~(w/35);Na=4;e.fb[7]=0;for(c=6;0<=c;--c)Ra>=Pa[c][Na]?(Ra-=Pa[c][Na--],e.fb[c]=1):e.fb[c]=0;Na=4;e.ud[7]=0;for(c=6;0<=c;--c)w>=Pa[c][Na]?(w-=Pa[c][Na--],e.ud[c]=1):e.ud[c]=0;Na=x;c=r;Na.parity^=hd[c];switch(c){case 0:case 1:case 2:ib(Na.ud,0,1,2,3,c%3);break;case 3:ib(Na.rl,0,1,2,3,1);break;case 4:case 5:case 6:ib(Na.fb,0,1,2,3,(c-1)%3);break;case 7:case 8:case 9:ib(Na.ud,
4,5,6,7,(c-1)%3);break;case 10:ib(Na.rl,4,5,6,7,1);break;case 11:case 12:case 13:ib(Na.fb,4,5,6,7,(c+1)%3);break;case 14:ib(Na.ud,0,1,2,3,1);ib(Na.rl,0,5,4,1,1);ib(Na.fb,0,5,4,1,1);break;case 15:ib(Na.rl,0,1,2,3,1);ib(Na.fb,1,4,7,2,1);ib(Na.ud,1,6,5,2,1);break;case 16:ib(Na.fb,0,1,2,3,1);ib(Na.ud,3,2,5,4,1);ib(Na.rl,0,3,6,5,1);break;case 17:ib(Na.ud,4,5,6,7,1);ib(Na.rl,3,2,7,6,1);ib(Na.fb,3,2,7,6,1);break;case 18:ib(Na.rl,4,5,6,7,1);ib(Na.fb,0,3,6,5,1);ib(Na.ud,0,3,4,7,1);break;case 19:ib(Na.fb,4,
5,6,7,1),ib(Na.ud,0,7,6,1,1),ib(Na.rl,1,4,7,2,1)}nc[h][r]=nb(x)&65535}uc(bc);x=bc[0]=0;for(Na=1;29400!=Na;){for(h=0;29400>h;++h)if(bc[h]==x)for(r=0;17>r;++r)-1==bc[nc[h][r]]&&(bc[nc[h][r]]=x+1,++Na);++x}h=new Fb;for(x=0;20>x;++x)for(Na=0;8>Na;++Na){qb(h,0);Bb(h,x);Ab(h,Na);for(r=0;12>r;++r)Ic[x<<3|Na][r]=h.edge[r];Mb(h);for(r=0;12>r;++r)Jc[x<<3|Na][r]=h.temp[r]}r=new Fb;e=z(1485);for(x=0;1485>x;x++)e[x]=0;for(x=h=0;11880>x;++x)if(0==(e[~~x>>>3]&1<<(x&7))){qb(r,x*Kc[8]);for(c=0;8>c;++c)Na=Db(r,4),
Na==x&&(zc[h]=(zc[h]|1<<c)&65535),e[~~Na>>3]|=1<<(Na&7),ic[Na]=h<<3|id[c],Ib(r,0),1==c%2&&(Ib(r,1),Ib(r,2));yc[h++]=x}var rb;x=new Fb;Na=new Fb;e=new Fb;uc($b);r=0;Cc=1;for(Pb($b,0,0);31006080!=Cc;){w=9<r;Ra=r%3;h=(r+1)%3;c=w?3:Ra;Ra=w?Ra:3;if(9<=r)break;for(hb=0;31006080>hb;hb+=16){var lb=$b[~~hb>>4];if(w||-1!=lb)for(Qa=hb,kb=hb+16;Qa<kb;++Qa,lb>>=2)if((lb&3)==c){var $a=~~(Qa/20160);$a=yc[$a];var mb=Qa%20160;qb(x,20160*$a+mb);for($a=0;17>$a;++$a){mb=Ob(x.edge,$a<<3,4);mb=ic[mb];var Za=mb&7;mb>>=
3;var ob=Ob(x.edge,$a<<3|Za,10)%20160;ob=20160*mb+ob;if(Jb($b,ob)==Ra){Pb($b,w?Qa:ob,h);++Cc;if(w)break;ob=zc[mb];if(1!=ob)for(ub(Na,x),Bb(Na,$a),Ab(Na,Za),rb=1;0!=(ob=~~ob>>1&65535);++rb)1==(ob&1)&&(ub(e,Na),Ab(e,rb),Za=20160*mb+Db(e,10)%20160,Jb($b,Za)==Ra&&(Pb($b,Za,h),++Cc))}}}}++r}ld=!0}a.c=new Qc(b);pd(a);return a.solution}function sc(a,b,c,f,e,n){var h,r,Oa;if(0==b){if(b=0==f){Vb(a.c1,a.c);for(b=0;b<a.length1;++b)cc(a.c1,a.move1[b]);switch(Fc[c]){case 0:cc(a.c1,24);cc(a.c1,35);a.move1[a.length1]=
24;a.move1[a.length1+1]=35;a.add1=!0;c=19;break;case 12869:cc(a.c1,18);cc(a.c1,29);a.move1[a.length1]=18;a.move1[a.length1+1]=29;a.add1=!0;c=34;break;case 735470:a.add1=!1,c=0}w(a.ct2,Sb(a.c1),tc(Qb(a.c1).ep));b=bb(a.ct2);f=gb(a.ct2);a.c1.value=Ub[70*b+f]+a.length1;a.c1.length1=a.length1;a.c1.add1=a.add1;a.c1.sym=c;++a.p1SolsCnt;if(500>a.p1sols.heap.size)var x=new rc(a.c1);else{c=a.p1sols;if(0==c.heap.size)x=null;else{b=c.heap.array[0];f=c.heap;e=c.heap.size-1;n=f.array[e];f.array.splice(e,1);--f.size;
if(0<c.heap.size){ec(c.heap,0,n);f=0;e=c.heap.size;for(Oa=c.heap.array[f];2*f+1<e;){n=(h=2*f+1,x=h+1,r=h,x<e&&0>c.heap.array[h].value-c.heap.array[x].value&&(r=x),r);if(0>c.heap.array[n].value-Oa.value)break;ec(c.heap,f,c.heap.array[n]);f=n}ec(c.heap,f,Oa)}x=b}x.value>a.c1.value&&Vb(x,a.c1)}h=a.p1sols;b:{r=h.heap.size;c=h.heap;b=c.size++;for(c.array[b]=x;0<r;){c=r;r=~~((r-1)/2);if(0>=x.value-h.heap.array[r].value){ec(h.heap,c,x);break b}ec(h.heap,c,h.heap.array[r])}ec(h.heap,r,x)}b=1E4==a.p1SolsCnt}return b}for(h=
0;27>h;h+=3)if(h!=e&&h!=e-9&&h!=e-18)for(Oa=0;3>Oa;++Oa){r=h+Oa;x=vc[b][Zb[c][r]];var Sa=Yb[~~x>>>6];if(Sa>=f){if(Sa>f)break}else if(Sa=fc[c][x&63],x>>>=6,a.move1[n]=r,sc(a,x,Sa,f-1,h,n+1))return!0}return!1}function Tc(a,b,c,f,e,w){var n;if(0==b&&0==Ub[c]){if(b=0==f){Vb(a.c2,a.c1);for(b=0;b<a.length2;++b)cc(a.c2,a.move2[b]);b=Qb(a.c2);c=0;e=!1;for(f=0;12>f;++f)c|=1<<b.ep[f],e=e!=12<=b.ep[f];0!=(c&~~c>>12)||e?b=!1:(b=Hb(a.e12,Qb(a.c2)),$a(a.ct3,Sb(a.c2),b^tc(Wb(a.c2).cp)),b=nb(a.ct3),Db(a.e12,10),
c=Rb(Eb(a.e12)),a.arr2[a.arr2idx]?Vb(a.arr2[a.arr2idx],a.c2):a.arr2[a.arr2idx]=new rc(a.c2),a.arr2[a.arr2idx].value=a.length1+a.length2+Math.max(c,bc[b]),a.arr2[a.arr2idx].length2=a.length2,++a.arr2idx,b=a.arr2idx==a.arr2.length)}return b}for(n=0;23>n;++n)if(Ac[e][n])n=pc[n];else{var h=xc[b][n];var r=wc[c][n];var Oa=Ub[70*h+r];if(Oa>=f)Oa>f&&(n=pc[n]);else if(a.move2[w]=dc[n],Tc(a,h,r,f-1,n,w+1))return!0}return!1}function Uc(a,b,c,f,e,w,n){var h;if(0==e)return 0==b&&0==c;qb(a.tempe[n],b);for(h=0;17>
h;++h)if(Bc[w][h])h=kc[h];else{b=nc[c][h];var r=bc[b];if(r>=e)r>e&&14>h&&(h=kc[h]);else{r=Ob(a.tempe[n].edge,h<<3,10);var Oa=~~(r/20160);Oa=ic[Oa];var x=Oa&7;Oa>>=3;var Sa=Ob(a.tempe[n].edge,h<<3|x,10)%20160;x=f;Oa=Jb($b,20160*Oa+Sa);Oa=3==Oa?10:(1227133513<<Oa>>x&3)+x-1;if(Oa>=e)Oa>e&&14>h&&(h=kc[h]);else if(Uc(a,r,b,Oa,e-1,h,n+1))return a.move3[n]=h,!0}}return!1}function Vc(){var a;this.p1sols=new bd(new Rc);this.move1=z(15);this.move2=z(20);this.move3=z(20);this.c1=new qc;this.c2=new qc;this.ct2=
new ab;this.ct3=new fb;this.e12=new Fb;this.tempe=z(20);this.arr2=z(100);for(a=0;20>a;++a)this.tempe[a]=new Fb}function Wc(){Wc=a}function tc(a){var b,c,f;var e=f=0;for(c=a.length;e<c;++e)for(b=e;b<c;++b)a[e]>a[b]&&(f^=1);return f}function ib(a,b,c,f,e,w){switch(w){case 0:w=a[e];a[e]=a[f];a[f]=a[c];a[c]=a[b];a[b]=w;break;case 1:w=a[b];a[b]=a[f];a[f]=w;w=a[c];a[c]=a[e];a[e]=w;break;case 2:w=a[b],a[b]=a[c],a[c]=a[f],a[f]=a[e],a[e]=w}}function Xc(){}function Yc(a,b,c,f){var e=new Xc;e.typeName=a+b;$c(0!=
c?-c:0)&&ad(0!=c?-c:0,e);e.modifiers=4;e.superclass=Pc;e.componentType=f;return e}function Zc(a,b,c,f){var e=new Xc;e.typeName=a+b;$c(c)&&ad(c,e);e.superclass=f;return e}function $c(a){return"number"==typeof a&&0<a}function ad(a,b){b.seedId=a;if(2==a)var c=String.prototype;else if(0<a)if(c=lc[b.seedId])c=c.prototype;else{c=lc[a]=function(){};c.___clazz$=b;return}else return;c.___clazz$=b}function rd(a){a.array=Za(md,e([30,40]),0,0,0);a.size=0}function ec(a,b,c){var f=a.array[b];a.array[b]=c;return f}
function sd(){this.array=Za(md,e([30,40]),0,0,0);this.array.length=500}function uc(a){var b=a.length,c;for(c=0;c<b;++c)a[c]=-1}function td(a,b){var c=a.heap,f=b;if(f.length<c.size){var e=Ra(0,c.size);r(f.___clazz$,f.castableTypeMap$,f.queryId$,e);f=e}for(e=0;e<c.size;++e)f[e]=c.array[e];f.length>c.size&&(f[c.size]=null);return f}function bd(a){this.heap=new sd;this.cmp=a}function cd(){cd=a;Sc();Wc();Qa();jb();hb();Kb();mb();ob();Lb();ac();nd=new Vc}function dd(){cd();return(scramble_333.getRandomScramble()+
qd(nd,Math)).replace(/\s+/g," ")}var Cb,lc={};c(1,-1,{});Cb.value=null;c(73,1,{},h);Cb.queryId$=0;var Dc,Ec;c(153,1,e([21]),db,lb,cb);var Yb,vc,Fc,hc=null,mc,gc,Zb,fc;c(154,1,{},ab);Cb.parity=0;var xc,Ub,fd,gd,wc,ed;c(155,1,{},fb);Cb.parity=0;var nc,hd,bc,Gc,Hc;c(156,1,{},kb,rb);c(157,1,e([22]),zb,vb,xb);Cb.temps=null;var Xb;c(158,1,e([23]),Fb);Cb.isStd=!0;Cb.temp=null;var Lc,Cc=0,$b,Kc,Ic,Jc,ic,yc,id,zc;c(159,1,{},Tb,Nb);c(160,1,e([24,34]),qc,rc,Qc);Cb.compareTo$=function(a){return this.value-a.value};
Cb.add1=!1;Cb.center=null;Cb.centerAvail=0;Cb.corner=null;Cb.cornerAvail=0;Cb.edge=null;Cb.edgeAvail=0;Cb.length1=0;Cb.length2=0;Cb.length3=0;Cb.moveLength=0;Cb.sym=0;Cb.value=0;var Mc;c(161,1,{},Rc);Cb.compare=function(a,b){return b.value-a.value};var jc,Ac,Bc,dc,Nc,oc,Oc,pc,kc,jd,kd;c(163,1,e([26]),Vc);Cb.add1=!1;Cb.arr2idx=0;Cb.c=null;Cb.length1=0;Cb.length2=0;Cb.p1SolsCnt=0;Cb.solution="";var ld=!1;Cb.val$outerIter=null;Cb.size=0;c(239,1,{},bd);Cb.cmp=null;Cb.heap=null;var Pc=Zc("java.lang.",
"Object",1,null),md=Yc("[Ljava.lang.","Object;",356,Pc),vd=Zc("cs.threephase.","FullCube",160,Pc),ud=Yc("[Lcs.threephase.","FullCube;",381,vd),nd;scrMgr.reg("444wca",dd);return{getRandomScramble:dd}}(mathlib.rn,mathlib.Cnk,mathlib.circle);(function(b,Pa,x,z){function c(a,b){b<<=2;if(24<b){b=48-b;var c=a.ul;a.ul=(a.ul>>b|a.ur<<24-b)&16777215;a.ur=(a.ur>>b|c<<24-b)&16777215}else 0<b?(c=a.ul,a.ul=(a.ul<<b|a.ur>>24-b)&16777215,a.ur=(a.ur<<b|c>>24-b)&16777215):0==b?(c=a.ur,a.ur=a.dl,a.dl=c,a.ml=1-a.ml):-24<=b?(b=-b,c=a.dl,a.dl=(a.dl<<b|a.dr>>24-b)&16777215,a.dr=(a.dr<<b|c>>24-b)&16777215):-24>b&&(b=48+b,c=a.dl,a.dl=(a.dl>>b|a.dr<<24-b)&16777215,a.dr=(a.dr>>b|c<<24-b)&16777215)}function e(a,b){var c;6>b?c=a.ul>>(5-b<<2):12>b?c=a.ur>>(11-
b<<2):18>b?c=a.dl>>(17-b<<2):c=a.dr>>(23-b<<2);return c&15}function a(a,b,c){6>b?(a.ul&=~(15<<(5-b<<2)),a.ul|=c<<(5-b<<2)):12>b?(a.ur&=~(15<<(11-b<<2)),a.ur|=c<<(11-b<<2)):18>b?(a.dl&=~(15<<(17-b<<2)),a.dl|=c<<(17-b<<2)):(a.dr&=~(15<<(23-b<<2)),a.dr|=c<<(23-b<<2))}function h(){this.arr=[];this.prm=[]}function Ra(b){var c;void 0===b&&(b=z(3678));var f=new h;var e=gb[b];var w=324508639;var n=38177486;var r=c=8;for(b=0;24>b;b++)if(0==(e>>b&1)){var Oa=z(c)<<2;a(f,23-b,n>>Oa&15);Oa=(1<<Oa)-1;n=(n&Oa)+
(n>>4&~Oa);--c}else Oa=z(r)<<2,a(f,23-b,w>>Oa&15),a(f,22-b,w>>Oa&15),Oa=(1<<Oa)-1,w=(w&Oa)+(w>>4&~Oa),--r,++b;f.ml=z(2);return f}function Za(a,b,f,n,h,Oa){if(0==f&&4>n){if(b=0==n)a:{b=a.Search_d;n=a.Search_c;b.ul=n.ul;b.ur=n.ur;b.dl=n.dl;b.dr=n.dr;b.ml=n.ml;for(b=0;b<a.Search_length1;++b)c(a.Search_d,a.Search_move[b]);b=a.Search_d;n=a.Search_sq;for(h=0;8>h;++h)b.prm[h]=e(b,3*h+1)>>1;n.cornperm=Pa(b.prm);n.topEdgeFirst=e(b,0)==e(b,1);h=n.topEdgeFirst?2:0;for(Oa=0;4>Oa;h+=3,++Oa)b.prm[Oa]=e(b,h)>>1;
n.botEdgeFirst=e(b,12)==e(b,13);for(h=n.botEdgeFirst?14:12;8>Oa;h+=3,++Oa)b.prm[Oa]=e(b,h)>>1;n.edgeperm=Pa(b.prm);n.ml=b.ml;h=a.Search_sq.edgeperm;n=a.Search_sq.cornperm;Oa=a.Search_sq.ml;for(b=Math.max(ab[a.Search_sq.edgeperm<<1|Oa],ab[a.Search_sq.cornperm<<1|Oa]);b<a.Search_maxlen2;++b)if(r(a,h,n,a.Search_sq.topEdgeFirst,a.Search_sq.botEdgeFirst,Oa,b,a.Search_length1,0)){for(n=0;n<b;++n)c(a.Search_d,a.Search_move[a.Search_length1+n]);n=a;h="";f=Oa=0;for(b=b+a.Search_length1-1;0<=b;b--){var x=a.Search_move[b];
0<x?(x=12-x,Oa=6<x?x-12:x):0>x?(x=12+x,f=6<x?x-12:x):(x="/",b==a.Search_length1-1&&(x="`/`"),h=0==Oa&&0==f?h+x:h+(" ("+Oa+","+f+")"+x),Oa=f=0)}if(0!=Oa||0!=f)h+=" ("+Oa+","+f+") ";n.Search_sol_string=h;b=!0;break a}b=!1}return b}if(0!=Oa){var Sa=w[b];x=eb[Sa];if(x<n&&(a.Search_move[h]=0,Za(a,Sa,x,n-1,h+1,0)))return!0}Sa=b;if(0>=Oa)for(f=0;;){f+=Va[Sa];Sa=f>>4;f&=15;if(12<=f)break;x=eb[Sa];if(x>n)break;else if(x<n&&(a.Search_move[h]=f,Za(a,Sa,x,n-1,h+1,1)))return!0}Sa=b;if(1>=Oa)for(f=0;;){f+=bb[Sa];
Sa=f>>4;f&=15;if(6<=f)break;x=eb[Sa];if(x>n)break;else if(x<n&&(a.Search_move[h]=-f,Za(a,Sa,x,n-1,h+1,2)))return!0}return!1}function r(a,b,c,f,e,w,n,h,x){var Sa,Na;if(0==n&&!f&&e)return!0;if(0!=x&&f==e){var y=nb[b];var z=nb[c];if(ab[y<<1|1-w]<n&&ab[z<<1|1-w]<n&&(a.Search_move[h]=0,r(a,y,z,f,e,1-w,n-1,h+1,0)))return!0}if(0>=x){y=(Na=!f)?hb[b]:b;z=Na?c:hb[c];var Va=Na?1:2;var Ra=ab[y<<1|w];for(Sa=ab[z<<1|w];12>Va&&Ra<=n&&Ra<=n;){if(Ra<n&&Sa<n&&(a.Search_move[h]=Va,r(a,y,z,Na,e,w,n-1,h+1,1)))return!0;
(Na=!Na)?(y=hb[y],Ra=ab[y<<1|w],Va+=1):(z=hb[z],Sa=ab[z<<1|w],Va+=2)}}if(1>=x)for(y=(e=!e)?Oa[b]:b,z=e?c:Oa[c],Va=e?1:2,Ra=ab[y<<1|w],Sa=ab[z<<1|w];Va<(6<n?6:12)&&Ra<=n&&Ra<=n;){if(Ra<n&&Sa<n&&(a.Search_move[h]=-Va,r(a,y,z,f,e,w,n-1,h+1,2)))return!0;(e=!e)?(y=Oa[y],Ra=ab[y<<1|w],Va+=1):(z=Oa[z],Sa=ab[z<<1|w],Va+=2)}return!1}function Na(a,b){a.Search_c=b;var c=b.ur&1118481;c|=c>>3;c|=c>>6;c=c&15|c>>12&48;var f=b.ul&1118481;f|=f>>3;f|=f>>6;f=f&15|f>>12&48;var w=b.dr&1118481;w|=w>>3;w|=w>>6;w=w&15|w>>
12&48;var n=b.dl&1118481;n|=n>>3;n|=n>>6;n=n&15|n>>12&48;var h,Oa;var r=0;b.arr[0]=e(b,0);for(h=1;24>h;++h)e(b,h)!=b.arr[r]&&(b.arr[++r]=e(b,h));for(r=Oa=0;16>r;++r)for(h=r+1;16>h;++h)b.arr[r]>b.arr[h]&&(Oa^=1);n=Ta(Oa<<24|f<<18|c<<12|n<<6|w);for(a.Search_length1=eb[n];100>a.Search_length1&&(a.Search_maxlen2=Math.min(32-a.Search_length1,17),!Za(a,n,eb[n],a.Search_length1,0,-1));++a.Search_length1);return a.Search_sol_string}function Qa(){this.Search_move=[];this.Search_d=new h;this.Search_sq=new Sa}
function y(){y=$.noop;f=[0,3,6,12,15,24,27,30,48,51,54,60,63];gb=[];eb=[];Va=[];bb=[];w=[];var a,b;for(b=a=0;28561>b;++b){var c=f[b%13];var e=f[~~(b/13)%13];var h=f[~~(~~(b/13)/13)%13];var Oa=f[~~(~~(~~(b/13)/13)/13)];e=Oa<<18|h<<12|e<<6|c;16==n(e)&&(gb[a++]=e)}a=new Xa;for(b=0;7356>b;++b){Ua(a,b);e=Va;c=b;var r=a;Oa=h=0;do 0==(r.top&2048)?(h+=1,r.top<<=1):(h+=2,r.top=r.top<<2^12291),Oa=1-Oa;while(0!=(n(r.top&63)&1));0==(n(r.top)&2)&&(r.Shape_parity^=Oa);e[c]=h;Va[b]|=Wa(a)<<4;Ua(a,b);e=bb;c=b;r=
a;Oa=h=0;do 0==(r.bottom&2048)?(h+=1,r.bottom<<=1):(h+=2,r.bottom=r.bottom<<2^12291),Oa=1-Oa;while(0!=(n(r.bottom&63)&1));0==(n(r.bottom)&2)&&(r.Shape_parity^=Oa);e[c]=h;bb[b]|=Wa(a)<<4;Ua(a,b);Oa=a.top&63;e=n(Oa);c=n(a.bottom&4032);a.Shape_parity^=1&(e&c)>>1;a.top=a.top&4032|a.bottom>>6&63;a.bottom=a.bottom&63|Oa<<6;w[b]=Wa(a)}for(b=0;7536>b;++b)eb[b]=-1;eb[Ta(14378715)]=0;eb[Ta(31157686)]=0;eb[Ta(23967451)]=0;eb[Ta(7191990)]=0;e=4;c=0;for(a=-1;e!=c;)for(c=e,++a,b=0;7536>b;++b)if(eb[b]==a){h=0;Oa=
b;do Oa=Va[Oa],h+=Oa&15,Oa>>=4,-1==eb[Oa]&&(++e,eb[Oa]=a+1);while(12!=h);h=0;Oa=b;do Oa=bb[Oa],h+=Oa&15,Oa>>=4,-1==eb[Oa]&&(++e,eb[Oa]=a+1);while(12!=h);Oa=w[b];-1==eb[Oa]&&(++e,eb[Oa]=a+1)}}function Wa(a){return db(gb,a.top<<12|a.bottom)<<1|a.Shape_parity}function Ua(a,b){a.Shape_parity=b&1;a.top=gb[b>>1];a.bottom=a.top&4095;a.top>>=12}function Xa(){}function Ta(a){return db(gb,a&16777215)<<1|a>>24}function Ya(){Ya=$.noop;ab=[];nb=[];hb=[];Oa=[];var a,c,f;var e=[];for(c=0;40320>c;++c)b(e,c),x(e,
2,4)(e,3,5),nb[c]=Pa(e),b(e,c),x(e,0,3,2,1),hb[c]=Pa(e),b(e,c),x(e,4,7,6,5),Oa[c]=Pa(e);for(c=0;80640>c;++c)ab[c]=-1;var w=ab[0]=0;for(a=1;80640>a;){var n=(f=11<=w)?-1:w;e=f?w:-1;++w;c=0;a:for(;80640>c;++c)if(ab[c]==n){var h=c>>1;var r=c&1;var Sa=nb[h]<<1|1-r;if(ab[Sa]==e&&(++a,ab[f?c:Sa]=w,f))continue a;Sa=h;for(h=0;4>h;++h)if(Sa=hb[Sa],ab[Sa<<1|r]==e&&(++a,ab[f?c:Sa<<1|r]=w,f))continue a;for(h=0;4>h;++h)if(Sa=Oa[Sa],ab[Sa<<1|r]==e&&(++a,ab[f?c:Sa<<1|r]=w,f))continue a}}}function Sa(){}function n(a){a-=
a>>1&1431655765;a=(a>>2&858993459)+(a&858993459);a=(a>>4)+a&252645135;a+=a>>8;return a+(a>>16)&63}function db(a,b){var c;var f=0;for(c=a.length-1;f<=c;){var e=f+(c-f>>1);var w=a[e];if(w<b)f=e+1;else if(w>b)c=e-1;else return e}return-f-1}function lb(){lb=$.noop;for(var a=new Xa,b=0;b<$a.length;b++){for(var c=[$a[b]],f=0;f<c.length;f++){var e=c[f];do e=Va[e<<1]>>5,-1==c.indexOf(e)&&c.push(e);while(e!=c[f]);do e=bb[e<<1]>>5,-1==c.indexOf(e)&&c.push(e);while(e!=c[f]);Ua(a,e<<1);e=a.top;a.top=a.bottom;
a.bottom=e;e=Wa(a)>>1;-1==c.indexOf(e)&&c.push(e)}$a[b]=c}}function cb(a,b,c){y();Ya();return Na(mb,Ra())}var jb=h.prototype=function(){}.prototype;jb.dl=10062778;jb.dr=14536702;jb.ml=0;jb.ul=70195;jb.ur=4544119;jb=Qa.prototype=function(){}.prototype;jb.Search_c=null;jb.Search_length1=0;jb.Search_maxlen2=0;jb.Search_sol_string=null;jb=Xa.prototype=function(){}.prototype;jb.bottom=0;jb.Shape_parity=0;jb.top=0;var bb,gb,eb,Va,w,f;jb=Sa.prototype=function(){}.prototype;jb.botEdgeFirst=!1;jb.cornperm=
0;jb.edgeperm=0;jb.ml=0;jb.topEdgeFirst=!1;var Oa,ab,hb,nb,$a=[0,1,3,18,19,1004,1005,1006,1007,1008,1009,1011,1015,1016,1018,1154,1155,1156,1157,1158,1159,1161,1166,1168,424,425,426,427,428,429,431,436,95,218,341,482,528,632,1050,342,343,345,346,348,353,223,487,533,535,1055,219,225,483,489,639,1051,1057,486,1054,1062,6,21,34,46,59,71,144,157,182,305,7,22,35,47,60,72,145,158,183,306,8,23,36,48,61,73,146,159,184,307],fb=[16,16,16,10,16,24,16,24,16,24,16,16,4,24,16,48,32,48,32,48,32,32,48,16,48,32,48,
16,48,32,32,48,36,48,72,72,48,48,72,48,36,72,48,48,72,32,48,16,32,48,16,32,48,48,16,48,48,36,72,36,72,96,96,72,96,72,72,72,72,24,48,64,64,48,64,48,48,48,48,16,24,32,32,24,32,24,24,24,24,8],mb=new Qa;scrMgr.reg("sqrs",cb);scrMgr.reg("sqrcsp",function(a,b,c){y();Ya();lb();a=mathlib.rndEl($a[scrMgr.fixCase(c,fb)]);return Na(mb,Ra(a))},["Star-x8 Star-x71 Star-x62 Star-x44 Star-x53 Square-Scallop Square-rPawn Square-Shield Square-Barrel Square-rFist Square-Mushroom Square-lPawn Square-Square Square-lFist Square-Kite Kite-Scallop Kite-rPawn Kite-Shield Kite-Barrel Kite-rFist Kite-Mushroom Kite-lPawn Kite-lFist Kite-Kite Barrel-Scallop Barrel-rPawn Barrel-Shield Barrel-Barrel Barrel-rFist Barrel-Mushroom Barrel-lPawn Barrel-lFist Scallop-Scallop Scallop-rPawn Scallop-Shield Scallop-rFist Scallop-Mushroom Scallop-lPawn Scallop-lFist Shield-rPawn Shield-Shield Shield-rFist Shield-Mushroom Shield-lPawn Shield-lFist Mushroom-rPawn Mushroom-rFist Mushroom-Mushroom Mushroom-lPawn Mushroom-lFist Pawn-rPawn-rPawn Pawn-rPawn-lPawn Pawn-rPawn-rFist Pawn-lPawn-rFist Pawn-lPawn-lPawn Pawn-rPawn-lFist Pawn-lPawn-lFist Fist-rFist-rFist Fist-lFist-rFist Fist-lFist-lFist Pair-x6 Pair-r42 Pair-x411 Pair-r51 Pair-l42 Pair-l51 Pair-x33 Pair-x312 Pair-x321 Pair-x222 L-x6 L-r42 L-x411 L-r51 L-l42 L-l51 L-x33 L-x312 L-x321 L-x222 Line-x6 Line-r42 Line-x411 Line-r51 Line-l42 Line-l51 Line-x33 Line-x312 Line-x321 Line-x222".split(" "),
fb]);return{initialize:$.noop,getRandomScramble:cb}})(mathlib.set8Perm,mathlib.get8Perm,mathlib.circle,mathlib.rn);(function(){function b(a,b){var c=h.set([],b&31),e=Za.set([],b>>5),r=Ra.set([],a),n=[];mathlib.fillFacelet(x,n,[0,1,2,3],e,6);mathlib.fillFacelet(z,n,r,c,6);c=[4,2,3,1,5,0];for(e=0;6>e;e++)for(r=0;2>r;r++){var Na=z[e][0^r],y=z[e][1^r],Qa=6*~~(Na/6)+c[(c.indexOf(Na%6)+5)%6],Ua=6*~~(y/6)+c[(c.indexOf(y%6)+1)%6];if(n[Qa]==n[Na]&&n[Ua]==n[y])return!1}return!0}function Pa(a,b){for(var c=Ra.set([],a[0]),e=h.set([],a[1]&31),r=Za.set([],a[1]>>5),n=Ra.set([],b[0]),x=h.set([],b[1]&31),Na=Za.set([],b[1]>>5),
y=[],z=[],Qa=[],Ua=0;6>Ua;Ua++)y[Ua]=c[n[Ua]],z[Ua]=e[n[Ua]]^x[Ua];for(Ua=0;4>Ua;Ua++)Qa[Ua]=r[Ua]+Na[Ua];return[Ra.get(y),Za.get(Qa)<<5|h.get(z)]}for(var x=[[3,16,11],[4,23,15],[5,9,22],[10,17,21]],z=[[1,7],[2,14],[0,18],[6,12],[8,20],[13,19]],c=new mathlib.Solver(4,2,[[0,[function(a,b){mathlib.acycle(a,e[b])},"p",6,-1],360],[0,function(b,c){var r=h.set([],b&31),x=Za.set([],b>>5);x[c]++;mathlib.acycle(r,e[c],1,a[c]);return Za.get(x)<<5|h.get(r)},2592]]),e=[[0,1,3],[1,2,5],[0,4,2],[3,5,4]],a=[[0,
1,0,2],[0,1,0,2],[0,0,1,2],[0,0,1,2]],h=new mathlib.coord("o",6,-2),Ra=new mathlib.coord("p",6,-1),Za=new mathlib.coord("o",4,3),r=[[0,0],[183,869],[87,1729]],Na=[[1,3,"L3Bar-1","LLDGFFRRG"],[59,3,"L3Bar-2","DLLGFFRRG"],[25,3,"L3Bar-3","FFGDRRLLG"],[35,3,"L3Bar-4","GRRGLLFFD"],[12,3,"LL-1","LLGFFGGGG"],[10,3,"LL-2","GLLGGGGRR"],[2,1,"LL-3","RLRLFLFRF"],[4,1,"LL-4","FLFRFRLRL"],[3,3,"L4NB-1","FGGGGDGFGGGF"],[57,3,"L4NB-2","GGRGRGDGGGGR"],[53,3,"L4NB-3","GGDGRGGGRGGR"],[45,3,"L4NB-4","DGGFGGGFGGGF"],
[33,3,"L4NB-5","GGDGGGGRGGGR"],[27,3,"L4NB-6","DGGGFGGGGGGF"],[49,3,"L3NB-1","RRGGGDGFF"],[43,3,"L3NB-2","GFFRRGDGG"],[41,3,"L3NB-3","GGGDLLFFG"],[51,3,"L3NB-4","GGGGRRLLD"],[8,3,"Flip-1","RLFLFFRRL"],[16,3,"Flip-2","LFFRRRLLFGGD"],[56,1,"Flip-3","RLFLFRFRLGGD"],[21,3,"L4Blk-1","GGDGGGLLL"],[13,3,"L4Blk-2","DGGLLLGGG"],[29,3,"L4Bar-1","GGGDGGGRR"],[37,3,"L4Bar-2","GGGFFGGGD"],[61,3,"L4Bar-3","GGGDGGLLG"],[5,3,"L4Bar-4","GGGGLLGGD"],[17,3,"L4Bar-5","GGGLLDGGG"],[11,3,"L4Bar-6","GGGGGGDLL"],[9,3,"L4Bar-7",
"RRGDGGGGG"],[19,3,"L4Bar-8","GFFGGGGGD"],[20,3,"DFlip-1","GGGRRGGGGGGD"],[18,3,"DFlip-2","GGGGGGGFFGGD"],[60,1,"DFlip-3","FFGRRGLLGGGD"],[58,1,"DFlip-4","GRRGLLGFFGGD"]],Qa=[],y=[],Wa=0;Wa<Na.length;Wa++)Qa.push(Na[Wa][1]),y.push(Na[Wa][2]);scrMgr.reg(["pyro","pyrso","pyrnb","pyr4c"],function(a){var e="pyro"==a?0:8,h="pyrl4e"==a?2:7;do{if("pyro"==a||"pyrso"==a||"pyr4c"==a){var r=mathlib.rn(360);var x=mathlib.rn(2592)}else if("pyrl4e"==a)r=mathlib.get8Perm(mathlib.set8Perm([],mathlib.rn(12),4,-1).concat([4,
5]),6,-1),x=864*mathlib.rn(3)+mathlib.rn(8);else if("pyrnb"==a){do r=mathlib.rn(360),x=mathlib.rn(2592);while(!b(r,x))}var n=c.search([r,x],0).length;var Na=c.toStr(c.search([r,x],e).reverse(),"ULRB",["'",""])+" ";for(var y=0;4>y;y++){var z=mathlib.rn("pyr4c"==a?2:3);2>z&&(Na+="lrbu".charAt(y)+[" ","' "][z],n++)}}while(n<h);return Na})("pyrl4e",function(a,b,e){b=Na[scrMgr.fixCase(e,Qa)][0];a=mathlib.get8Perm(mathlib.set8Perm([],b&1,4,-1).concat([4,5]),6,-1);b=864*(b>>1&3)+(b>>3);a=Pa(mathlib.rndEl(r),
Pa([a,b],mathlib.rndEl(r)));a=c.toStr(c.search(a,8).reverse(),"ULRB",["'",""])+" ";for(b=0;4>b;b++)e=mathlib.rn(3),2>e&&(a+="lrbu".charAt(b)+[" ","' "][e]);return a},[y,Qa,function(a,b){var c=Na[a];if(!b)return["GGG"+c[3],null,c[2]];image.pyrllImage("GGG"+c[3],b)}])})();(function(){function b(a,b){var e=Ra.set([],a%12),x=h.set([],~~(a/12)),Na=Za.set([],b%81);b=r.set([],~~(b/81));for(var Sa=[],n=0;6>n;n++)Sa[5*n]=x[n];mathlib.fillFacelet(z,Sa,[0,1,2,3],Na,5);mathlib.fillFacelet(c,Sa,e,b,5);for(n=0;30>n;n+=5)for(e=1;5>e;e++)if(Sa[n]==Sa[n+e])return!1;return!0}function Pa(b,c){var r=Ra.set([],b%12),x=h.set([],~~(b/12));mathlib.acycle(x,e[c]);mathlib.acycle(r,a[c]);return 12*h.get(x)+Ra.get(r)}function x(b,c){var e=Za.set([],b%81),h=r.set([],~~(b/81));e[c]++;mathlib.acycle(h,
a[c],1,[0,2,1,3]);return 81*r.get(h)+Za.get(e)}var z=[[4,16,7],[1,11,22],[26,14,8],[29,19,23]],c=[[3,6,12],[2,21,17],[27,9,18],[28,24,13]],e=[[0,3,1],[0,2,4],[1,5,2],[3,4,5]],a=[[0,1,2],[0,3,1],[0,2,3],[1,3,2]],h=new mathlib.coord("p",6,-1),Ra=new mathlib.coord("p",4,-1),Za=new mathlib.coord("o",4,3),r=new mathlib.coord("o",4,-3),Na=new mathlib.Solver(4,2,[[0,Pa,4320],[0,x,2187]]),Qa=new mathlib.Solver(4,2,[[0,function(a,b){return~~(Pa(12*a,b)/12)},360],[0,function(a,b){return x(a,b)%81},81]]),y=
[0,1,2,0,2,1,1,2,0,2,1,0];scrMgr.reg(["skbo","skbso","skbnb"],function(a){var c="skbso"==a?6:2,e="skbo"==a?0:8;do{var h=mathlib.rn(4320);var r=mathlib.rn(2187)}while(0==h&&0==r||y[h%12]!=(r+~~(r/3)+~~(r/9)+~~(r/27))%3||null!=Na.search([h,r],0,c)||"skbnb"==a&&!b(h,r));a=Na.search([h,r],e).reverse();h=[];r=["L","R","B","U"];for(c=0;c<a.length;c++){e=a[c][0];var x=1-a[c][1];2==e&&mathlib.acycle(r,[0,3,1],x+1);h.push(r[e]+(1==x?"'":""))}return h.join(" ")})(["ivyo","ivyso"],function(a){var b="ivyso"==
a?6:0;do{a=mathlib.rn(360);var c=mathlib.rn(81)}while(0==a&&0==c||null!=Qa.search([a,c],0,1));return Qa.toStr(Qa.search([a,c],b).reverse(),"RLDB","' ")})})();var scramble_222=function(b){function Pa(a,b){mathlib.acycle(a,Ra[b])}function x(a,b){mathlib.acycle(a,Ra[b],1,Za[b])}function z(a,b){for(var c=mathlib.set8Perm([],a,7),f=r.set([],b),e=[],n=0;24>n;n++)e[n]=n>>2;mathlib.fillFacelet(Na,e,c,f,4);for(n=0;24>n;n+=4)if((1<<e[n]|1<<e[n+3])&(1<<e[n+1]|1<<e[n+2]))return!1;return!0}function c(a,c,e){var f=0,w=4;c=[0,1,2,3];var n=[0,0,0,0,0,0,0];if("222tcp"==a)f=Xa[scrMgr.fixCase(e,db)],n=[0,0,0,0,1,0,0],c=c.concat(Wa[0]);else if("222tcn"==a)f=Ta[scrMgr.fixCase(e,
cb)],n=[0,0,0,0,2,0,0],c=c.concat(Wa[0]);else if("222eg0"==a)f=Ua[scrMgr.fixCase(e,Sa)],c=c.concat(Wa[0]);else if("222eg1"==a)f=Ua[scrMgr.fixCase(e,Sa)],c=c.concat(Wa[2+b(4)]);else if("222eg2"==a)f=Ua[scrMgr.fixCase(e,Sa)],c=c.concat(Wa[1]);else if("222lsall"==a){c=c.concat(Wa[0]);w=mathlib.rndPerm(4);w.push(w[3]);w[3]=4;f=[0,Ya[scrMgr.fixCase(e,bb)][0]];for(e=0;5>e;e++)f[0]|=w[e]<<4*e;w=5}for(e=b(4);0<e--;)Pa(c,0);a=c.slice();for(e=0;e<w;e++)c[e]=a[f[0]>>4*e&15],n[e]=f[1]>>4*e&15;for(f=b(4);0<f--;)x(n,
0),Pa(c,0);c=mathlib.get8Perm(c,7);n=r.get(n);return h.toStr(h.search([c,n],9).reverse(),"URF","'2 ")}function e(a,b,c,f,e){b=b[f];for(var w=[],n=0;4>n;n++)if(a)for(r=b[0]>>(n<<2)&15,Oa=0;3>Oa;Oa++)x=Qa.indexOf(Na[n][Oa]),w[x]="DGU".charAt(0==(Oa+3-r)%3?3==n?2:0:1);else for(var h=b[0]>>(n<<2)&15,r=b[1]>>(n<<2)&15,Oa=0;3>Oa;Oa++){var x=Qa.indexOf(Na[n][Oa]);w[x]="DLFURB".charAt(Na[h][(Oa+3-r)%3]>>2)}w=w.join("");if(!e)return[w,null,c[f]];image.llImage.drawImage(w,null,e)}function a(c,e,w){var f="222o"==
c?0:9;do{var n=2;if("222o"==c||"222so"==c){var Sa=b(5040);var Na=b(729);n=3}else if("222eg"==c){Na=y[w&7];Sa=[0,2,3,4,5,1][w>>3];Sa=mathlib.set8Perm([0,0,0,0].concat(Wa[Sa]),b(24),4);Sa=mathlib.get8Perm(Sa,7);var Ra=b(4);for(Na=r.set([],Na);0<Ra--;)x(Na,0);Na=r.get(Na)}else{if(/^222eg[012]$/.exec(c))return a("222eg",e,[0,8,40][~~c[5]]+w);if("222nb"==c){do Sa=b(5040),Na=b(729);while(!z(Sa,Na))}}}while(0==Sa&&0==Na||null!=h.search([Sa,Na],0,n));return h.toStr(h.search([Sa,Na],f).reverse(),"URF","'2 ")}
var h=new mathlib.Solver(3,3,[[0,[Pa,"p",7],5040],[0,[x,"o",7,-3],729]]),Ra=[[0,2,3,1],[0,1,5,4],[0,4,6,2]],Za=[null,[0,1,0,1,3],[1,0,1,0,3]],r=new mathlib.coord("o",7,-3),Na=[[3,4,9],[1,20,5],[2,8,17],[0,16,21],[13,11,6],[15,7,22],[12,19,10]],Qa=[0,1,2,3,8,9,4,5,20,21,16,17],y=[0,17,5,14,8,1,2,4],Wa=[[4,5,6],[4,6,5],[6,5,4],[5,4,6],[5,6,4],[6,4,5]],Ua=[[12816,4641,2,"H-BBFF"],[12576,4641,2,"H-FBFB"],[8976,4641,4,"H-RFLF"],[12306,4641,4,"H-RLFF"],[531,528,4,"L-FBRL"],[786,528,4,"L-LBFF"],[12306,528,
4,"L-LFFB"],[8211,528,4,"L-LFFR"],[12816,528,4,"L-LRFF"],[8976,528,4,"L-RFBL"],[8211,4626,4,"Pi-BFFB"],[8976,4626,4,"Pi-FBFB"],[531,4626,4,"Pi-FRFL"],[786,4626,4,"Pi-FRLF"],[12816,4626,4,"Pi-LFRF"],[12306,4626,4,"Pi-RFFL"],[8976,8736,4,"S-FBBF"],[8211,8736,4,"S-FBFB"],[12816,8736,4,"S-FLFR"],[12306,8736,4,"S-FLRF"],[786,8736,4,"S-LFFR"],[531,8736,4,"S-LFRF"],[12816,4128,4,"T-BBFF"],[531,4128,4,"T-FBFB"],[12306,4128,4,"T-FFLR"],[8976,4128,4,"T-FLFR"],[8211,4128,4,"T-RFLF"],[786,4128,4,"T-RLFF"],[786,
8208,4,"U-BBFF"],[12306,8208,4,"U-BFFB"],[531,8208,4,"U-FFLR"],[8976,8208,4,"U-FRLF"],[8211,8208,4,"U-LFFR"],[12816,8208,4,"U-LRFF"],[8211,4113,4,"aS-FBBF"],[8976,4113,4,"aS-FBFB"],[531,4113,4,"aS-FRFL"],[786,4113,4,"aS-FRLF"],[12816,4113,4,"aS-LFRF"],[12306,4113,4,"aS-RFFL"]],Xa=[[291,545,4,"Hammer-1"],[12321,545,4,"Hammer-2"],[306,545,4,"Hammer-3"],[561,545,4,"Hammer-4"],[801,545,4,"Hammer-5"],[8961,545,4,"Hammer-6"],[291,4130,4,"Spaceship-1"],[8961,4130,4,"Spaceship-2"],[4896,4130,4,"Spaceship-3"],
[12321,4130,4,"Spaceship-4"],[12306,4130,4,"Spaceship-5"],[561,4130,4,"Spaceship-6"],[8241,2,4,"Stollery-1"],[12576,2,4,"Stollery-2"],[12801,2,4,"Stollery-3"],[8451,2,4,"Stollery-4"],[561,2,4,"Stollery-5"],[8496,2,4,"Stollery-6"],[291,8738,1,"Pinwheel-1"],[4146,8738,1,"Pinwheel-2"],[12801,8738,4,"Pinwheel-3"],[8241,272,2,"2Face-1"],[12546,272,4,"2Face-2"],[531,272,2,"2Face-3"],[12321,272,4,"2Face-4"],[4866,290,4,"Turtle-1"],[4146,290,4,"Turtle-2"],[12801,290,4,"Turtle-3"],[4656,290,4,"Turtle-4"],
[8976,290,4,"Turtle-5"],[801,290,4,"Turtle-6"],[12816,4370,4,"Pinwheel Poser-1"],[12576,4370,4,"Pinwheel Poser-2"],[12801,4370,4,"Pinwheel Poser-3"],[8451,4370,4,"Pinwheel Poser-4"],[8976,4370,4,"Pinwheel Poser-5"],[8496,4370,4,"Pinwheel Poser-6"],[8241,17,4,"Gun-1"],[4146,17,4,"Gun-2"],[306,17,4,"Gun-3"],[12321,17,4,"Gun-4"],[8976,17,4,"Gun-5"],[8496,17,4,"Gun-6"]],Ta=[[4866,4609,4,"Hammer-1"],[12321,4609,4,"Hammer-2"],[8976,4609,4,"Hammer-3"],[12801,4609,4,"Hammer-4"],[4611,4609,4,"Hammer-5"],[12576,
4609,4,"Hammer-6"],[291,4114,4,"Spaceship-1"],[4146,4114,4,"Spaceship-2"],[786,4114,4,"Spaceship-3"],[12801,4114,4,"Spaceship-4"],[4131,4114,4,"Spaceship-5"],[8496,4114,4,"Spaceship-6"],[291,1,4,"Stollery-1"],[12576,1,4,"Stollery-2"],[306,1,4,"Stollery-3"],[8451,1,4,"Stollery-4"],[12546,1,4,"Stollery-5"],[4611,1,4,"Stollery-6"],[291,4369,1,"Pinwheel-1"],[4146,4369,1,"Pinwheel-2"],[4896,4369,4,"Pinwheel-3"],[8241,8194,2,"2Face-1"],[306,8194,4,"2Face-2"],[4146,8194,2,"2Face-3"],[12321,8194,4,"2Face-4"],
[8241,4354,4,"Turtle-1"],[12576,4354,4,"Turtle-2"],[4131,4354,4,"Turtle-3"],[12321,4354,4,"Turtle-4"],[306,4354,4,"Turtle-5"],[4611,4354,4,"Turtle-6"],[4866,8482,4,"Pinwheel Poser-1"],[531,8482,4,"Pinwheel Poser-2"],[8211,8482,4,"Pinwheel Poser-3"],[786,8482,4,"Pinwheel Poser-4"],[8976,8482,4,"Pinwheel Poser-5"],[801,8482,4,"Pinwheel Poser-6"],[291,34,4,"Gun-1"],[4146,34,4,"Gun-2"],[306,34,4,"Gun-3"],[8976,34,4,"Gun-4"],[786,34,4,"Gun-5"],[8496,34,4,"Gun-6"]],Ya=[[0,"LS1-PBL"],[546,"LS1-Sune"],[273,
"LS1-aSune"],[258,"LS1-Ua"],[33,"LS1-Ub"],[288,"LS1-La"],[528,"LS1-Lb"],[513,"LS1-Ta"],[18,"LS1-Tb"],[66081,"LS2-Hammer"],[66066,"LS2-Spaceship"],[66048,"LS2-StolleryA"],[65538,"LS2-StolleryB"],[65568,"LS2-StolleryC"],[65808,"LS2-2Face"],[65826,"LS2-Turtle"],[65553,"LS2-GunA"],[65793,"LS2-GunB"],[131346,"LS3-Hammer"],[131601,"LS3-Spaceship"],[131328,"LS3-StolleryA"],[131073,"LS3-StolleryB"],[131088,"LS3-StolleryC"],[131616,"LS3-2Face"],[131361,"LS3-Turtle"],[131106,"LS3-GunA"],[131586,"LS3-GunB"],
[8226,"LS4-SuneA"],[8736,"LS4-SuneB"],[8706,"LS4-SuneC"],[8721,"LS4-PiA"],[8481,"LS4-PiB"],[8208,"LS4-U"],[8193,"LS4-L"],[8448,"LS4-T"],[8466,"LS4-H"],[73746,"LS5-HammerA"],[73986,"LS5-HammerB"],[74016,"LS5-SpaceshipA"],[74241,"LS5-SpaceshipB"],[73728,"LS5-Stollery"],[74274,"LS5-Pinwheel"],[73761,"LS5-TurtleA"],[74256,"LS5-TurtleB"],[74001,"LS5-Pinwheel Poser"],[139536,"LS6-Hammer"],[139521,"LS6-Spaceship"],[139266,"LS6-2Face"],[139281,"LS6-Turtle"],[139554,"LS6-Pinwheel PoserA"],[139809,"LS6-Pinwheel PoserB"],
[139794,"LS6-Pinwheel PoserC"],[139776,"LS6-GunA"],[139296,"LS6-GunB"],[4113,"LS7-aSuneA"],[4368,"LS7-aSuneB"],[4353,"LS7-aSuneC"],[4626,"LS7-PiA"],[4386,"LS7-PiB"],[4608,"LS7-U"],[4098,"LS7-L"],[4128,"LS7-T"],[4641,"LS7-H"],[70176,"LS8-Hammer"],[69666,"LS8-Spaceship"],[69633,"LS8-2Face"],[70146,"LS8-Turtle"],[69921,"LS8-Pinwheel PoserA"],[69906,"LS8-Pinwheel PoserB"],[70161,"LS8-Pinwheel PoserC"],[69648,"LS8-GunA"],[69888,"LS8-GunB"],[135681,"LS9-HammerA"],[135201,"LS9-HammerB"],[135186,"LS9-SpaceshipA"],
[135456,"LS9-SpaceshipB"],[135168,"LS9-Stollery"],[135441,"LS9-Pinwheel"],[135426,"LS9-TurtleA"],[135696,"LS9-TurtleB"],[135714,"LS9-Pinwheel Poser"]],Sa=mathlib.idxArray(Ua,2),n=mathlib.idxArray(Ua,3),db=mathlib.idxArray(Xa,2),lb=mathlib.idxArray(Xa,3),cb=mathlib.idxArray(Ta,2),jb=mathlib.idxArray(Ta,3),bb=mathlib.valuedArray(Ya.length,1),gb=mathlib.idxArray(Ya,1);scrMgr.reg(["222o","222so","222nb"],a)("222eg0",c,[n,Sa,e.bind(null,!1,Ua,n)])("222eg1",c,[n,Sa,e.bind(null,!1,Ua,n)])("222eg2",c,[n,
Sa,e.bind(null,!1,Ua,n)])("222tcp",c,[lb,db,e.bind(null,!1,Xa,lb)])("222tcn",c,[jb,cb,e.bind(null,!1,Ta,jb)])("222lsall",c,[gb,bb,e.bind(null,!0,Ya,gb)])("222eg",a,["EG0-O EG0-H EG0-L EG0-Pi EG0-S EG0-T EG0-U EG0-aS EG1B-O EG1B-H EG1B-L EG1B-Pi EG1B-S EG1B-T EG1B-U EG1B-aS EG1L-O EG1L-H EG1L-L EG1L-Pi EG1L-S EG1L-T EG1L-U EG1L-aS EG1F-O EG1F-H EG1F-L EG1F-Pi EG1F-S EG1F-T EG1F-U EG1F-aS EG1R-O EG1R-H EG1R-L EG1R-Pi EG1R-S EG1R-T EG1R-U EG1R-aS EG2-O EG2-H EG2-L EG2-Pi EG2-S EG2-T EG2-U EG2-aS".split(" "),
[1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4]]);return{getEGLLImage:e.bind(null,Ua,n)}}(mathlib.rn);(function(){function b(a,b){mathlib.acycle(a,[0,b+1])}function Pa(a,b){var c=mathlib.set8Perm([],~~(a/3),4);mathlib.acycle(c,Ra[b]);return 3*mathlib.get8Perm(c,4)+(a%3+(0==b?1:0))%3}function x(b,c,h){return 72*e[h][~~(c/72)]+a[(h+b)%3][c%72]}function z(b,c,x,Ra){if(0==c)return 0==b[0]&&0==b[1]&&0==b[2]&&0==b[3];if(Math.max(mathlib.getPruning(h[0],72*b[0]+b[1]),mathlib.getPruning(h[1],72*b[0]+b[2]),mathlib.getPruning(h[2],72*b[0]+b[3]))>c)return!1;for(var r=0;3>r;r++)if(r!=x)for(var Na=b.slice(),Qa=
0;11>Qa;Qa++){Na[0]=e[r][Na[0]];for(var Xa=1;4>Xa;Xa++)Na[Xa]=a[(r+Xa-1)%3][Na[Xa]];if(z(Na,c-1,r,Ra))return Ra.push("URF".charAt(r)+"' 2' 3' 4' 5' 6 5 4 3 2 ".split(" ")[Qa]),!0}}function c(){c=$.noop;mathlib.createMove(a,72,Pa,3);mathlib.createMove(e,24,[b,"p",4],3);for(var z=0;3>z;z++)mathlib.createPrun(h[z],0,1728,5,x.bind(null,z),3,12,0)}var e=[],a=[],h=[[],[],[]],Ra=[[0,3,2,1],[0,1],[0,3]];scrMgr.reg(["gearo","gearso"],function(a){c();do{var b=[mathlib.rn(24)];for(var e=0;3>e;e++){do b[e+1]=
mathlib.rn(72);while(15==mathlib.getPruning(h[e],72*b[0]+b[e+1]))}}while(0==b);a="gearso"==a?4:0;for(e=[];!z(b,a,-1,e);)a++;return e.reverse().join(" ")})})();(function(){var b=new mathlib.Solver(4,1,[[0,function(b,z){var c=mathlib.set8Perm([],b>>4,4);mathlib.acycle(c,Pa[z]);return(mathlib.get8Perm(c,4)<<4)+(b&15^1<<z)},384]]),Pa=[[0,1],[2,3],[0,3],[1,2]];scrMgr.reg("133",function(){var x=1+mathlib.rn(191);x=2*x+((mathlib.getNParity(x>>3,4)^x>>1^x>>2^x)&1);return b.toStr(b.search([x],0),"RLFB",[""])})})();(function(b,Pa){function x(){x=$.noop;for(var a=[],h,z=0;40320>z;z++)c[z]=[];for(z=0;40320>z;z++)mathlib.set8Perm(a,z),b(a,0,1,2,3),h=c[0][z]=Pa(a),b(a,4,5,6,7),h=c[1][h]=Pa(a),b(a,2,5)(a,3,6),h=c[2][h]=Pa(a),b(a,0,5)(a,3,4),c[3][h]=Pa(a);mathlib.createPrun(e,0,40320,12,c,4,3)}function z(a,h,x,Za,r){if(0==x)return 0==a+h;if(mathlib.getPruning(e,a)>x)return!1;var Na,Ra;for(Ra=0;4>Ra;Ra++)if(Ra!=Za){var y=a;var Wa=h;for(Na=0;Na<(2>Ra?3:1);Na++){y=c[Ra][y];var Ua=Ra;2>Ua||(Wa=mathlib.set8Perm([],Wa,
3),2==Ua?b(Wa,0,1):3==Ua&&b(Wa,0,2),Wa=Pa(Wa,3));if(z(y,Wa,x-1,Ra,r))return r.push(["U","D","R2","F2"][Ra]+(2>Ra?" 2'".charAt(Na):"")),!0}}}var c=[],e=[];scrMgr.reg("223",function(){x();do{var a=mathlib.rn(40320);var b=mathlib.rn(6)}while(0==b+a);for(var c=[],e=0;99>e&&!z(a,b,e,-1,c);e++);return c.reverse().join(" ")})})(mathlib.circle,mathlib.get8Perm);var clock=function(b,Pa){function x(a,b,c,e,x){for(var h=a[0].length;e<h;e++)a[c][e]=(a[c][e]+a[b][e]*x)%12}var z=[[0,1,1,0,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,0,1,1,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,1,1,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0,0,0],[1,1,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,0,0,0,0,0],[11,0,0,0,0,0,0,0,0,1,0,1,1,0],[0,0,0,0,0,0,11,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,11,0,1,1,0,1],[0,0,11,0,0,0,0,0,0,1,1,
1,0,0],[11,0,11,0,0,0,0,0,0,1,1,1,1,0],[11,0,0,0,0,0,11,0,0,1,0,1,1,1],[0,0,0,0,0,0,11,0,11,0,1,1,1,1],[0,0,11,0,0,0,0,0,11,1,1,1,0,1],[11,0,11,0,0,0,11,0,11,1,1,1,1,1]],c=[-1,1,-1,-1,-1,5,-1,7,-1,-1,-1,11],e=[7695,42588,47187,85158,86697,156568,181700,209201,231778],a="UR DR DL UL U R D L ALL".split(" ");scrMgr.reg("clko",function(h){var Ra=[];for(h=0;14>h;h++)Ra[h]=b(12);h=[];h.length=18;if(14==Ra.length&&18==h.length)for(var Za=15,r=0;r<Pa[18][14];r++){var Na=r;var Qa=14;for(var y=0,Wa=17;0<=Wa;Wa--)Na>=
Pa[Wa][Qa]&&(Na-=Pa[Wa][Qa--],y|=1<<Wa);Qa=y;Na=!1;for(y=0;y<e.length;y++)if((Qa&e[y])==e[y]){Na=!0;break}if(!Na){Na=[];for(y=Wa=0;18>y;y++)1==(Qa>>y&1)&&(Na[Wa++]=y);Qa=[];for(Wa=0;14>Wa;Wa++){Qa[Wa]=[];for(y=0;14>y;y++)Qa[Wa][y]=z[Na[y]][Wa];Qa[Wa][14]=Ra[Wa]}b:{y=Qa;Wa=y[0].length;for(var Ua=0;Ua<Wa-1;Ua++){if(-1==c[y[Ua][Ua]]){for(var Xa=-1,Ta=Ua+1;14>Ta;Ta++)if(-1!=c[y[Ta][Ua]]){Xa=Ta;break}if(-1==Xa)c:for(Ta=Ua;13>Ta;Ta++)for(var Ya=Ta+1;14>Ya;Ya++)if(-1!=c[(y[Ta][Ua]+y[Ya][Ua])%12]){x(y,Ya,
Ta,Ua,1);Xa=Ta;break c}if(-1==Xa){for(Ta=Ua+1;14>Ta;Ta++)if(0!=y[Ta][Ua]){y=-1;break b}y=Ua+1;break b}Ta=y;Ya=Ta[Ua];Ta[Ua]=Ta[Xa];Ta[Xa]=Ya}Xa=c[y[Ua][Ua]];for(Ta=Ua;Ta<Wa;Ta++)y[Ua][Ta]=y[Ua][Ta]*Xa%12;for(Ta=Ua+1;14>Ta;Ta++)x(y,Ua,Ta,Ua,12-y[Ta][Ua])}y=0}if(0==y){y=!0;for(Wa=14;14>Wa;Wa++)if(0!=Qa[Wa][14]){y=!1;break}if(y){y=Qa;for(Wa=y[0].length-2;0<Wa;Wa--)for(Ua=Wa-1;0<=Ua;Ua--)0!=y[Ua][Wa]&&x(y,Wa,Ua,Wa,12-y[Ua][Wa]);for(Wa=y=0;14>Wa;Wa++)0!=Qa[Wa][14]&&y++;if(y<Za){for(Wa=0;18>Wa;Wa++)h[Wa]=
0;for(Wa=0;14>Wa;Wa++)h[Na[Wa]]=Qa[Wa][14];Za=y}}}}}Ra="";for(Za=0;9>Za;Za++)r=h[Za],0!=r&&(Na=6>=r,6<r&&(r=12-r),Ra+=a[Za]+r+(Na?"+":"-")+" ");Ra+="y2 ";for(Za=0;9>Za;Za++)r=h[Za+9],0!=r&&(Na=6>=r,6<r&&(r=12-r),Ra+=a[Za]+r+(Na?"+":"-")+" ");h=!0;for(Za=0;4>Za;Za++)1==b(2)&&(Ra+=(h?"":" ")+a[Za],h=!1);return Ra});return{moveArr:z}}(mathlib.rn,mathlib.Cnk);(function(){var b=[[0,1,2,3],[0,2,5,4]],Pa=[[0,0,0,0,2],[0,1,0,1,2]],x=new mathlib.Solver(2,3,[[0,function(x,c){var e=x>>3,a=x,h=x<<1|mathlib.getNParity(e,6)^a>>1&1;e=mathlib.set8Perm([],e,6);mathlib.acycle(e,b[c]);0==c&&(a+=2);1==c&&(h+=1);return mathlib.getNPerm(e,6)<<3|a&6|h>>1&1},5760],[0,[function(x,c){mathlib.acycle(x,b[c],1,Pa[c])},"o",6,-2],32]]);scrMgr.reg("lsemu",function(){do{var b=mathlib.rn(5760);var c=mathlib.rn(32)}while(0==c+b);return x.toStr(x.search([b,c],0),"UM"," 2'").replace(/ +/g,
" ")})})();(function(){function b(a,b,Ra){Ra=b=0;do"mlsll"==a?(b=mathlib.rn(11520),Ra=mathlib.rn(87480)):"mgmpll"==a?(b=32*Pa.get(mathlib.rndPerm(5,!0).concat([5])),Ra=243*z.get(mathlib.rndPerm(5,!0).concat([5]))):"mgmll"==a&&(b=x.set([],mathlib.rn(32)),b[0]+=b[5],b[5]=0,Ra=c.set([],mathlib.rn(243)),Ra[0]+=Ra[5],Ra[5]=0,b=32*Pa.get(mathlib.rndPerm(5,!0).concat([5]))+x.get(b),Ra=243*z.get(mathlib.rndPerm(5,!0).concat([5]))+c.get(Ra));while(0==b&&0==Ra);a=e.search([b,Ra],0);b=[];for(Ra=0;Ra<a.length;Ra++){var h=
a[Ra];b.push(["U","R U","F' U"][h[0]]+["","2","2'","'"][h[1]]+[""," R'"," F"][h[0]])}return b.join(" ").replace(/ +/g," ")}var Pa=new mathlib.coord("p",6,-1),x=new mathlib.coord("o",6,-2),z=new mathlib.coord("p",6,-1),c=new mathlib.coord("o",6,-3),e=new mathlib.Solver(3,4,[[0,function(a,b){var c=Pa.set([],a>>5),e=x.set([],a&31);0==b?(mathlib.acycle(e,[0,1,2,3,4],1),mathlib.acycle(c,[0,1,2,3,4],1)):1==b?(mathlib.acycle(e,[0,1,2,3,5],1),mathlib.acycle(c,[0,1,2,3,5],1)):2==b&&(mathlib.acycle(e,[1,2,
3,4,5],1,[0,0,0,0,1,2]),mathlib.acycle(c,[1,2,3,4,5]));return Pa.get(c)<<5|x.get(e)},11520],[0,function(a,b){var e=z.set([],~~(a/243)),h=c.set([],a%243);0==b?(mathlib.acycle(h,[0,1,2,3,4],1),mathlib.acycle(e,[0,1,2,3,4],1)):1==b?(mathlib.acycle(h,[0,5,1,2,3],1,[2,0,0,0,0,3]),mathlib.acycle(e,[0,5,1,2,3])):2==b&&(mathlib.acycle(h,[0,2,3,4,5],1,[1,0,0,0,1,3]),mathlib.acycle(e,[0,2,3,4,5]));return 243*z.get(e)+c.get(h)},87480]]);scrMgr.reg("mlsll",b)("mgmpll",b)("mgmll",b)})();var kilominx=function(){function b(){this.perm=[];this.twst=[];for(var a=0;20>a;a++)this.perm[a]=a,this.twst[a]=0}function Pa(){for(var a=[],c=[],e=0;48>e;e++)a[e]=new b;for(var n=0;48>n;n+=4){a[n].faceletMove(n>>2,1,0);c[n]=a[n].hashCode();for(var h=0;3>h;h++)b.KiloMult(a[n+h],a[n],a[n+h+1]),c[n+h+1]=a[n+h+1].hashCode()}b.moveCube=a;n=[];h=[];var r=[],x=[],Sa=[],Na=new b;for(e=0;60>e;e++)n[e]=(new b).init(Na.perm,Na.twst),Sa[e]=n[e].hashCode(),h[e]=[],r[e]=[],Na.faceletMove(0,1,1),4==e%5&&Na.faceletMove(4==
e%10?1:2,1,1),29==e%30&&(Na.faceletMove(1,2,1),Na.faceletMove(2,1,1),Na.faceletMove(0,3,1));for(e=0;60>e;e++)for(var y=0;60>y;y++){b.KiloMult(n[e],n[y],Na);var z=Sa.indexOf(Na.hashCode());h[e][y]=z;r[z][y]=e}for(e=0;60>e;e++)for(x[e]=[],y=0;12>y;y++)b.KiloMult3(n[r[0][e]],a[4*y],n[e],Na),z=c.indexOf(Na.hashCode()),x[e][y]=z>>2;b.symCube=n;b.symMult=h;b.symMulI=r;b.symMulM=x}function x(a){this.map=new b;this.imap=new b;this.map.perm=a.slice();for(var c=0;20>c;c++)-1==a.indexOf(c)&&this.map.perm.push(c);
this.imap.invFrom(this.map);this.tmp=new b}function z(a,b,c){a=a[c][~~(b/81/24)];return 1944*a[0]+81*Wa[~~(b/81)%24][a[1]]+Xa[Ua[a[1]][b%81]][a[2]]}function c(a,b,c){a=a[c][~~(b/27/6)];return 162*a[0]+27*Wa[~~(b/27)%6][a[1]]+Xa[Ua[a[1]][b%27*3]/3][a[2]]}function e(){function c(a,b){for(var c=0;4>c;c++)a[c]=b%3,b=~~(b/3)}function f(a){for(var b=0,c=3;0<=c;c--)b=3*b+a[c];return b}e=$.noop;var n=performance.now();Pa();for(var r=[],x=[],Sa=[],Na=0;24>Na;Na++){Wa[Na]=[];mathlib.setNPerm(r,Na,4);for(var y=
0;24>y;y++){mathlib.setNPerm(x,y,4);for(var z=0;4>z;z++)Sa[z]=r[x[z]];Wa[Na][y]=mathlib.getNPerm(Sa,4)}}for(y=0;24>y;y++)for(Ua[y]=[],mathlib.setNPerm(x,y,4),Na=0;81>Na;Na++){c(r,Na);for(z=0;4>z;z++)Sa[z]=r[x[z]];Ua[y][Na]=f(Sa)}for(y=0;81>y;y++)for(Xa[y]=[],c(x,y),Na=0;81>Na;Na++){c(r,Na);for(z=0;4>z;z++)Sa[z]=(r[z]+x[z])%3;Xa[y][Na]=f(Sa)}r=new b;x=new b;for(Sa=0;12>Sa;Sa++)for(Ta[Sa]=1<<Sa,Na=0;Na<Sa;Na++)b.KiloMult(b.moveCube[4*Sa],b.moveCube[4*Na],r),b.KiloMult(b.moveCube[4*Na],b.moveCube[4*
Sa],x),r.isEqual(x)&&(Ta[Sa]|=1<<Na);a();h();Ra();DEBUG&&console.log("[kilo] init finished, tt=",performance.now()-n)}function a(){gb=new x([5,6,7,8,9]);var a=new b,f=new b;mathlib.createMove(n,1140,function(c,e){gb.set(a,c,3);b.KiloMult(a,b.moveCube[4*e],f);return gb.get(f,3)},12);mathlib.createPrun(cb,0,184680,8,c.bind(null,n),12,4,5)}function h(){eb=new x([13,15,16,0,1,2,3,4,10,11,12,14,17,18,19]);var a=new b,f=new b;mathlib.createMove(db,455,function(c,e){eb.set(a,c,3);b.KiloMult(a,b.moveCube[4*
e],f);return eb.get(f,3)},6);mathlib.createPrun(jb,0,73710,8,c.bind(null,db),6,4,4)}function Ra(){Va=new x([0,1,2,3,4,10,11,14,17,18]);var a=new b,c=new b;mathlib.createMove(lb,210,function(f,e){Va.set(a,f);b.KiloMult(a,b.moveCube[4*e],c);return Va.get(c)},3);mathlib.createPrun(bb,0,408240,14,z.bind(null,lb),3,4,6)}function Za(a,b,c,e,n,h,r,x){if(0==h)return b(a);if(c(a)>h)return!1;for(var f=0;f<n;f++)if(!(Ta[r]>>f&1))for(var w=a,Oa=0;4>Oa;Oa++){w=e(w,f);if(null==w)break;if(Za(w,b,c,e,n,h-1,f,x))return x.push([f,
Oa]),!0}return!1}function r(a,b,c,e,n,h){for(var f=[],w=0;w<=h&&!Za(a,b,c,e,n,w,-1,f);w++);f.reverse();return f}function Na(a){for(var b=[],c=0;c<a.length;c++)b.push("U R F L BL BR DR DL DBL B DBR D".split(" ")[a[c][0]]+["","2","2'","'"][a[c][1]]);return b.join(" ")}function Qa(a){e();var f=new b,w=new b;f.init(a.perm,a.twst);var h=c.bind(null,n),x=gb.get(f,3);b.KiloMult3(b.symCube[b.symMulI[0][2]],f,b.symCube[2],w);var y=gb.get(w,3);y=[162*x[0]+27*x[1]+x[2],162*y[0]+27*y[1]+y[2]];x=+new Date;a=r(y,
function(a){return 0==a[0]&&0==a[1]},function(a){return Math.max(mathlib.getPruning(cb,a[0]),mathlib.getPruning(cb,a[1]))},function(a,b){var c=[h(a[0],b),h(a[1],Ya[b])];return c[0]==a[0]&&c[1]==a[1]?null:c},12,9);for(y=0;y<a.length;y++){var Ra=a[y];b.KiloMult(f,b.moveCube[4*Ra[0]+Ra[1]],w);f.init(w.perm,w.twst)}DEBUG&&console.log("[kilo] Phase1 in ",+new Date-x);var Ta=c.bind(null,db);x=eb.get(f,3);b.KiloMult3(b.symCube[b.symMulI[0][1]],f,b.symCube[1],w);y=eb.get(w,3);y=[162*x[0]+27*x[1]+x[2],162*
y[0]+27*y[1]+y[2]];x=+new Date;var Qa=r(y,function(a){return 0==a[0]&&0==a[1]},function(a){return Math.max(mathlib.getPruning(jb,a[0]),mathlib.getPruning(jb,a[1]))},function(a,b){var c=[Ta(a[0],b),Ta(a[1],Sa[b])];return c[0]==a[0]&&c[1]==a[1]?null:c},6,14);for(y=0;y<Qa.length;y++)Ra=Qa[y],b.KiloMult(f,b.moveCube[4*Ra[0]+Ra[1]],w),f.init(w.perm,w.twst);DEBUG&&console.log("[kilo] Phase2 in ",+new Date-x);var Ua=z.bind(null,lb);x=Va.get(f);b.KiloMult3(b.symCube[b.symMulI[0][6]],f,b.symCube[6],w);y=Va.get(w);
b.KiloMult3(b.symCube[b.symMulI[0][29]],f,b.symCube[29],w);f=Va.get(w);y=[1944*x[0]+81*x[1]+x[2],1944*y[0]+81*y[1]+y[2],1944*f[0]+81*f[1]+f[2]];x=+new Date;f=r(y,function(a){return 0==a[0]&&0==a[1]&&0==a[2]},function(a){return Math.max(mathlib.getPruning(bb,a[0]),mathlib.getPruning(bb,a[1]),mathlib.getPruning(bb,a[2]))},function(a,b){return[Ua(a[0],b),Ua(a[1],(b+1)%3),Ua(a[2],(b+2)%3)]},3,14);DEBUG&&console.log("[kilo] Phase3 in ",+new Date-x);DEBUG&&console.log("[kilo] total length: ",a.length+Qa.length+
f.length);return Na(Array.prototype.concat(a,Qa,f))}b.SOLVED=new b;var y=[[2,8,14],[3,13,19],[4,18,24],[0,23,29],[1,28,9],[58,45,41],[57,50,46],[56,30,51],[55,35,31],[59,40,36],[10,7,33],[15,12,38],[20,17,43],[25,22,48],[5,27,53],[49,21,42],[54,26,47],[34,6,52],[39,11,32],[44,16,37]];b.prototype.toFaceCube=function(a){a=a||y;for(var b=[],c=0;20>c;c++)for(var e=this.perm[c],w=this.twst[c],n=0;3>n;n++)b[a[c][(n+w)%3]]=~~(a[e][n]/5);return b};b.prototype.fromFacelet=function(a,b){b=b||y;for(var c=0,
f=[],e=0;60>e;++e)f[e]=a[e],c+=Math.pow(16,f[e]);if(93824992236885!=c)return-1;for(e=0;20>e;e++)for(c=0;20>c;c++){for(var w=-1,n=0;3>n;n++)if(~~(b[c][0]/5)==f[b[e][n]]&&~~(b[c][1]/5)==f[b[e][(n+1)%3]]&&~~(b[c][2]/5)==f[b[e][(n+2)%3]]){w=n;break}-1!=w&&(this.perm[e]=c,this.twst[e]=w)}return this};b.prototype.hashCode=function(){for(var a=0,b=0;20>b;b++)a=0|31*a+3*this.perm[b]+this.twst[b];return a};b.KiloMult=function(a,b,c){for(var f=0;20>f;f++)c.perm[f]=a.perm[b.perm[f]],c.twst[f]=(a.twst[b.perm[f]]+
b.twst[f])%3};b.KiloMult3=function(a,b,c,e){for(var f=0;20>f;f++)e.perm[f]=a.perm[b.perm[c.perm[f]]],e.twst[f]=(a.twst[b.perm[c.perm[f]]]+b.twst[c.perm[f]]+c.twst[f])%3};b.prototype.invFrom=function(a){for(var b=0;20>b;b++)this.perm[a.perm[b]]=b,this.twst[a.perm[b]]=(3-a.twst[b])%3;return this};b.prototype.init=function(a,b){this.perm=a.slice();this.twst=b.slice();return this};b.prototype.isEqual=function(a){for(var b=0;20>b;b++)if(this.perm[b]!=a.perm[b]||this.twst[b]!=a.twst[b])return!1;return!0};
b.prototype.setComb=function(a,b){b=b||4;for(var c=19,e=19;0<=e;e--)a>=mathlib.Cnk[e][b]?(a-=mathlib.Cnk[e][b--],this.perm[e]=b):this.perm[e]=c--,this.twst[e]=0};b.prototype.getComb=function(a){for(var b=a=a||4,c=0,e=0,w=[],n=19;0<=n;n--)this.perm[n]<b&&(c+=mathlib.Cnk[n][a--],e=3*e+this.twst[n],w[a]=this.perm[n]);return[c,mathlib.getNPerm(w,b),e]};b.prototype.faceletMove=function(a,b,c){for(var e=this.toFaceCube(),f=[],w=0;12>w;w++){for(var n=0;5>n;n++)f[11*w+n]=e[5*w+n],f[11*w+n+5]=0;f[11*w+10]=
0}mathlib.minx.doMove(f,a,b,c);for(w=0;12>w;w++)for(n=0;5>n;n++)e[5*w+n]=f[11*w+n];this.fromFacelet(e)};x.prototype.get=function(a,c){b.KiloMult3(this.imap,a,this.map,this.tmp);return this.tmp.getComb(c)};x.prototype.set=function(a,c,e){this.tmp.setComb(c,e);b.KiloMult3(this.map,this.tmp,this.imap,a)};b.CombCoord=x;var Wa=[],Ua=[],Xa=[],Ta=[],Ya=[0,3,4,5,1,2,8,9,10,6,7,11],Sa=[0,2,3,4,5,1,7,8,9,10,6,11],n=[],db=[],lb=[],cb=[],jb=[],bb=[],gb,eb,Va;scrMgr.reg("klmso",function(){e();var a=new b;a.perm=
mathlib.rndPerm(20,!0);for(var c=60,n=0;19>n;n++){var h=mathlib.rn(3);a.twst[n]=h;c-=h}a.twst[19]=c%3;return Qa(a)});return b}();(function(b,Pa,x){function z(a,c,e,h){void 0==h&&(h=[""]);for(var n=0,r,x=[],y=0;y<e;y++){do r=b(a.length);while(n>>r&1);x.push(a[r]+Pa(h));n&=~c[r];n|=1<<r}return x.join(" ")}function c(a){return" "+Pa([a+"=0",a+"+1",a+"+2",a+"+3",a+"+4",a+"+5",a+"+6",a+"-5",a+"-4",a+"-3",a+"-2",a+"-1"])+" "}function e(){return Pa(["U","d"])+Pa(["U","d"])}function a(a,c,e,h){for(var n=[[0,-1],[1,0],[-1,0],[0,1]],r=0,x=3,y,Sa=5,Na=[],z=0;z<c;z++){do y=b(4);while(0>r+n[y][0]||3<r+n[y][0]||0>x+n[y][1]||3<x+n[y][1]||
3==y+Sa);r+=n[y][0];x+=n[y][1];0<Na.length&&Na[Na.length-1][0]==y?Na[Na.length-1][1]++:Na.push([y,1]);Sa=y}c="";for(z=0;z<Na.length;z++)if(n=a?Na[z][0]:3-Na[z][0],n=(e?"":"ULRD").charAt(n),h)c+=n+(1==Na[z][1]?"":Na[z][1])+" ";else for(r=0;r<Na[z][1];r++)c+=n+" ";return c}function h(a,b){var c="",e,n;for(e=0;e<b;e++){c+="  ";for(n=0;n<a;n++)c+=(0==n%2?"R":"D")+Pa(["++","--"])+" ";c+="U"+(c.endsWith("-- ")?"'\\n":"~\\n")}return c}function Ra(a,b){Wa=[];var c;Za(1,a,b);var e="";for(c=0;c<Wa[0].length;c++){var n=
Wa[0][c];e=7==n[0]?e+"/":e+(" ("+n[0]+","+n[1]+") ")}return e}function Za(a,c,e){for(var h=0;h<a;h++){Ua=[1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0];Wa[h]=[];for(var n=0;n<e;){var x=b(12)-5,y=2==c?0:b(12)-5,Na=(0==x?0:1)+(0==y?0:1);(n+Na<=e||1!=c)&&(0<Na||0==n)&&r(x,y)&&(1==c&&(n+=Na),0<Na&&(Wa[h][Wa[h].length]=[x,y]),n<e||1!=c)&&(n++,Wa[h][Wa[h].length]=[7,0],r(7,0))}}}function r(a,b){var c;if(7==a){for(c=0;6>c;c++)mathlib.circle(Ua,c+6,c+12);return!0}if(Ua[(17-a)%12]||Ua[(11-a)%12]||Ua[12+
(17-b)%12]||Ua[12+(11-b)%12])return!1;var e=Ua.slice(0,12);var n=Ua.slice(12,24);for(c=0;12>c;c++)Ua[c]=e[(12+c-a)%12],Ua[c+12]=n[(12+c-b)%12];return!0}function Na(a,c){for(var e=0,h=[],n=0;4>n;n++)h[n]=b(3),0<h[n]?(h[n]="ulrb".charAt(n)+["! ","' "][h[n]-1],e++):h[n]="";return a.substr(0,a.length-c*e)+" "+h.join("")}var Qa=["","2","'"],y=["","2","'","2'"],Wa=[],Ua=[];scrMgr.reg("444yj",function(a,c){var e=[["U","D"],["R","L","r"],["F","B","f"]],h=[],n=0,r,x="";var y=-1;for(r=0;r<c;r++){var Na=0;do{var z=
b(e.length),Ra=b(e[z].length);if(z!=y||0==h[Ra]){if(z==y)h[Ra]=1,Na=b(Qa.length);else{for(y=0;y<e[z].length;y++)h[y]=0;y=z;h[Ra]=1;Na=b(Qa.length)}0==z&&0==Ra&&(n=(n+4+Na)%4);x=1==z&&2==Ra?0==n||3==n?x+("l"+Qa[Na]+" "):x+("r"+Qa[Na]+" "):2==z&&2==Ra?0==n||1==n?x+("b"+Qa[Na]+" "):x+("f"+Qa[Na]+" "):x+(e[z][Ra]+Qa[Na]+" ");Na=1}}while(0==Na)}return x});scrMgr.reg("bic",function(a,c){function e(a){var b=[],c,e,h,x=0;for(c=0;9>c;c++){for(e=h=0;e<b.length;e++)b[e]==r[n[a][c]]&&(h=1);0==h&&(b[b.length]=
r[n[a][c]],0==r[n[a][c]]&&(x=1))}return 5==b.length&&1==x}function h(a,b){for(var c=0;c<b;c++){var e=r[n[a][0]];r[n[a][0]]=r[n[a][6]];r[n[a][6]]=r[n[a][4]];r[n[a][4]]=r[n[a][2]];r[n[a][2]]=e;e=r[n[a][7]];r[n[a][7]]=r[n[a][5]];r[n[a][5]]=r[n[a][3]];r[n[a][3]]=r[n[a][1]];r[n[a][1]]=e}}for(var n=[[0,1,2,5,8,7,6,3,4],[6,7,8,13,20,19,18,11,12],[0,3,6,11,18,17,16,9,10],[8,5,2,15,22,21,20,13,14]],r=[1,1,2,3,3,2,4,4,0,5,6,7,8,9,10,10,5,6,7,8,9,11,11],x="",y=[],Na,z,Ra,Ta;y.length<c;){Na=[1,1,1,1];for(z=0;4>
z;z++)1!=Na[z]||e(z)||(Na[z]=0);for(z=0;0==z;)Ra=b(4),1==Na[Ra]&&(Ta=b(3)+1,h(Ra,Ta),z=1);y[y.length]=[Ra,Ta];2<=y.length&&y[y.length-1][0]==y[y.length-2][0]&&(y[y.length-2][1]=(y[y.length-2][1]+y[y.length-1][1])%4,y=y.slice(0,y.length-1));1<=y.length&&0==y[y.length-1][1]&&(y=y.slice(0,y.length-1))}for(Na=0;Na<c;Na++)x+="UFLR"[y[Na][0]]+Qa[y[Na][1]-1]+" ";return x});scrMgr.reg("15p 15pm 15pat clkwca clk clkc clke giga mgmo mgmp mgmc heli redi redim pyrm prcp mpyr r3 r3ni sq1h sq1t sq2 ssq1t bsq -1 333noob lol".split(" "),
function(r,Ta){var Qa="";switch(r){case "15p":return a(!1,Ta);case "15pm":return a(!0,Ta);case "15pat":return a(!1,Ta,!0,!0);case "clkwca":var Sa="0+ 1+ 2+ 3+ 4+ 5+ 6+ 1- 2- 3- 4- 5-".split(" ");Qa="UR? DR? DL? UL? U? R? D? L? ALL? y2 U? R? D? L? ALL?????";for(var n=0;14>n;n++)Qa=Qa.replace("?",Pa(Sa));return Qa.replace("?",Pa([""," UR"])).replace("?",Pa([""," DR"])).replace("?",Pa([""," DL"])).replace("?",Pa([""," UL"]));case "clk":return"UU"+c("u")+"dU"+c("u")+"dd"+c("u")+"Ud"+c("u")+"dU"+c("u")+
"Ud"+c("u")+"UU"+c("u")+"UU"+c("u")+"UU"+c("u")+"dd     "+e()+"\\ndd"+c("d")+"dU"+c("d")+"UU"+c("d")+"Ud"+c("d")+"UU     UU     Ud     dU     UU     dd"+c("d")+e();case "clkc":Qa="";for(n=0;4>n;n++)Qa+="("+(b(12)-5)+", "+(b(12)-5)+") / ";for(n=0;6>n;n++)Qa+="("+(b(12)-5)+") / ";for(n=0;4>n;n++)Qa+=Pa(["d","U"]);return Qa;case "clke":return"UU"+c("u")+"dU"+c("u")+"dU"+c("u")+"UU"+c("u")+"UU"+c("u")+"UU"+c("u")+"Ud"+c("u")+"Ud"+c("u")+"dd"+c("u")+"dd     "+e()+"\\nUU     UU     dU"+c("d")+"dU     dd"+
c("d")+"Ud     Ud"+c("d")+"UU     UU"+c("d")+"dd"+c("d")+e();case "giga":Qa="";for(n=0;n<Math.ceil(Ta/10);n++){Qa+="  ";for(Sa=0;10>Sa;Sa++)Qa+=(0==Sa%2?"Rr".charAt(b(2)):"Dd".charAt(b(2)))+Pa(["+ ","++","- ","--"])+" ";Qa+="y"+Pa(y)+"\\n"}return Qa;case "mgmo":return z("F B U D L DBR DL BR DR BL R DBL".split(" "),[1364,2728,1681,2402,2629,1418,2329,1574,1129,2198,421,602],Ta);case "mgmp":return h(10,Math.ceil(Ta/10));case "mgmc":Qa=Math.ceil(Ta/10);n="";var Ua;for(Sa=0;Sa<Qa;Sa++){n+=" ";for(Ua=
0;5>Ua;Ua++)n+=Pa(["+","-"])+Pa(["+","-"])+" ";n+="U"+Pa(["'\\n","~\\n"])}return n;case "heli":return z("UF UR UB UL FR BR BL FL DF DR DB DL".split(" "),[154,53,106,197,771,1542,3084,2313,2704,1328,2656,1472],Ta);case "redi":return z("LRFBlrfb".split(""),[28,44,67,131,193,194,52,56],Ta,["","'"]);case "redim":Qa=[];for(n=0;n<Ta;n++)Qa.push(x([["R"],["L"]],["","'"],3+b(3)));return Qa.join(" x ");case "pyrm":return Qa=x([["U"],["L"],["R"],["B"]],["!","'"],Ta),Na(Qa,3).replace(/!/g,"");case "prcp":return h(10,
Math.ceil(Ta/10));case "mpyr":return Qa=z("U! L! R! B! Uw Lw Rw Bw".split(" "),[224,208,176,112,238,221,187,119],Ta,["!","'"]),Na(Qa,4).replace(/!/g,"");case "r3":for(n=0;n<Ta;n++)Qa+=(0==n?"":"\\n")+(n+1)+") ${333}";return scrMgr.formatScramble(Qa);case "r3ni":for(n=0;n<Ta;n++)Qa+=(0==n?"":"\\n")+(n+1)+") ${333ni}";return scrMgr.formatScramble(Qa);case "sq1h":return Ra(1,Ta);case "sq1t":return Ra(0,Ta);case "sq2":for(n=0;n<Ta;)if(Sa=b(12)-5,Ua=b(12)-5,0!=Sa||0!=Ua)n++,Qa+="("+Sa+","+Ua+") / ";return Qa;
case "ssq1t":Wa=[];Za(2,0,Ta);n=Wa[0];Sa=Wa[1];Ua="";7==n[0][0]&&(n=[[0,0]].concat(n));7==Sa[0][0]&&(Sa=[[0,0]].concat(Sa));for(Qa=0;Qa<Ta;Qa++)Ua+="("+n[2*Qa][0]+","+Sa[2*Qa][0]+","+Sa[2*Qa][1]+","+n[2*Qa][1]+") / ";return Ua;case "bsq":return Ra(2,Ta);case "-1":for(n=0;n<Ta;n++)Qa+=String.fromCharCode(32+b(224));return Qa+"Error: subscript out of range";case "333noob":return Qa=x(SCRAMBLE_NOOBST,SCRAMBLE_NOOBSS.split("|"),Ta).replace(/t/,"T"),Qa.substr(0,Qa.length-2)+".";case "lol":return Qa=x([["L"],
["O"]],0,Ta),Qa.replace(/ /g,"")}console.log("Error")})})(mathlib.rn,mathlib.rndEl,scrMgr.mega);var storage=execMain(function(){function b(a){a=""+a;return String.fromCharCode(47+a.length)+a}function Pa(a,c){return"session_"+b(a)+(void 0==c?"":"_"+b(c))}function x(a){console.log("IndexedDB Error",a||"undefined")}function z(b,c,e,h){(h=h||a)?(h=h.transaction(["sessions"],b),h.oncomplete=e||$.noop,h.onerror=x,h=h.objectStore("sessions"),c(h)):requestAnimFrame(function(){z(b,c,e)})}function c(a,b){return new Promise(function(c,h){if(e)z("readwrite",function(b){b.clear();for(var c=1;c<=~~kernel.getProp("sessionN");c++)for(var e=
mathlib.str2obj(a["session"+c]||[]),h=0;h<(Math.ceil(e.length/100)||1);h++)b.put(e.slice(100*h,100*(h+1)),Pa(c,h))},c,b);else{for(var r=1;r<=~~kernel.getProp("sessionN");r++)localStorage["session"+r]=mathlib.obj2str(a["session"+r]);c()}})}var e=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,a,h=/^session_\d(\d+)_\d(\d+)$/;e&&$(function(){var b=e.open("cstimer",1);b.onerror=x;b.onupgradeneeded=function(a){DEBUG&&console.log("Update Data From LocalStorage");
var b=a.target.result;b.createObjectStore("sessions").transaction.oncomplete=function(a){c(localStorage,b)}};b.onsuccess=function(b){DEBUG&&console.log("Success opening DB");a=b.target.result}});return{set:function(a,b,c){return new Promise(function(h,r){e?z("readwrite",function(e){var h=~~(c/100),r=IDBKeyRange.bound(Pa(a,h),Pa(a+1),!1,!0);for(e["delete"](r);h<(Math.ceil(b.length/100)||1);h++)e.put(b.slice(100*h,100*(h+1)),Pa(a,h))},function(){h(b)}):(localStorage["session"+a]=JSON.stringify(b),h(b))})},
get:function(a,b,c){return new Promise(function(h,r){var x=[];if(e)z("readonly",function(b){var c=IDBKeyRange.bound(Pa(a),Pa(a+1),!1,!0);b.openCursor(c).onsuccess=function(a){if(a=a.target.result)Array.prototype.push.apply(x,a.value),a["continue"]()}},function(){b=b||0;c=c||x.length;if(0!=b||c!=x.length)x=x.slice(b,c);h(x)});else{var Na=localStorage["session"+a];void 0!=Na&&""!=Na&&(x=JSON.parse(Na));if(0!=b||c!=x.length)x=x.slice(b,c);h(x)}})},del:function(a,b,c){e?z("readwrite",function(c){c["delete"](IDBKeyRange.bound(Pa(a),
Pa(a+1),!1,!0));var e=IDBKeyRange.bound(Pa(b),Pa(b+1),!1,!0);c.openCursor(e).onsuccess=function(b){if(b=b.target.result){var e=h.exec(b.key);e&&(c.put(b.value,Pa(a,~~e[2])),c["delete"](b.key));b["continue"]()}}},c):(localStorage["session"+a]=localStorage["session"+b],delete localStorage["session"+b],c&&requestAnimFrame(c))},setKey:function(a,b){return new Promise(function(c,h){e?z("readwrite",function(c){c.put(b,a)},function(){c(!0)}):(localStorage[a]=b,c(!0))})},getKey:function(a){return new Promise(function(b,
c){var h;e?z("readonly",function(b){b.get(a).onsuccess=function(a){h=a.target.result}},function(){b(h)}):b(localStorage[a])})},importAll:c,exportAll:function(){return new Promise(function(a,b){var c={};if(e)z("readonly",function(a){a.openCursor().onsuccess=function(a){if(a=a.target.result){var b=h.exec(a.key);b&&(b=~~b[1],c["session"+b]=c["session"+b]||[],Array.prototype.push.apply(c["session"+b],a.value));a["continue"]()}}},function(){a(c)});else{for(var x=1;x<=~~kernel.getProp("sessionN");x++)void 0!=
localStorage["session"+x]&&(c["session"+x]=mathlib.str2obj(localStorage["session"+x]));a(c)}})}}});var TimeStat=execMain(function(){function b(x,z,c,e){this.avgSizes=x.slice();this.timeAt=c;this.timeSort=e||b.dnfsort;this.reset(z)}function Pa(b){var x=kernel.getProp("trim","p5");return"p"==x[0]?Math.ceil(b/100*x.slice(1)):"m"==x?Math.max(0,b-1>>1):~~x}b.dnfsort=function(b,z){return b==z?0:0>b?1:0>z?-1:b-z};b.prototype.reset=function(b){this.timesLen=b;this.shouldRecalc=!0};b.prototype.getAllStats=function(){this.genStats();var b=this.timesLen-this.tree.rankOf(-1);return[b,b==this.timesLen?-1:this.tree.cumSum(this.timesLen-
b)/(this.timesLen-b)]};b.prototype.genStats=function(){if(this.shouldRecalc){this._bestAvg=[];this.lastAvg=[];this.treesAvg=[];this.tree=sbtree.tree(this.timeSort);this.bestTime=this.worstTime=-1;this.bestTimeIndex=this.worstTimeIndex=0;var b=this.timesLen;this.timesLen=0;this.toLength(b);this.shouldRecalc=!1}};b.prototype.pushed=function(b){this.genStats();this.doPushed(b)};b.prototype.bestAvg=function(b,z){var c=this._bestAvg[b]||[];c=c[c.length-1]||[-1,0,-1,-1,0];return void 0!==z?c[z]:c};b.prototype.doPushed=
function(b,z){var c=[];this.timesLen++;var e=this.timesLen-1,a=this.timeAt(e);this.tree.insert(a,e);if(!z){var h=this.bestTime;this.bestTime=0==this.timesLen?-1:this.tree.rank(0);this.bestTimeIndex=this.tree.find(this.bestTime);this.worstTime=0==this.timesLen?-1:this.tree.rank(Math.max(0,this.tree.rankOf(-1)-1));this.worstTimeIndex=this.tree.find(this.worstTime);0>this.timeSort(a,h)&&-1!=h&&c.push("single")}for(h=0;h<this.avgSizes.length;h++){var x=Math.abs(this.avgSizes[h]);if(this.timesLen<x)break;
var Za=0>this.avgSizes[h]?0:Pa(x),r=x-2*Za,Na=this.treesAvg[h]||sbtree.tree(this.timeSort);if(this.timesLen==x){for(var Qa=0;Qa<x;Qa++)Na.insert(this.timeAt(Qa),Qa);this._bestAvg[h]=[]}else Na.remove(this.timeAt(e-x)).insert(a,e);Qa=Na.cumSum(x-Za)-Na.cumSum(Za);var y=Math.sqrt((Na.cumSk2(x-Za)-Na.cumSk2(Za)-Qa*Qa/r)/(r-1))/1E3;Za=[Na.rankOf(-1)<x-Za?-1:Qa/r,y,Na.rank(Za-1),Na.rank(x-Za)];0>this.timeSort(Za[0],this.bestAvg(h,0))&&(0<=this.bestAvg(h,0)&&!z&&c.push((0<this.avgSizes[h]?"ao":"mo")+x),
this._bestAvg[h].push(Za.concat([e-x+1])));this.lastAvg[h]=Za;this.treesAvg[h]=Na}0==c.length||b||logohint.push("Session best "+c.join(" ")+"!")};b.prototype.toLength=function(b){for(;this.timesLen>b;)this.toPop(this.timesLen-1!=b);for(;this.timesLen<b;)this.doPushed(!0,this.timesLen+1!=b)};b.prototype.toPop=function(b){var x=this.timesLen-1,c=this.timeAt(x);this.tree.remove(c);b||(this.bestTime=0==this.timesLen?-1:this.tree.rank(0),this.bestTimeIndex=this.tree.find(this.bestTime),this.worstTime=
0==this.timesLen?-1:this.tree.rank(Math.max(0,this.tree.rankOf(-1)-1)),this.worstTimeIndex=this.tree.find(this.worstTime));for(var e=0;e<this.avgSizes.length;e++){var a=Math.abs(this.avgSizes[e]);if(this.timesLen<a)break;else if(this.timesLen==a){this.lastAvg[e]=null;this.treesAvg[e]=null;this._bestAvg[e]=null;continue}var h=this.treesAvg[e];h.remove(c).insert(this.timeAt(x-a),x-a);if(!b){var Ra=0>this.avgSizes[e]?0:Pa(a),Za=a-2*Ra,r=h.cumSum(a-Ra)-h.cumSum(Ra),Na=Math.sqrt((h.cumSk2(a-Ra)-h.cumSk2(Ra)-
r*r/Za)/(Za-1))/1E3;h=[h.rankOf(-1)<a-Ra?-1:r/Za,Na,h.rank(Ra-1),h.rank(a-Ra)];this.lastAvg[e]=h}this.bestAvg(e,4)==x-a+1&&this._bestAvg[e].pop()}this.timesLen--};b.prototype.getThres=function(){for(var b=[],z=0;z<this.avgSizes.length;z++){var c=Math.abs(this.avgSizes[z]);if(this.timesLen<c)break;var e=0>this.avgSizes[z]?0:Pa(c),a=c-2*e,h=this.treesAvg[z]||sbtree.tree(this.timeSort),Ra=this.timeAt(this.timesLen-c),Za=e;e=c-e-1;0>this.timeSort(Ra,h.rank(Za))?(Za+=1,Ra=0):0>this.timeSort(h.rank(e),
Ra)&&(--e,Ra=0);var r=this.bestAvg(z,0);h.rankOf(-1)<e?b[z]=-1:-1==r?b[z]=-2:(Ra=h.cumSum(e+1)-h.cumSum(Za)-Ra,a=r*a-Ra,Za=0==Za?0:h.rank(Za-1),c=e==c-1?-1:h.rank(e+1),0>=a||0>this.timeSort(a,Za)?b[z]=-1:0>this.timeSort(c,a)?b[z]=-2:b[z]=a)}return b};b.prototype.getMinMaxInt=function(){return this.getAllStats()[0]==this.timesLen?null:[this.worstTime,this.bestTime,this.getBestDiff(this.worstTime-this.bestTime)]};b.prototype.getBestDiff=function(b){var x=[100,200,500,1E3,2E3,5E3,1E4,2E4,5E4,1E5];if("a"==
kernel.getProp("disPrec")){b/=10;for(var c=0;c<x.length;c++)if(b<x[c]){b=x[c];break}}else b=x[kernel.getProp("disPrec")];return b};b.prototype.runAvgMean=function(b,z,c,e){c=c||z;void 0===e&&(e=Pa(c));if(!(0>b||b+z>this.timesLen)){if(0>=c-e)return[-1,0,-1,-1];for(var a=sbtree.tree(this.timeSort),h=0;h<c;h++)a.insert(this.timeAt(b+h),h);for(var x=c-2*e,Za=a.cumSum(c-e)-a.cumSum(e),r=Math.sqrt((a.cumSk2(c-e)-a.cumSk2(e)-Za*Za/x)/(x-1))/1E3,Na=[[a.rankOf(-1)<c-e?-1:Za/x,r,a.rank(e-1),a.rank(c-e)]],Qa=
b-c,y=c;y<z;y++)a.remove(this.timeAt(Qa+y)).insert(this.timeAt(b+y),h),Za=a.cumSum(c-e)-a.cumSum(e),r=Math.sqrt((a.cumSk2(c-e)-a.cumSk2(e)-Za*Za/x)/(x-1))/1E3,Na.push([a.rankOf(-1)<c-e?-1:Za/x,r,a.rank(e-1),a.rank(c-e)]);return Na}};b.prototype.getTrimList=function(b,z,c,e){for(var a=[],h=[],x=Pa(z),Za=0;Za<z;Za++){var r=this.timeAt(b+Za),Na=this.timeSort(r,c);r=this.timeSort(e,r);0>Na?a.push(Za):0>r?h.push(Za):0==Na&&a.length<x?a.unshift(Za):0==r&&h.length<x&&h.unshift(Za)}return a.slice(-x).concat(h.slice(-x))};
return b});var stats=execMain(function(b,Pa,x){function z(a){if("string"==typeof a[0]){var b=[a[2],a[1]||Mb,a[0],a[3]||Math.round(((new Date).getTime()-a[2][1])/1E3)];a[4]&&b.push(a[4]);fb.push(b);a=a[2]}else fb.push([a,Mb,"",Math.round(((new Date).getTime()-a[1])/1E3)]);Lb.push(null);qb.pushed();ub.pushed();Hb.save(fb.length-1);a.length-1>Eb?pb.updateTable(!1):pb.appendRow(fb.length-1);Wa(["push"]);kernel.pushSignal("timestd",fb[fb.length-1])}function c(a,b){a<.7*fb.length?(b(),qb.reset(fb.length),ub.reset(fb.length)):
(qb.toLength(a),ub.toLength(a),b(),qb.toLength(fb.length),ub.toLength(fb.length))}function e(a){if(kernel.getProp("delmul")){var b=prompt(STATS_CFM_DELMUL,1);if(null==b||!/^\d+$/.exec(b)||0==~~b)return;b=~~b}else{if(!confirm(STATS_CFM_DELETE))return;b=1}c(a,function(){fb.splice(a,b);Lb.splice(a,b)});Hb.save(a);pb.updateTable(!1);Wa(["delete",a,b]);return!0}function a(a){for(var b=0,c=0,e=0;e<fb.length;e++){var f=fb[e][0];-1==f[0]||f.length<=a?c+=1:b+=n(a,e)}return c==fb.length?-1:b/(fb.length-c)}
function h(a,c){switch(a[0]){case 0:return b(a[1]);case -1:return"DNF"+(c?"("+b(a[1])+")":"");default:return b(a[0]+a[1])+"+"}}function Ra(a){if(2==a.length)return"";var c=[];c.push(b(a[a.length-1]));for(var e=a.length-2;1<=e;e--)c.push(b(a[e]-a[e+1]));return"="+c.join("+")}function Za(a){a=~~$(a.target).attr("data");var b=qb;0!=a&&(b=new TimeStat(Ab,fb.length,n.bind(void 0,a)));jb(b,db,0==a?0:STATS_CURSPLIT.replace("%d",a))}function r(a,c,e){var f=fb[a],w=f[0],n=[];n.push('<td class="times">'+(f[2]&&
"*")+(a+1)+"</td>");n.push('<td class="times">'+h(w,!1)+"</td>");var r=kernel.getProp("statsrc","t");f=qb.prettyFunc||[b,x];"t"!=r[0]&&(n.pop(),n.push('<td class="times"><span style="opacity:0.5">'+h(w,!1)+"</span> "+f[0](qb.timeAt(a)).split(" ")[0]+"</td>"));r=qb.runAvgMean(a-Fb+1,Fb,0,0<yb?void 0:0);var Oa=qb.runAvgMean(a-Jb+1,Jb,0,0<Gb?void 0:0);n.push("<td"+(r?' class="times"':"")+">"+(r?f[1](r[0][0]):"-")+"</td><td"+(Oa?' class="times"':"")+">"+(Oa?f[1](Oa[0][0]):"-")+"</td>");if(1<c){n.push("<td>"+
b(w[w.length-1])+"</td>");for(f=w.length-2;1<=f;f--)n.push("<td>"+b(w[f]-w[f+1])+"</td>");for(f=w.length-1;f<c;f++)n.push("<td>-</td>")}n=n.join("");e&&e.html(n);return'<tr data="'+a+'">'+n+"</tr>"}function Na(c){wb.empty().unbind("click").click(Za);var e=fb.length,f=qb.getAllStats(),w=qb.prettyFunc||[b,x],n=e==f[0]?0:(e-f[0])*f[1];wb.append('<th colspan="4" data="0" class="times">'+STATS_SOLVE+": "+(e-f[0])+"/"+e+"<br>"+STATS_AVG+": "+w[1](f[1])+(kernel.getProp("statssum")?"<br>"+STATS_SUM+": "+
w[0](n):"")+"</th>").css("font-size","1.2em");if(1<c)for(e=1;e<=c;e++)wb.append('<th data="'+e+'" class="times">'+x(a(e))+"</th>").css("font-size","")}function Qa(a){a||(a=$('<select style="max-width:4em;">'));a.unbind("change").change(function(a){kernel.setProp("statsrc",$(a.target).val())});var b=kernel.getProp("statsrc","t"),c=[["t",STATS_TIME]];if(1!=Eb)for(var e=0;e<Eb;e++)c.push(["p"+(e+1),"P."+(e+1)]);e=hb();for(var f in e)c.push(["m"+f,e[f][0]]);f=!1;for(e=0;e<c.length;e++)a.append($("<option>").val(c[e][0]).html(c[e][1])),
c[e][0]==b&&(f=!0);a.val(b);f||kernel.setProp("statsrc","t");return 1==c.length?STATS_TIME:a}function y(){if(!Kb){if(kernel.getProp("statsum")){xb.css("display","inline-block");qb.getAllStats();var a=Qa(),c=qb.prettyFunc||[b,x],e=[];0<fb.length?(e.push('<td class="times click" data="cs">'+c[0](qb.timeAt(fb.length-1))+"</td>"),e.push('<td class="times click" data="bs">'+c[0](qb.bestTime)+"</td>")):(e.push("<td><span>-</span></td>"),e.push("<td><span>-</span></td>"));for(var w=[],n=qb.getThres(),h=
kernel.getProp("statthres",!1),r=0;r<Ab.length;r++){var Oa=Math.abs(Ab[r]);fb.length>=Oa&&(w.push("<tr><th>"+"am"[Ab[r]>>>31]+"o"+Oa+"</th>"),w.push('<td class="times click" data="c'+"am"[Ab[r]>>>31]+r+'">'+c[1](qb.lastAvg[r][0])+"</td>"),w.push('<td class="times click" data="b'+"am"[Ab[r]>>>31]+r+'">'+c[1](qb.bestAvg(r,0))+"</td>"),h&&w.push('<td class="times">'+(0>n[r]?["N/A",""][-1-n[r]]:c[0](n[r]))+"</td>"))}c=$("<tr>").append("<th></th><th>"+Bb[1]+"</th><th>"+Bb[0]+"</th>");h&&c.append("<th>"+
Bb[13]+"</th>");vb.empty().append(c,$("<tr>").append($('<th style="padding:0">').append(a),e.join("")),w.join(""))}else vb.empty(),xb.hide();f()}}function Wa(a){if(!Kb){y();for(var b in Pb)Pb[b](a);a=fb.length-1;b=ub.runAvgMean(a-Fb+1,Fb,0,0<yb?void 0:0);var c=ub.runAvgMean(a-Jb+1,Jb,0,0<Gb?void 0:0);kernel.pushSignal("avg",[(0<yb?"ao":"mo")+Fb+": "+(b?x(b[0][0]):"-"),(0<Gb?"ao":"mo")+Jb+": "+(c?x(c[0][0]):"-"),b?[a-Fb+1,Fb,10*Fb,0>yb]:void 0,c?[a-Jb+1,Jb,10*Jb,0>Gb]:void 0,Ta.bind(void 0,ub,db),
fb[a],0==a?null:fb[a-1]])}}function Ua(){var a=kernel.getProp("statsrc","t");if("t"!=a){if("p"==a[0])return n.bind(void 0,~~a.slice(1));if("m"==a[0])return a=a.slice(1),ab.bind(null,a)}return Ib}function Xa(a,b,c){if(!b)return"N/A";var e=h(b[0],!0)+Ra(b[0])+(b[2]?"["+b[2]+"]":"");-1!=$.inArray(a,c)&&(e="("+e+")");kernel.getProp("printScr")&&(e+="   "+b[1]);kernel.getProp("printDate")&&(e+="   @"+mathlib.time2str(b[3]));return kernel.getProp("printScr")||kernel.getProp("printDate")?a+1+". "+e+" \n":
e+", "}function Ta(a,c,e,f,w,n){if(0!=a.timesLen){var h=[0,[null],[null]],r=[];0!=e+f&&(n?h=a.runAvgMean(e,f,0,0)[0]:(h=a.runAvgMean(e,f)[0],r=a.getTrimList(e,f,h[2],h[3])));var Oa="";if(kernel.getProp("printDate")&&2<f){Oa=c(e);var y=c(e+f-1);Oa=Bb[11].replace("%s",mathlib.time2str(Oa&&Oa[3])).replace("%e",mathlib.time2str(y&&y[3]));Oa=" ("+Oa+")"}Oa=[mathlib.time2str(+new Date/1E3,Bb[3])+Oa+"\n"];y=a.prettyFunc||[b,x];1<w&&(2==w?Oa.push(Bb[8]):10==w?Oa.push(Bb[5]):n?Oa.push(Bb[6].replace("%mk",
~~(w/10))):Oa.push(Bb[7].replace("%mk",~~(w/10))),Oa.push(": "+y[10==w?0:1](h[0])));Oa.push("\n\n"+Bb[10]+"\n");if(kernel.getProp("absidx"))for(w=0;w<r.length;w++)r[w]+=e;for(w=0;w<f;w++)Oa.push(Xa(kernel.getProp("absidx")?e+w:w,c(e+w),r));Oa=Oa.join("").slice(0,-2);kb.val(Oa);kernel.showDialog([kb,cb,void 0,cb,[STATS_EXPORTCSV,function(){Ya(a,c,e,f);return!1}]],"stats",STATS_CURROUND);kb[0].select()}}function Ya(a,c,e,f){if(0!=a.timesLen){window.Blob||alert("Do not support your browser!");a=["No.;Time;Comment;Scramble;Date"];
for(var w=0;w<Eb;w++)a[0]+=";P."+(w+1);for(w=0;w<f;w++){var n=c(e+w),r=[];r.push(w+1);r.push(h(n[0],!0));r.push(n[2]?n[2]:"");r.push(n[1]);r.push(mathlib.time2str(n[3]));r.push(b(n[0][n[0].length-1]));for(var x=n[0].length-2;1<=x;x--)r.push(b(n[0][x]-n[0][x+1]));for(x=n[0].length-1;x<Eb;x++)r.push("");for(x=0;x<r.length;x++){n=r;var Oa=x,y=r[x];y=y.toString();if(-1!=y.indexOf(";")||-1!=y.indexOf("\n"))y='"'+y.replace(/"/g,'""')+'"';n[Oa]=y}a.push(r.join(";"))}a=a.join("\r\n");c=new Blob([a],{type:"text/csv"});
e=$('<a class="click"/>').appendTo("body");e.attr("href",URL.createObjectURL(c));e.attr("download","csTimerExport_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+".csv");e[0].click();e.remove()}}function Sa(a,b,c){c=$(c.target).attr("data");if(void 0!=c){var e=~~c.substr(2);switch(c.substr(0,2)){case "bs":Ta(a,b,a.bestTimeIndex,1,10,!0);break;case "cs":Ta(a,b,a.timesLen-1,1,10,!0);break;case "ws":Ta(a,b,a.worstTimeIndex,1,10,!0);break;case "bm":Ta(a,b,a.bestAvg(e,4),-Ab[e],10*-Ab[e],!0);break;case "cm":Ta(a,
b,a.timesLen+Ab[e],-Ab[e],10*-Ab[e],!0);break;case "ba":Ta(a,b,a.bestAvg(e,4),Ab[e],10*Ab[e],!1);break;case "ca":Ta(a,b,a.timesLen-Ab[e],Ab[e],10*Ab[e],!1);break;case "tt":jb(a,b)}}}function n(a,b){var c=fb[b][0];return-1==c[0]||c.length<=a?-1:Rb*~~((0==a?c[0]+c[1]:c[c.length-a]-(c[c.length-a+1]||0))/Rb)}function db(a){return fb[a]}function lb(a){for(var b=[],c=0;c<a.length;c++)b.push(c);b.sort(function(b,c){var e=a[b][3]||0,f=a[c][3]||0;return e==f?b-c:e-f});for(c=0;c<a.length;c++)b[c]=a[b[c]];return b}
function cb(){kb.val("")}function jb(a,c,e){var f=a.getAllStats(),w=f[0],n=a.runAvgMean(0,fb.length)[0];f=f[1];var h=a.timesLen,r="";if(kernel.getProp("printDate")&&2<h){r=c(0);var Oa=c(h-1);r=Bb[11].replace("%s",mathlib.time2str(r&&r[3])).replace("%e",mathlib.time2str(Oa&&Oa[3]));r=" ("+r+")"}Oa=qb.prettyFunc||[b,x];r=[mathlib.time2str(+new Date/1E3,Bb[3])+r];r.push(Bb[4].replace("%d",h-w+"/"+h)+"\n");r.push(Bb[5]);r.push("    "+Bb[0]+": "+Oa[0](a.bestTime));r.push("    "+Bb[2]+": "+Oa[0](a.worstTime)+
"\n");for(w=0;w<Ab.length;w++){var y=Math.abs(Ab[w]);h>=y&&(r.push(Bb[7-(Ab[w]>>>31)].replace("%mk",y)),r.push("    "+Bb[1]+": "+Oa[1](a.lastAvg[w][0])+" ( = "+bb(a.lastAvg[w][1],2)+")"),r.push("    "+Bb[0]+": "+Oa[1](a.bestAvg(w,0))+" ( = "+bb(a.bestAvg(w,1),2)+")\n"))}r.push(Bb[8].replace("%v",Oa[1](n[0])).replace("%sgm",bb(n[1],2)).replace(/[{}]/g,""));r.push(Bb[9].replace("%v",Oa[1](f)+"\n"));if(0!=h){r.push(Bb[10]);n=[];for(f=0;f<h;f++)n.push(Xa(f,c(f),[]));n=n.join("").slice(0,-2);r.push(n)}r=
r.join("\n");kb.val(r);kernel.showDialog([kb,cb,void 0,cb,[STATS_EXPORTCSV,function(){Ya(a,c,0,h);return!1}]],"stats",e||STATS_CURSESSION);kb[0].select()}function bb(a,b){a&&a!=Number.POSITIVE_INFINITY&&a!=Number.NEGATIVE_INFINITY||(a=0);for(var c=""+Math.round(a*Math.pow(10,b));c.length<b+1;)c="0"+c;var e=c.length;return c.substr(0,e-b)+"."+c.substr(e-b,b)}function gb(a){a=a.split(/[\s,;]+/);for(var b=/([am])o(\d+)/,c=[],e=0;e<a.length;e++){var f=b.exec(a[e]);if(!f)return!1;c.push(("a"==f[1]?1:-1)*
~~f[2])}c.sort(function(a,b){return Math.abs(a)-Math.abs(b)});return c}function eb(a){var b=kernel.getProp("statalu");if(a||!/^\s*([am]o\d+[\s,;]*)+\s*$/.exec(b))a=prompt("Statistics Details",b||"mo3 ao5 ao12 ao100"),/^\s*([am]o\d+[\s,;]*)+\s*$/.exec(a)&&gb(a)?kernel.setProp("statalu",a):(null!=a&&alert("INVALID VALUES!"),kernel.setProp("statal","mo3 ao5 ao12 ao100"),kernel.reprop())}function Va(a){var b=gb(a);b?(Ab=b,qb=new TimeStat(Ab,fb.length,Ua()),qb.prettyFunc=nb(),ub=new TimeStat([],fb.length,
Ib),crossSessionStats.updateStatal(Ab),Wa(["statal",a])):(kernel.setProp("statal","mo3 ao5 ao12 ao100"),kernel.reprop())}function w(a,b){if("time"==a)z(b);else if("scramble"==a||"scrambleX"==a)Mb=b[1];else if("property"==a)if(/^(:?useMilli|timeFormat|stat[12][tl]|statinv)$/.exec(b[0]))Rb=kernel.getProp("useMilli")?1:10,yb=[1,-1][~~kernel.getProp("stat1t")]*kernel.getProp("stat1l"),Gb=[1,-1][~~kernel.getProp("stat2t")]*kernel.getProp("stat2l"),Fb=Math.abs(yb),Jb=Math.abs(Gb),pb.updateTable(!1),Wa(["property",
b[0]]);else if("statsum"==b[0]||"statthres"==b[0])y();else if("statssum"==b[0])Na(Eb),f();else if("statal"==b[0]){var e=b[1];"u"==e&&eb("modify"==b[2]);e=kernel.getProp("statal");Va("u"==e?kernel.getProp("statalu"):e)}else"statalu"==b[0]?Va(b[1]):"trim"==b[0]?(qb.reset(fb.length),ub.reset(fb.length),crossSessionStats.updateStatal(Ab),Wa(["property",b[0]])):"view"==b[0]?f():"statHide"==b[0]?b[1]?ob.hide():ob.show():"statsrc"==b[0]?(qb=new TimeStat(Ab,fb.length,Ua()),qb.prettyFunc=nb(),pb.updateTable(!0)):
"wndStat"==b[0]?f():"sr_statal"==b[0]&&kernel.setProp("sr_statalu",b[1]);else if("ctrl"==a&&"stats"==b[0])"clr"==b[1]?Hb.getButton().click():"undo"==b[1]?Db.delLast():"OK"==b[1]?Db.setCfm(0):"+2"==b[1]?Db.setCfm(2E3):"DNF"==b[1]&&Db.setCfm(-1);else if("ashow"==a&&!b)pb.hideAll();else if("button"==a&&"stats"==b[0]&&b[1])setTimeout(f,50);else if("giirecons"==a){var w=fb.length-1;0>w||fb[w][1]!=b[0]||(c(w,function(){fb[w][4]=b[1];Lb[w]=null}),Hb.save(w),Wa(["giirecons",w]))}}function f(){$("html").hasClass("m")?
rb.height(Math.max(xb.height(),wb.height()+2*tb.height())):null!=rb[0].offsetParent&&rb.outerHeight(~~(mb.height()-(ob.is(":hidden")?0:ob.outerHeight())-xb.outerHeight()-5))}function Oa(a,b,c){Tb[a]=b;c&&(Nb[a]=[b,c])}function ab(a,b){if(!(b>=fb.length)&&a in Tb)return Lb[b]||(Lb[b]={}),a in Lb[b]||(Lb[b][a]=Tb[a](fb[b],b)),Lb[b][a]}function hb(){var a={},b;for(b in Nb)for(var c=Math.max(fb.length-10,0);c<fb.length;c++)if(-1!=ab(b,c)){a[b]=Nb[b][1];break}return a}function nb(a){if(!a){var c=kernel.getProp("statsrc",
"t");"m"==c[0]&&(a=c.slice(1))}return Nb[a]?(a=Nb[a][1],[a[1],a[2]||a[1]]):[b,x]}function $a(a,b){var c=-1;(b[2]||"").replace(/[0-9]+(\.[0-9]+)?/g,function(b){0==a&&(c=1E3*parseFloat(b));a--});return c}var fb=[],mb=$('<div id="stats" />'),kb=$('<textarea rows="10" readonly />'),rb=$('<div class="myscroll" />'),ob=$("<div>"),sb=$("<table />").click(function(a){a=$(a.target);if(a.is("td,td>span")&&"-"!=a.html()){a.is("td>span")&&(a=a.parent());var b=a.prevAll(),c=b.length;b=~~(0==c?a:b.eq(-1)).html().replace("*",
"")-1;if(!(4<c||0>c))switch(c){case 0:if(kernel.getProp("rsfor1s")){Ta(qb,db,b,1,10,!0);break}case 1:Db.proc(b,a);break;case 2:Ta(qb,db,b-Fb+1,Fb,10*Fb,0>yb);break;case 3:Ta(qb,db,b-Jb+1,Jb,10*Jb,0>Gb)}}}).addClass("table"),tb=$("<tr />"),wb=$("<tr />"),zb=$('<tr class="click" ><th class="click" colspan="15">...</th></tr>'),vb=$('<table class="sumtable" />').click(function(a){Sa(qb,db,a)}).addClass("table"),xb=$('<div class="statc" />'),Kb=!0,pb=function(){function a(a){Eb=1;for(var e=0;e<fb.length;e++)Eb=
Math.max(Eb,fb[e][0].length-1);tb.empty().append(n,"<th>"+STATS_TIME+"</th><th>"+(0<yb?"ao":"mo")+Fb+"</th><th>"+(0<Gb?"ao":"mo")+Jb+"</th>");if(1<Eb)for(e=0;e<Eb;e++)tb.append("<th>P."+(e+1)+"</th>");x=[];Oa=fb.length-1;kernel.getProp("statinv")?sb.empty().append(tb,zb,wb):sb.empty().append(wb,tb,zb);c();0>Oa?zb.unbind("click").hide():zb.unbind("click").click(pb.showAll).show();n.unbind("click").click(b);Na(Eb);a&&Wa(["table"]);rb.scrollTop(kernel.getProp("statinv")?sb[0].scrollHeight:0)}function b(){var b=
prompt("Filter Pattern: (23*, 15.1*, comments, scrambles, date)");null!=b&&b!=w&&(w=b?(b+"").replace(/[.\\+*?\[\^\]$(){}=!<>|:\-]/g,"\\$&").replace(/\\\*/g,".*").replace(/\\\?/g,"."):".*",f=new RegExp(w,"g"),a(!1))}function c(){for(var a=x.length+50,b=[];0<=Oa&&x.length<a;){var c=fb[Oa];if(f.exec(h(c[0],!0)+Ra(c[0]))||f.exec(c[1])||f.exec(c[2])||f.exec(mathlib.time2str(c[3])))b.push(r(Oa,Eb)),x.push(Oa);Oa--}kernel.getProp("statinv")?zb.after(b.reverse().join("")):zb.before(b.join(""))}function e(a){c();
0>Oa&&zb.unbind("click").hide()}var f=/.*/,w=".*",n=$('<th class="click">').html("&#8981;"),x=[],Oa=0;return{appendRow:function(b){var c=r(b,Eb);kernel.getProp("statinv")?(wb.before(c),rb.scrollTop(sb[0].scrollHeight)):(tb.after(c),rb.scrollTop(0));x.unshift(b);Na(Eb);50<x.length&&pb.hideAll();".*"!=w&&(w=".*",f=/.*/,a(!1))},showAll:e,hideAll:function(){for(;50<x.length;)(kernel.getProp("statinv")?zb.next():zb.prev()).remove(),Oa=x.pop();0<Oa&&zb.unbind("click").click(e).show()},updateTable:a,updateFrom:function(a){for(var b=
a.attr("data"),c=Math.min(b+Math.max(Fb,Jb),fb.length);void 0!==b&&b<c&&0<=b;)r(~~b,Eb,a),a=kernel.getProp("statinv")?a.next():a.prev(),b=a.attr("data");Na(Eb)}}}(),Db=function(){function a(){0>Ua||Ua>=fb.length||(kernel.getProp("statsrc","t").startsWith("mcomment")?(c(Ua,function(){fb[Ua][2]=Sa.val();Lb[Ua]=null}),Hb.save(Ua),pb.updateFrom(Ya),Wa(["comment",Ua])):(fb[Ua][2]=Sa.val(),Lb[Ua]=null,Hb.save(Ua),r(Ua,Eb,Ya),y()))}function b(a){a=$(a.target);var b=a.attr("data");b&&("p"==b?(a={" OK ":0,
" +2 ":2E3," DNF ":-1}[a.html()],n(a,Ua,Ya)):"d"==b?e(Ua)&&(Ua=void 0,f()):"s"==b?(a=fb[Ua],$.clipboardCopy(a[1])&&logohint.push("scramble copied")):"c"==b?(a=fb[Ua],$.clipboardCopy(h(a[0],!0)+Ra(a[0])+(a[2]?"["+a[2]+"]":"")+"   "+a[1]+"   @"+mathlib.time2str(a[3]))&&logohint.push("solve copied")):"r"==b&&(a=fb[Ua],a[4]&&(b="string"==typeof a[4][1]&&a[4][1]||tools.getCurPuzzle()||"333",replay.popupReplay(a[1],a[4][0],b))))}function f(){kernel.isDialogShown("cfm")&&kernel.hideDialog();cb&&(Oa.css("font-size",
"0.8em"),cb.empty().append(Oa),Ua=fb.length-1,Ya=kernel.getProp("statinv")?wb.prev():tb.next(),w())}function w(){if(fb[Ua]){var c=fb[Ua],e="";c[4]&&(e=$('<span class="click" data="r">'+STATS_REVIEW+"</span>"),e=$("<tr>").append($("<td>").append(e),$("<td>").append(ab)));Oa.empty().append(Na,"<br>",Ra(c[0]),"<br>").append('<span class="click" data="c"> &#128203; </span>|<span class="click" data="p"> OK </span>|<span class="click" data="p"> +2 </span>|<span class="click" data="p"> DNF </span>| ',z).append("<br>",
$('<table style="display:inline-block;">').append($("<tr>").append("<td>"+STATS_COMMENT+"</td>",$("<td>").append(Sa)),$("<tr>").append('<td><span class="click" data="s">'+SCRAMBLE_SCRAMBLE+"</span></td>",$("<td>").append(Va)),$("<tr>").append("<td>"+STATS_DATE+"</td>",$("<td>").append(Qa)),e)).unbind("click").click(b);Na.html(h(c[0],!0));Va.val(c[1]);Qa.val(mathlib.time2str(c[3]));Sa.val(c[2]).unbind("change").change(a);ab.val(c[4]?JSON.stringify(c[4]):"")}else Oa.empty()}function n(a,b,e){fb[b][0][0]!=
a&&(c(b,function(){fb[b][0][0]=a;Lb[b]=null}),Hb.save(b),pb.updateFrom(e),Wa(["penalty",b]),b==Ua&&w(),kernel.pushSignal("timepnt",fb[b]))}function x(a,b){cb=a;void 0!=a&&f()}var Oa=$('<div style="text-align:center; font-family: initial;">'),Na=$('<span style="font-size:2.5em;"/>'),Sa=$('<input type="text">').css("width","8em"),z=$('<input type="button" data="d">').val("X"),Va=$('<input type="text" readonly>').css("width","8em"),Qa=$('<input type="text" readonly>').css("width","8em"),ab=$('<input type="text" readonly>').css("width",
"8em"),Ua=0,Ya,cb;$(function(){tools.regTool("cfm",TOOLS_CFMTIME,x);kernel.regListener("cfm","session",f)});return{proc:function(a,b){Ua=a;Ya=b.parent();w();Oa.css("font-size","1.2em");var c=[Oa,f,void 0,f,[STATS_SSSTAT,function(){f();Ta(qb,db,a,1,10,!0)}]],e=fb[a];e&&e[4]&&c.push([TOOLS_RECONS,function(){f();kernel.pushSignal("reqrec",[fb[a],a])}]);kernel.showDialog(c,"cfm","Solves No."+(a+1))},delLast:function(){0!=fb.length&&e(fb.length-1)&&(Ua=void 0,f())},setCfm:function(a){0!=fb.length&&n(a,
fb.length-1,kernel.getProp("statinv")?wb.prev():tb.next())}}}(),Eb=0,Bb=STATS_STRING.split("|");for(Pa=0;13>Pa;Pa++)Bb[Pa]=Bb[Pa]||"";var Ib=n.bind(void 0,0),Ab=[-3,5,12,50,100,1E3],qb=new TimeStat(Ab,0,Ib),ub=new TimeStat([],0,Ib),Hb=function(){function a(a){Xa=a;kernel.setProp("session",Xa);$a[Xa]=$a[Xa]||{name:Xa,opt:{}};kernel.setSProps($a[Xa].opt||{});b();return Na()}function b(){for(var a=1;a<=eb;a++){"object"!=typeof $a[a]&&($a[a]={});var b={name:a,opt:{}},e;for(e in b)void 0===$a[a][e]&&($a[a][e]=
b[e]);$a[a].scr&&($a[a].opt.scrType=$a[a].scr,delete $a[a].scr);$a[a].phases&&($a[a].opt.phases=$a[a].phases,delete $a[a].phases);$a[a].rank=$a[a].rank||a}c();jb.empty();for(a=0;a<db.length;a++)jb.append($("<option />").val(db[a]).html($a[db[a]].name));jb.append(kb,mb);jb.val(Xa)}function c(){db=[];for(var a=1;a<=eb;a++)db.push(a);db.sort(function(a,b){return $a[a].rank-$a[b].rank});for(a=0;a<db.length;a++)$a[db[a]].rank=a+1;kernel.setProp("sessionData",JSON.stringify($a))}function e(a){return $a[a].rank+
"-"+$a[a].name}function f(a,c){$.isNumeric(a)||(a=($a[Xa]||{}).rank||eb);Xa=++eb;var e=new Date;e=e.getMonth()+1+"."+e.getDate()+" "+Ob;kernel.setProp("sessionN",eb);var f=$a[db[a-1]]||{};$a[Xa]=void 0===c||c?{name:f.name||e,opt:JSON.parse(JSON.stringify(f.opt||{})),rank:a+.5}:{name:e,opt:kernel.getSProps(),rank:a+.5};b()}function w(b,c){f(b,c);fb=[];Lb=[];ub.reset(fb.length);qb.reset(fb.length);Sa();a(Xa);kernel.blur();kernel.getProp("imrename")&&Oa(Xa,!0)}function n(b){b!=eb&&($a[b]=$a[eb]);delete $a[eb];
storage.del(b,eb);eb--;kernel.setProp("sessionN",eb);kernel.setProp("sessionData",JSON.stringify($a));0==eb?w():Xa==b?kernel.setProp("session",1):Xa==eb+1&&a(b)}function h(a){if(0!=("stat"in $a[a]?$a[a].stat[0]:1)&&!confirm(STATS_CFM_DELSS.replace("%s",e(a))))return!1;n(a);return!0}function r(){confirm(STATS_CFM_RESET)&&(fb=[],Lb=[],qb.reset(),ub.reset(),Sa(),pb.updateTable(!0),kernel.blur())}function Oa(a,b){void 0===a&&(a=Xa);var c=prompt(b?STATS_SESSION_NAMEC:STATS_SESSION_NAME,$a[a].name);null!=
c&&(c=$("<div/>").text(c).html(),$a[a].name=c,kernel.setProp("sessionData",JSON.stringify($a)))}function y(a,b){Kb=!1;fb=b;Lb=[];qb.reset(fb.length);ub.reset(fb.length);pb.updateTable(!0);$a[a]=$a[a]||{name:a,opt:{}};$a[a].stat=[fb.length].concat(ub.getAllStats());$a[a].date=[(fb[0]||[])[3],(fb[fb.length-1]||[])[3]];kernel.setProp("sessionData",JSON.stringify($a));kernel.isDialogShown("ssmgr")&&cb();kernel.pushSignal("session","load")}function Na(){return storage.get(Xa).then(y.bind(void 0,Xa))}function Sa(a){$a[Xa].stat=
[fb.length].concat(ub.getAllStats());$a[Xa].date=[(fb[0]||[])[3],(fb[fb.length-1]||[])[3]];kernel.setProp("sessionData",JSON.stringify($a));return storage.set(Xa,fb,a)}function z(c){c=$(c.target);if(c.is("td, th, select")&&(c.hasClass("click")||c.is("select"))){for(var e=c.parent();!e.is("tr");)e=e.parent();var f=e.children();5>f.length&&(f=e.prev().children());e=~~f.first().html().replace(/-.*$/,"");f=db[e-1];switch(c.attr("data")||c.val()){case "r":Oa(f);break;case "u":1!=e&&($a[f].rank--,$a[db[e-
2]].rank++,kernel.setProp("sessionData",JSON.stringify($a)));break;case "d":e!=db.length&&($a[f].rank++,$a[db[e]].rank--,kernel.setProp("sessionData",JSON.stringify($a)));break;case "s":a(f);break;case "+":w(e);break;case "x":h(f);break;case "m":Ra(f);break;case "o":Qa();break;case "p":Va();break;case "e":ab(c.parent());return;case "g":Za=!1;break;case "gn":Za="name";break;case "gs":Za="scr";break;case "v":storage.get(f).then(function(a){Ya(new TimeStat([],a.length,function(a,b){return-1==a[b][0][0]?
-1:~~((a[b][0][0]+a[b][0][1])/Rb)*Rb}.bind(void 0,a)),function(a,b){return a[b]}.bind(void 0,a),0,a.length)});break;default:return}kernel.blur();b();cb()}}function Va(){var a=prompt(STATS_PROMPTSPL.replace("%s",e(Xa)),~~(fb.length/2));if(null!=a)if(a=~~a,1>a||a>fb.length-1)alert(STATS_ALERTSPL);else{var b=Xa,c=fb.slice(-a);f();storage.set(Xa,c).then(function(){Xa=b;fb=fb.slice(0,-a);Lb=[];qb.reset();ub.reset();Sa();y(Xa,fb)})}}function Ra(b){if(Xa!=b&&confirm(STATS_ALERTMG.replace("%f",e(Xa)).replace("%t",
e(b)))){var c=Xa;storage.get(b).then(function(a){Array.prototype.push.apply(a,fb);return storage.set(b,a)}).then(function(e){delete $a[b].stat;$a[Xa].date=[(e[0]||[])[3],(e[e.length-1]||[])[3]];kernel.setProp("sessionData",JSON.stringify($a));a(b);n(c)})}}function Qa(){for(var a=lb(fb),b=0,c=0;c<fb.length;c++)a[c]!=fb[c]&&b++;0==b?logohint.push("Already sorted"):confirm(STATS_SSMGR_SORTCFM.replace("%d",b))&&(fb=a,Lb=[],qb.reset(),ub.reset(),Sa(),y(Xa,fb))}function Ta(a){var b=db[a-1],c=$a[b],e=["?/?",
"?"];if("stat"in c){var f=c.stat;e[0]=f[0]-f[1]+"/"+f[0];e[1]=x(f[2])}f=STATS_SSMGR_OPS.split("|");f='<select><option value="">...</option><option value="r">'+f[0]+'</option><option value="+">'+f[1]+'</option><option value="'+(b==Xa?'p">'+f[2]:'m">'+f[3])+'</option><option value="x">'+f[4]+"</option>"+(b==Xa?'<option value="o">'+f[5]+"</option>":"")+'<option value="v">'+STATS_EXPORTCSV+"</option></select>";var w=1==a?"<td></td>":'<td class="click" data="u">&#8593;</td>',n=a==db.length?"<td></td>":
'<td class="click" data="d">&#8595;</td>',h="<td>"+scramble.getTypeName(c.opt.scrType||"333")+"</td>",r="<td>"+e[0]+"</td>";e="<td>"+e[1]+"</td>";var Oa=mathlib.time2str(($a[b].date||[])[1],"%Y-%M-%D");return'<tr class="'+(b==Xa?"selected mhide":"mhide")+'"><td class="click" data="s">'+a+"-"+c.name+(b==Xa?"*":"")+"</td>"+r+e+"<td>"+Oa+"</td>"+h+"<td>"+(c.opt.phases||1)+"</td>"+w+n+'<td class="seltd">'+f+'</td></tr><tr class="'+(b==Xa?"selected ":"")+'mshow t"><td class="click" data="s" rowspan=2>'+
a+"-"+c.name+(b==Xa?"*":"")+"</td>"+r+h+w+n+'</tr><tr class="'+(b==Xa?"selected ":"")+'mshow b">'+e+"<td>"+Oa+"&nbsp;"+(c.opt.phases||1)+'P.</td><td class="seltd" colspan=2>'+f+"</td></tr>"}function Ua(a){for(var b=!1,c=[],e=0;e<a.length;e++){var f=db[a[e]];b=b||Xa==f;c.push($a[f].name+"("+scramble.getTypeName($a[f].opt.scrType||"333")+")")}c=c.join(", ");45<c.length&&(c=c.slice(0,42)+"...");return"<tr"+(b?' class="selected"':"")+'><td class="click" data="e" colspan=9 style="text-align:left;">'+(b?
"*":"")+"[+] "+a.length+" session(s): "+c+"</td></tr>"}function ab(a){for(var b=a.next();b.is(":hidden");b=b.next())b.css("display","");a.remove()}function cb(){c();bb.empty().append('<tr class="mhide"><th class="click" data='+("name"==Za?'"g">[+]':'"gn">[-]')+" "+STATS_SSMGR_NAME+"</th><th>"+STATS_SOLVE+"</th><th>"+STATS_AVG+"</th><th>"+STATS_DATE+'</th><th class="click" data='+("scr"==Za?'"g">[+]':'"gs">[-]')+" "+SCRAMBLE_SCRAMBLE+'</th><th>P.</th><th colspan=3>OP</th></tr><tr class="mshow t"><th rowspan=2 class="click" data='+
("name"==Za?'"g">[+]':'"gn">[-]')+" "+STATS_SSMGR_NAME+"</th><th>"+STATS_SOLVE+'</th><th class="click" data='+("scr"==Za?'"g">[+]':'"gs">[-]')+" "+SCRAMBLE_SCRAMBLE+'</th><th colspan=2 rowspan=2>OP</th></tr><tr class="mshow b"><th>'+STATS_AVG+"</th><th>"+STATS_DATE+" & P.</th></tr>");for(var a=[],b=NaN,e=0;e<db.length;e++){var f=$a[db[e]];Za&&f[Za]==b?a[a.length-1].push(e):(a.push([e]),b=f[Za])}for(e=0;e<a.length;e++)if(1==a[e].length)bb.append(Ta(a[e][0]+1));else for(bb.append(Ua(a[e])),b=0;b<a[e].length;b++)bb.append($(Ta(a[e][b]+
1)).hide());bb.unbind("click").click(z).unbind("change").change(z)}function Pa(){cb();kernel.showDialog([hb,0,void 0,0,[STATS_SSMGR_ORDER,function(){if(!confirm(STATS_SSMGR_ODCFM))return!1;for(var a=[],e=1;e<=eb;e++)a.push(e);a.sort(function(a,b){var c=scramble.getTypeIdx($a[a].opt.scrType||"333"),e=scramble.getTypeIdx($a[b].opt.scrType||"333");return c==e?$a[a].rank-$a[b].rank:c-e});for(e=0;e<a.length;e++)$a[a[e]].rank=e+1;c();b();cb();return!1}]],"ssmgr",STATS_SSMGR_TITLE)}function Wa(c,e){if("property"==
c)"set"==e[2]||"session"==e[2]||e[0].startsWith("session")||($a[Xa].opt=kernel.getSProps(),kernel.setProp("sessionData",JSON.stringify($a))),"session"==e[0]&&~~e[1]!=Xa?a(e[1]):"sessionData"==e[0]?($a=JSON.parse(e[1]),"set"!=e[2]&&b()):"sessionN"==e[0]?eb=e[1]:"scrType"==e[0]?(Ob=e[1],"modify"==e[2]&&kernel.getProp("scr2ss")&&w(void 0,!1)):"statclr"==e[0]&&(e[1]?gb.val("X").unbind("click").click(r):gb.val("+").unbind("click").click(w));else if("ctrl"==c&&"stats"==e[0]){var f=$a[Xa].rank;"+"==e[1]&&
f<eb?kernel.setProp("session",db[f]):"-"==e[1]&&1<f&&kernel.setProp("session",db[f-2])}}var eb=15,Xa=-1,hb=$("<div />"),bb=$("<table />").appendTo(hb).addClass("table ssmgr"),gb=$('<input type="button">').val("+"),$a,db,kb=$("<option />").val("new").html("New.."),mb=$("<option />").val("del").html("Delete.."),jb=$("<select />").change(function(){kernel.blur();"new"==jb.val()?w(eb,!1):"del"==jb.val()?h(Xa)||jb.val(Xa):a(~~jb.val())}),Za=!1;$(function(){kernel.regListener("ssmgr","property",Wa);kernel.regListener("ssmgr",
"ctrl",Wa,/^stats$/);kernel.regProp("stats","sessionN",-6,"Number of Sessions",[15]);kernel.regProp("stats","sessionData",-6,"Session Data",["{}"]);eb=kernel.getProp("sessionN");$a=JSON.parse(kernel.getProp("sessionData"));b();kernel.setProp("sessionData",JSON.stringify($a));kernel.regProp("stats","session",-6,"Current Session Index",[1])});return{getSelect:function(){return jb},showMgrTable:Pa,importSessions:function(c){if(c&&0!=c.length){for(var e=Xa,f=0;f<c.length;f++){var w=c[f],n=kernel.getSProps(),
h;for(h in w.opt)n[h]=w.opt[h];Xa=++eb;$a[Xa]={name:w.name||Xa,opt:n,rank:eb};kernel.setProp("sessionN",eb);fb=w.times;Lb=[];qb.reset(fb.length);ub.reset(fb.length);Sa()}b();a(e);Pa();logohint.push("Import %d session(s)".replace("%d",c.length));return c.length}},getButton:function(){return gb},rank2idx:function(a){return db[a-1]},load:Na,save:Sa}}(),Mb="",yb,Gb,Fb,Jb,Ob="333",Rb=1;$(function(){kernel.regListener("stats","time",w);kernel.regListener("stats","scramble",w);kernel.regListener("stats",
"scrambleX",w);kernel.regListener("stats","property",w,/^(:?useMilli|timeFormat|stat(:?sum|thres|[12][tl]|alu?|inv|Hide|src|ssum)|session(:?Data)?|scrType|phases|trim|view|wndStat|sr_.*)$/);kernel.regListener("stats","ctrl",w,/^stats$/);kernel.regListener("stats","ashow",w);kernel.regListener("stats","button",w);kernel.regListener("stats","giirecons",w);kernel.regProp("stats","trim",1,PROPERTY_TRIM,["p5","1 p1 p5 p10 p20 m".split(" "),["1","1%","5%","10%","20%",PROPERTY_TRIM_MED]],1);kernel.regProp("stats",
"statsum",0,PROPERTY_SUMMARY,[!0],1);kernel.regProp("stats","statthres",0,PROPERTY_STATTHRES,[!1],1);kernel.regProp("stats","printScr",0,PROPERTY_PRINTSCR,[!0],1);kernel.regProp("stats","printDate",0,PROPERTY_PRINTDATE,[!1],1);kernel.regProp("stats","imrename",0,PROPERTY_IMRENAME,[!1],1);kernel.regProp("stats","scr2ss",0,PROPERTY_SCR2SS,[!1]);kernel.regProp("stats","statssum",0,PROPERTY_STATSSUM,[!1],1);kernel.regProp("stats","statinv",0,PROPERTY_STATINV,[!1],1);kernel.regProp("stats","statclr",0,
STATS_STATCLR,[!0],1);kernel.regProp("stats","absidx",0,STATS_ABSIDX,[!1],1);mb.append(ob.append($('<span class="click" />').html(STATS_SESSION).click(Hb.showMgrTable),Hb.getSelect(),Hb.getButton()),xb.append(vb),$('<div class="stattl">').append(rb.append(sb)));$(window).bind("resize",f);sb.append(tb,wb);kernel.addWindow("stats",BUTTON_TIME_LIST,mb,!0,!0,4);rb.bind("scroll",function(){var a=rb[0];a.scrollHeight-a.scrollTop<a.clientHeight+5&&!kernel.getProp("statinv")&&zb.click()});var a=STATS_TYPELEN.split("|");
kernel.regProp("stats","stat1t",1,a[0].replace("%d",1),[0,[0,1],a.slice(2)],1);kernel.regProp("stats","stat1l",2,a[1].replace("%d",1),[5,3,1E3],1);kernel.regProp("stats","stat2t",1,a[0].replace("%d",2),[0,[0,1],a.slice(2)],1);kernel.regProp("stats","stat2l",2,a[1].replace("%d",2),[12,3,1E3],1);kernel.regProp("stats","rsfor1s",0,STATS_RSFORSS,[!1]);kernel.regProp("stats","statalu",5,PROPERTY_STATALU,["mo3 ao5 ao12 ao100"],1);kernel.regProp("stats","statal",1,PROPERTY_STATAL,["mo3 ao5 ao12 ao100",["mo3 ao5 ao12 ao100",
"mo3 ao5 ao12 ao25 ao50 ao100","mo3 ao5 ao12 ao25 ao50 ao100 ao200 ao500 ao1000 ao2000 ao5000 ao10000","u"],["mo3 ao5 ao12 ao100","mo3 ao5 ao12 ao25 ao50 ao100","mo3 ao5 ao12 ao25 ao50 ao100 ao200 ao500 ao1000 ao2000 ao5000 ao10000","Custom"]],1);kernel.regProp("stats","delmul",0,PROPERTY_DELMUL,[!0]);kernel.regProp("ui","statHide",-1,"Hide Session Title",[!1]);kernel.setProp("sr_statalu",kernel.getProp("sr_statal"))});var Pb={},Lb=[],Tb={},Nb={};for(Pa=0;5>Pa;Pa++)Oa("comment"+Pa,$a.bind(null,Pa),
[STATS_COMMENT+(Pa+1),function(a){return""+(0<=a?(.001*a).toFixed(kernel.getProp("useMilli")?3:2).replace(/\.?0+$/,""):"N/A")},function(a){return""+(0<=a?(.001*a).toFixed(kernel.getProp("useMilli")?3:2):"DNF")}]);Oa("commentmbld",function(a){if(0>a[0][0])return-1;var b=[];(a[2]||"").replace(/[0-9]+/g,function(a){b.push(parseInt(a))});return 2>b.length||2>b[0]||b[0]>b[1]||2*b[0]<b[1]||255<=b[1]?-1:1024*(255-(2*b[0]-b[1]))+~~(a[0][0]+a[0][1])/Math.pow(2,26)+b[0]/Math.pow(2,34)},["MBLD",function(a){if(0>
a)return"DNF";if(261121<a)return"N/A";var b=a*Math.pow(2,34)&255;return""+b+"/"+(2*b-(255-Math.floor(a)/1024))+" "+kernel.pretty(~~(a%1*Math.pow(2,26))).split(".")[0]},function(a){if(0>a)return"DNF";var b=255-Math.floor(a)/1024;return""+(0<=a?b.toFixed(kernel.getProp("useMilli")?3:2):"DNF")}]);return{importSessions:Hb.importSessions,getReviewUrl:function(a){return"https://alg.cubing.net/?alg="+encodeURIComponent((a[4][0]||"").replace(/@(\d+)/g,"/*$1*/").replace(/-/g,"&#45;"))+"&setup="+encodeURIComponent(a[1]||
"")},pretty:h,getStat12:function(){return[yb,Gb,Fb,Jb]},getTimesStatsList:function(){return ub},getTimesStatsTable:function(){return qb},getSessionManager:function(){return Hb},getSortedTimesByDate:lb,trim:bb,timesAt:db,timeAt:Ib,infoClick:Sa,regUtil:function(a,b){Pb[a]=b},regExtraInfo:Oa,getExtraInfo:ab}},[kernel.pretty,kernel.round,kernel.pround]);var stattool=execMain(function(b,Pa,x){function z(){if(h){var c=stats.getTimesStatsTable(),z=c.avgSizes,r=c.getAllStats(),Na=r[0],Qa=r[1],y=0;for(r=0;r<c.timesLen;r++)y+=stats.timesAt(r)[0][1];r=c.prettyFunc||[b,x];var Pa=[];Pa.push('<span class="click" data="tt">'+a[4].replace("%d",c.timesLen-Na+"/"+c.timesLen)+", "+a[9].replace("%v",r[1](Qa))+"</span>\n");Pa.push("<span>"+a[12].replace("%d",b(y))+"</span>\n");Pa.push(a[0]+': <span class="click" data="bs">'+r[0](c.bestTime)+"</span>");Pa.push(" | "+
a[2]+': <span class="click" data="ws">'+r[0](c.worstTime)+"</span>\n");Na=!1;Qa='<table class="table"><tr><td></td><td>'+a[1]+"</td><td>"+a[0]+"</td></tr>";for(y=0;y<z.length;y++){var Ua=Math.abs(z[y]);c.timesLen>=Ua&&(Na||(Na=!0,Pa.push(Qa)),Pa.push("<tr><td>"+a[7-(z[y]>>>31)].replace("%mk",Ua)),Pa.push('<td><span class="click" data="c'+"am"[z[y]>>>31]+y+'">'+r[1](c.lastAvg[y][0])+" (="+stats.trim(c.lastAvg[y][1],2)+")</span></td>"),Pa.push('<td><span class="click" data="b'+"am"[z[y]>>>31]+y+'">'+
r[1](c.bestAvg(y,0))+" (="+stats.trim(c.bestAvg(y,1),2)+")</span></td></tr>"))}Na&&Pa.push("</table>");Pa=Pa.join("");e.html(Pa.replace(/\n/g,"<br>"))}}function c(a,b){(h=void 0!=a)&&!/^scr/.exec(b)&&(a.empty().append(e.unbind("click").click(function(a){stats.infoClick(stats.getTimesStatsTable(),stats.timesAt,a)})),z())}var e=$("<div />").css("text-align","center").css("font-size","0.7em"),a=STATS_STRING.split("|");for(Pa=0;13>Pa;Pa++)a[Pa]=a[Pa]||"";var h=!1;$(function(){"undefined"!=typeof tools&&
tools.regTool("stats",TOOLS_STATS,c);stats.regUtil("stattool",z)});return{update:z}},[kernel.pretty,kernel.round,kernel.pround]);var trend=execMain(function(b){function Pa(){if(Ra&&e[0].getContext){var c=stats.getStat12(),h=c[0],z=c[1],Sa=c[2],n=c[3];a=e[0].getContext("2d");c=kernel.getProp("imgSize")/10;Za=50;e.width(9.6*c+"em");e.height(6*c+"em");e.attr("width",8*Za+1);e.attr("height",5*Za+5);r=5*Za;Za*=8;var Ua=stats.getTimesStatsTable(),Pa=Ua.getMinMaxInt();if(Pa){var cb=Ua.timesLen;c=Ua.getBestDiff((Pa[0]-Pa[1])*Wa);var jb=Math.ceil(Pa[0]/c)*c;Pa=~~(Pa[1]/c)*c;var bb=jb-Pa,gb=[0,1,1,0,0],eb=[0,0,1,1,0];a.fillStyle="#fff";
a.beginPath();a.moveTo(gb[0]*(Za-35)+35,(1-eb[0])*(r-25)+25);for(var Va=1;Va<gb.length;Va++)a.lineTo(gb[Va]*(Za-35)+35,(1-eb[Va])*(r-25)+25);a.fill();a.closePath();a.lineWidth=2;if(1<cb){eb=[];Va=[];for(gb=0;gb<cb;gb++){var w=Ua.timeAt(gb);-1!=w&&(eb.push(gb/(cb-1)),Va.push(Math.max(0,Math.min(1,(w-Pa)/bb))))}x(eb,Va,"#888")}if(cb>Sa){eb=[];Va=[];w=Ua.runAvgMean(0,cb,Sa,0<h?void 0:0);for(gb=0;gb<w.length;gb++)-1!=w[gb][0]&&(eb.push((gb+Sa-1)/(cb-1)),Va.push(Math.max(0,Math.min(1,(w[gb][0]-Pa)/bb))));
x(eb,Va,"#f00")}if(cb>n){eb=[];Va=[];Ua=Ua.runAvgMean(0,cb,n,0<z?void 0:0);for(gb=0;gb<Ua.length;gb++)-1!=Ua[gb][0]&&(eb.push((gb+n-1)/(cb-1)),Va.push(Math.max(0,Math.min(1,(Ua[gb][0]-Pa)/bb))));x(eb,Va,"#00f")}a.clearRect(0,0,Za,25);a.clearRect(0,0,35,r);a.clearRect(0,r,Za+1,r+5);a.lineWidth=2;a.font="12pt Arial";a.fillStyle=kernel.getProp("col-font");a.fillText("time",50,13);a.strokeStyle="#888";a.beginPath();a.moveTo(90,7);a.lineTo(130,7);a.stroke();a.fillText((0<h?"ao":"mo")+Sa,160,13);a.strokeStyle=
"#f00";a.beginPath();a.moveTo(200,7);a.lineTo(240,7);a.stroke();a.fillText((0<z?"ao":"mo")+n,270,13);a.strokeStyle="#00f";a.beginPath();a.moveTo(310,7);a.lineTo(350,7);a.stroke();a.fillStyle=kernel.getProp("col-font");a.strokeStyle="#ccc";a.lineWidth=1;a.textAlign="right";h=1E3<=c?/[^\.]+(?=\.)/:/[^\.]+\.[\d]/;for(gb=Pa;gb<=jb;gb+=c)z=b(gb).match(h)[0],Sa=(jb-gb)/bb,Sa=1-(1-Sa-y)/Wa,0>Sa||1<Sa||(a.fillText(z,30,Sa*(r-25)+30),x([Na,Na+Qa],[(gb-Pa)/bb,(gb-Pa)/bb],"#ccc"));x([Na,Na+Qa,Na+Qa,Na,Na],[y,
y,y+Wa,y+Wa,y],"#000")}}}function x(b,c,e){a.strokeStyle=e;a.beginPath();for(e=0;e<b.length;e++)b[e]=(b[e]-Na)/Qa,c[e]=(c[e]-y)/Wa;a.moveTo(b[0]*(Za-35)+35,(1-c[0])*(r-25)+25);for(e=1;e<b.length;e++)a.lineTo(b[e]*(Za-35)+35,(1-c[e])*(r-25)+25);a.stroke();a.closePath()}function z(a){var b=$(a.target);b.hasClass("click")&&(a=b.attr("data"),"x"==a?(Ua="y",b.attr("data","y"),b.html(" ")):"y"==a?(Ua="x",b.attr("data","x"),b.html(" ")):(b={p:1,m:-1}[a]||0,a={l:Math.sqrt(.5),s:Math.sqrt(2)}[a]||1,"x"==Ua?
(Na+=b*Qa*.25+Qa*(1-a),Qa*=a,Qa=Math.min(Math.max(Qa,.1),1),Na=Math.min(Math.max(Na,0),1-Qa)):(y+=b*Wa*.25+Wa*(1-a)/2,Wa*=a,Wa=Math.min(Math.max(Wa,.1),1),y=Math.min(Math.max(y,0),1-Wa)),Pa()))}function c(a,b){(Ra=void 0!=a)&&!/^scr/.exec(b)&&(a.empty().append(h.empty().append(e,"<br>",['<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$"," ").replace("%","x"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$",
"&lt;").replace("%","p"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$","&gt;").replace("%","m"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$"," ").replace("%","l"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$"," ").replace("%","s")].join("")).unbind("click").click(z)),Pa())}var e=
$('<canvas style="margin-bottom:-0.4em"/>'),a,h=$('<div style="text-align:center">'),Ra=!1,Za,r,Na=0,Qa=1,y=0,Wa=1,Ua="x";$(function(){"undefined"!=typeof tools&&(kernel.regListener("trend","property",function(a,b){"disPrec"==b[0]&&Pa()},/^disPrec|col-font$/),e[0].getContext&&tools.regTool("trend",TOOLS_TREND,c));stats.regUtil("trend",Pa)});return{update:Pa}},[kernel.pretty]);var distribution=execMain(function(b){function Pa(){if(c){z.empty();var e=stats.getTimesStatsTable(),a=e.getMinMaxInt();if(a){var h=e.timesLen,x=a[0],Pa=a[1];a=a[2];x=~~(x/a);Pa=~~(Pa/a);for(var r={},Na={},Qa=0,y=Na[x+1]=0;y<h;y++){var Wa=e.timeAt(y);-1!=Wa?(Wa=~~(Wa/a),r[Wa]=(r[Wa]||0)+1,Qa=Math.max(r[Wa],Qa),Na[Wa]=y+1):Na[x+1]=y+1}for(y=x;y>Pa;y--)Na[y]=Math.max(Na[y+1],Na[y]||0);e=[];Wa=0;var Ua=1E3<=a?/[^\.]+(?=\.)/:/[^\.]+\.[\d]/,Xa=b(x*a).match(Ua)[0].length;for(y=Pa;y<=x;y++){Pa=b(y*a).match(Ua)[0];
var Ta=b((y+1)*a).match(Ua)[0];r[y]=r[y]||0;Wa+=r[y];Pa=mathlib.valuedArray(Xa-Pa.length,"&nbsp;").join("")+Pa;Ta=mathlib.valuedArray(Xa-Ta.length,"&nbsp;").join("")+Ta;e.push("<tr><td>"+Pa+'+</td><td><span class="cntbar" style="width: '+r[y]/Qa*5+'em;">'+r[y]+"</span></td><td>&nbsp;&lt;"+Ta+'</td><td><span class="cntbar" style="width: '+Wa/h*5+'em; white-space: nowrap;">'+(h-Na[y+1])+"/"+Wa+"</span></td></tr>")}z.html('<table style="border:none;">'+e.join("")+"</table>")}}}function x(b,a){(c=void 0!=
b)&&!/^scr/.exec(a)&&(b.empty().append(z),Pa())}var z=$("<div />"),c=!1;$(function(){"undefined"!=typeof tools&&(kernel.regListener("distribution","property",function(b,a){"disPrec"==a[0]&&Pa()},/^disPrec$/),kernel.regProp("tools","disPrec",1,STATS_PREC,["a",["a",0,1,2,3,4,5,6,7,8,9],STATS_PREC_STR.split("|")],1),tools.regTool("distribution",TOOLS_DISTRIBUTION,x));stats.regUtil("distribution",Pa)});return{update:Pa}},[kernel.pretty]);var crossSessionStats=execMain(function(b,Pa,x){function z(a){return-1==Xa[a][0][0]?-1:~~((Xa[a][0][0]+Xa[a][0][1])/Ta)*Ta}function c(a){return Xa[a]}function e(){Xa=[];Ta=kernel.getProp("useMilli")?1:10;for(var a=Promise.resolve(),c=~~kernel.getProp("sessionN"),e=JSON.parse(kernel.getProp("sessionData")),n=Na.val(),h=y.val(),Sa=-1==Qa.val()?-1:~~(+new Date/1E3)-86400*Qa.val(),z=0;z<c;z++){var Va=stats.getSessionManager().rank2idx(z+1);if("*"==n||e[Va].name==n)if("*"==h||(e[Va].opt.scrType||"333")==
h)a=a.then(function(a){return new Promise(function(b){storage.get(a).then(function(a){for(var c=0;c<a.length;c++)(a[c][3]||0)<Sa||Xa.push(a[c]);b()})})}.bind(void 0,Va))}a.then(function(){Xa=stats.getSortedTimesByDate(Xa);Ua.reset(Xa.length);var a=Ua.getAllStats(),c=a[0],e=a[1],n=0;for(a=0;a<Xa.length;a++)n+=Xa[a][0][1];a=[];a.push('<span class="click" data="tt">'+Ya[4].replace("%d",Ua.timesLen-c+"/"+Ua.timesLen)+", "+Ya[9].replace("%v",x(e))+"</span>\n");a.push("<span>"+Ya[12].replace("%d",b(n))+
"</span>\n");a.push(Ya[0]+': <span class="click" data="bs">'+b(Ua.bestTime)+"</span>");a.push(" | "+Ya[2]+': <span class="click" data="ws">'+b(Ua.worstTime)+"</span>\n");c=!1;e='<table class="table"><tr><td></td><td>'+Ya[1]+"</td><td>"+Ya[0]+"</td></tr>";n=Ua.avgSizes;for(var h=0;h<n.length;h++){var y=Math.abs(n[h]);Ua.timesLen>=y&&(c||(c=!0,a.push(e)),a.push("<tr><td>"+Ya[7-(n[h]>>>31)].replace("%mk",y)),a.push('<td><span class="click" data="c'+"am"[n[h]>>>31]+h+'">'+x(Ua.lastAvg[h][0])+" (="+stats.trim(Ua.lastAvg[h][1],
2)+")</span></td>"),a.push('<td><span class="click" data="b'+"am"[n[h]>>>31]+h+'">'+x(Ua.bestAvg(h,0))+" (="+stats.trim(Ua.bestAvg(h,1),2)+")</span></td></tr>"))}c&&a.push("</table>");a=a.join("");r.html(a.replace(/\n/g,"<br>"))})}function a(){var a=!1,b=JSON.parse(kernel.getProp("sessionData"));$.each(b,function(b,c){n[b]&&c.name==n[b].name&&(c.opt||{}).scrType==(n[b].opt||{}).scrType||(a=!0)});n=b;if(a){var c=[],e=[];Na.empty().append($("<option />").val("*").html(STATS_XSESSION_NAME));y.empty().append($("<option />").val("*").html(STATS_XSESSION_SCR));
$.each(b,function(a,b){var n=b.name;-1==$.inArray(n,c)&&(c.push(n),Na.append($("<option />").val(n).html(n)));n=(b.opt||{}).scrType||"333";-1==$.inArray(n,e)&&(e.push(n),y.append($("<option />").val(n).html(scramble.getTypeName(n))))})}}function h(b,n){(Sa=b)&&!/^scr/.exec(n)&&(a(),b.empty().append(Za),Wa.unbind("click").click(e),r.unbind("click").click(function(a){stats.infoClick(Ua,c,a)}))}function Ra(b,c){"sessionData"==c[0]&&Sa&&a()}Pa=STATS_XSESSION_DATE.split("|");var Za=$("<div />").css("text-align",
"center").css("font-size","0.7em"),r=$("<div />"),Na=$("<select>"),Qa=$("<select>").append($("<option>").val(-1).html(Pa[0]),$("<option>").val(1).html(Pa[1]),$("<option>").val(7).html(Pa[2]),$("<option>").val(30).html(Pa[3]),$("<option>").val(365).html(Pa[4])).val(-1),y=$("<select>"),Wa=$('<span class="click">'+STATS_XSESSION_CALC+"</span>"),Ua=new TimeStat([],0,z),Xa=[],Ta=1,Ya=STATS_STRING.split("|");for(Pa=0;13>Pa;Pa++)Ya[Pa]=Ya[Pa]||"";var Sa=null,n={};$(function(){Za.append(Na,Qa,y," ",Wa,"<br>",
r);"undefined"!=typeof tools&&tools.regTool("hugestats",TOOLS_HUGESTATS,h);kernel.regListener("labelstat","property",Ra,/^sessionData$/)});return{update:$.noop,updateStatal:function(a){Ua=new TimeStat(a,0,z)}}},[kernel.pretty,kernel.round,kernel.pround]);var periodStats=execMain(function(){function b(a){a-=y;var b=new Date(1E3*a);switch(Wa){case "d":return~~(a/86400);case "w":return~~((a/86400-Na.val())/7);case "m":return 12*b.getFullYear()+b.getMonth();case "y":return b.getFullYear()}}function Pa(a){switch(Wa){case "d":return mathlib.time2str(86400*a+y,"%Y-%M-%D");case "w":return mathlib.time2str(86400*(7*a+~~Na.val())+y,"Start@ %Y-%M-%D");case "m":return~~(a/12)+"-"+("0"+(a%12+1)).slice(-2);case "y":return""+a}}function x(){for(var a=Promise.resolve(),
c=~~kernel.getProp("sessionN"),e=0;e<c;e++){var n=stats.getSessionManager().rank2idx(e+1);a=a.then(function(a){return new Promise(function(c){storage.get(a).then(function(e){stats[a]={};for(var f=0;f<e.length;f++)if(e[f][3]){var n=b(e[f][3]);stats[a][n]=stats[a][n]||[0,0];stats[a][n][0]+=1;stats[a][n][1]+=-1!=e[f][0][0]}c()})})}.bind(void 0,n))}return a.then(function(){Qa=stats})}function z(a){a=$(a.target).html();"&gt;"==a?Xa--:"&lt;"==a?Xa=Math.min(Xa+1,0):"+"==a?Ta++:"-"==a&&(Ta=Math.max(1,Ta-
1));c()}function c(){if(lb){var b=$('<table class="table">'),c=TOOLS_DLYSTAT1.split("|");cb.empty().append(c[0],Ra.unbind("change").change(a)," "+c[1],Za.unbind("change").change(a)," "+c[2],Na.unbind("change").change(a),"<br>",b);c=JSON.parse(kernel.getProp("sessionData"));for(var e=~~kernel.getProp("sessionN"),h=$("<tr>").append(Sa.unbind("click").click(z),Ya.unbind("click").click(z)),r=$("<tr>").append(n.unbind("click").click(z),db.unbind("click").click(z)),w=0;w<Ta;w++)h.append($("<td rowspan=2>").html(Pa(Ua-
w+Xa).replace(" ","<br>")));b.append(h,r);for(w=0;w<e;w++)if(h=stats.getSessionManager().rank2idx(w+1),0!=Object.keys(Qa[h]||{}).length){r=$("<tr>").append($("<td colspan=2>").html(c[h].name));for(var f=0;f<Ta;f++){var x=Qa[h][Ua-f+Xa];r.append($("<td>").html(x?x[1]+"/"+x[0]:"-"))}b.append(r)}}}function e(b,c){lb=!!b;b&&!/^scr/.exec(c)&&(b.empty().append(cb),a())}function a(){lb&&(Wa=Ra.val(),y=3600*Za.val()+60*(new Date).getTimezoneOffset(),Ua=b(+new Date/1E3),x().then(c))}var h=TOOLS_DLYSTAT_OPT1.split("|"),
Ra=$("<select>").append($("<option>").val("d").html(h[0]),$("<option>").val("w").html(h[1]),$("<option>").val("m").html(h[2]),$("<option>").val("y").html(h[3])).val("d"),Za=$("<select>");for(h=0;24>h;h++){var r=("0"+h).slice(-2)+":00";Za.append($("<option>").val(h).html(r))}h=TOOLS_DLYSTAT_OPT2.split("|");var Na=$("<select>").append($("<option>").val(3).html(h[0]),$("<option>").val(4).html(h[1]),$("<option>").val(5).html(h[2]),$("<option>").val(6).html(h[3]),$("<option>").val(0).html(h[4]),$("<option>").val(1).html(h[5]),
$("<option>").val(2).html(h[6])).val(3),Qa=[],y,Wa,Ua,Xa=0,Ta=3,Ya=$('<td class="click">').html("&gt;"),Sa=$('<td class="click">').html("&lt;"),n=$('<td class="click">').html("+"),db=$('<td class="click">').html("-");$("<td colspan=1>");var lb=!1,cb=$("<div />").css("text-align","center").css({"font-size":"0.7em","max-height":"20em","overflow-y":"auto"});$(function(){"undefined"!=typeof tools&&tools.regTool("dlystat",TOOLS_DLYSTAT,e);kernel.regListener("dlystat","property",c,/^sessionData$/);stats.regUtil("dlystat",
a)});return{update:a}});var recons=execMain(function(){function b(){this.clear()}function Pa(a,c){if(a&&a[4]&&!(0>a[0][0])){var e=a[4],n=new mathlib.CubieCube;new mathlib.CubieCube;n.ori=0;e=e[0].split(/ +/);for(var h=e.length-1;0<=h;h--)n.selfMoveStr(e[h],!0);n.selfConj();h=n.toFaceCube();var r=[],x=new b,y=new mathlib.CubieCube;y.invFrom(n);var Na=0,Sa=0,w=[],f=cubeutil.getProgress(h,c);for(h=0;h<e.length;h++){var Oa=n.selfMoveStr(e[h],!1);if(void 0!=Oa){Sa=Math.min(Sa,n.tstamp);x.push(Oa);var z=~~(Oa/3);w.push(["URFDLB".charAt(z%
6)+" 2'".charAt(Oa%3),n.tstamp]);6<=z&&w.push(["DLBURF".charAt(z%6)+"'2 ".charAt(Oa%3),n.tstamp])}Oa=cubeutil.getProgress(n.toFaceCube(),c);if(Oa<f){z=new mathlib.CubieCube;mathlib.CubieCube.EdgeMult(y,n,z);mathlib.CubieCube.CornMult(y,n,z);for(r[--f]=[Na,Sa,n.tstamp,x.moveCnt,z,w];f>Oa;)r[--f]=[n.tstamp,n.tstamp,n.tstamp,0,new mathlib.CubieCube,[]];y.invFrom(n);Na=n.tstamp;x.clear();w=[];Sa=1E9}}e=cubeutil.getStepCount(c);n=[];for(h=0;h<e;h++)n[h]=(r[h]||[])[5]||[];return{data:r,rawMoves:n.reverse()}}}
function x(a,b,c,e,r){for(var n=0,x=0,Na=[],z=[],Sa=0;Sa<a.length;Sa++){x+=a[Sa][1]+a[Sa][2];var w=a[Sa][0].split("-");0!=Na.length&&Na[Na.length-1][0]==w[0]||Na.push([w[0],0,0,0]);z[Sa]=Na.length-1;w=Na[Na.length-1];for(var f=1;4>f;f++)w[f]+=a[Sa][f];n=Math.max(w[1]+w[2],n)}w=[];var Oa=0,Qa=0,Ra=0,Pa=-1;for(Sa=0;Sa<a.length;Sa++){var $a=a[Sa];Oa+=$a[1];Qa+=$a[2];Ra+=$a[3];if(z[Sa]==z[Sa+1]&&z[Sa]!=z[Sa-1]){Pa=z[Sa];f=Na[Pa];var cb=["",f[0],f[1]/n*100,f[2]/n*100,c?Math.round(f[1]/x*1E3)/10+"%":kernel.pretty(f[1]),
c?Math.round(f[2]/x*1E3)/10+"%":kernel.pretty(f[2]),Math.round(10*f[3])/10,0<f[3]&&0<f[1]+f[2]?Math.round(f[3]/(f[1]+f[2])*1E4)/10:"N/A","click sstep"],mb='<tr style="$0" data="$1"><td rowspan=2 class="$8" style="padding-bottom:0;padding-top:0;">$1</td><td colspan=4 style="padding:0;"><span class="cntbar sty2" style="height:0.2em;float:left;border:none;width:$2%;">&nbsp;</span><span class="cntbar" style="height:0.2em;float:left;border:none;width:$3%;">&nbsp;</span></td></tr><tr style="$0" data="$1"><td style="padding-bottom:0;padding-top:0;">$4</td><td style="padding-bottom:0;padding-top:0;">$5</td><td style="padding-bottom:0;padding-top:0;">$6</td><td style="padding-bottom:0;padding-top:0;">$7</td></tr>';
for(f=0;9>f;f++)mb=mb.replace(new RegExp("\\$"+f,"g"),cb[f]);w.push(mb)}$a=[z[Sa]==Pa?"display:none;":"",$a[0],$a[1]/n*100,$a[2]/n*100,c?Math.round($a[1]/x*1E3)/10+"%":kernel.pretty($a[1]),c?Math.round($a[2]/x*1E3)/10+"%":kernel.pretty($a[2]),Math.round(10*$a[3])/10,0<$a[3]&&0<$a[1]+$a[2]?Math.round($a[3]/($a[1]+$a[2])*1E4)/10:"N/A",""];mb='<tr style="$0" data="$1"><td rowspan=2 class="$8" style="padding-bottom:0;padding-top:0;">$1</td><td colspan=4 style="padding:0;"><span class="cntbar sty2" style="height:0.2em;float:left;border:none;width:$2%;">&nbsp;</span><span class="cntbar" style="height:0.2em;float:left;border:none;width:$3%;">&nbsp;</span></td></tr><tr style="$0" data="$1"><td style="padding-bottom:0;padding-top:0;">$4</td><td style="padding-bottom:0;padding-top:0;">$5</td><td style="padding-bottom:0;padding-top:0;">$6</td><td style="padding-bottom:0;padding-top:0;">$7</td></tr>';
for(f=0;9>f;f++)mb=mb.replace(new RegExp("\\$"+f,"g"),$a[f]);w.push(mb)}a=$("<tr>").append(b?$("<td>").append(Ta):$('<td style="padding:0;">').append(Ua),"<td>"+(c?Math.round(Oa/x*1E3)/10+"%":kernel.pretty(Oa))+"</td><td>"+(c?Math.round(Qa/x*1E3)/10+"%":kernel.pretty(Qa))+"</td>",$("<td>").append(e||r?y:Math.round(10*Ra)/10),"<td>"+(0<Ra&&0<Oa+Qa?Math.round(Ra/(Oa+Qa)*1E4)/10:"N/A")+"</td>");Wa.empty().append(Ya);Ya.after(w.join(""),a);Ua.unbind("change").change(h);Xa.unbind("change").change(h);Wa.unbind("click").click(h);
Ta.text("No."+b);(e||r)&&y.children("a").attr("href","https://alg.cubing.net/?alg="+encodeURIComponent(r)+"&setup="+encodeURIComponent(e)).text(Math.round(10*Ra)/10)}function z(a){Wa.empty().append(Ya);Ya.after($("<tr>").append(a?$("<td>").append(Ta):$('<td style="padding:0;">').append(Ua),"<td colspan=4>"+TOOLS_RECONS_NODATA+"</td>"));Ua.unbind("change").change(h);Xa.unbind("change").change(h);Wa.unbind("click").click(h);Ta.text("---")}function c(b,c){(r=void 0!=b)&&!/^scr/.exec(c)&&(b.empty().append(Qa.append(Wa)),
a())}function e(a,b){if(r){var c=Xa.val()||"cf4op",e=c.endsWith("%");c=c.replace("%","");var n=b[0],h=Pa(n,c);if(h){for(var y=h.data,Na=cubeutil.getStepNames(c),Sa=[],Qa=Na.length-1;0<=Qa;Qa--){var w=y[Qa]||[0,0,0,0];Sa.push([Na[Qa],w[1]-w[0],w[2]-w[1],w[3]])}c=cubeutil.getPrettyReconstruction(h.rawMoves,c).prettySolve;x(Sa,b[1]+1,e,n[1],c)}else z(!0)}}function a(){if(r){var a=stats.getTimesStatsTable().timesLen,b=Ua.val();if(b="single"==b?Math.min(1,a):"mo5"==b?Math.min(5,a):"mo12"==b?Math.min(12,
a):"mo100"==b?Math.min(100,a):a){var c=Xa.val()||"cf4op",e=c.endsWith("%");c=c.replace("%","");for(var h=cubeutil.getStepNames(c),y=0,Na=[],Qa=a-1;Qa>=a-b;Qa--){var Ra=stats.getExtraInfo("recons_"+c,Qa);if(Ra){var Va=Ra.data;y++;for(var w=h.length-1;0<=w;w--){var f=Va[w]||[0,0,0,0],Oa=h.length-w-1;Na[Oa]=Na[Oa]||[h[w],0,0,0];Na[Oa][1]+=f[1]-f[0];Na[Oa][2]+=f[2]-f[1];Na[Oa][3]+=f[3]}}}if(0==y)z(!1);else{for(w=0;w<h.length;w++)Na[w][1]/=y,Na[w][2]/=y,Na[w][3]/=y;1==b?(b=cubeutil.getPrettyReconstruction(Ra.rawMoves,
c).prettySolve,x(Na,null,e,stats.timesAt(a-1)[1],b)):x(Na,null,e)}}else z(!1)}}function h(b){if("change"==b.type)a();else if(b=$(b.target),b.is(".click")&&!b.is(".exturl"))if(b.is(".sstep")){b=b.parent();var c=b.attr("data")+"-";for(b=b.next().next();b&&b.attr("data").startsWith(c);)b.toggle(),b=b.next()}else a()}function Ra(a,b,c,e,h){return(a=stats.getExtraInfo("recons_"+a,h))?(a.data[c[0]]||[0,0,0,0])[c[1]]-(a.data[b[0]]||[0,0,0,0])[b[1]]:-1}function Za(a,b,c,e){a=stats.getExtraInfo("recons_"+
a,e);if(!a)return-1;for(e=c=0;e<a.data.length;e++){var n=a.data[e]||[0,0,0,0];c+=b?n[1]-n[0]:n[2]-n[1]}return c}var r,Na=TOOLS_RECONS_TITLE.split("|"),Qa=$('<div style="font-size:0.9em;" />'),y=$("<div>").append('<a target="_blank" class="exturl click"></a>'),Wa=$('<table class="table">'),Ua=$("<select>"),Xa=$("<select>"),Ta=$('<span class="click" />'),Ya=$("<tr>").append($('<th style="padding:0;">').append(Xa),"<th>"+Na[0]+"</th><th>"+Na[1]+"</th><th>"+Na[2]+"</th><th>"+Na[3]+"</th>");b.prototype.push=
function(a){a=~~(a/3);var b=1<<a;a%3!=this.lastMove%3&&(this.lastMove=a,this.lastPow=0);this.moveCnt+=(this.lastPow&b)==b?0:1;this.lastPow|=b};b.prototype.clear=function(){this.lastPow=0;this.lastMove=-3;this.moveCnt=0};$(function(){"undefined"!=typeof tools&&tools.regTool("recons",TOOLS_RECONS+">step",c);stats.regUtil("recons",a);stats.regExtraInfo("recons_cf4op",function(a){return Pa(a,"cf4op")});stats.regExtraInfo("recons_roux",function(a){return Pa(a,"roux")});stats.regExtraInfo("recons_cfop_ct",
Ra.bind(null,"cf4op",[6,0],[6,2]),["cross "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_ft",Ra.bind(null,"cf4op",[5,0],[2,2]),["F2L "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_ot",Ra.bind(null,"cf4op",[1,0],[1,2]),["OLL "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_pt",Ra.bind(null,"cf4op",[0,0],[0,2]),["PLL "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_it",Za.bind(null,"cf4op",!0),["CFOP "+Na[0],kernel.pretty]);stats.regExtraInfo("recons_cfop_et",
Za.bind(null,"cf4op",!1),["CFOP "+Na[1],kernel.pretty]);kernel.regListener("recons","reqrec",e);for(var b=["single","mo5","mo12","mo100","all"],n=0;n<b.length;n++)Ua.append('<option value="'+b[n]+'">'+b[n]+"</option>");b=[["cf4op","cfop"],["roux","roux"]];for(n=0;n<b.length;n++)Xa.append('<option value="'+b[n][0]+'">'+b[n][1]+"</option>"),Xa.append('<option value="'+b[n][0]+'%">'+b[n][1]+"%</option>")});return{calcRecons:Pa,getMoveCnt:function(a){a=a.split(/ +/);var c=new mathlib.CubieCube;c.ori=
0;for(var e=new b,h=0;h<a.length;h++){var r=c.selfMoveStr(a[h],!1);void 0!=r&&e.push(r)}return e.moveCnt}}}),caseStat=execMain(function(){function b(){if(c){for(var a=stats.getTimesStatsTable().timesLen,b=Ra.val()||"PLL",e=cubeutil.getIdentData(b),r=0,x=[],z=a-1;z>=a-a;z--){var Ta=stats.getExtraInfo("recons_cf4op_"+b,z);if(Ta){r++;var Ya=Ta[0];x[Ya]=x[Ya]||[0,0,0,0];var Sa=[1].concat(Ta.slice(1));for(Ta=0;4>Ta;Ta++)x[Ya][Ta]+=Sa[Ta]}}h.empty().append(Za);a=0;for(Ta=e[2];Ta<e[3];Ta++)x[Ta]&&(a=Math.max(a,
(x[Ta][1]+x[Ta][2])/x[Ta][0]));for(Ta=e[2];Ta<e[3];Ta++)if(x[Ta]){b=x[Ta];$("<tr>");z=[e[1](Ta)[2],b[0],b[1]/b[0]/a*100,b[2]/b[0]/a*100,kernel.pretty(b[1]/b[0]),kernel.pretty(b[2]/b[0]),Math.round(b[3]/b[0]*10)/10,Math.round(b[3]/(b[1]+b[2])*1E4)/10];b='<tr><td rowspan=2 style="padding-bottom:0;padding-top:0;">$0</td><td rowspan=2 style="padding:0"><canvas/></td><td rowspan=2 style="padding-bottom:0;padding-top:0;">$1</td><td colspan=4 style="padding:0;"><span class="cntbar sty2" style="height:0.25em;float:left;border:none;width:$2%;">&nbsp;</span><span class="cntbar" style="height:0.25em;float:left;border:none;width:$3%;">&nbsp;</span></td></tr><tr><td style="padding-bottom:0;padding-top:0;">$4</td><td style="padding-bottom:0;padding-top:0;">$5</td><td style="padding-bottom:0;padding-top:0;">$6</td><td style="padding-bottom:0;padding-top:0;">$7</td></tr>';
for(Ya=0;8>Ya;Ya++)b=b.replace(new RegExp("\\$"+Ya,"g"),z[Ya]);b=$(b);z=b.find("canvas");z.css({width:"2em",height:"2em",display:"block"});e[1](Ta,z);h.append(b)}Ra.unbind("change").change(Pa);0==r&&Za.after("<tr><td colspan=7>"+TOOLS_RECONS_NODATA+"</td></tr>")}}function Pa(a){"change"==a.type&&b()}function x(e,r){(c=void 0!=e)&&!/^scr/.exec(r)&&(e.empty().append(a.append(h)),b())}function z(a,b,c){if(b=stats.getExtraInfo("recons_cf4op",c))if(a=cubeutil.getIdentData(a),b=b.data[a[4]])return r=r||
new mathlib.CubieCube,r.invFrom(b[4]),[a[0](r.toFaceCube()),b[1]-b[0],b[2]-b[1],b[3]]}var c,e=TOOLS_RECONS_TITLE.split("|"),a=$('<div style="font-size:0.9em;" />'),h=$('<table class="table">'),Ra=$("<select>"),Za=$("<tr>").append($('<th colspan=2 style="padding:0;">').append(Ra),"<th>N</th><th>"+e[0]+"</th><th>"+e[1]+"</th><th>"+e[2]+"</th><th>"+e[3]+"</th>"),r;$(function(){"undefined"!=typeof tools&&tools.regTool("casestat",TOOLS_RECONS+">cases",x);stats.regUtil("casestat",b);for(var a=["PLL","OLL"],
c=0;c<a.length;c++)Ra.append('<option value="'+a[c]+'">'+a[c]+"</option>"),stats.regExtraInfo("recons_cf4op_"+a[c],z.bind(null,a[c]))})}),scatter=execMain(function(){function b(){r.html(TOOLS_RECONS_NODATA);Za.unbind("change").change(c);Ra.hide()}function Pa(c,e){if(!c||!c[4])return b();var n=recons.calcRecons(c,e);if(!n)return b();Ra.show();h=a[0].getContext("2d");var x=kernel.getProp("imgSize")/10;Qa=50;a.width(9.6*x+"em");a.height(4.8*x+"em");a.attr("width",8*Qa+1);a.attr("height",4*Qa+5);y=4*
Qa;Qa*=8;x=n.data[0][2];for(var Na=0,z=0;z<n.data.length;z++)Na+=n.data[z][5].length;z=[0,1,1,0,0];var Sa=[0,0,1,1,0];h.fillStyle="#fff";h.beginPath();h.moveTo(z[0]*(Qa-0),(1-Sa[0])*(y-0));for(var Pa=1;Pa<z.length;Pa++)h.lineTo(z[Pa]*(Qa-0),(1-Sa[Pa])*(y-0));h.fill();h.closePath();Sa=0;Pa=[];var Ya=[],Va=[],w=0,f=0;for(z=n.data.length-1;0<=z;z--){for(var Oa=n.data[z],ab=0;ab<Oa[5].length;ab++)if(Ya.push(Sa/(Na-1)),Pa.push(Oa[5][ab][1]/x),Sa++,1<Pa.length){h.lineWidth=3;var hb="#888";Pa[1]-Pa[0]>3/
(Na-1)?(hb="#f00",w+=Pa[1]-Pa[0]):Pa[1]-Pa[0]>2/(Na-1)&&(hb="#00f",f+=Pa[1]-Pa[0]);var Za=Pa,$a=Ya;h.strokeStyle=hb;h.beginPath();for(hb=0;hb<Za.length;hb++)Za[hb]=(Za[hb]-Wa)/Ua,$a[hb]=($a[hb]-Xa)/Ta;h.moveTo(Za[0]*(Qa-0),(1-$a[0])*(y-0));for(hb=1;hb<Za.length;hb++)h.lineTo(Za[hb]*(Qa-0),(1-$a[hb])*(y-0));h.stroke();h.closePath();Pa=Pa.slice(Pa.length-1);Ya=Ya.slice(Ya.length-1)}0!=z&&Va.push([Pa[0]*(Qa-0),(1-Ya[0])*(y-0)])}for(z=0;z<Va.length;z++)h.strokeStyle="#000",h.lineWidth=1,h.beginPath(),
h.arc(Va[z][0],Va[z][1],4,0,2*Math.PI),h.stroke(),h.closePath();r.html(" "+'<span style="color:$">$</span>'.replace("$","#f00").replace("$",kernel.pretty(w*x))+" "+'<span style="color:$">$</span>'.replace("$","#00f").replace("$",kernel.pretty(f*x))+" "+'<span style="color:$">$</span>'.replace("$","#888").replace("$",kernel.pretty((1-w-f)*x)))}function x(){if(Na&&a[0].getContext){var b=stats.getTimesStatsTable().timesLen;Pa(stats.timesAt(b-1),Za.val()||"cf4op")}}function z(b,c){Na&&a[0].getContext&&
Pa(c[0],Za.val()||"cf4op")}function c(a){if("change"==a.type)return x();var b=$(a.target);b.hasClass("click")&&(a=b.attr("data"),"x"==a?(Ya="y",b.attr("data","y"),b.html(" ")):"y"==a?(Ya="x",b.attr("data","x"),b.html(" ")):(b={p:1,m:-1}[a]||0,a={l:Math.sqrt(.5),s:Math.sqrt(2)}[a]||1,"x"==Ya?(Wa+=b*Ua*.25+Ua*(1-a)/2,Ua*=a,Ua=Math.min(Math.max(Ua,.1),1),Wa=Math.min(Math.max(Wa,0),1-Ua)):(Xa+=b*Ta*.25+Ta*(1-a)/2,Ta*=a,Ta=Math.min(Math.max(Ta,.1),1),Xa=Math.min(Math.max(Xa,0),1-Ta)),x()))}function e(b,
e){(Na=void 0!=b)&&!/^scr/.exec(e)&&(b.empty().append(Za,r,Ra.empty().append(a).unbind("click").click(c)),Za.unbind("change").change(c),x())}var a=$("<canvas />"),h,Ra=$('<div style="text-align:center">'),Za=$("<select>"),r=$('<span style="font-size:0.8em;">'),Na=!1,Qa,y,Wa=0,Ua=1,Xa=0,Ta=1,Ya="x";$(function(){"undefined"!=typeof tools&&a[0].getContext&&tools.regTool("scatter",TOOLS_RECONS+">scatter",e);stats.regUtil("scatter",x);kernel.regListener("scatter","reqrec",z);for(var b=[["cf4op","cfop"],
["roux","roux"]],c=0;c<b.length;c++)Za.append('<option value="'+b[c][0]+'">'+b[c][1]+"</option>")});return{update:x}});var trainStat=execMain(function(){function b(a,b){return stats.timeAt(a[b])}function Pa(){if(e){for(var a=stats.getTimesStatsTable().timesLen,c=Ra.val()||"PLL",z=cubeutil.getIdentData(c),y=0,Pa=[],Ua=a-1;Ua>=a-a;Ua--){var Xa=stats.getExtraInfo("scramcase_"+c,Ua);Xa&&(Xa=Xa[0],Pa[Xa]=Pa[Xa]||[],Pa[Xa].push(Ua))}h.empty().append(Za);a=0;for(c=z[2];c<z[3];c++)if(Pa[c]){Ua=new TimeStat([],Pa[c].length,b.bind(null,Pa[c]));var Ta=Ua.getAllStats();Xa=Pa[c].length-Ta[0];0==Xa?Pa[c]=null:(Ta=Ta[1],Pa[c]=[Ua.bestTime,
Ta,Xa,Pa[c].length],a=Math.max(a,Ta))}for(c=z[2];c<z[3];c++)if(Pa[c]){Ua=Pa[c];$("<tr>");Xa=[z[1](c)[2],Ua[2]+"/"+Ua[3],Ua[0]/a*100,(Ua[1]-Ua[0])/a*100,kernel.pretty(Ua[0]),kernel.pround(Ua[1])];Ua='<tr><td rowspan=2 style="padding-bottom:0;padding-top:0;">$0</td><td rowspan=2 style="padding:0"><canvas/></td><td rowspan=2 style="padding-bottom:0;padding-top:0;">$1</td><td colspan=4 style="padding:0;"><span class="cntbar" style="height:0.25em;float:left;border:none;width:$2%;">&nbsp;</span><span class="cntbar sty2" style="height:0.25em;float:left;border:none;width:$3%;">&nbsp;</span></td></tr><tr><td style="padding-bottom:0;padding-top:0;">$4</td><td style="padding-bottom:0;padding-top:0;">$5</td></tr>';
for(Ta=0;6>Ta;Ta++)Ua=Ua.replace(new RegExp("\\$"+Ta,"g"),Xa[Ta]);Ua=$(Ua);Xa=Ua.find("canvas");Xa.css({width:"2em",height:"2em",display:"block"});z[1](c,Xa);h.append(Ua);y++}Ra.unbind("change").change(x);0==y&&Za.after("<tr><td colspan=5>"+TOOLS_RECONS_NODATA+"</td></tr>")}}function x(a){"change"==a.type&&Pa()}function z(b,c){(e=void 0!=b)&&!/^scr/.exec(c)&&(b.empty().append(a.append(h)),Pa())}function c(a,b,c){if(b=cubeutil.getScrambledState([null,b[1]]))return[cubeutil.getIdentData(a)[0](b.toFaceCube())]}
var e,a=$('<div style="font-size:0.9em;" />'),h=$('<table class="table">'),Ra=$("<select>"),Za=$("<tr>").append($('<th colspan=2 style="padding:0;">').append(Ra),"<th>N</th><th>best</th><th>mean</th>");$(function(){"undefined"!=typeof tools&&tools.regTool("trainstat",TOOLS_TRAINSTAT,z);stats.regUtil("trainstat",Pa);for(var a=["PLL","OLL","CLL"],b=0;b<a.length;b++)Ra.append('<option value="'+a[b]+'">'+a[b]+"</option>"),stats.regExtraInfo("scramcase_"+a[b],c.bind(null,a[b]))})});var tools=execMain(function(){function b(a,c){if(-1==a)for(var e=0;e<kernel.getProp("NTools");e++)b(e,c);else if(!Ra){for(e in Xa)Xa[e]();r[a].empty()}else for(e in Xa)if(e==Na[a])Xa[e](r[a],c)}function Pa(a,b){for(var c in Xa)if(c==Na[a])Xa[c](void 0,b)}function x(a){if(/^222(so|[236o]|eg[012]?|tc[np]|lsall|nb)$/.exec(a))return"222";if(/^(333(oh?|ni|f[mt]|custom)?|(z[zb]|[coep]|c[om]|2g|ls|tt)?ll|lse(mu)?|2genl?|3gen_[LF]|edges|corners|f2l|lsll2|(zb|w?v|eo)ls|roux|RrU|half|easyx?c|eoline|sbrx|mt(3qb|eole|tdr|6cp|l5ep|cdrll)|nocache_333bldspec)$/.exec(a))return"333";
if(/^(444([mo]|wca|yj|bld)?|4edge|RrUu)$/.exec(a))return"444";if(/^(555(wca|bld)?|5edge)$/.exec(a))return"555";if(/^(666(si|[sp]|wca)?|6edge)$/.exec(a))return"666";if(/^(777(si|[sp]|wca)?|7edge)$/.exec(a))return"777";if(/^888$/.exec(a))return"888";if(/^999$/.exec(a))return"999";if(/^101010$/.exec(a))return"101010";if(/^111111$/.exec(a))return"111111";if(/^cubennn$/.exec(a))return"cubennn";if(/^pyr(s?[om]|l4e|nb|4c)$/.exec(a))return"pyr";if(/^skb(s?o|nb)?$/.exec(a))return"skb";if(/^sq(rs|1[ht]|rcsp)$/.exec(a))return"sq1";
if(/^clk(wca|o)$/.exec(a))return"clk";if(/^(mgmp|mgmo|minx2g|mlsll|mgmpll|mgmll|klmso)$/.exec(a))return"mgm";if(/^15p(at|ra?p?)?$/.exec(a))return"15p";if(/^15p(rmp|m)$/.exec(a))return"15b";if(/^8p(at|ra?p?)?$/.exec(a))return"8p";if(/^8p(rmp|m)$/.exec(a))return"8b";if(/^sq2$/.exec(a))return"sq2";if(/^fto$/.exec(a))return"fto"}function z(a,c){DEBUG&&console.log("[func select]",a,c);kernel.blur();for(var e=void 0===a?4:a+1,h=void 0===a?0:a;h<e;h++){var r=y[h].getSelected();Na[h]!=r&&(Pa(h,"property"),
Na[h]=r,kernel.setProp("toolsfunc",JSON.stringify(Na)),b(h,"property"))}}function c(a,c){if("property"==a)if("imgSize"==c[0]||/^col/.exec(c[0]))for(var e=0;e<kernel.getProp("NTools");e++)"image"==Na[e]&&b(e,a);else if("NTools"==c[0])for(e=0;4>e;e++)e<c[1]?(Za[e].show(),""==r[e].html()&&b(e,a)):(Za[e].hide(),Pa(e,a));else if("toolHide"==c[0]){e=!c[1];for(var x=0;4>x;x++)e?Qa[x].show():Qa[x].hide()}else if("toolsfunc"==c[0]&&"session"==c[2]){x=JSON.parse(c[1]);for(e=0;4>e;e++)y[e].loadVal(x[e]);z()}else"toolPos"==
c[0]&&($("html").removeClass("toolf toolt"),-1!="ft".indexOf(c[1])&&$("html").addClass("tool"+c[1]));else if("scramble"==a||"scrambleX"==a)h=c,kernel.setProp("isTrainScr",!!Ta.exec((h||[])[0])),b(-1,a);else if("button"==a&&"tools"==c[0])if(Ra=c[1])for(e=0;e<kernel.getProp("NTools");e++)Ra&&""==r[e].html()&&b(e,a);else b(-1,a)}function e(a){$(a.target).hasClass("click")||$(a.target).is("input, textarea, select")||kernel.setProp("toolHide",!1)}function a(a){a=$(this);if("a"==a.attr("data"))a.prevAll().show(),
a.prev().hide(),a.hide();else if("n"==a.attr("data")){var b=a.prevAll(":hidden");b.last().show();1==b.length&&(a.next().hide(),a.hide())}}for(var h=["-","",0],Ra=!1,Za=[],r=[],Na=["image","stats","cross"],Qa=[],y=[],Wa=[],Ua=0;4>Ua;Ua++)r[Ua]=$("<div />"),Qa[Ua]=$("<span />"),y[Ua]=new kernel.TwoLvMenu(Wa,z.bind(null,Ua),$("<select />"),$("<select />")),Za[Ua]=$("<div />").css("display","inline-block");$(function(){kernel.regListener("tools","property",c,/^(?:imgSize|image|toolsfunc|NTools|col(?:cube|pyr|skb|sq1|mgm)|toolHide|toolPos)$/);
kernel.regListener("tools","scramble",c);kernel.regListener("tools","scrambleX",c);kernel.regListener("tools","button",c,/^tools$/);for(var a=$('<div id="toolsDiv"/>'),b=0;4>b;b++)r[b].click(e),Qa[b].append("<br>",TOOLS_SELECTFUNC,y[b].select1,y[b].select2),Za[b].append(r[b],Qa[b]).appendTo(a),1==b&&a.append("<br>");kernel.regProp("tools","toolPos",1,PROPERTY_TOOLPOS,["b",["b","f","t"],PROPERTY_TOOLPOS_STR.split("|")]);kernel.regProp("tools","solSpl",0,PROPERTY_HIDEFULLSOL,[!1]);kernel.regProp("tools",
"imgSize",2,PROPERTY_IMGSIZE,[15,5,50]);kernel.regProp("tools","NTools",2,PROPERTY_NTOOLS,[1,1,4]);b=JSON.stringify(["image","stats","cross","distribution"]);kernel.regProp("tools","toolsfunc",5,PROPERTY_TOOLSFUNC,[b],1);kernel.regProp("tools","isTrainScr",-6,"Is Train Scramble",[!1],0);var h=kernel.getProp("toolsfunc",b);-1==h.indexOf("[")&&(h=b.replace("image",h),kernel.setProp("toolsfunc",h));Na=JSON.parse(h);kernel.addWindow("tools",BUTTON_TOOLS,a,!1,!0,6);kernel.regProp("ui","toolHide",-1,"Hide Tools Selector",
[!1])});var Xa={},Ta=/^((z[zb]|[coep]|c[om]|2g|ls|tt)?ll|lse(mu)?|2genl?|3gen_[LF]|f2l|lsll2|(zb|w?v|eo)ls|roux|eoline|sbrx|mt(3qb|eole|tdr|6cp|l5ep|cdrll)|222(eg[012]?|tc[np]|lsall))$/;return{regTool:function(a,b,c){DEBUG&&console.log("[regtool]",a,b);Xa[a]=c;b=b.split(">");if(2==b.length){c=-1;for(var e=0;e<Wa.length;e++)if(Wa[e][0]==b[0]&&$.isArray(Wa[e][1])){c=e;break}-1!=c?Wa[c][1].push([b[1],a]):Wa.push([b[0],[[b[1],a]]])}else Wa.push([b[0],a]);for(e=0;4>e;e++)y[e].reset(Na[e])},getCurScramble:function(){return h},
getCurPuzzle:function(){return x(h[0])},getSolutionSpan:function(b){for(var c=$("<span />"),e=0;e<b.length;e++)c.append('<span style="display:none;">&nbsp;'+b[e]+"</span>");kernel.getProp("solSpl")?(c.append($('<span class="click" data="n">[+1]</span>').click(a)),c.append($('<span class="click" data="a">['+b.length+"f]</span>").click(a))):c.children().show();return c},scrambleType:function(a){return null==a.match(/^([\d]?[xyzFRUBLDfrubldSME]([w]|&sup[\d];)?[2']?\s*)+$/)?"-":a.match(/^([xyzFRU][2']?\s*)+$/)?
"222o":a.match(/^([xyzFRUBLDSME][2']?\s*)+$/)?"333":a.match(/^(([xyzFRUBLDfru]|[FRU]w)[2']?\s*)+$/)?"444":a.match(/^(([xyzFRUBLDfrubld])[w]?[2']?\s*)+$/)?"555":"-"},puzzleType:x,isCurTrainScramble:function(a){return!!Ta.exec((a||h||[])[0])},isPuzzle:function(a,b){b=b||h;var c=x(b[0]);b=b[1];return c?c==a:"222"==a?b.match(/^([xyzFRU][2']?\s*)+$/):"333"==a?b.match(/^([xyzFRUBLDSME][2']?\s*)+$/):"444"==a?b.match(/^(([xyzFRUBLDfru]|[FRU]w)[2']?\s*)+$/):"555"==a?b.match(/^(([xyzFRUBLDfrubld])[w]?[2']?\s*)+$/):
"skb"==a?b.match(/^([RLUB]'?\s*)+$/):"pyr"==a?b.match(/^([RLUBrlub]'?\s*)+$/):"sq1"==a?b.match(/^$/):"fto"==a?b.match(/^(([FRUBLD]|(?:BL)|(?:BR))[']?\s*)+$/):!1}}});var image=execMain(function(){function b(a){var b=a[0];"input"==b&&(b=tools.scrambleType(a[1]));b=tools.puzzleType(b);var c;for(c=0;12>c;c++)if(b==n[c])return Wa.draw(c,a[1]),!0;return"cubennn"==b?(Wa.draw(a[2],a[1]),!0):"pyr"==b?(y(a[1]),!0):"skb"==b?(Qa(a[1]),!0):"sq1"==b||"sq2"==b?(Na(a[1],"sq2"==b),!0):"clk"==b?(r(a[1]),!0):"mgm"==b?(Za(a[1]),!0):"fto"==b?(Ya(a[1]),!0):"15b"==b||"15p"==b?(Sa(b[2],4,a[1]),!0):"8b"==b||"8p"==b?(Sa(b[1],3,a[1]),!0):!1}function Pa(a){a&&(x=$("<canvas>"),z=x[0].getContext("2d"),
a.empty().append(x),b(tools.getCurScramble())||a.html(IMAGE_UNAVAILABLE))}var x,z,c=Math.sqrt(3)/2,e=Math.PI,a=$.ctxRotate,h=$.ctxTransform,Ra=$.ctxDrawPolygon,Za=function(){function b(b,c,h,n){for(var r=0;5>r;r++)Ra(z,Qa[b[c+r]],a([y,Na],2*e/5*r+n),h),Ra(z,Qa[b[c+r+5]],a([w,f],2*e/5*r+n),h);Ra(z,Qa[b[c+10]],a([Oa,Sa],n),h)}var c=(Math.sqrt(5)+1)/2,h=.25/Math.tan(e/5),n=2.6+3*Math.cos(.1*e)*c,r=2.2+1*Math.sin(.1*e)*c,y=[0,h,0,-h],Na=[-1,-.75,-.5,-.75],w=[Math.cos(.1*e)-h,h,0,.5*Math.sin(.4*e)],f=
[-Math.sin(.1*e)+-.25,-.75,-.5,.5*-Math.cos(.4*e)],Oa=[.5*Math.sin(0*e),.5*Math.sin(.4*e),.5*Math.sin(.8*e),.5*Math.sin(1.2*e),.5*Math.sin(1.6*e)],Sa=[.5*-Math.cos(0*e),.5*-Math.cos(.4*e),.5*-Math.cos(.8*e),.5*-Math.cos(1.2*e),.5*-Math.cos(1.6*e)],Qa="#fff #d00 #060 #81f #fc0 #00b #ffb #8df #f83 #7e0 #f9f #999".split(" ");return function(a){Qa=kernel.getProp("colmgm").match(db);for(var f=[],w=0;12>w;w++)for(var h=0;11>h;h++)f[11*w+h]=w;a.replace(/(?:^|\s*)(?:([DLR])(\+\+?|--?)|(U|F|D?B?R|D?B?L|D|B)(\d?)('?)|\[([ufrl])('?)\])(?:$|\s*)/g,
function(a,b,c,e,w,h,n,r){b?mathlib.minx.doMove(f,"DL?R".indexOf(b),("+"==c[0]?-1:1)*c.length,2):e?mathlib.minx.doMove(f,"U R F L BL BR DR DL DBL B DBR D".split(" ").indexOf(e),(h?-1:1)*(~~w||1),0):mathlib.minx.doMove(f,"urfl".indexOf(n),r?-1:1,1)});a=kernel.getProp("imgSize")/7.5;x.width(7*a+"em");x.height(3.5*a+"em");x.attr("width",392);x.attr("height",196);b(f,0,[40,2.6+0*c,2.2+0*c],0*e);b(f,11,[40,2.6+Math.cos(.1*e)*c,2.2+Math.sin(.1*e)*c],.2*e);b(f,22,[40,2.6+Math.cos(.5*e)*c,2.2+Math.sin(.5*
e)*c],.6*e);b(f,33,[40,2.6+Math.cos(.9*e)*c,2.2+Math.sin(.9*e)*c],1*e);b(f,44,[40,2.6+Math.cos(1.3*e)*c,2.2+Math.sin(1.3*e)*c],1.4*e);b(f,55,[40,2.6+Math.cos(1.7*e)*c,2.2+Math.sin(1.7*e)*c],1.8*e);b(f,66,[40,n+Math.cos(.7*e)*c,r+Math.sin(.7*e)*c],0*e);b(f,77,[40,n+Math.cos(.3*e)*c,r+Math.sin(.3*e)*c],1.6*e);b(f,88,[40,n+Math.cos(1.9*e)*c,r+Math.sin(1.9*e)*c],1.2*e);b(f,99,[40,n+Math.cos(1.5*e)*c,r+Math.sin(1.5*e)*c],.8*e);b(f,110,[40,n+Math.cos(1.1*e)*c,r+Math.sin(1.1*e)*c],.4*e);b(f,121,[40,n+0*
c,r+0*c],1*e);z&&(z.fillStyle="#000",z.font="20px serif",z.textAlign="center",z.textBaseline="middle",z.fillText("U",104,88),z.fillText("F",104,40*(2.2+Math.sin(.5*e)*c)))}}(),r=function(){var b=/([UD][RL]|ALL|[UDRLy])(\d[+-]?)?/,c="UR DR DL UL U R D L ALL".split(" "),n=["#f00","#37b","#5cf","#ff0","#850"];return function(r){n=kernel.getProp("colclk").match(db);var y=r.split(/\s+/),Na=clock.moveArr,Sa=9;r=[0,0,0,0];for(var w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0;f<y.length;f++){var Oa=b.exec(y[f]);if(Oa)if("y2"==
Oa[0])Sa=0;else{var Ra=c.indexOf(Oa[1])+Sa;if(void 0==Oa[2])r[Ra%9]=1;else{var Qa=~~Oa[2][0];Qa="+"==Oa[2][1]?Qa:12-Qa;for(Oa=0;14>Oa;Oa++)w[Oa]=(w[Oa]+Na[Ra][Oa]*Qa)%12}}}w=[w[0],w[3],w[6],w[1],w[4],w[7],w[2],w[5],w[8],12-w[2],w[10],12-w[8],w[9],w[11],w[13],12-w[0],w[12],12-w[6]];r=[r[3],r[2],r[0],r[1],1-r[0],1-r[1],1-r[3],1-r[2]];f=kernel.getProp("imgSize")/7.5;x.width(6.25*f+"em");x.height(3*f+"em");x.attr("width",375);x.attr("height",180);y=[10,30,50];Na=[10,30,50,75,95,115];for(f=0;18>f;f++)Sa=
[n[1],n[2]][~~(f/9)],Ra=[3,Na[~~(f/3)],y[f%3]],z&&(Oa=h(a([[1,1,0,-1,-1,-1,1,0],[0,-1,-8,-1,0,1,1,0]],w[f]/6*e),Ra),Qa=Oa[0],Oa=Oa[1],z.beginPath(),z.fillStyle=Sa,z.arc(Qa[7],Oa[7],9*Ra[0],0,2*e),z.fill(),z.beginPath(),z.fillStyle=n[3],z.strokeStyle=n[0],z.moveTo(Qa[0],Oa[0]),z.bezierCurveTo(Qa[1],Oa[1],Qa[1],Oa[1],Qa[2],Oa[2]),z.bezierCurveTo(Qa[3],Oa[3],Qa[3],Oa[3],Qa[4],Oa[4]),z.bezierCurveTo(Qa[5],Oa[5],Qa[6],Oa[6],Qa[0],Oa[0]),z.closePath(),z.fill(),z.stroke());y=[20,40];Na=[20,40,85,105];for(f=
0;8>f;f++)w=[n[4],n[3]][r[f]],Sa=[3,Na[~~(f/2)],y[f%2]],z&&(Ra=h([[0],[0]],Sa),z.beginPath(),z.fillStyle=w,z.strokeStyle="#000",z.arc(Ra[0][0],Ra[1][0],3*Sa[0],0,2*e),z.fill(),z.stroke())}}(),Na=function(){function b(a){for(var b=[],c=0;12>c;c++)b[(c+a[0])%12]=n[c];for(c=0;12>c;c++)b[c+12]=n[(c+a[1])%12+12];if(a[2])for(r=1-r,c=0;6>c;c++)mathlib.circle(b,c+6,23-c);n=b}var n=[],r=0,y=[[0,-.5,.5],[0,-c-1,-c-1]],Na=[[0,-.5,-c-1,-c-1],[0,-c-1,-c-1,-.5]],Sa=[[0,-.5,-c-1],[0,-c-1,-c-1]],Qa=[[0,-c-1,-c-1],
[0,-c-1,-.5]],w=h(y,[.66,0,0]),f=h(Na,[.66,0,0]),Oa=h(Sa,[.66,0,0]),Pa=h(Qa,[.66,0,0]),Ta={U:"#ff0",R:"#f80",F:"#0f0",D:"#fff",L:"#f00",B:"#00f"},Ua=/^\s*\(\s*(-?\d+),\s*(-?\d+)\s*\)\s*$/;return function(h,Na){var Va=kernel.getProp("colsq1").match(db);Ta={U:Va[0],R:Va[1],F:Va[2],D:Va[3],L:Va[4],B:Va[5]};n=[0,1,2,4,5,6,8,9,10,12,13,14,17,16,18,21,20,22,25,24,26,29,28,30];r=0;var ab=h.split("/");for(Va=0;Va<ab.length;Va++)if(/^\s*$/.exec(ab[Va]))b([0,0,1]);else{var $a=Ua.exec(ab[Va]);b([~~$a[1]+12,
~~$a[2]+12,1])}b([0,0,1]);Va=kernel.getProp("imgSize")/10;x.width(11*Va/1.3+"em");x.height(6.3*Va/1.3+"em");x.attr("width",495);x.attr("height",283.5);for(Va=0;24>Va;Va++){ab=n[Va]&1;$a=(12>Va?Va-3:-Va)*e/6;var Wa=(12>Va?Va-5:-1-Va)*e/6,Xa=12>Va?[45,2.7,2.7]:[45,2.7+5.4,2.7],eb=(Va+1)%12+(12>Va?0:12),Ya=n[Va]>>1,cb=Ta["UD"[8<=Ya?1:0]];0==Ya%2?Na?(!ab&&12<=Va?$a+=e/6:ab&&12>Va&&($a-=e/6),Ra(z,Ta["LBBRRFFLBLRBFRLF"[Ya+ab]],a(ab?Sa:Qa,$a),Xa),Ra(z,cb,a(ab?Oa:Pa,$a),Xa)):Ya==n[eb]>>1&&(Ra(z,Ta["LBBRRFFLBLRBFRLF"[Ya]],
a(Qa,$a),Xa),Ra(z,Ta["LBBRRFFLBLRBFRLF"[Ya+1]],a(Sa,$a),Xa),Ra(z,cb,a(f,$a),Xa)):(Ra(z,Ta["-B-R-F-L-B-R-F-L"[Ya]],a(y,Wa),Xa),Ra(z,cb,a(w,Wa),Xa))}Xa=[45,5.4,5.7];Ra(z,Ta.L,[[-c-1,-c-1,-.5,-.5],[.5,-.5,-.5,.5]],Xa);0==r?Ra(z,Ta.L,[[c+1,c+1,-.5,-.5],[.5,-.5,-.5,.5]],Xa):Ra(z,Ta.R,[[c,c,-.5,-.5],[.5,-.5,-.5,.5]],Xa)}}(),Qa=function(){var a=[],b="#fff #00f #f00 #ff0 #0f0 #f80".split(" "),e=[[45*c,45*c,186.75*c,-22.5,22.5,45],[45*c,0,328.5*c,-22.5,45,67.5],[45*c,0,234*c,-22.5,45,114.75],[0,-45*c,139.5*
c,45,-22.5,209.25],[45*c,0,139.5*c,22.5,45,114.75],[45*c,0,45*c,22.5,45,67.5]];return function(h){b=kernel.getProp("colskb").match(db);for(var n=0,r=0;6>r;r++)for(var y=0;5>y;y++)a[n++]=r;h=kernel.parseScramble(h,"RULB");for(r=0;r<h.length;r++){n=h[r][0];y=1==h[r][2]?1:2;for(var w=0;w<y;w++)switch(n){case 0:mathlib.circle(a,10,5,15);mathlib.circle(a,14,8,17);mathlib.circle(a,12,9,16);mathlib.circle(a,13,6,19);mathlib.circle(a,24,4,28);break;case 1:mathlib.circle(a,0,25,5);mathlib.circle(a,2,26,7);
mathlib.circle(a,4,27,9);mathlib.circle(a,1,28,6);mathlib.circle(a,21,19,12);break;case 2:mathlib.circle(a,20,15,25);mathlib.circle(a,23,18,29);mathlib.circle(a,21,16,28);mathlib.circle(a,24,19,27);mathlib.circle(a,13,9,1);break;case 3:mathlib.circle(a,5,25,15),mathlib.circle(a,9,28,19),mathlib.circle(a,8,26,18),mathlib.circle(a,7,29,17),mathlib.circle(a,2,23,14)}}r=kernel.getProp("imgSize")/10;x.width((8*c+.3)*r+"em");x.height(6.2*r+"em");x.attr("width",45*(8*c+.3)+1);x.attr("height",280);for(r=
0;6>r;r++)h=r,n=e[h],Ra(z,b[a[5*h]],[[-1,0,1,0],[0,1,0,-1]],n),Ra(z,b[a[5*h+1]],[[-1,-1,0],[0,-1,-1]],n),Ra(z,b[a[5*h+2]],[[0,1,1],[-1,-1,0]],n),Ra(z,b[a[5*h+3]],[[-1,-1,0],[0,1,1]],n),Ra(z,b[a[5*h+4]],[[0,1,1],[1,1,0]],n)}}(),y=function(){var a=[],b=["#0f0","#f00","#00f","#ff0"],e=[3.5,1.5,5.5,3.5],h=[0,3*c,3*c,6.5*c],n=[0,6,5,4],r=[1,7,3,5],y=[2,8,4,3],w=[[0,1,2],[2,3,0],[1,0,3],[3,2,1]],f=[-.5,.5,0],Oa=[c,c,0],Na=[-c,-c,0];return function(Sa){b=kernel.getProp("colpyr").match(db);for(var Va=0,Qa=
0;4>Qa;Qa++)for(var Ta=0;9>Ta;Ta++)a[Va++]=Qa;Sa=kernel.parseScramble(Sa,"URLB");for(Qa=0;Qa<Sa.length;Qa++){var Pa=Sa[Qa][0]+(2==Sa[Qa][1]?4:0);Va=1==Sa[Qa][2]?1:2;Ta=4<=Pa?1:4;Pa=w[Pa%4];for(var Ua=0;Ua<Ta;Ua++)for(var ab=0;ab<Va;ab++)mathlib.circle(a,9*Pa[0]+n[Ua],9*Pa[1]+r[Ua],9*Pa[2]+y[Ua])}Qa=kernel.getProp("imgSize")/10;x.width(7*Qa+"em");x.height(6.5*c*Qa+"em");x.attr("width",315);x.attr("height",292.5*c);for(Qa=0;4>Qa;Qa++){Sa=Qa;Va=0!=Sa;Ta=[0,-1,1,0,.5,-.5,0,-.5,.5];Pa=[0,2,2,2,1,1,2,3,
3];for(Ua=0;Ua<Pa.length;Ua++)Pa[Ua]*=Va?-c:c,Ta[Ua]*=Va?-1:1;for(Ua=0;9>Ua;Ua++)Ra(z,b[a[9*Sa+Ua]],[f,6<=Ua!=Va?Na:Oa],[45,e[Sa]+Ta[Ua],h[Sa]+Pa[Ua]])}}}(),Wa=function(){function a(a,b,e,h){var f=h*h,n,w,r;5<a&&(a-=6);for(r=0;r<e;r++){for(n=0;n<h;n++){if(0==a){var x=6*f-h*b-h+n;var y=2*f-h*b-1-n;var z=3*f-h*b-1-n;var Na=5*f-h*b-h+n}else 1==a?(x=3*f+b+h*n,y=3*f+b-h*(n+1),z=f+b-h*(n+1),Na=5*f+b+h*n):2==a?(x=3*f+b*h+n,y=4*f+h-1-b+h*n,z=b*h+h-1-n,Na=2*f-1-b-h*n):3==a?(x=4*f+b*h+h-1-n,y=2*f+b*h+n,z=f+
b*h+n,Na=5*f+b*h+h-1-n):4==a?(x=6*f-1-b-h*n,y=h-1-b+h*n,z=2*f+h-1-b+h*n,Na=4*f-1-b-h*n):5==a&&(x=4*f-h-b*h+n,y=2*f-h+b-h*n,z=f-1-b*h-n,Na=4*f+b+h*n);var Sa=c[x];c[x]=c[y];c[y]=c[z];c[z]=c[Na];c[Na]=Sa}if(0==b)for(n=0;n+n<h;n++)for(w=0;w+w<h-1;w++)x=a*f+n+w*h,z=a*f+(h-1-n)+(h-1-w)*h,3>a?(y=a*f+(h-1-w)+n*h,Na=a*f+w+(h-1-n)*h):(Na=a*f+(h-1-w)+n*h,y=a*f+w+(h-1-n)*h),Sa=c[x],c[x]=c[y],c[y]=c[z],c[z]=c[Na],c[Na]=Sa}}function b(b,e){var h=0;c=[];for(var n=0;6>n;n++)for(var f=0;f<b*b;f++)c[h++]=n;h=kernel.parseScramble(e,
"DLBURF",!0);for(n=0;n<h.length;n++){for(f=0;f<h[n][1];f++)a(h[n][0],f,h[n][2],b);if(-1==h[n][1]){for(f=0;f<b-1;f++)a(h[n][0],f,-h[n][2],b);a((h[n][0]+3)%6,0,h[n][2]+4,b)}}return c}var c=[],e="#ff0 #fa0 #00f #fff #f00 #0d0".split(" ");return{draw:function(a,h){b(a,h);var n=kernel.getProp("imgSize")/50;x.width(39*n+"em");x.height(29*n+"em");x.attr("width",30*(39*a/9+.2));x.attr("height",30*(29*a/9+.2));e=kernel.getProp("colcube").match(db);for(n=0;6>n;n++){var w=n,f=a,r=10/9,y=10/9;0==w?(r*=f,y*=2*
f):1==w?(r*=0,y*=f):2==w?(r*=3*f,y*=f):3==w?(r*=f,y*=0):4==w?(r*=2*f,y*=f):5==w&&(r*=f,y*=f);for(var Na=0;Na<f;Na++)for(var Sa=1==w||2==w?f-1-Na:Na,Qa=0;Qa<f;Qa++)Ra(z,e[c[(w*f+(0==w?f-1-Qa:Qa))*f+Sa]],[[Na,Na,Na+1,Na+1],[Qa,Qa+1,Qa+1,Qa]],[30,r+.1,y+.1])}},genPosit:b}}(),Ua=function(){function b(b,c,h){var n=$(h),r=kernel.getProp("colcube").match(db);h=n[0].getContext("2d");var x=3;12==b.length&&(x=2);n.attr("width",50*(x+1.2));n.attr("height",50*(x+1.2));for(n=0;n<x*x;n++){var w=n%x+.5,f=~~(n/x)+
.5;Ra(h,r["DLBURF".indexOf(b[n])]||"#888",[[w,w+1,w+1,w],[f,f,f+1,f+1]],[50,.1,.1])}for(n=0;n<4*x;n++)w=n%x,f=~~(n/x),Ra(h,r["DLBURF".indexOf(b[n+x*x])]||"#888",a([[w-x/2,w-x/2+1,.9*(w-x/2+1),.9*(w-x/2)],[x/2+.05,x/2+.05,x/2+.5,x/2+.5]],-f*e/2),[50,.6+x/2,.6+x/2]);c=c||[];for(n=0;n<c.length;n++){f=c[n];b=f[0]%x+1.1;r=~~(f[0]/x)+1.1;w=f[1]%x+1.1;f=~~(f[1]/x)+1.1;var y=Math.sqrt((b-w)*(b-w)+(r-f)*(r-f));Ra(h,"#000",a([[.2,y-.4,y-.4,y-.1,y-.4,y-.4,.2],[.05,.05,.15,0,-.15,-.05,-.05]],Math.atan2(f-r,w-
b)),[50,b,r])}}return{drawImage:b,draw:function(a,c,e){c=Wa.genPosit(a,c);for(var h=[],n=0;n<a*a;n++)h.push("DLBURF"[c[3*a*a+n]]);for(var r=0;4>r;r++){var w=[5,4,2,1][r]*a*a;for(n=0;n<a;n++)h.push("DLBURF"[c[w+[n,n,a-1-n,a-1-n][r]]])}b(h.join(""),[],e)}}}(),Xa=function(){var a=[[20*c,-20*c,61*c,10,10,0],[20*c,0,62*c,-10,20,61.5],[20*c,0,0,10,20,31.5]];return function(b,e){var h=$(e),n=kernel.getProp("colcube").match(db),r=h[0].getContext("2d");h.attr("width",122*c+1);h.attr("height",122.5);for(h=
0;27>h;h++){var x=h%3,w=~~(h/3)%3;Ra(r,n["DLBURF".indexOf(b[h])]||"#888",[[x,x+1,x+1,x],[w,w,w+1,w+1]],a[~~(h/9)])}}}(),Ta=function(){return function(b,h){var n=$(h);n.attr("width",120*c+1);n.attr("height",120*c+1);var r=kernel.getProp("colpyr").match(db);n=n[0].getContext("2d");for(var x=0,y=0;3>y;y++)for(var z=0;3>z;z++)for(var w=0;w<2*y+1;w++){var f=-c*y+c*w;var Na=y/2;f=0==w%2?[[f,f-c,f+c],[Na,Na+.5,Na+.5]]:[[f-c,f,f+c],[Na,Na+.5,Na]];Ra(n,r["FLRD".indexOf(b[x])]||"#888",a(f,e/3*4*z),[20,3*c,
3+(6*c-4.5)/2]);x++}}}(),Ya=function(){function a(a){if("U"==a){for(var b=[9,10,14,15,17],e=[36,37,38,39,40],h=[27,29,28,32,31],f=0;5>f;f++)mathlib.circle(c,b[f],e[f],h[f]);mathlib.circle(c,18,67,45);mathlib.circle(c,0,4,8);mathlib.circle(c,1,3,6);mathlib.circle(c,2,7,5)}if("L"==a){b=[0,1,5,6,8];e=[18,20,19,23,22];h=[71,70,69,68,67];for(f=0;5>f;f++)mathlib.circle(c,b[f],e[f],h[f]);mathlib.circle(c,27,62,40);mathlib.circle(c,9,17,13);mathlib.circle(c,10,15,12);mathlib.circle(c,14,16,11)}if("R"==a){b=
[8,6,7,3,4];var n=[45,46,47,48,49];e=[26,25,21,20,18];for(f=0;5>f;f++)mathlib.circle(c,b[f],n[f],e[f]);mathlib.circle(c,17,36,58);mathlib.circle(c,27,31,35);mathlib.circle(c,29,32,34);mathlib.circle(c,28,33,30)}if("F"==a){h=[27,29,30,34,35];n=[58,59,60,61,62];b=[13,12,16,15,17];for(f=0;5>f;f++)mathlib.circle(c,h[f],n[f],b[f]);mathlib.circle(c,8,49,71);mathlib.circle(c,18,26,22);mathlib.circle(c,20,25,23);mathlib.circle(c,19,21,24)}if("B"==a){b=[4,3,2,1,0];h=[67,68,64,65,63];n=[53,51,50,46,45];for(f=
0;5>f;f++)mathlib.circle(c,b[f],h[f],n[f]);mathlib.circle(c,54,31,9);mathlib.circle(c,36,40,44);mathlib.circle(c,37,39,42);mathlib.circle(c,38,43,41)}if("BR"==a){e=[36,37,41,42,44];n=[54,56,55,59,58];h=[35,34,33,32,31];for(f=0;5>f;f++)mathlib.circle(c,e[f],n[f],h[f]);mathlib.circle(c,63,26,4);mathlib.circle(c,45,53,49);mathlib.circle(c,46,51,48);mathlib.circle(c,50,52,47)}if("BL"==a){e=[44,42,43,39,40];b=[9,10,11,12,13];n=[62,61,57,56,54];for(f=0;5>f;f++)mathlib.circle(c,e[f],b[f],n[f]);mathlib.circle(c,
53,0,22);mathlib.circle(c,63,67,71);mathlib.circle(c,65,68,70);mathlib.circle(c,64,69,66)}if("D"==a){n=[49,48,52,51,53];h=[63,65,66,70,71];e=[22,23,24,25,26];for(f=0;5>f;f++)mathlib.circle(c,n[f],h[f],e[f]);mathlib.circle(c,44,13,35);mathlib.circle(c,54,62,58);mathlib.circle(c,56,61,59);mathlib.circle(c,55,57,60)}}function b(a,b,c,e,f){z.beginPath();z.moveTo(a*f,b*f);z.lineTo(c*f,e*f);z.lineWidth=3;z.stroke();z.lineWidth=1}var c=[],e="#fff #808 #f00 #0d0 #00f #bbb #ff0 #fa0".split(" ");return function(h){e=
kernel.getProp("colfto").match(db);for(var n=0,r=0;8>r;r++)for(var w=0;9>w;w++)c[n++]=r;h=h.split(" ");for(r=0;r<h.length;r++)n=h[r],n.endsWith("'")&&(n=n.replace("'",""),a(n)),a(n);r=kernel.getProp("imgSize")/50;x.width(39*r+"em");x.height(18*r+"em");x.attr("width",651);x.attr("height",301);r={0:[[0,2,1],[0,0,1]],1:[[2,3,1],[0,1,1]],2:[[2,4,3],[0,0,1]],3:[[4,5,3],[0,1,1]],4:[[4,6,5],[0,0,1]],5:[[1,3,2],[1,1,2]],6:[[3,4,2],[1,2,2]],7:[[3,5,4],[1,1,2]],8:[[2,4,3],[2,2,3]],9:[[0,1,0],[0,1,2]],10:[[0,
1,1],[2,1,3]],11:[[0,1,0],[2,3,4]],12:[[0,1,1],[4,3,5]],13:[[0,1,0],[4,5,6]],14:[[1,2,1],[1,2,3]],15:[[1,2,2],[3,2,4]],16:[[1,2,1],[3,4,5]],17:[[2,3,2],[2,3,4]],18:[[2,3,4],[4,3,4]],19:[[1,2,3],[5,4,5]],20:[[2,4,3],[4,4,5]],21:[[3,4,5],[5,4,5]],22:[[0,1,2],[6,5,6]],23:[[1,3,2],[5,5,6]],24:[[2,3,4],[6,5,6]],25:[[3,5,4],[5,5,6]],26:[[4,5,6],[6,5,6]],27:[[3,4,4],[3,2,4]],28:[[4,5,5],[2,1,3]],29:[[4,5,4],[2,3,4]],30:[[4,5,5],[4,3,5]],31:[[5,6,6],[1,0,2]],32:[[5,6,5],[1,2,3]],33:[[5,6,6],[3,2,4]],34:[[5,
6,5],[3,4,5]],35:[[5,6,6],[5,4,6]]};for(h=0;72>h;h++){n=r[h%36];w=n[0];var f=36<=h?7:0;Ra(z,e[c[h]],[[w[0]+f,w[1]+f,w[2]+f],n[1]],[50,0,0])}b(0,0,6,6,50);b(6,0,0,6,50);b(7,0,13,6,50);b(13,0,7,6,50);z.fillStyle=kernel.getProp("col-font");z.strokeStyle=kernel.getProp("col-font");z.font="25px monospace";z.textAlign="center";z.textBaseline="middle";z.fillText("U",150,80);z.fillText("R",50*4.4,150);z.fillText("F",150,50*4.4);z.fillText("L",80,150);z.fillText("B",500,80);z.fillText("BL",570,150);z.fillText("D",
500,50*4.4);z.fillText("BR",430,150)}}(),Sa=function(){return function(a,b,c){for(var e=[],h=[[1,0],[0,1],[0,-1],[-1,0]],n=0;n<b*b;n++)e[n]=n;n=b-1;var r=b-1,w=/([ULRD\uFFEA\uFFE9\uFFEB\uFFEC])([\d]?)/;c=c.split(" ");for(var f=0;f<c.length;f++){var y=w.exec(c[f]);if(y){var Na="ULRD".indexOf(y[1])%4;y=~~y[2]||1;Na=h["b"==a?3-Na:Na];for(var Sa=0;Sa<y;Sa++)mathlib.circle(e,n*b+r,(n+Na[0])*b+r+Na[1]),n+=Na[0],r+=Na[1]}}a=kernel.getProp("imgSize")/50;x.width(30*a+"em");x.height(30*a+"em");x.attr("width",
50*(b+.2));x.attr("height",50*(b+.2));a=kernel.getProp("col15p").match(db);a[b-1]=a[a.length-1];for(n=0;n<b;n++)for(c=0;c<b;c++)h=e[c*b+n],r=Math.min(~~(h/b),h%b),h++,Ra(z,a[r],[[n+.05,n+.05,n+1-.05,n+1-.05],[c+.05,c+1-.05,c+1-.05,c+.05]],[50,.1,.1]),h!=b*b&&(z.fillStyle="#000",z.font="30px monospace",z.textAlign="center",z.textBaseline="middle",z.fillText(h,50*(n+.5+.1),50*(c+.5+.1)))}}(),n="  222 333 444 555 666 777 888 999 101010 111111".split(" "),db=/#[0-9a-fA-F]{3}/g;$(function(){x=$("<canvas>");
x[0].getContext&&tools.regTool("image",TOOLS_IMAGE,Pa)});return{draw:b,llImage:Ua,pyrllImage:Ta,face3Image:Xa}});var cross=function(b,Pa,x,z,c,e,a){function h(a,b){var c=gb[b][~~(a/24)];return 24*~~(c/384)+eb[a%24][(c>>4)%24]}function Ra(a,b){var c=gb[b][a>>4];return~~(c/384)<<4|Va[a&15][(c>>4)%24]^c&15}function Za(a,b){for(var c=3;0<=c;c--)b[c]=a&1,a>>=1}function r(a){for(var b=0,c=0;4>c;c++)b<<=1,b|=a[c];return b}function Na(a,b){var c=gb[b][~~(a/384)];return 384*~~(c/384)+16*eb[(a>>4)%24][(c>>4)%24]+(Va[a&15][(c>>4)%24]^c&15)}function Qa(){Qa=$.noop;for(var a=0;24>a;a++)eb[a]=[];for(a=0;16>a;a++)Va[a]=[];
var f=[],n=[],w=[];for(a=0;24>a;a++)for(var y=0;24>y;y++){z(f,a,4);z(n,y,4);for(var Na=0;4>Na;Na++)w[Na]=f[n[Na]];eb[a][y]=c(w,4);if(16>a){Za(a,f);for(Na=0;4>Na;Na++)w[Na]=f[n[Na]];Va[a][y]=r(w)}}b(gb,495,function(a,b){for(var f=[0,0,0,0,0,0,0,0,0,0,0,0],h=4,n=0;12>n;n++)a>=e[11-n][h]?(a-=e[11-n][h--],f[n]=h<<1):f[n]=-1;Pa(f,b);a=0;h=4;var w=0,r=[];for(n=0;12>n;n++)0<=f[n]&&(a+=e[11-n][h--],r[h]=f[n]>>1,w|=(f[n]&1)<<3-h);return 24*a+c(r,4)<<4|w});lb=[];cb=[];x(lb,0,11880,5,h);x(cb,0,7920,6,Ra)}function y(){y=
$.noop;Wa();var a=5;x(Oa,296+576*(72*a+2*a),331776,7,function(a,b){var c=a%576,e=~~(a/576);return 24*f[~~(c/24)][b]+w[c%24][b]+576*(24*f[~~(e/24)][b]+w[e%24][b])});a=6;x(ab,296+576*(72*a+2*a),331776,7,function(a,b){var c=a%576,e=~~(a/576);return 24*f[~~(c/24)][b]+w[c%24][b]+576*(24*f[~~(e/24)][b]+w[e%24][b])})}function Wa(){function a(a,b){var c=~~(a/3);return 3*[[3,1,2,7,0,5,6,4],[0,1,6,2,4,5,7,3],[1,2,3,0,4,5,6,7],[0,5,1,3,4,6,2,7],[4,0,2,3,5,1,6,7],[0,1,2,3,7,4,5,6]][b][c]+(a%3+[[2,0,0,1,1,0,0,
2],[0,0,1,2,0,0,2,1],[0,0,0,0,0,0,0,0],[0,1,2,0,0,2,1,0],[1,2,0,0,2,1,0,0],[0,0,0,0,0,0,0,0]][b][c])%3}Wa=$.noop;Qa();for(var b=0;24>b;b++){f[b]=[];w[b]=[];for(var c=0;6>c;c++){f[b][c]=a(b,c);var e=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];e[b>>1]=b&1;Pa(e,c);for(var h=0;12>h;h++)if(0<=e[h]){w[b][c]=h<<1|e[h];break}}}jb=[];for(b=0;4>b;b++)c=[],x(c,72*(b+4)+2*(b+4),576,5,function(a,b){return 24*f[~~(a/24)][b]+w[a%24][b]}),jb[b]=c}function Ua(b,c,e,n,r,x,y,Na){if(0==x)return 0==b&&0==c&&8==e[0]&&12==n[0]&&
(10==e[1]&&15==n[1]||12==e[1]&&18==n[1]);if(a(lb,b)>x||a(cb,c)>x||a(r,24*n[0]+e[0]+576*(24*n[1]+e[1]))>x)return!1;var z,Oa;for(Oa=0;6>Oa;Oa++)if(Oa!=y&&Oa!=y-3){var Sa=b;var Qa=c;var Ta=e;var Pa=n;for(z=0;3>z;z++)if(Sa=h(Sa,Oa),Qa=Ra(Qa,Oa),Ta=[w[Ta[0]][Oa],w[Ta[1]][Oa]],Pa=[f[Pa[0]][Oa],f[Pa[1]][Oa]],Ua(Sa,Qa,Ta,Pa,r,x-1,Oa,Na))return Na.push("FRUBLD".charAt(Oa)+" 2'".charAt(z)),!0}return!1}function Xa(b,c,e,n,r,x,y,Na){if(0==x)return 0==b&&0==c&&e==2*(r+4)&&n==3*(r+4);if(a(lb,b)>x||a(cb,c)>x||a(jb[r],
24*n+e)>x)return!1;var z,Oa;for(Oa=0;6>Oa;Oa++)if(Oa!=y&&Oa!=y-3){var Sa=b;var Qa=c;var Ta=e;var Pa=n;for(z=0;3>z;z++)if(Sa=h(Sa,Oa),Qa=Ra(Qa,Oa),Ta=w[Ta][Oa],Pa=f[Pa][Oa],Xa(Sa,Qa,Ta,Pa,r,x-1,Oa,Na))return Na.push("FRUBLD".charAt(Oa)+" 2'".charAt(z)),!0}return!1}function Ta(b,c,e,f,n){if(0==e)return 0==b&&0==c;if(a(lb,b)>e||a(cb,c)>e)return!1;var w,r;for(r=0;6>r;r++)if(r!=f&&r!=f-3){var x=b;var y=c;for(w=0;3>w;w++)if(x=h(x,r),y=Ra(y,r),Ta(x,y,e-1,r,n))return n.push("FRUBLD".charAt(r)+" 2'".charAt(w)),
!0}return!1}function Ya(a){Qa();for(var b=[],c=0;6>c;c++){for(var e=0,f=0,n=0;n<a.length;n++)for(var w=nb[c].indexOf("FRUBLD".charAt(a[n][0])),r=a[n][2],x=0;x<r;x++)e=Ra(e,w),f=h(f,w);n=[];for(w=0;100>w&&!Ta(f,e,w,-1,n);w++);n.reverse();b.push(n)}return b}function Sa(a,b){Wa();for(var c=0,e=0,n=[8,10,12,14],r=[12,15,18,21],x=0;x<a.length;x++)for(var y=nb[b].indexOf("FRUBLD".charAt(a[x][0])),Na=a[x][2],z=0;z<Na;z++){c=Ra(c,y);e=h(e,y);for(var Oa=0;4>Oa;Oa++)n[Oa]=w[n[Oa]][y],r[Oa]=f[r[Oa]][y]}x=[];
y=!1;for(Na=0;!y;){for(Oa=0;4>Oa;Oa++)if(Xa(e,c,n[Oa],r[Oa],Oa,Na,-1,x)){y=!0;break}Na++}x.reverse();return x}function n(){n=$.noop;Qa();bb=[];x(bb,0,190080,7,Na,6,3,6)}function db(a){var b=~~(a/384),c=(a>>4)%24,f=[],n=[],h=[],w=[];Za(a&15,w);z(h,c,4);a=4;c=[7,6,5,4,10,9,8,11,3,2,1,0];for(var r=0;12>r;r++)b>=e[11-r][a]?(b-=e[11-r][a--],f[c[r]]=h[a],n[c[r]]=w[a]):f[c[r]]=n[c[r]]=-1;return[f,n]}var lb,cb,jb,bb,gb=[],eb=[],Va=[],w=[],f=[],Oa=[],ab=[],hb="DULRFB".split(""),nb="FRUBLD FLDBRU FDRBUL FULBDR URBDLF DRFULB".split(" "),
$a="&nbsp;&nbsp; z2 z' z&nbsp; x' x&nbsp;".split(" "),fb=["FRUBLD","RBULFD","BLUFRD","LFURBD"],mb;execMain(function(){function a(){var b=$(this).parent(),c="DULRFB".indexOf(b.html()[0]);Sa(mb,c);var e=$(this).html();if("ec"==e){var n=Sa(mb,c);e="xx"}else if("xx"==e){var r=mb;y();n=[];for(e=0;4>e;e++){for(var x=0,Na=0,z=[8,10,12],Qa=[12,15,18],Ta=0;Ta<r.length;Ta++)for(var Pa=fb[e].indexOf("FRUBLD".charAt(nb[c].indexOf("FRUBLD".charAt(r[Ta][0])))),Va=r[Ta][2],Xa=0;Xa<Va;Xa++)x=Ra(x,Pa),Na=h(Na,Pa),
z=[w[z[0]][Pa],w[z[1]][Pa],w[z[2]][Pa]],Qa=[f[Qa[0]][Pa],f[Qa[1]][Pa],f[Qa[2]][Pa]];n.push([Na,x,z,Qa])}r=[];Ta=!1;for(x=0;!Ta;){for(e=0;4>e;e++){Na=n[e];if(Ua(Na[0],Na[1],[Na[2][0],Na[2][1]],[Na[3][0],Na[3][1]],Oa,x,-1,r)){Ta=!0;break}if(Ua(Na[0],Na[1],[Na[2][0],Na[2][2]],[Na[3][0],Na[3][2]],ab,x,-1,r)){Ta=!0;break}}x++}r.reverse();for(Ta=0;Ta<r.length;Ta++)r[Ta]=fb[e]["FRUBLD".indexOf(r[Ta][0])]+r[Ta][1];n=r;e="<<"}else n=Ya(mb)[c],e="ec";e=$("<span />").html(e).addClass("click").click(a);b.empty().append(hb[c]+
"(",e,"): "+$a[c],tools.getSolutionSpan(n),"<br>")}function b(b){if(b)if(tools.isPuzzle("333")){var c=tools.getCurScramble()[1];b.empty();mb=kernel.parseScramble(c,"FRUBLD");c=Ya(mb);for(var e=0;6>e;e++){var f=$('<span class="sol"/>'),n=$("<span />").html("ec").addClass("click").click(a);f.append(hb[e]+"(",n,"): "+$a[e],tools.getSolutionSpan(c[e]),"<br>");b.append(f)}}else b.html(IMAGE_UNAVAILABLE)}$(function(){tools.regTool("cross",TOOLS_SOLVERS+">"+TOOLS_CROSS,b)})});return{solve:Ya,getEasyCross:function(b){n();
var c=Math.min(b%10,8),e=Math.min(~~(b/10),8);b=Math.min(c,e);c=Math.max(c,e);e=[0,1,16,174,1568,11377,57758,155012,189978,190080];e=mathlib.rn(e[c+1]-e[b])+1;var f;for(f=0;190080>f;f++){var h=a(bb,f);if(h<=c&&h>=b&&0==--e)break}return db(f)},getEasyXCross:function(b){n();Wa();b=Math.max(0,Math.min(b,8));for(var c=[1,16,174,1568,11377,57758,155012,189978,190080][b],f=!1;!f;){for(var h=[],w=0;500>w;w++)h.push(mathlib.rn(c));h.sort(function(a,b){return b-a});var r=[],x=0;for(w=0;190080>w;w++)if(!(a(bb,
w)>b)){for(;h[h.length-1]==x;)r.push(w),h.pop();if(0==h.length)break;x++}h=mathlib.rndPerm(500);for(w=0;500>w;w++){var y=r[h[w]],Na=~~(y/384),z=24*Na+(y>>4)%24,Oa=Na<<4|y&15,Sa=[];Ta(z,Oa,b,-1,Sa);x=mathlib.rndPerm(8).slice(4);var Qa=mathlib.rndPerm(8),Ra=[0,0,0,0,0,0,0,0,0,0,0,0];Sa=4;for(var Pa=0;12>Pa;Pa++)Na>=e[11-Pa][Sa]?(Na-=e[11-Pa][Sa--],Ra[Pa]=-1):Ra[Pa]=Qa.pop();for(Pa=0;4>Pa;Pa++)if(x[Pa]=3*x[Pa]+mathlib.rn(3),Qa[Pa]=2*Ra.indexOf(Pa)+mathlib.rn(2),!(f||a(jb[Pa],24*x[Pa]+Qa[Pa])>b))for(Sa=
[],Na=0;Na<=b;Na++)if(Xa(z,Oa,Qa[Pa],x[Pa],Pa,Na,-1,Sa)){f=!0;break}if(f){b=db(y);b[2]=mathlib.valuedArray(8,-1);b[3]=mathlib.valuedArray(8,-1);c=[7,6,5,4,10,9,8,11,3,2,1,0];f=[6,5,4,7,2,1,0,3];for(w=0;4>w;w++)b[0][c[Qa[w]>>1]]=c[w+4],b[1][c[Qa[w]>>1]]=Qa[w]%2,b[2][f[~~(x[w]/3)]]=f[w+4],b[3][f[~~(x[w]/3)]]=(30-x[w])%3;return b}}}}}}(mathlib.createMove,mathlib.edgeMove,mathlib.createPrun,mathlib.setNPerm,mathlib.getNPerm,mathlib.Cnk,mathlib.getPruning);execMain(function(b,Pa,x,z){function c(a,b){var c=[0,0,0,0,0,0,0,0,0,0,0,0],e=a%12,h=~~(a/12);h>=e&&h++;c[e]=2;c[h]=4;Pa(c,b);for(var n=0;12>n;n++)1==c[n]>>1?e=n:2==c[n]>>1&&(h=n);h>e&&h--;return 12*h+e}function e(){e=$.noop;b(Ra,2048,[Pa,"o",12,-2]);b(Za,132,c)}function a(a,b){e();var c=kernel.parseScramble(a,"FRUBLD");b.empty();for(var h=0;12>h;h++){for(var x=0,n=116,Na=0;Na<c.length;Na++)for(var z=y[h].indexOf("FRUBLD".charAt(c[Na][0])),Pa=c[Na][2],Ua=0;Ua<Pa;Ua++)x=Ra[z][x],n=Za[z][n];x=r.search([x,
n],0);for(Na=0;Na<x.length;Na++)x[Na]="FRUBLD".charAt(x[Na][0])+" 2'".charAt(x[Na][1]);b.append($('<span class="sol">').append(Qa[h]+": "+Wa[h],tools.getSolutionSpan(x)),"<br>")}}function h(b,c){if(c)if(tools.isPuzzle("333")){var h=tools.getCurScramble();if("eocross"==b){h=h[1];e();h=kernel.parseScramble(h,"FRUBLD");c.empty();for(var r=0;12>r;r++){for(var x=0,n=116,z=129,Pa=0;Pa<h.length;Pa++)for(var Ua=y[r].indexOf("FRUBLD".charAt(h[Pa][0])),Xa=h[Pa][2],bb=0;bb<Xa;bb++)x=Ra[Ua][x],n=Za[Ua][n],z=
Za[Ua][z];x=Na.search([x,n,z],0);for(Pa=0;Pa<x.length;Pa++)x[Pa]="FRUBLD".charAt(x[Pa][0])+" 2'".charAt(x[Pa][1]);c.append($('<span class="sol">').append(Qa[r]+": "+Wa[r],tools.getSolutionSpan(x)),"<br>")}}else a(h[1],c)}else c.html(IMAGE_UNAVAILABLE)}var Ra=[],Za=[],r=new mathlib.Solver(6,3,[[0,[Pa,"o",12,-2],2048],[116,c,132]]),Na=new mathlib.Solver(6,3,[[0,[Pa,"o",12,-2],2048],[116,c,132],[129,c,132]]),Qa="D(LR) D(FB) U(LR) U(FB) L(UD) L(FB) R(UD) R(FB) F(LR) F(UD) B(LR) B(UD)".split(" "),y="FRUBLD RBULFD FLDBRU LBDRFU FDRBUL DBRUFL FULBDR UBLDFR URBDLF RDBLUF DRFULB RUFLDB".split(" "),
Wa="&nbsp;&nbsp;&nbsp; &nbsp;y&nbsp; z2&nbsp; z2y z'&nbsp; z'y &nbsp;z&nbsp; z&nbsp;y x'&nbsp; x'y &nbsp;x&nbsp; x&nbsp;y".split(" ");$(function(){tools.regTool("eoline",TOOLS_SOLVERS+">"+TOOLS_EOLINE,h.bind(null,"eoline"));tools.regTool("eocross",TOOLS_SOLVERS+">EOCross",h.bind(null,"eocross"))});return{solve:a}},[mathlib.createMove,mathlib.edgeMove,mathlib.createPrun,mathlib.getPruning]);execMain(function(b){function Pa(c,h){e.ca=[0,0,0,0,0,0,0,0];for(var r=1;3>r;r++){var x=c%24;c=~~(c/24);e.ca[x&7]=r|x&24}b.CornMult(e,b.moveCube[3*h],a);x=[];for(r=0;8>r;r++)x[a.ca[r]&7]=r|a.ca[r]&24;c=0;for(r=2;0<r;r--)c=24*c+x[r];return c}function x(c,h){e.ea=[0,0,0,0,0,0,0,0,0,0,0,0];for(var r=1;4>r;r++){var x=c%24;c=~~(c/24);e.ea[x>>1]=r<<1|x&1}b.EdgeMult(e,b.moveCube[3*h],a);x=[];for(r=0;12>r;r++)x[a.ea[r]>>1]=r<<1|a.ea[r]&1;c=0;for(r=3;0<r;r--)c=24*c+x[r];return c}function z(a,b){b.empty();
for(var c=0;4>c;c++){a:{var e=a,Na=Za[c];var z=[126];for(var Qa=[11964],Ya=1;4>Ya;Ya++)z[Ya]=Pa(z[Ya-1],4),Qa[Ya]=x(Qa[Ya-1],4);var Sa=[];Na=Na.split("");for(var n=0;4>n;n++){Sa[n]=Na.join("");var db=kernel.parseScramble(e,Sa[n]);for(Ya=0;Ya<db.length;Ya++)for(var lb=db[Ya][0],cb=0;cb<db[Ya][2];cb++)z[n]=Pa(z[n],lb),Qa[n]=x(Qa[n],lb);mathlib.circle(Na,0,2,3,5)}for(Na=1;12>Na;Na++)for(n=0;4>n;n++)if(e=h.search([z[n],Qa[n]],1==Na?0:Na,Na)){e.push(n);z=e;break a}z=void 0}Qa=z.pop();0==c%2&&(Qa=(Qa+2)%
4);for(n=0;n<z.length;n++)z[n]="URFDLB".charAt(z[n][0])+" 2'".charAt(z[n][1]);b.append($('<span class="sol">').append(Ra[c]+": "+r[c]+["&nbsp;&nbsp;&nbsp;","x'&nbsp;","x2&nbsp;","x&nbsp;&nbsp;"][Qa],tools.getSolutionSpan(z)),"<br>")}}function c(a){if(a)if(tools.isPuzzle("333")){var b=tools.getCurScramble();z(b[1],a)}else a.html(IMAGE_UNAVAILABLE)}var e=new b,a=new b,h=new mathlib.Solver(6,3,[[126,Pa,576],[11964,x,13824]]),Ra=["LU","LD","FU","FD"],Za=["DRBULF","URFDLB","DBLUFR","UBRDFL"],r=["&nbsp;&nbsp;",
"&nbsp;&nbsp;","y&nbsp;","y&nbsp;"];$(function(){tools.regTool("roux1",TOOLS_SOLVERS+">"+TOOLS_ROUX1,c)});return{solve:z}},[mathlib.CubieCube]);var gsolver=function(){function b(a,b){for(var e=0;e<x.length;e++)b=a(b,x[e]);for(e=0;e<c.length;e++)b=a(b,c[e]);return b}function Pa(a,b){var c={};b=b||" 2'";for(var e in a)for(var h=0;h<b.length;h++)c[e+b[h]]=a[e];return c}var x,z,c,e=function(){function a(a,b){for(var e=a.split(""),h=c["URF".indexOf(b[0])],r="? 2'".indexOf(b[1]),n=0;n<h.length;n++)mathlib.acycle(e,h[n],r);return e.join("")}var b="URFDLB".split(""),c=[[[0,1,3,2],[4,8,16,20],[5,9,17,21]],[[4,5,7,6],[1,22,13,9],[3,20,15,11]],[[8,
9,11,10],[2,4,13,19],[3,6,12,17]]],e=new mathlib.gSolver("XXXX???????????????????? ????XXXX???????????????? ????????XXXX???????????? ????????????XXXX???????? ????????????????XXXX???? ????????????????????XXXX".split(" "),a,Pa({U:1,R:2,F:3}));return function(c,h){x=kernel.parseScramble(c,"URF");for(var r="UUUURRRRFFFFDDDDLLLLBBBB",y=0;y<x.length;y++){var z=x[y];r=a(r,"URF".charAt(z[0])+" 2'".charAt(z[2]-1))}for(z=0;6>z;z++){var n=[];for(y=0;24>y;y++)n.push(r[y]=="URFDLB".charAt(z)?"X":"?");y=e.search(n.join(""),
0);h.append(b[z]+": ",tools.getSolutionSpan(y),"<br>")}}}(),a=function(){function e(a,b){for(var c=a.split(""),e=Ua["URFDLBurfdlbMESxyz".indexOf(b[0])],f="? 2'".indexOf(b[1]),h=0;h<e.length;h++)mathlib.acycle(c,e[h],f);return c.join("")}function h(a,b,c){c+=" // orientation \n";for(var e=0;e<b.length&&void 0!=b[e];e++)c+=b[e].join(" ").replace(/\s+/g," ")+" // "+a[e].head+(0==b[e].length?" skip":"")+"\n";return"https://alg.cubing.net/?alg="+encodeURIComponent(c)}function r(a,n){var f=+new Date,r=
[null,0],x=[];c=[];for(var y=0;y<a.length;y++){if(!a[y].solv){a[y].solv={};for(var Na in a[y].step)a[y].solv[Na]=new mathlib.gSolver([Na],e,a[y].move)}var Oa=void 0,Sa=e,Pa=a[y].solv,Qa=a[y].step,Ra=a[y].fmov||[];r=r[1];var Ta=a[y].maxl||10,Ua=0;a:for(;Ua<Ta+1;Ua++)for(var Va in Pa)if((Qa[Va]|r)==Qa[Va]){var Xa=b(Sa,Va);Oa=Pa[Va].search(Xa,0,Ua);if(void 0!=Oa){r|=Qa[Va];break a}for(var Wa=0;Wa<Ra.length;Wa++)if(Oa=Sa(Xa,Ra[Wa]),Oa=Pa[Va].search(Oa,0,Ua),void 0!=Oa){Oa.unshift(Ra[Wa]);r|=Qa[Va];break a}}r=
[Oa,r];x[y]=r[0];if(void 0==r[0]){n.append(a[y].head+": &nbsp;(no solution found in %d moves)".replace("%d",a[y].maxl||10),"<br>");break}n.append(a[y].head+": ",0==x[y].length?"&nbsp;(skip)":tools.getSolutionSpan(x[y]),"<br>");c=c.concat(x[y]);DEBUG&&console.log("[step solver]",a[y].head+": ",x[y],"->",r[1],b(e,mathlib.SOLVED_FACELET),+new Date-f)}n.append($('<a class="click" target="_blank">alg.cubing.net</a>').attr("href",h(a,x,w)+"&setup="+encodeURIComponent(z)))}function Ra(){w=gb.val();a.exec(eb,
z,Va.empty())}var Ua=[[[0,2,8,6],[1,5,7,3],[18,36,45,9],[19,37,46,10],[20,38,47,11]],[[9,11,17,15],[10,14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26]],[[18,20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38]],[[27,29,35,33],[28,32,34,30],[24,15,51,42],[25,16,52,43],[26,17,53,44]],[[36,38,44,42],[37,41,43,39],[0,18,27,53],[3,21,30,50],[6,24,33,47]],[[45,47,53,51],[46,50,52,48],[2,36,33,17],[1,39,34,14],[0,42,35,11]],[[0,2,8,6],[1,5,7,3],[18,36,45,9],[19,37,46,10],[20,38,47,11],[21,39,48,
12],[22,40,49,13],[23,41,50,14]],[[9,11,17,15],[10,14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26],[1,52,28,19],[4,49,31,22],[7,46,34,25]],[[18,20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38],[3,10,32,43],[4,13,31,40],[5,16,30,37]],[[27,29,35,33],[28,32,34,30],[24,15,51,42],[25,16,52,43],[26,17,53,44],[21,12,48,39],[22,13,49,40],[23,14,50,41]],[[36,38,44,42],[37,41,43,39],[0,18,27,53],[3,21,30,50],[6,24,33,47],[1,19,28,52],[4,22,31,49],[7,25,34,46]],[[45,47,53,51],[46,50,52,48],[2,
36,33,17],[1,39,34,14],[0,42,35,11],[5,37,30,16],[4,40,31,13],[3,43,32,10]],[[1,19,28,52],[4,22,31,49],[7,25,34,46]],[[21,12,48,39],[22,13,49,40],[23,14,50,41]],[[3,10,32,43],[4,13,31,40],[5,16,30,37]],[[9,11,17,15],[10,14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26],[36,42,44,38],[37,39,43,41],[0,53,27,18],[3,50,30,21],[6,47,33,24],[1,52,28,19],[4,49,31,22],[7,46,34,25]],[[0,2,8,6],[1,5,7,3],[18,36,45,9],[19,37,46,10],[20,38,47,11],[27,33,35,29],[28,30,34,32],[24,42,51,15],[25,43,52,16],[26,44,
53,17],[21,39,48,12],[22,40,49,13],[23,41,50,14]],[[18,20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38],[45,51,53,47],[46,48,52,50],[2,17,33,36],[1,14,34,39],[0,11,35,42],[3,10,32,43],[4,13,31,40],[5,16,30,37]]],Xa=Pa({U:0,R:17,F:34,D:48,L:65,B:82}),Ta=Pa({U:0,R:17,F:34,L:65,B:82}),Ya=Pa({U:0,R:17,M:97,r:113}),Sa=Pa({U:0,R:17,L:65}),n=[{move:Xa,maxl:8,head:"Cross",step:{"----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-":0}},{move:Ta,head:"F2L-1",step:{"----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-":1,
"----U--------R--R----FF-FF-DD-DDD-D-----LL-LL----B--B-":2,"----U--------RR-RR----F--F--D-DDD-DD----L--L----BB-BB-":4,"----U--------R--R-----F--F--D-DDDDD----LL-LL-----BB-BB":8}},{move:Ta,head:"F2L-2",step:{"----U-------RR-RR----FFFFFFDDDDDD-D-----LL-LL----B--B-":3,"----U-------RRRRRR----FF-FF-DDDDD-DD----L--L----BB-BB-":5,"----U--------RR-RR---FF-FF-DD-DDD-DD----LL-LL---BB-BB-":6,"----U-------RR-RR-----FF-FF-DDDDDDD----LL-LL-----BB-BB":9,"----U--------R--R----FF-FF-DD-DDDDD----LLLLLL----BB-BB":10,
"----U--------RR-RR----F--F--D-DDDDDD---LL-LL----BBBBBB":12}},{move:Ta,head:"F2L-3",step:{"----U-------RRRRRR---FFFFFFDDDDDD-DD----LL-LL---BB-BB-":7,"----U-------RR-RR----FFFFFFDDDDDDDD----LLLLLL----BB-BB":11,"----U-------RRRRRR----FF-FF-DDDDDDDD---LL-LL----BBBBBB":13,"----U--------RR-RR---FF-FF-DD-DDDDDD---LLLLLL---BBBBBB":14}},{move:Ta,head:"F2L-4",step:{"----U-------RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB":15}}],Za=[{move:Xa,maxl:10,fmov:["x ","x2","x'"],head:"Step 1",step:{"---------------------F--F--D--D--D-----LLLLLL-----B--B":0}},
{move:Ya,maxl:16,head:"Step 2",step:{"------------RRRRRR---F-FF-FD-DD-DD-D---LLLLLL---B-BB-B":1}}],lb=[{move:Xa,maxl:8,head:"2x2x2",step:{"---------------------FF-FF-DD-DD--------LL-LL---------":1,"------------------------------DD-DD----LL-LL-----BB-BB":2}},{move:Xa,maxl:10,head:"2x2x3",step:{"---------------------FF-FF-DD-DD-DD----LLLLLL----BB-BB":3}}],cb=[{move:Xa,maxl:10,head:"EOLine",step:{"-H-HUH-H-----R-------HFH-F--D-HDH-D-----L-------HBH-B-":0}},{move:Sa,maxl:16,head:"ZZF2L1",step:{"-H-HUH-H----RRRRRR---HFF-FF-DDHDD-DD----L-------BBHBB-":1,
"-H-HUH-H-----R-------FFHFF-DD-DDHDD----LLLLLL---HBB-BB":2}},{move:Sa,maxl:16,head:"ZZF2L2",step:{"-H-HUH-H----RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB":3}}],jb=[{move:Xa,maxl:7,head:"EO",step:{"-H-HUH-H-----R-------HFH----H-HDH-H-----L-------HBH---":0}},{move:Xa,maxl:10,head:"DR",step:{"UUUUUUUUU---RRR------FFF---UUUUUUUUU---RRR------FFF---":1}}],bb,gb,eb,Va,w="z2";execMain(function(){for(var a="z2;;z ;z';x ;x'".split(";"),b=0;6>b;b++)for(var c=0;3>c;c++)a.push(a[b]+" y"+" 2'".charAt(c));gb=$("<select>");
for(b=0;b<a.length;b++)gb.append($("<option>").val(a[b]).html(a[b]))});return{exec:function(a,h,y){if("222"==a){x=kernel.parseScramble(h,"URFDLB");for(a=0;a<x.length;a++)x[a]="URFDLB".charAt(x[a][0])+" 2'".charAt(x[a][2]-1);h="URF UFL ULB UBR DFR DLF DBL DRB".split(" ");var f="----UU-UURR-RR-----FF-FF------------------------------ ---UU-UU----------FF-FF--------------LL-LL------------ UU-UU-------------------------------LL-LL-----BB-BB--- -UU-UU----RR-RR------------------------------BB-BB---- ------------RR-RR-----FF-FF-DD-DD--------------------- ---------------------FF-FF-DD-DD--------LL-LL--------- ------------------------------DD-DD----LL-LL-----BB-BB -------------RR-RR-------------DD-DD------------BB-BB-".split(" ");
bb=bb||new mathlib.gSolver(f,e,Xa);for(a=0;8>a;a++){y.append(h[a]+": ");c=[];var z=bb.search(b(e,f[a]),0);z?y.append(tools.getSolutionSpan(z),"<br>"):y.append("no solution found<br>")}}else{Va=y;eb=a;f=w.split(" ");z=[0,1,2,3,4,5];for(var Na=[[5,1,0,2,4,3],[0,2,4,3,5,1],[1,3,2,4,0,5]],Oa=0;Oa<f.length;Oa++)if(f[Oa][0])for(var Sa="xyz".indexOf(f[Oa][0]),Pa="? 2'".indexOf(f[Oa][1]||" "),Qa=0;Qa<Pa;Qa++)for(var Ta=0;6>Ta;Ta++)z[Ta]=Na[Sa][z[Ta]];for(Ta=0;6>Ta;Ta++)z[Ta]="URFDLB".charAt(z[Ta]);f=z.join("");
x=kernel.parseScramble(h,"URFDLB");for(h=0;h<x.length;h++)x[h]=f.charAt(x[h][0])+" 2'".charAt(x[h][2]-1);y.append("Orientation:",gb.unbind("change").change(Ra),"<br>");"cf"==a&&r(n,y);"roux"==a&&r(Za,y);"petrus"==a&&r(lb,y);"zz"==a&&r(cb,y);"eodr"==a&&r(jb,y)}},move:e}}(),h=function(){function a(a,b){if(!a)return null;b=~~b;a=a.split("|");if(0==b){var c=a[0].slice(6);a[0]=a[0].slice(0,6)+a[1].slice(6);a[1]=a[1].slice(0,6)+c}else if(c=0<b?0:1,b=Math.abs(b),a[c]=a[c].slice(b)+a[c].slice(0,b),/[a-h]/.exec(a[c][0]+
a[c][6]))return null;return a.join("|")}function e(a){for(var b=0,c=0,e=[],h=0;h<a.length;h++)0==a[h]?(0==b&&0==c?e.push("/"):e.push((b+5)%12-5+","+((c+5)%12-5)+"/"),b=c=0):0<a[h]?b+=~~a[h]:c-=~~a[h];return e}for(var h={0:33},r=1;12>r;r++)h[""+r]=0,h[""+-r]=16;var z,Pa;return function(r,y){z=z||new mathlib.gSolver(["0Aa0Aa0Aa0Aa|Aa0Aa0Aa0Aa0","0Aa0Aa0Aa0Aa|0Aa0Aa0Aa0Aa","Aa0Aa0Aa0Aa0|Aa0Aa0Aa0Aa0","Aa0Aa0Aa0Aa0|0Aa0Aa0Aa0Aa"],a,h);Pa=Pa||new mathlib.gSolver(["0Aa0Aa0Aa0Aa|Bb1Bb1Bb1Bb1","0Aa0Aa0Aa0Aa|1Bb1Bb1Bb1Bb",
"Aa0Aa0Aa0Aa0|Bb1Bb1Bb1Bb1","Aa0Aa0Aa0Aa0|1Bb1Bb1Bb1Bb"],a,h);x=[];for(var Na=/^\s*\(\s*(-?\d+),\s*(-?\d+)\s*\)\s*$/,n=r.split("/"),Qa=0;Qa<n.length;Qa++){if(!/^\s*$/.exec(n[Qa])){var Ra=Na.exec(n[Qa]);~~Ra[1]&&x.push((~~Ra[1]+12)%12);~~Ra[2]&&x.push(-(~~Ra[2]+12)%12)}x.push(0)}0<x.length&&x.pop();c=[];Na=z.search(b(a,"0Aa0Aa0Aa0Aa|Aa0Aa0Aa0Aa0"),0);y.append("Shape: ",tools.getSolutionSpan(e(Na)),"<br>");c=c.concat(Na);Na=Pa.search(b(a,"0Aa0Aa0Aa0Aa|Bb1Bb1Bb1Bb1"),0);y.append("Color: ",tools.getSolutionSpan(e(Na)),
"<br>")}}(),Ra=function(){function a(a,b){for(var c=a.split(""),h=e["RULBrbxy".indexOf(b[0])],r="? '*".indexOf(b[1]),x=0;x<h.length;x++)mathlib.acycle(c,h[x],r);return c.join("")}var e=[[[5,25,15],[9,28,17],[7,29,16],[8,26,19],[23,14,4]],[[0,20,25],[2,21,27],[4,22,29],[1,23,26],[19,7,11]],[[10,15,20],[13,18,24],[11,16,23],[14,19,22],[29,1,8]],[[25,20,15],[29,23,19],[28,21,18],[27,24,17],[13,9,2]],[[0,25,5],[4,26,7],[3,27,9],[2,28,6],[17,12,21]],[[0,20,25],[2,21,27],[4,22,29],[1,23,26],[19,7,11]],
[[0,25,15,10],[1,27,19,13],[2,29,18,11],[3,26,17,14],[4,28,16,12],[6,7,9,8],[21,23,24,22]],[[5,10,20,25],[6,11,21,26],[7,12,22,27],[8,13,23,28],[9,14,24,29],[1,2,4,3],[16,18,19,17]],[]],h;return function(e,r){h=h||new mathlib.gSolver(["?L?L??B?B?UUUUU?R?R???F?F?????","?F?F??L?L?UUUUU?B?B???R?R?????","?R?R??F?F?UUUUU?L?L???B?B?????","?B?B??R?R?UUUUU?F?F???L?L?????"],a,Pa({R:0,r:1,B:2,b:3}," '"));x=kernel.parseScramble(e,"RULB");for(var y=0;y<x.length;y++)x[y]="RULB".charAt(x[y][0])+" 2'".charAt(x[y][2]-
1);var z="URFDLB".split(""),Na="UUUUU?RR???FF????????LL???BB?? ???BBUUUUU??L?L?FF????????R?R? ?B?B??R?R?UUUUU?F?F???L?L????? ????????RR???BBUUUUU???LL???FF ?BB????????R?R????FFUUUUU??L?L ??F?F??R?R???????B?B?L?L?UUUUU".split(" ");for(y=0;6>y;y++){c=[];var Sa=["x*","y ",null,"x ","y*","y'"],n=~~(b(a,"U????R????F????D????L????B????").indexOf(z[y])/5);Sa[n]&&c.push(Sa[n]);(Sa=h.search(b(a,Na[y]),0))?(r.append(z[y]+": "),c[0]&&r.append("&nbsp;"+c[0].replace("'","2").replace("*","'")),r.append(tools.getSolutionSpan(Sa),
"<br>")):r.append(z[y]+": no solution found<br>")}}}(),Za=function(){function a(a,b){for(var c=a.split(""),h=e["RULB".indexOf(b[0])],r="? '".indexOf(b[1]),x=0;x<h.length;x++)mathlib.acycle(c,h[x],r);return c.join("")}var e=[[[5,9,22],[0,7,20],[1,8,18]],[[3,16,11],[1,14,6],[2,12,7]],[[4,23,15],[2,18,13],[0,19,14]],[[10,17,21],[8,12,19],[6,13,20]]],h;return function(e,r){h=h||new mathlib.gSolver(["????FF??RRR??L?L?L?DDDDD"],a,Pa({R:0,U:1,L:2,B:3}," '"));x=kernel.parseScramble(e,"RULBrulb");e=[];for(var y=
0;y<x.length;y++)1==x[y][1]&&e.push("RULB".charAt(x[y][0])+" 2'".charAt(x[y][2]-1));var z=["D","L","R","F"],Na=[["RULB","LUBR","BURL"],["URBL","LRUB","BRLU"],["RLBU","ULRB","BLUR"],["RBUL","UBLR","LBRU"]];for(y=0;4>y;y++){c=[];var Sa,n=0;a:for(;99>n;n++)for(var Ra=0;3>Ra;Ra++){var Qa=Na[y][Ra];x=[];for(var Ua=0;Ua<e.length;Ua++)x.push("RULB"[Qa.indexOf(e[Ua][0])]+e[Ua][1]);if(Sa=h.search(b(a,"????FF??RRR??L?L?L?DDDDD"),n,n)){for(Ua=0;Ua<Sa.length;Ua++)Sa[Ua]=Qa["RULB".indexOf(Sa[Ua][0])]+Sa[Ua][1];
break a}}Sa?r.append(z[y]+": ",tools.getSolutionSpan(Sa),"<br>"):r.append(z[y]+": no solution found<br>")}}}();(function(){function a(a,b){var c=a.indexOf("-"),e=c>>2;c&=3;var h=a.split(""),n=~~b[1],r=[e<<2|c];if("V"==b[0]){if("$"==h[e<<2|n])return null;for(var x=c>n?-1:1;c!=n;)c+=x,r.push(e<<2|c)}else{if("$"==h[n<<2|c])return null;for(x=e>n?-1:1;e!=n;)e+=x,r.push(e<<2|c)}r.reverse();mathlib.acycle(h,r);return h.join("")}function b(a){var b=[];a=a.split("");for(var c=0;c<a.length;c++)"?"==a[c]&&(a[c]=
"-",b.push(a.join("")),a[c]="?");return b}function e(b,e){for(var h=[],n=0;n<e.length;n++)h[n]=b[e[n]];b=h.join("");for(n=0;n<c.length;n++)b=a(b,c[n]);return b}function h(a){do{var b=mathlib.rndPerm(a*a);var c=(a-1-~~(b.indexOf(b.length-1)/a))*(a-1);for(var e=0;e<b.length;e++)for(var h=e+1;h<b.length;h++)b[e]>b[h]&&b[e]!=b.length-1&&c++}while(0!=c%2);return b}function r(a,b){var n=+new Date,r=[],x=0;if(4==a){r[0]=h(4);for(var y=r[0],Na=[],Pa=[0,4,8,12,1,5,9,13,2,6,10,14,3,7,11,15],Qa=0;16>Qa;Qa++)Na[Qa]=
Pa[y[Pa[Qa]]];r[1]=Na;y=0;a:for(;99>y;y++)for(x=0;2>x;x++)if(Na=r[x].indexOf(r[x].length-1),c=["V"+(Na&3),"H"+(Na>>2)],Na=z.search(e("0123???????????-",r[x]),y,y)){c=c.concat(Na);break a}y=Ra.search(e("01234???8???c??-",r[x]).replace(/[0123]/g,"$"),0);c=c.concat(y)}else if(3==a){y=h(3);Na=[5,6,7,9,10,11,13,14,15];for(Pa=0;16>Pa;Pa++)r[Pa]=Na[y[Na.indexOf(Pa)]]||Pa;Na=r.indexOf(r.length-1);c=["V"+(Na&3),"H"+(Na>>2)];r=[r]}y=Sa.search(e("0123456789abcde-",r[x]).replace(/[012348c]/g,"$"),0);c=c.concat(y);
DEBUG&&console.log("[15p solver]",x,e("0123456789abcde-",r[x]),c.join(""),c.length,+new Date-n);y=b.slice(3==a?3:4);n=[];Pa=1==x?"VH":"HV";x=-1==y.indexOf("a")?["DR","UL"]:["",""];r=-1!=y.indexOf("m");y=-1!=y.indexOf("p");var w=[-1,-1];for(Na=0;Na<c.length;Na++){var f=~~c[Na][1],Oa=Pa.indexOf(c[Na][0]);-1!=w[Oa]&&w[Oa]!=f&&(0<n.length&&n[n.length-1][0]==Oa?(Qa=n[n.length-1],Qa[1]+=f-w[Oa],0==Qa[1]&&n.pop()):n.push([Oa,f-w[Oa]]));w[Oa]=f}for(Na=0;Na<n.length;Na++){Qa=n[Na];Pa=x[r!=0<Qa[1]?0:1][Qa[0]];
Qa=Math.abs(Qa[1]);n[Na]=[];if(y)n[Na].push(Pa+Qa);else for(;0<Qa--;)n[Na].push(Pa);n[Na]=n[Na].join(" ")}n.reverse();return n.join(" ").replace(/1/g,"")}var x=Pa({V:0,H:1},"0123"),z=new mathlib.gSolver(b("0123????????????"),a,x),Ra=new mathlib.gSolver(b("$$$$4???8???c???"),a,x),Sa=new mathlib.gSolver(["$$$$$567$9ab$de-"],a,x);scrMgr.reg(["15prp","15prap","15prmp"],r.bind(null,4))(["8prp","8prap","8prmp"],r.bind(null,3))})();var r=execMain(function(){function e(a){var b=gb[0].getBoundingClientRect(),
c=a.offsetX/30*gb[0].width/b.width;a=a.offsetY/30*gb[0].height/b.height;for(b=0;6>b;b++)if(c>=3.3*Oa[b]&&c<=3.3*Oa[b]+3&&a>=3.3*ab[b]&&a<=3.3*ab[b]+3){var e=~~(c-3.3*Oa[b]),n=~~(a-3.3*ab[b]);Va=Va.split("");Va[9*b+3*n+e]=f;Va=Va.join("");h(eb,b,e,n,Va)}c>=Oa[6]&&c<=Oa[6]+5&&a>=ab[6]&&a<=ab[6]+2&&(e=~~(c-Oa[6]),n=~~(a-ab[6]),f="URFDLB-XYZ".charAt(2*e+n),$.ctxDrawPolygon(eb,w[f],hb,[30,1.5,1.5]));1==Sa?Ya():2==Sa&&Ta()}function h(a,b,c,e,f){$.ctxDrawPolygon(a,w[f[9*b+3*e+c]],[[c,c,c+1,c+1],[e,e+1,e+
1,e]],[30,3.3*Oa[b],3.3*ab[b]])}function r(a){a=n.val();n.val("");kernel.blur();"input"==a?(a=prompt("U1U2...U9R1..R9F1..D1..L1..B1..B9",Va),null!=a&&(nb.exec(a)?z(a):logohint.push("Invalid Input"))):""!=a&&z(a)}function z(a){Va=a;a=eb;var b=Va,c=kernel.getProp("imgSize")/48;gb.width(39*c+"em");gb.height(29*c+"em");gb.attr("width",391);gb.attr("height",87/9*30+1);for(c=0;6>c;c++)for(var e=0;3>e;e++)for(var n=0;3>n;n++)h(a,c,e,n,b);for(e=0;5>e;e++)for(n=0;2>n;n++)$.ctxDrawPolygon(a,w["URFDLB-XYZ".charAt(2*
e+n)],[[e,e,e+1,e+1],[n,n+1,n+1,n]],[30,7.25,.5]);$.ctxDrawPolygon(a,w[f],hb,[30,1.5,1.5]);1==Sa?Ya():2==Sa&&Ta()}function Ra(){if(Sa){var a=$a[1].searchNext(1E3,1E3);var b=jb.length+" sol(s), @"+~~((+new Date-fb)/1E3)+"s|"+$a[1].maxl+"f";a&&jb.push(a.join(" ")+" ("+a.length+"f)");a&&1==Sa?(cb.html(jb.join("\n")),cb[0].scrollTop=cb[0].scrollHeight,mb=0):(cb.html(jb.join("\n")+"\n"+b),cb[0].scrollTop=cb[0].scrollHeight,mb=setTimeout(Ra,1))}}function Xa(){$a[0]!=Va&&($a[0]=Va,$a[1]=new mathlib.gSolver([Va],
a.move,Pa({U:0,R:17,F:34,D:48,L:65,B:82})));var c=b(a.move,Va);$a[1].search(c,0,0);fb=+new Date;jb=[];Ra()}function Ta(){0==Sa?(Za.val("Stop Solve!"),lb.prop("disabled",!0),Sa=2):(Za.val("Batch Solve!"),lb.prop("disabled",!1),Sa=0);kernel.blur();Sa&&Xa()}function Ya(){0==Sa?(lb.val("Stop Solve!"),Za.prop("disabled",!0),Sa=1):(lb.val("Single Solve!"),Za.prop("disabled",!1),Sa=0);kernel.blur();Sa&&Xa()}var Sa=0,n=$('<select style="font-size:0.75em;">'),Za=$('<input type="button" value="Batch Solve!" style="font-size:0.75em;">'),
lb=$('<input type="button" value="Single Solve!" style="font-size:0.75em;">'),cb=$('<textarea wrap=off rows="2" cols="30" style="font-size:0.75em;">'),jb=[],bb={"3x3x3":mathlib.SOLVED_FACELET,Empty:"----U--------R--------F--------D--------L--------B----","2x2x2":"----UU-UURR-RR-----FF-FF------------------------------","2x2x3":"---UUUUUURR-RR----FFFFFF-------------LL-LL------------",Cross:"----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-",XCross:"----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-",
EOLine:"-X-XUX-X-----R-------XFX-F--D-XDX-D-----L-------XBX-B-",Roux1:"---------------------F--F--D--D--D-----LLLLLL-----B--B",Domino:"UUUUUUUUU---RRR------FFF---UUUUUUUUU---RRR------FFF---","EO&CO":"XYXYUYXYX----R-------YFY---XYXYDYXYX----L-------YBY---",Corner:"U-U---U-UR-R---R-RF-F---F-FD-D---D-DL-L---L-LB-B---B-B"},gb,eb,Va=mathlib.SOLVED_FACELET,w={U:"#fff",R:"#f00",F:"#0d0",D:"#ff0",L:"#fa0",B:"#00f","-":"#777",X:"#0ff",Y:"#f0f",Z:"#000"},f="-",Oa=[1,2,1,1,0,3,7.25],ab=[0,1,1,2,1,1,.5],hb=[[-.7,
-.7,.7,.7],[-.7,.7,.7,-.7]],nb=/^[URFDLBXYZ-]{54}$/,$a=["",null],fb=0,mb=0;$(function(){gb=$("<canvas>");if(gb[0].getContext){eb=gb[0].getContext("2d");n.append($("<option>").val("").html("Edit subset"));for(var a in bb)n.append($("<option>").val(bb[a]).html(a));n.append($("<option>").val("input").html("..."));z(bb.Cross)}});return function(a,b){x=kernel.parseScramble(a,"URFDLB");for(var f=0;f<x.length;f++)x[f]="URFDLB".charAt(x[f][0])+" 2'".charAt(x[f][2]-1);c=[];b.empty().append(n.unbind("change").change(r),
" ").append(Za.unbind("click").click(Ta),"").append(lb.unbind("click").click(Ya),"<br>").append(cb.empty(),"<br>").append(gb.unbind("mousedown").bind("mousedown",e));Sa&&(mb&&(clearTimeout(mb),mb=0),Xa())}});execMain(function(){function b(b,c){if(c){c.empty();var x=$('<span class="sol"/>'),y=tools.getCurScramble();z=y[1];if("222face"==b&&tools.isPuzzle("222"))e(y[1],x);else if("333udf"==b&&tools.isPuzzle("333")&&/^[URFDLB 2']+$/.exec(y[1]))r(y[1],x);else if(b.startsWith("333")&&tools.isPuzzle("333")&&
/^[URFDLB 2']+$/.exec(y[1]))a.exec(b.slice(3),y[1],x);else if("sq1cs"==b&&tools.isPuzzle("sq1"))h(y[1],x);else if("skbl1"==b&&tools.isPuzzle("skb"))Ra(y[1],x);else if("pyrv"==b&&tools.isPuzzle("pyr"))Za(y[1],x);else{c.html(IMAGE_UNAVAILABLE);return}c.append(x)}}$(function(){tools.regTool("222face",TOOLS_SOLVERS+">"+TOOLS_222FACE,b.bind(null,"222face"));tools.regTool("333cf",TOOLS_SOLVERS+">Cross + F2L",b.bind(null,"333cf"));tools.regTool("333roux",TOOLS_SOLVERS+">Roux S1 + S2",b.bind(null,"333roux"));
tools.regTool("333petrus",TOOLS_SOLVERS+">2x2x2 + 2x2x3",b.bind(null,"333petrus"));tools.regTool("333zz",TOOLS_SOLVERS+">EOLine + ZZF2L",b.bind(null,"333zz"));tools.regTool("333222",TOOLS_SOLVERS+">2x2x2",b.bind(null,"333222"));tools.regTool("333eodr",TOOLS_SOLVERS+">EO + DR",b.bind(null,"333eodr"));tools.regTool("sq1cs",TOOLS_SOLVERS+">SQ1 S1 + S2",b.bind(null,"sq1cs"));tools.regTool("pyrv",TOOLS_SOLVERS+">Pyraminx V",b.bind(null,"pyrv"));tools.regTool("skbl1",TOOLS_SOLVERS+">Skewb Face",b.bind(null,
"skbl1"));tools.regTool("333udf",TOOLS_SOLVERS+">3x3x3 General",b.bind(null,"333udf"))})});return{rubiksCube:a}}();var scrHinter=execMain(function(b){function Pa(a,c,e){var h=new b,x=new b;c&&h.init(c.ca,c.ea);c=99;h.isEqual(a)&&(c=0);for(var z,y=0;y<e.length;y++){var Pa=3*e[y][0];for(z=0;3>z;z++)if(b.EdgeMult(h,b.moveCube[Pa+z],x),b.CornMult(h,b.moveCube[Pa+z],x),x.isEqual(a)){c=z==e[y][2]-1?y+1:y;break}if(c==y)break;Pa=3*e[y][0]+e[y][2]-1;b.EdgeMult(h,b.moveCube[Pa],x);b.CornMult(h,b.moveCube[Pa],x);h.init(x.ca,x.ea)}if(99==c)return null;a=[];for(y=0;y<e.length;y++)Pa=e[y],0==c&&0==y&&(Pa=[Pa[0],Pa[1],(Pa[2]-
z+7)%4]),a.push((y==c?"`":"")+"URFDLB".charAt(Pa[0])+[null,"","2","'"][Pa[2]]);a=a.join(" ");c!=e.length&&(a+="`");return a=kernel.getConjMoves(a,!0)}var x=[],z=null,c=null,e=null,a=new b;return{setScramble:function(b){z=b;b=kernel.getConjMoves(b);b=kernel.parseScramble(b,"URFDLB");x=b.slice();e=c=null;a=new mathlib.CubieCube;for(var h=0;h<b.length;h++){var Pa=3*b[h][0]+b[h][2]-1;0>Pa||18<=Pa||a.selfMoveStr("URFDLB".charAt(b[h][0])+" 2'".charAt(b[h][2]-1))}},getScrCubie:function(){return a},checkScramble:function(b){return""==
z?!1:a.isEqual(b)},checkState:function(h){if(z&&(DEBUG||GiikerCube.isConnected())&&"333"==tools.getCurPuzzle()&&0==timer.getCurTime()){var Ra=null,Za=null;c&&(Ra=Pa(h,c,e));if(null==Ra||-1==Ra.indexOf("`"))Za=Pa(h,null,x),Ra=c=null;if(null==Za&&null==Ra){c=new b;c.init(h.ca,h.ea);Ra=new b;Ra.invFrom(h);var r=new b;b.EdgeMult(Ra,a,r);b.CornMult(Ra,a,r);e=scramble_333.genFacelet(r.toFaceCube());e=kernel.parseScramble(e,"URFDLB");Ra=Pa(h,c,e)}h=Ra?z+"\n=> "+Ra:Za;kernel.pushSignal("scrfix",h+(-1==h.indexOf("`")?
' <span style="color:green"></span>':""))}}}},[mathlib.CubieCube]),giikerutil=execMain(function(b){function Pa(){"n"!=kernel.getProp("giiVRC")&&"g"==kernel.getProp("input")?Va.css("font-size",""):Va.css("font-size","75%");Va.empty();Va.append($("<tr>").append($("<td colspan=2>").append(Sa)));GiikerCube.isConnected()||DEBUG&&bb?(Va.append($("<tr>").append(gb,eb)).append($("<tr>").append($("<td colspan=2>").append(n.unbind("click").click(h)))).append($("<tr>").append($("<td>").append(db),$("<td>").append(lb))).append(jb),
Sa.html(bb).addClass("click").unbind("click").click(Xa),w()):Sa.html(TOOLS_GIIKER+"<br>"+GIIKER_CONNECT).addClass("click").unbind("click").click(Wa)}function x(a){a&&(a.empty().append(Va),Pa())}function z(a){Oa=a[0];gb.html('<span style="font-family:iconfont;"></span> '+(Oa||"??")+"%");bb=a[1];Sa.html(bb)}function c(){GiikerCube.isConnected()?(GiikerCube.getCube().getBatteryLevel().then(function(a){z(a)}),f=setTimeout(c,6E4)):f=0}function e(){kb&&(clearTimeout(kb),kb=0);kernel.getProp("giiAED")&&
(kb=setTimeout(function(){a:{var c=ob.slice(sb);if(1!=c.length%2){var e=[];e[c.length]=new b;for(var f=c.length-1;0<=f;f--)e[f]=new b,b.CubeMult(b.moveCube[c[f][0]],e[f+1],e[f]);for(f=1;3>f;f++){rb=0;if(a(c,0,f,new b,e)){c=f;break a}if(9999<rb)break}}c=99}99!=c&&(c=$a.toFaceCube(),2>=cubeutil.getProgress(c,"cfop")||(c=scramble_333.genFacelet($a.toFaceCube()),10>c.length/3?DEBUG&&console.log("[giiker]","Possible error, gen="+c.replace(/ /g,"")+", ignore"):(DEBUG&&console.log("[giiker]","Almost error, gen="+
c.replace(/ /g,"")+", mark solved"),h())))},1E3))}function a(c,e,f,h,n){if(0==f)return h.isEqual((new b).invFrom(n[e]));for(var w=new b;e<c.length-1;e++){if(~~(c[e][0]/3)%3!=~~(c[e+1][0]/3)%3){var r=(new b).init(h.ca,h.ea);b.CubeMult(r,b.moveCube[c[e+1][0]],w);b.CubeMult(w,b.moveCube[c[e][0]],r);b.CubeMult(r,n[e+2],w);if(9999<++rb)break;if(w.edgeCycles()<f)var x=a(c,e+2,f-1,r,n);if(x)return!0}b.CubeMult(h,b.moveCube[c[e][0]],w);h.init(w.ca,w.ea)}return!1}function h(){mb.invFrom(nb);fb=mathlib.SOLVED_FACELET;
kernel.setProp("giiSolved",hb);sb=ob.length;zb=0;w();ab(fb,["U "],[null,$.now()])}function Ra(a,h,n,r){var x=$.now();n=n||[x,x];bb!=r&&(bb=r,Pa());hb=a;nb.fromFacelet(hb);b.EdgeMult(mb,nb,$a);b.CornMult(mb,nb,$a);fb=$a.toFaceCube();0<h.length&&(a=3*"URFDLB".indexOf(h[0][0])+" 2'".indexOf(h[0][1]),ob.push([a,n[0],n[1]]));0<zb&&Na();10<ob.length&&(50<ob.length-sb&&0<sb&&ob[sb-1][2]<timer.getStartTime()&&(ob=ob.slice(sb),sb=0),a=Za(ob,!0),eb.html('<span style="font-family:iconfont;"></span> '+Math.round(1E5*
(a[0]-1))/1E3+"%"));fb==mathlib.SOLVED_FACELET&&(Ya(),sb=ob.length,zb=0);w();0==f&&c();e();a=fb;vb&&(b.EdgeMult(vb,$a,xb),b.CornMult(vb,$a,xb),a=xb.toFaceCube());ab(a,h,n);scrHinter.checkState($a)}function Za(a,b){for(var c=0,e=0,f=0,h=0,n=0,w=0,r=0;r<a.length;r++){var x=a[r][b?2:1],y=a[r][b?1:2];null!=x&&null!=y&&(w++,c+=x,e+=y,f+=x*y,h+=x*x,n+=y*y)}n=w*n-e*e;h=w*h-c*c;r=w*f-c*e;f=.001>h?1:r/h;r=.001>h||.001>n?1:Math.pow(r,2)/h/n;return[f,1>w?0:e/w-f*c/w,r,3>w||.001>h?0:Math.sqrt(n/h*(1-r)/(w-2))]}
function r(a,b,c){if(0==a.length)return a;var e=Za(a),f=e[0];e=e[1];var h=Math.round(f*a[0][1]+e),n=Math.round(f*a[a.length-1][1]+e);null==b||b>h?b=h:null!=c&&c<n&&(b-=Math.min(h-b,n-c));for(c=0;c<a.length;c++)a[c][1]=Math.round(f*a[c][1]+e)-b;return a}function Na(){for(var a=ob.length-sb,b="",c=0;c<zb;c++){var e=ob[c+sb][0];b+="URFDLB".charAt(~~(e/3))+" 2'".charAt(e%3)}var f="",h=[];for(c=zb;c<a;c++)h.push(ob[c+sb].slice());h=r(h);for(c=0;c<h.length;c++)e=h[c],f+="URFDLB".charAt(~~(e[0]/3))+" 2'".charAt(e[0]%
3)+"/*"+e[1]+"*/";Qa(db,"Raw ("+a+")",b,f)}function Qa(a,b,c,e){c||e?a.attr("href","https://alg.cubing.net/?alg="+encodeURIComponent(e)+"&setup="+encodeURIComponent(c)):a.removeAttr("href");a.html(b)}function y(a,b){"disconnect"==a&&(logohint.push("Bluetooth disconnected!"),Pa())}function Wa(){Oa=f=0;bb=null;hb=mathlib.SOLVED_FACELET;nb=new b;$a=new b;fb=hb;mb=new b;ob=[];sb=0;eb.html('<span style="font-family:iconfont;"></span> 0%');Qa(db,"Raw(N/A)");Qa(lb,"Pretty(N/A)");hb=kernel.getProp("giiSolved",
mathlib.SOLVED_FACELET);nb.fromFacelet(hb);mb.invFrom(nb);GiikerCube.setCallback(Ra);GiikerCube.setEventCallback(y);return GiikerCube.isConnected()?Promise.resolve():GiikerCube.init().then(function(){logohint.push("Bluetooth successfully connected!")})}function Ua(){return GiikerCube.isConnected()?GiikerCube.stop().then(function(){y("disconnect")}):Promise.resolve()}function Xa(){GiikerCube.isConnected()&&confirm("Disconnect?")&&Ua()}function Ta(a,b){if("scrambling"==a)tb="";else if("scramble"==a||
"scrambleX"==a){var c=b[0];tb=b[1];"333"!=tools.puzzleType(c)&&(tb="");scrHinter.setScramble(tb);scrHinter.checkState($a)}else"property"==a?0<=["giiVRC","imgSize"].indexOf(b[0])?Pa():/^(preScrT?|isTrainScr)$/.exec(b[0])&&(scrHinter.setScramble(tb),scrHinter.checkState($a)):"timestd"!=a||b[4]||(wb=[timer.getStartTime(),b[0][1],b[1]],setTimeout(Ya,0))}function Ya(){if(wb){var a=wb[0],b=ob.length,c=wb[2];0<b&&ob[b-1][2]>wb[0]+wb[1]+1E3&&(wb=null);for(var e=ob.length-1;0<=e&&!(ob[e][2]<a-500);e--)b=e;
if(b!=ob.length){a=new mathlib.CubieCube;var f=[],h=mathlib.CubieCube.rotMulI[0][kernel.getPreConj()];for(e=b;e<ob.length;e++){b=ob[e].slice();var n=mathlib.CubieCube.rotMulM[h][b[0]];b[0]="URFDLB".charAt(~~(n/3))+" 2'".charAt(n%3);f.push(b);a.selfMoveStr(b[0])}f=r(f);e=cubeutil.moveSeq2str(f);kernel.pushSignal("giirecons",[c,[e,"333"]]);f=(c||"").split(" ");c=new mathlib.CubieCube;for(e=0;e<f.length;e++)c.selfMoveStr(f[e]);e=new mathlib.CubieCube;e.invFrom(a);c.toFaceCube()==e.toFaceCube()&&(DEBUG&&
console.log("[bluetooth] recons clear, cube solved"),wb=null)}}}var Sa=$("<span></span>"),n=$("<span>"+GIIKER_RESET+"</span>").addClass("click"),db=$('<a target="_blank">Raw(N/A)</a>').addClass("click"),lb=$('<a target="_blank">Pretty(N/A)</a>').addClass("click"),cb=$("<canvas>").css({display:"block","box-sizing":"content-box",margin:"auto",padding:"5px"}),jb=$("<tr>").append($('<td colspan=2 style="padding:0;">').append(cb)),bb=null,gb=$("<td>").html('<span style="font-family:iconfont;"></span> ??%'),
eb=$("<td>").html('<span style="font-family:iconfont;"></span> 0%'),Va=$('<table class="table">'),w=function(){var a=[],b,c=[[1,-.5,1.5,0,.5,0],[.5,0,3,-.5,1,1.5],[1,0,0,0,1,1.5],[1,.5,5.5,0,.5,0],[-.5,0,7,-.5,-1,4.5],[-1,0,10,0,-1,4.5]];return function(){if(cb)if("n"!=kernel.getProp("giiVRC")&&"g"==kernel.getProp("input"))jb.hide();else{a=kernel.getProp("colcube").match(/#[0-9a-fA-F]{3}/g);jb.show();b=cb[0].getContext("2d");var e=kernel.getProp("imgSize")/60;cb.width(10/4.5*21*e+"em");cb.height(21*
e+"em");cb.attr("width",300);cb.attr("height",135);for(e=0;6>e;e++){for(var f=e,h=fb,n=c[f].slice(),w=0;w<n.length;w++)n[w]*=30;for(w=0;3>w;w++)for(var r=0;3>r;r++)$.ctxDrawPolygon(b,a["DLBURF".indexOf(h[3*(3*f+r)+w])],[[w,w,w+1,w+1],[r,r+1,r+1,r]],n)}}}}(),f=0,Oa=0,ab=$.noop,hb=mathlib.SOLVED_FACELET,nb=new b,$a=new b,fb=hb,mb=new b,kb=0,rb=0,ob=[],sb=0,tb,wb=null,zb=0,vb=null,xb=new b;$(function(){kernel.regListener("giiker","scramble",Ta);kernel.regListener("giiker","scrambling",Ta);kernel.regListener("giiker",
"scrambleX",Ta);kernel.regListener("giiker","timestd",Ta);kernel.regListener("giiker","property",Ta,/^(?:giiVRC|imgSize|preScrT?|isTrainScr)$/);tools.regTool("giikerutil",TOOLS_GIIKER,x)});return{setCallback:function(a){ab=a},markSolved:h,checkScramble:function(){return scrHinter.checkScramble($a)},markScrambled:function(a){var c=$a;a&&(c=scrHinter.getScrCubie());c.isEqual($a)||(DEBUG&&console.log("[bluetooth] scramble equal, start hack!"),vb=new mathlib.CubieCube,xb.invFrom($a),b.EdgeMult(c,xb,vb),
b.CornMult(c,xb,vb),sb=ob.length,ab(c.toFaceCube(),["U "],[null,$.now()]));zb=ob.length-sb;Na();Qa(lb,"Pretty(N/A)")},init:Wa,stop:Ua,isSync:function(){return null==vb},reSync:function(){vb&&(vb=null,ab(fb,["U "],[null,$.now()]))},tsLinearFix:r,updateBattery:z,setLastSolve:function(a){Qa(lb,"Pretty",kernel.getConjMoves(tb),a)}}},[mathlib.CubieCube]);var metronome=execMain(function(){function b(a){return 99<a?a:" "+a}function Pa(a){a?(a.empty().append("BPM: ",r,Qa,"<br />").append("Vol: ",Na,y,"<br />",Za,"<br />").append("<br />",$("<label>").append(Xa,'<span class="click"> Beep at</span>'),"<br />",Ua),r.unbind().on("input",function(){Qa.html(b(r.val()));z()}),Na.unbind().on("input",function(){y.html(b(Na.val()));Wa.gain.value=Na.val()/100}),Za.html(Ta?"Stop!":"Start!"),Za.unbind().click(function(){Ta=!Ta;Za.html(Ta?"Stop!":"Start!");z()}),
x()):(null!=Ya&&(clearInterval(Ya),Ya=null),Ta=!1)}function x(){Xa.unbind("change").change(e).prop("checked",kernel.getProp("beepEn"));Ua.unbind("change").change(e).val(kernel.getProp("beepAt"));e()}function z(){null!=Ya&&(clearInterval(Ya),Ya=null);if(Ta){var a=6E4/~~r.val();Ya=setInterval(c,a)}}function c(a){var b=Ra.createOscillator();b.type="sine";b.frequency.value=a||440;b.connect(Wa);b.start(Ra.currentTime);b.stop(Ra.currentTime+.1)}function e(){Xa.prop("checked")?a(Ua.val()):null!=Sa&&(clearInterval(Sa),
Sa=null);kernel.setProp("beepEn",Xa.prop("checked"));kernel.blur()}function a(a){null!=Sa&&(clearInterval(Sa),Sa=null);a=a.split(",");for(var b=0;b<a.length;b++)a[b]=~~(1E3*a[b].trim())/1E3;a=a.filter(Number);a.sort(function(a,b){return a-b});n=a;Ua.val(a.join(","));kernel.setProp("beepAt",a.join(","));Sa=setInterval(h,100)}function h(){var a=~~timer.getCurTime()/1E3;if(0==a)db=0;else{for(var b=!1;db<n.length&&a>n[db]-.05;)++db,b=!0;b&&c(550)}}var Ra,Za=$('<span style="display:inline-block; text-align:center; width:100%;"/>').addClass("click"),
r=$('<input type="range" value="60" min="10" max="360" style="width:7em;" />'),Na=$('<input type="range" value="30" min="0" max="100" style="width:7em;" />'),Qa=$("<span />").html(" 60"),y=$("<span />").html(" 30"),Wa,Ua=$('<input type="text" style="width:7em;" />'),Xa=$('<input type="checkbox" />'),Ta=!1,Ya=null,Sa=null,n=[],db=0;$(function(){kernel.regProp("tools","beepEn",-6,"Beep Enable",[!1]);kernel.regProp("tools","beepAt",-6,"Beep At",["5,10,15,20"]);var a=window.AudioContext||window.webkitAudioContext;
void 0!==a&&(Ra=new a,Wa=Ra.createGain(),Wa.gain.value=.3,Wa.connect(Ra.destination),tools.regTool("mtrnm",TOOLS_METRONOME,Pa));x()});return{playTick:c}});var onlinecomp=execMain(function(){function b(a,c){for(;jb.length>c;)jb.pop().remove();var e=a;if(-1!=bb.indexOf(e))e=null;else{var f=[];e+="|";for(var h=e.length,n=$('<select style="max-width: unset;">'),w=0;w<bb.length;w++)if(bb[w].startsWith(e)){var r=bb[w].slice(h).split("|",1)[0];-1==f.indexOf(r)&&(f.push(r),n.append($("<option>").val(r).html(r)))}e=0==f.length?null:n.change(Pa)}e&&(jb[c]=e,Ya.append(jb[c]),b(a+"|"+jb[c].val(),c+1))}function Pa(a){a=$(a.target).prevAll("select").length;for(var c=
"",e=0;e<=a;e++)c=c+"|"+jb[e].val();b(c,a+1);Ra();c=="|"+OLCOMP_UPDATELIST+"..."&&x()}function x(){Ta.val("...");$.post("https://cstimer.net/comp.php",{action:"list"},function(a){bb=[];a=JSON.parse(a).data;for(var c=0;c<a.length;c++){var e=a[c].fullname;gb[e]=a[c].name;for(var f=JSON.parse(a[c].value),h=0;h<f.length;h++)bb.push("|"+e+"|"+f[h])}bb.push("|"+OLCOMP_UPDATELIST+"...");gb[OLCOMP_UPDATELIST+"..."]="update";b("",0);Ra();Ta.hide()}).error(function(){logohint.push("Network Error");Ta.val(OLCOMP_UPDATELIST)})}
function z(){for(var a="",b=0;b<jb.length;b++)a+="|"+jb[b].val();if(-1==bb.indexOf(a))alert("Invalid Input");else return b=a.slice(1).split("|",1)[0],a=a.slice(b.length+2),b=gb[b],[b,a]}function c(){var a=z();$.post("https://cstimer.net/comp.php",{action:"scramble",comp:a[0],path:a[1]},function(a){a=JSON.parse(a);0==a.retcode&&a.data?(f=a=a.data,Oa=$.map(a,function(a){return(a=/^\$T([a-zA-Z0-9]+)\$\s*(.*)$/.exec(a))?scramble.getTypeName(a[1]):"???"}),Ra(!0),kernel.setProp("scrType","remoteComp")):
logohint.push(a.reason||"Server Error")}).error(function(){logohint.push("Network Error")})}function e(){var b=prompt(OLCOMP_SUBMITAS,exportFunc.getDataId("locData","compid"));if(null==b)return!1;if(!exportFunc.isValidId(b))return alert(EXPORT_INVID),!1;localStorage.locData=JSON.stringify({id:exportFunc.getDataId("locData","id"),compid:b});a();return b}function a(){Wa.empty().append("ID: ");Ua.empty();Xa.empty();if(exportFunc.getDataId("wcaData","cstimer_token")){var b=exportFunc.getDataId("wcaData",
"wca_me").wca_id;Ua.append(b||"WCA Account"," (WCA)").click(function(){exportFunc.logoutFromWCA(!0);a()});Wa.append(Ua)}else Ua.append(EXPORT_LOGINWCA),Ua.click(function(){location.href=exportFunc.wcaLoginUrl}),(b=exportFunc.getDataId("locData","compid"))?Xa.append(b+" ("+OLCOMP_ANONYM+")"):Xa.append("N/A ("+OLCOMP_ANONYM+")"),Wa.append(Xa.unbind("click").click(e)," | ",Ua)}function h(c,e){!c||eb?eb=!!c:(c.empty().append($('<div style="font-size: 0.75em; text-align: center;">').append(Wa,Ta,Ya).append(Sa).append(n,
" ",db," ").append($("<label>").append(cb,OLCOMP_WITHANONYM)," ",lb)),b("",0),a(),Ra(),eb=!0)}function Ra(a,b){Va=[];a||(f=[],Oa=[]);b||(w=!1);Za()}function Za(){n.unbind("click");db.unbind("click");lb.unbind("click").click(Qa);if(2>jb.length)n.attr("disabled",!0).val(OLCOMP_START),db.attr("disabled",!0);else{Sa.empty();if(0==Oa.length)jb[0].val().startsWith("*")||jb[0].val().startsWith("+")||w?w?n.attr("disabled",!0).val(OLCOMP_SUBMIT):n.attr("disabled",!0).val(OLCOMP_START):n.removeAttr("disabled").val(OLCOMP_START).click(c);
else{for(var a=0;a<Oa.length;a++)/^\$T([a-zA-Z0-9]+)\$\s*(.*)$/.exec(Oa[a]),Sa.append(a+1+". "+(Va[a]?stats.pretty(Va[a][0]):Oa[a]),"<br>");Va.length!=Oa.length||w?n.attr("disabled",!0):(n.removeAttr("disabled"),n.val(OLCOMP_SUBMIT).click(r))}db.removeAttr("disabled").click(Na)}kernel.blur()}function r(){if(!w){var a=exportFunc.getDataId("wcaData","cstimer_token")||exportFunc.getDataId("locData","compid")||e();if(a){var b=z();$.post("https://cstimer.net/comp.php",{action:"submit",comp:b[0],path:b[1],
uid:a,value:JSON.stringify(Va)},function(a){'{"retcode":0}'==a?(w=!0,logohint.push("Submitted")):logohint.push("Network Error");Za()}).error(function(){logohint.push("Network Error")})}}}function Na(){if(0==Va.length||w||confirm(OLCOMP_ABORT)){Ra(!1,!0);var a=z(),b=cb.prop("checked")?1:0;$.post("https://cstimer.net/comp.php",{action:"result",comp:a[0],path:a[1],anonym:b},function(a){try{a=JSON.parse(a)}catch(vb){a={}}if(0!==a.retcode)logohint.push("Server Error");else{var b=$.sha256("cstimer_public_salt_"+
exportFunc.getDataId("locData","compid")),c=(exportFunc.getDataId("wcaData","wca_me")||{}).wca_id,e=a.scramble;a=$.map(a.data,function(a){var b=JSON.parse(a.value);if(5==b.length){var c=new TimeStat([5],b.length,function(a){return-1==b[a][0][0]?-1:b[a][0][0]+b[a][0][1]});c.getAllStats();return{uid:a.uid,wca_id:a.wca_id,value:b,ao5:c.lastAvg[0][0],bo5:c.bestTime}}});a.sort(function(a,b){var c=TimeStat.dnfsort(a.ao5,b.ao5);return 0==c?TimeStat.dnfsort(a.bo5,b.bo5):c});for(var f=['<table class="table"><tr><th></th><th>User</th><th>ao5</th><th>bo5</th><th>Results</th></tr>'],
h=0;h<a.length;h++){var n=a[h].uid,w=a[h].value,r=a[h].ao5,x=a[h].bo5,y=a[h].wca_id;f.push("<tr><td>"+(h+1)+"</td>");void 0!==y?(n=y?'<a target="_blank" href="https://www.worldcubeassociation.org/persons/'+y+'">'+y+"</a>":OLCOMP_WCAACCOUNT,f.push(y==c?"<th>"+OLCOMP_ME+":"+n+"</th><td>":"<td>"+n+"</td><td>")):f.push(n==b?"<th>"+OLCOMP_ME+"</th><td>":"<td>"+OLCOMP_ANONYM+"</td><td>");f.push(kernel.pretty(r)+"</td><td>"+kernel.pretty(x)+"</td><td>");for(n=0;n<w.length;n++)4<w[n].length?(w[n][1]=scramble.scrStd("",
e[n]||"")[1],f.push('<a target="_blank" class="click" href="'+stats.getReviewUrl(w[n])+'">'+stats.pretty(w[n][0])+"</a> ")):f.push(stats.pretty(w[n][0])+" ");f.push("</td>");f.push("</tr>")}f.push("</table>");Sa.empty().html(f.join(""))}}).error(function(){logohint.push("Network Error")})}}function Qa(){if(0==Va.length||w||confirm(OLCOMP_ABORT)){Ra(!1,!0);var a=exportFunc.getDataId("wcaData","cstimer_token")||exportFunc.getDataId("locData","compid")||e();a&&$.post("https://cstimer.net/comp.php",{action:"myresult",
uid:a},function(a){try{a=JSON.parse(a)}catch(kb){a={}}if(0!==a.retcode)logohint.push("Server Error");else{a=a.data;for(var b=['<table class="table"><tr><th></th><th>Comp.</th><th>ao5</th><th>bo5</th><th>Results</th></tr>'],c=0;c<a.length;c++){var e=JSON.parse(a[c].value);if(5!=e.length)return;var f=new TimeStat([5],e.length,function(a){return-1==e[a][0][0]?-1:e[a][0][0]+e[a][0][1]});f.getAllStats();b.push("<tr><td>"+(c+1)+"</td>");b.push("<td>"+a[c].fullname+"|"+a[c].path+"</td>");b.push("<td>"+kernel.pretty(f.lastAvg[0][0])+
"</td>");b.push("<td>"+kernel.pretty(f.bestTime)+"</td><td>");for(f=0;f<e.length;f++)4<e[f].length?(e[f][1]=scramble.scrStd("",JSON.parse(a[c].scramble)[f]||"")[1],b.push('<a target="_blank" class="click" href="'+stats.getReviewUrl(e[f])+'">'+stats.pretty(e[f][0])+"</a> ")):b.push(stats.pretty(e[f][0])+" ");b.push("</td>");b.push("</tr>")}b.push("</table>");Sa.empty().html(b.join(""))}}).error(function(){logohint.push("Network Error")})}}function y(b,c){if(eb)if("export"==b)a();else{c=JSON.parse(JSON.stringify(c));
var e=c[1];c[1]="";c[2]="";if("timestd"==b)for(var h=Va.length;h<f.length;h++){var n=scramble.scrStd("",f[h])[1];if(n!=e)c[0]=[-1,1],Va.push(c);else{Va.push(c);break}}else if("timepnt"==b)for(h=0;h<Va.length;h++)if(n=scramble.scrStd("",f[h])[1],n==e){Va[h]=c;break}Za()}}var Wa=$("<div>"),Ua=$('<span class="click">'),Xa=$('<span class="click">'),Ta=$('<input type="button">').val(OLCOMP_UPDATELIST).click(x),Ya=$("<div>"),Sa=$('<div class="noScrollBar" style="max-height: 8em; overflow-y: auto;">'),n=
$('<input type="button">'),db=$('<input type="button">').val(OLCOMP_VIEWRESULT),lb=$('<input type="button">').val(OLCOMP_VIEWMYRESULT),cb=$('<input type="checkbox">'),jb=[],bb=[],gb={},eb=!1,Va=[],w=!1,f=[],Oa=[];$(function(){tools.regTool("onlinecomp",OLCOMP_OLCOMP,h);kernel.regListener("onlinecomp","timestd",y);kernel.regListener("onlinecomp","timepnt",y);kernel.regListener("onlinecomp","export",y,/^account$/)});return{getScrambles:function(){return 0==Va.length?Promise.resolve(f.slice()):Promise.reject()}}});var battle=execMain(function(){function b(a){Sa&&n&&Ta.isConnected()&&(!a&&Ya&&(clearTimeout(Ya),Ya=0),a&&Ta.pushMsg({action:"heartBeat",roomId:Sa,accountId:n}),Ya=setTimeout(b.bind(null,!0),15E3))}function Pa(a){if(a||!Sa){a=prompt(TOOLS_BATTLE_JOINALERT+" [a-zA-Z0-9]",Sa||100+~~(900*Math.random()));if(!/^[0-9a-zA-Z]{3,20}$/.exec(a)){alert("invalid room ID");return}Sa=a}Ta.isConnected()?z()&&Sa&&Ta.remoteCall({action:"joinRoom",roomId:Sa,accountId:n,scramble:scramble_333.getRandomScramble().trim()}).then(function(a){DEBUG&&
console.log("[battle] joinRoom ret=",JSON.stringify(a));b()}):Ta.connect().then(Pa.bind(null,!1))}function x(c){z(!0)&&Sa&&(c||confirm(TOOLS_BATTLE_LEAVEALERT+"?"))&&(Ta.remoteCall({action:"leaveRoom",roomId:Sa,accountId:n}).then(Ta.close,Ta.close),db=null,a(),b())}function z(a){return!db&&a||!Ta.isConnected()?n=null:n=exportFunc.getDataId("wcaData","cstimer_token")||exportFunc.getDataId("locData","compid")||Ra()}function c(a){z(!0)&&Sa&&Ta.remoteCall({action:"updateStatus",roomId:Sa,accountId:n,
status:a}).then(function(a){DEBUG&&console.log("[battle] update status ret=",a);b()})}function e(a,c){if(z(!0)&&Sa){var e=a[1];if(e==db.cur[1]||e==db.last[1])if(!lb||lb[1]!=a[1]||c&&a[0][1]==lb[0][1])lb=a,Ta.remoteCall({action:"uploadSolve",roomId:Sa,accountId:n,solveId:e==db.cur[1]?db.cur[0]:db.last[0],time:a,scramble:scramble_333.getRandomScramble().trim()}).then(function(a){DEBUG&&console.log("[battle] upload solve ret=",a);b()})}}function a(){DEBUG&&console.log("[battle] render room",db);db?Na.hide():
Na.show();cb.empty();var a=TOOLS_BATTLE_TITLE.split("|").slice(0,3);a.splice(1,0,"ELO");cb.append($("<tr>").append($("<td colspan=5>").append(Wa[0]+": ",Ua,"&nbsp;",Xa)));cb.append("<tr><td colspan=2>"+a.join("</td><td>")+"</td></tr>");Ua.unbind("click");Xa.unbind("click");if(db){Ua.removeClass("click").html(db.roomId);Xa.click(x.bind(null,!1)).show();a=db.players;for(var b=db.solves,c={},e=!1,h=("???|"+TOOLS_BATTLE_STATUS).split("|"),n=0;n<b.length;n++){var r=b[n],y=r.accountId;c[y]=c[y]||{};c[y][r.solveId]=
[r.time,r.soltime];r.solveId==db.cur[0]&&(e=!0)}a.sort(function(a,b){return b.elo-a.elo});b=db.cur[0];for(n=0;n<a.length;n++){r=a[n];y=r.accountId;-1!=y.indexOf("|")?y="<b>"+y.split("|")[1]+"</b>":10<y.length&&(y=y.slice(0,4)+"..."+y.slice(y.length-3));var z=(c[r.accountId]||{})[b],Sa="SOLVED"==r.status,Qa=(c[r.accountId]||{})[b-1];Qa=(Qa=Sa?z:Qa)?stats.pretty(Qa[0],!0):"N/A";e&&!Sa&&(Qa='<span style="color:#888">'+Qa+"</span>");cb.append("<tr><td>"+(n+1)+"</td><td>"+y+"</td><td>"+r.elo+"</td><td>"+
h[["READY","INSPECT","SOLVING","SOLVED","LOSS"].indexOf(r.status)+1]+"</td><td>"+Qa+"</td></tr>")}}else cb.append('<tr><td colspan=5 style="width:0;">'+TOOLS_BATTLE_INFO+"</td></tr>"),Ua.addClass("click").html(Wa[1]).click(Pa.bind(null,!0)),Xa.hide()}function h(){Na.empty().append("ID: ");Qa.empty();y.empty();if(exportFunc.getDataId("wcaData","cstimer_token")){var a=exportFunc.getDataId("wcaData","wca_me").wca_id;Qa.append(a||"WCA Account"," (WCA)").click(function(){exportFunc.logoutFromWCA(!0);h()});
Na.append(Qa)}else Qa.append(EXPORT_LOGINWCA),Qa.click(function(){location.href=exportFunc.wcaLoginUrl}),a=exportFunc.getDataId("locData","compid"),y.append((a||"N/A")+" ("+OLCOMP_ANONYM+")"),Na.append(y.unbind("click").click(Ra)," | ",Qa)}function Ra(){var a=prompt(OLCOMP_SUBMITAS,exportFunc.getDataId("locData","compid"));if(null==a)return!1;if(!exportFunc.isValidId(a))return alert(EXPORT_INVID),!1;localStorage.locData=JSON.stringify({id:exportFunc.getDataId("locData","id"),compid:a});h();return a}
function Za(b,c){!b||jb?(jb=!!b,b||Ta.close()):(b.empty().append($('<div style="font-size: 0.75em; text-align: center;">').append(Na,cb)),h(),a(),jb=!0)}function r(a,b){if(jb)if("export"==a)h();else if("timerStatus"==a){var n="READY";0<b?n="SOLVING":-2>b&&(n="INSPECT");n!=bb&&(bb=n,c(n))}else b=JSON.parse(JSON.stringify(b)),"timestd"==a?e(b,!1):"timepnt"==a&&e(b,!0)}var Na=$("<div>"),Qa=$('<span class="click">'),y=$('<span class="click">'),Wa=TOOLS_BATTLE_HEAD.split("|"),Ua=$('<span class="click">').html(Wa[1]),
Xa=$('<span class="click">').html("[X]"),Ta=function(){function a(a){for(n=!0;0<z.length;)z.pop()()}function b(a){n=!1;y&&y("close")}function c(a){n=!1;y&&y("error")}function e(a){a=JSON.parse(a.data);var b=a.msgid;if(b in x){var c=x[b];delete x[b];c(a)}else y&&y("msg",a)}var h,n=!1,r=1,x=[],y=null,z=[];return{connect:function(){return n?Promise.resolve():new Promise(function(f,n){z.push(f);h=new WebSocket("wss://cstimer.net/ws20230409");h.onopen=a;h.onclose=b;h.onerror=c;h.onmessage=e})},close:function(){if(!n)return-1;
h.close();n=!1;return 0},isConnected:function(){return n},setCallback:function(a){y=a},pushMsg:function(a){if(!n)return-1;h.send(JSON.stringify(a));return 0},remoteCall:function(a){return new Promise(function(b,c){n?(a.msgid=r,x[r]=b,r++,h.send(JSON.stringify(a)),setTimeout(function(a){a(-2)}.bind(null,c),5E3)):c(-1)})}}}(),Ya=0,Sa,n,db,lb=[[-1,1],null];Ta.setCallback(function(b,c){"msg"==b?"roomInfo"in c&&(db=c.roomInfo,db&&db.cur[1]&&db.cur[1]!=lb[1]&&(gb&&gb(["$T333$"+db.cur[1]]),gb=null,"remoteBattle"!=
kernel.getProp("scrType")&&kernel.setProp("scrType","remoteBattle"))):(db=null,"remoteBattle"==kernel.getProp("scrType")&&kernel.pushSignal("ctrl",["scramble","next"]));a()});var cb,jb=!1,bb="READY",gb;$(function(){cb=$('<table class="table">');tools.regTool("battle",TOOLS_BATTLE,Za);kernel.regListener("battle","timestd",r);kernel.regListener("battle","timepnt",r);kernel.regListener("battle","timerStatus",r);kernel.regListener("battle","export",r,/^account$/)});return{getScrambles:function(){return db?
db.cur[1]&&db.cur[1]!=lb[1]?Promise.resolve(["$T333$"+db.cur[1]]):new Promise(function(a,b){gb=a}):Promise.reject()}}});execMain(function(){function b(){var a=prompt(TOOLS_SYNCSEED_INPUTA);kernel.blur();null!=a&&(/^[a-zA-Z0-9]+$/.exec(a)?Pa(a):logohint.push("Invalid Value"))}function Pa(b){r=!0;Na=Na||mathlib.getSeed();mathlib.setSeed(0,"syncseed"+b);scramble.setCacheEnable(!1);a.html(b).addClass("click");kernel.pushSignal("ctrl",["scramble","next"])}function x(){r&&confirm(TOOLS_SYNCSEED_DISABLE)&&(r&&(r=!1,mathlib.setSeed(0,Na[1]+""+Na[0]),Na=void 0,scramble.setCacheEnable(!0),kernel.pushSignal("ctrl",["scramble",
"next"])),a.html("N/A").unbind("click").removeClass("click"))}function z(){Pa(""+~~((new Date).getTime()/1E3/30));kernel.blur()}function c(){alert(TOOLS_SYNCSEED_HELP)}function e(e){e&&e.empty().append(TOOLS_SYNCSEED_SEED,h.unbind("click").click(c),": ",a.unbind("click").click(x)).append("<br><br>",Ra.unbind("click").click(b)).append("<br>",Za.unbind("click").click(z))}var a=$("<span>").html("N/A"),h=$('<span class="click">').html("[?]"),Ra=$('<input type="button">').val(TOOLS_SYNCSEED_INPUT),Za=
$('<input type="button">').val(TOOLS_SYNCSEED_30S),r=!1,Na;$(function(){tools.regTool("syncseed",TOOLS_SYNCSEED,e)})});var bldhelper=execMain(function(){function b(a,c){if(void 0==c){for(var e=[],f=0;f<a;f++){var h=b(a,f+1);e.push.apply(e,h)}return e}if(a<c||1>a||1>c)return[];if(a==c)return[mathlib.valuedArray(a,1)];e=b(a-1,c-1);for(f=0;f<e.length;f++)e[f].push(1);var n=b(a-c,c);for(f=0;f<n.length;f++){h=n[f];for(var w=0;w<h.length;w++)h[w]++}return e.concat(n)}function Pa(a,b,c,e,h,n,w,r,x){for(var f=0,y=0,z=0,Na=0;Na<r.length;Na++)1==r[Na]?y++:(z+=r[Na],f++);x&&3==(a&3)&&(a&=-3);var Oa=0,Pa=null;for(Na=0;3>Na;Na++)if(0!=
(a>>Na&1)){var Sa=f-(Na>>1),Qa=z+f-2*(Na>>1);if(!(Sa<h[0]||Sa>h[1]||Qa<n[0]||Qa>n[1])){Qa=1==Na?1:0;var Ra=c+Qa;Sa=b+c+(2>Na?1:0);if(!(y<Math.max(Sa,e[0]+Qa)||c>e[1])){var Ta=y-Sa,Ua=0,Va=null,Xa=0;for(Qa=Math.max(e[0]-c,0);Qa<=Math.min(e[1]-c,Ta);Qa++){var Wa=f+y;var Ya=w,$a=y-Ra-Qa,Za=Ra+Qa;if($a+Za>Wa)Wa=[0,null];else{for(var ab=0,fb=[],bb=$a;bb<Wa-1;bb++){var db=bb<$a+Za?1:0;db=mathlib.rn(Ya-db)+db;fb.push(db);ab+=db}if($a+Za<Wa)fb.push((Ya*Wa-ab)%Ya),Wa=[Math.pow(Ya-1,Za)*Math.pow(Ya,Wa-$a-Za-
1),mathlib.valuedArray($a,0).concat(fb)];else{var cb=mathlib.valuedArray(Ya,0);cb[0]=1;for(bb=0;bb<Za;bb++){db=mathlib.valuedArray(Ya,0);for(var mb=1;mb<Ya;mb++)for(var eb=0;eb<Ya;eb++)db[(mb+eb)%Ya]+=cb[eb];cb=db}if(0==cb[0])Wa=[0,null];else{for(ab=(Ya*Wa-ab)%Ya;0==ab&&0<Za;){ab=0;fb=[];for(bb=$a;bb<Wa-1;bb++)db=bb<$a+Za?1:0,db=mathlib.rn(Ya-db)+db,fb.push(db),ab+=db;ab=(Ya*Wa-ab)%Ya}fb.push(ab);Wa=[cb[0],mathlib.valuedArray($a,0).concat(fb)]}}}$a=Wa[0]*mathlib.Cnk[Ta][Qa];Ua+=$a;mathlib.rndHit($a/
Ua)&&(Va=Wa[1],Xa=Qa)}if(0!=Ua||x){Ua*=Math.pow(w,z-f);Ra=r.slice(0,r.length-Sa);Qa=y+z-Sa;for(Wa=1;0<Ra.length;){Ya=Ra.pop();$a=1;Wa*=mathlib.Cnk[Qa][Ya]*mathlib.fact[Ya-1];for(Qa-=Ya;Ra[Ra.length-1]==Ya;)Ra.pop(),$a++,Wa*=mathlib.Cnk[Qa][Ya]*mathlib.fact[Ya-1],Wa/=$a,Qa-=Ya;1==Ya&&2==Na&&(Wa*=z,Wa/=y+z-Sa)}Qa=(x?1:Ua)*Wa;Oa+=Qa;if(mathlib.rndHit(Qa/Oa)){Ua=[];for(Qa=0;Qa<f;Qa++){Pa=Va.pop();Ya=r[Qa];for($a=0;$a<Ya-1;$a++)Wa=mathlib.rn(w),Ua.push(Wa),Pa+=w-Wa;Ua.push(Pa%w)}Pa=mathlib.rndPerm(Ta);
for(Qa=0;Qa<Pa.length;Qa++)Pa[Qa]<Xa?Ua.push(Va.pop()):Ua.push(Va.shift());2>Na?(Ua.unshift(0==Na?Va.shift():Va.pop()),Ua.splice.apply(Ua,[1,0].concat(Va))):Ua.splice.apply(Ua,[0,0].concat(Va));Ra=r.slice(0,r.length-Sa);Pa=[];Va=[0];$a=2==Na?1:0;0==$a&&(Pa[0]=[0,Ua.shift()]);for(Qa=1;Qa<z+y;Qa++)Qa>=1+b+c?(Va[$a]=Qa,$a++):Pa[Qa]=[Qa,Ua.shift()];Qa=y+z-Sa;Sa=mathlib.rndPerm(Qa);2==Na&&Sa.indexOf(0)>=z&&(Qa=(Sa.indexOf(0)-mathlib.rn(z)+Qa)%Qa,Sa=Sa.slice(Qa).concat(Sa.slice(0,Qa)));Xa=[];for(Qa=0;Qa<
Ra.length;Qa++)for(Wa=Sa.slice(0,Ra[Qa]),Xa.push(Wa),Sa=Sa.slice(Ra[Qa]),Ta=0;Ta<Wa.length;Ta++)Pa[Va[Wa[Ta]]]=[Va[Wa[(Ta+1)%Wa.length]],Ua.shift()]}}}}}return[Oa,Pa]}function x(a){for(var b=0,c=0;c<a.length;c++)b^=a[c]+1;return b&1}function z(a,c){for(var e=a.cfix.split(" "),f=[],h=[],n=/^(UFR|UFL|UBL|UBR|DFR|DFL|DBL|DBR)(\+?)$/i,w=r.split(" "),y=0;y<e.length;y++){var z=n.exec(e[y]);z&&z[1]!=w[a.cbuff[0]%8]&&(z[2]?h.push(w.indexOf(z[1])):f.push(w.indexOf(z[1])))}var Na=a.efix.split(" ");e=[];var Oa=
[];n=/^(UR|UF|UL|UB|DR|DF|DL|DB|FR|FL|BL|BR)(\+?)$/i;for(y=0;y<Na.length;y++)(z=n.exec(Na[y]))&&z[1]!=w[a.ebuff[0]%12+8]&&(z[2]?Oa.push(w.indexOf(z[1])-8):e.push(w.indexOf(z[1])-8));Na=a.ceparity;w=[0,0];z=[null,null];var Sa=b(8);for(y=0;y<Sa.length;y++){var Qa=x(Sa[y]);0!=(Na>>Qa&1)&&(n=Pa(a.cbuff[1],f.length,h.length,a.cnerrLR,a.cscycLR,a.cncodeLR,3,Sa[y]),w[Qa]+=n[0],mathlib.rndHit(n[0]/w[Qa])&&(z[Qa]=n[1]))}Sa=[0,0];var Ra=[null,null],Ta=b(12);for(y=0;y<Ta.length;y++)Qa=x(Ta[y]),0!=(Na>>Qa&1)&&
(n=Pa(a.ebuff[1],e.length,Oa.length,a.enerrLR,a.escycLR,a.encodeLR,2,Ta[y]),Sa[Qa]+=n[0],mathlib.rndHit(n[0]/Sa[Qa])&&(Ra[Qa]=n[1]));y=w[0]*Sa[0]+w[1]*Sa[1];n=[y,z[1],Ra[1]];mathlib.rndHit(w[0]*Sa[0]/y)&&(n=[y,z[0],Ra[0]]);if(!c)return n;if(0==n[0])return"N/A";w=[a.cbuff[0]%8].concat(f,h);e=[a.ebuff[0]%12].concat(e,Oa);for(y=0;8>y;y++)-1==w.indexOf(y)&&w.push(y);for(y=0;12>y;y++)-1==e.indexOf(y)&&e.push(y);f=[];h=[];for(y=0;8>y;y++)f[w[y]]=w[n[1][y][0]]|n[1][y][1]<<3;for(y=0;12>y;y++)h[e[y]]=e[n[2][y][0]]<<
1|n[2][y][1];Oa=new mathlib.CubieCube;y=mathlib.rndEl(" Rw Rw2 Rw' Fw Fw'".split(" "));e=mathlib.rndEl(["","Uw","Uw2","Uw'"]);n=Oa.selfMoveStr(y);w=Oa.selfMoveStr(e);Oa.init(f,h);Oa.ori=0;if(Oa.isEqual())return"U U'";null!=w&&Oa.selfMoveStr("URFDLB".charAt(~~(w/3))+" 2'".charAt(w%3),!0);null!=n&&Oa.selfMoveStr("URFDLB".charAt(~~(n/3))+" 2'".charAt(n%3),!0);f=Oa.toFaceCube();return(scramble_333.genFacelet(f)+" "+y+" "+e).replace(/ +/g," ")||"U U'"}function c(b){var c=$(b.target);if(b=c.attr("id")){if(/^[ce]buff[01]$/.exec(b))Na[b.slice(0,
5)][~~b[5]]=~~c.val(),Ra();else if(b.endsWith("LR")){var e=/^(\d{1,2})-(\d{1,2})$/.exec(c.val())||/^((\d{1,2}))$/.exec(c.val());if(!e)return;var f=~~e[1];e=~~e[2];Na[b]=[Math.min(f,e),Math.max(f,e)]}else if("ceparity"==b)Na[b]=~~c.val();else if(b.endsWith("fix")){var n=c.val().toUpperCase().split(" ");c={};for(var x="cfix"==b?/^(UFR|UFL|UBL|UBR|DFR|DFL|DBL|DBR)(\+?)$/:/^(UR|UF|UL|UB|DR|DF|DL|DB|FR|FL|BL|BR)(\+?)$/,y=0;y<n.length;y++)(e=x.exec(n[y]))&&(c[e[1]]=e[2]);e=[];for(f in c)e.push(f+c[f]);
Na[b]=e.join(" ")}else if("bldsClr"==b||"bldsEg"==b)for(e in f={cnerrLR:[0,7],cscycLR:[0,3],cncodeLR:[0,10],enerrLR:[0,11],escycLR:[0,5],encodeLR:[0,16]},"bldsClr"==b?(f.cfix="",f.efix="",f.ceparity=3):(f.cfix="UBL DFR+",f.efix="DR DF+",f.ceparity=1),f)Na[e]=f[e];else if("bldsEdge"==b||"bldsCorn"==b)e=~~c.val(),b="bldsEdge"==b?"e":"c",Na[b+"fix"]="",Na[b+"scycLR"]="e"==b?[0,5]:[0,3],1==e?(Na[b+"buff"]=[Na[b+"buff"][0],1],Na[b+"nerrLR"]=[0,0],Na[b+"ncodeLR"]=[0,0]):2==e&&(Na[b+"buff"]=[Na[b+"buff"][0],
7],Na[b+"nerrLR"]="e"==b?[0,11]:[0,7],Na[b+"ncodeLR"]="e"==b?[0,16]:[0,10]);else if("scheme"==b){e=c.val();if("speffz"==e)Na.scheme="CJM DIF ARE BQN VKP ULG XSH WTO BM CI DE AQ VO UK XG WS JP LF RH TN";else if("chichu"==e)Na.scheme="JLK ABC DFE GHI XYZ WNM OPQ RTS GH AB CD EF OP IJ KL MN QR ST WX YZ";else if("custom"==e||"customed"==e){b=prompt("Code for "+r,Na.scheme);if(!b){h();return}if(!/^([^\s]{3} ){8}([^\s]{2} ){11}[^\s]{2}$/i.exec(b)){alert("Invalid Scheme!");h();return}Na.scheme=b}Ra()}kernel.setProp("bldSets",
JSON.stringify(Na));a(Na,w)}}function e(a,b){return a[b][0]+"-"+a[b][1]}function a(a,b){b.empty();Wa.empty();db.empty();for(var f=Na.scheme,w=0;24>w;w++){var x=~~(w/8),Oa=w%8,Pa=r.slice(4*Oa,4*Oa+3);Pa=Pa.slice(x)+Pa.slice(0,x)+" ["+f.charAt(4*Oa+x)+"]";Wa.append('<option value="'+w+'">'+Pa+"</option>")}for(w=0;24>w;w++)x=~~(w/12),Oa=w%12,Pa=r.slice(32+3*Oa,3*Oa+34),Pa=Pa.slice(x)+Pa.slice(0,x)+" ["+f.charAt(32+3*Oa+x)+"]",db.append('<option value="'+w+'">'+Pa+"</option>");Xa.val(a.cfix);Ta.val(e(a,
"cnerrLR"));Ya.val(e(a,"cscycLR"));Sa.val(e(a,"cncodeLR"));cb.val(a.efix);jb.val(e(a,"enerrLR"));bb.val(e(a,"escycLR"));gb.val(e(a,"encodeLR"));y.val(0);n.val(0);Wa.val(a.cbuff[0]);db.val(a.ebuff[0]);Ua.val(a.cbuff[1]);lb.val(a.ebuff[1]);eb.val(a.ceparity);f=z(a);b.append($("<tr>").append($("<th>Coder</th>"),$("<td colspan=2>").append(Qa)));b.append($("<tr>").append($('<td colspan=3 style="width:0;">').append(Va)));b.append($("<tr>").append($('<td colspan=3 style="height:0.2em;border:none;">')));
b.append($("<tr>").append('<th colspan=3>Scrambler|<span class="click" id="bldsClr">clr</span>|<span class="click" id="bldsEg">eg.</span></th>'));b.append($("<tr>").append($("<td>").append(eb),$("<td>").append(y),$("<td>").append(n)));b.append($("<tr>").append("<td>buffer</td>",$("<td>").append(Wa,Ua),$("<td>").append(db,lb)));b.append($("<tr>").append("<td>fixed</td>",$("<td>").append(Xa),$("<td>").append(cb)));b.append($("<tr>").append("<td>flip</td>",$("<td>").append(Ta),$("<td>").append(jb)));
b.append($("<tr>").append("<td>ex-cyc</td>",$("<td>").append(Ya),$("<td>").append(bb)));b.append($("<tr>").append("<td>#codes</td>",$("<td>").append(Sa),$("<td>").append(gb)));w=f[0]/4.325200327448986E19;b.append($("<tr>").append("<td>probs</td>",$("<td colspan=2>").append((0==f[0]?0:.001>w?w.toExponential(3):Math.round(1E6*w)/1E4+"%")+(1E-8>w?"<br>N="+(1E8<f[0]?f[0].toExponential(3):f[0]):""))));b.find("input,select").css({padding:0}).unbind("change").change(c);b.find("span.click").unbind("click").click(c);
b.find("td,th").css({padding:0});h();return b}function h(){var a=Na.scheme;"CJM DIF ARE BQN VKP ULG XSH WTO BM CI DE AQ VO UK XG WS JP LF RH TN"==a?Qa.val("speffz"):"JLK ABC DFE GHI XYZ WNM OPQ RTS GH AB CD EF OP IJ KL MN QR ST WX YZ"==a?Qa.val("chichu"):Qa.val("customed")}function Ra(){var a=tools.getCurScramble(),b=cubeutil.getScrambledState(a),c=Na.scheme,e=Na.cbuff[0],h=Na.ebuff[0];a=~~(e/8);e%=8;165>>e&1&&(a=(3-a)%3);var n=~~(h/12);h%=12;for(var w=[],r=0;8>r;r++)w[r]=c.slice(4*r,4*r+3);var x=
[];for(r=0;12>r;r++)x[r]=c.slice(32+3*r,3*r+34);c=[];var y=[],z=new mathlib.CubieCube;z.init(b.ca,b.ea);b=1<<e;for(r=0;8>r;r++)z.ca[r]==r&&(b|=1<<r);for(;255!=b;)if(r=z.ca[e]&7,r==e){for(r=-1;b>>++r&1;);mathlib.circle(z.ca,r,e);c.push(r)}else c.push(z.ca[e]),z.ca[e]=(z.ca[r]+(z.ca[e]&248))%24,z.ca[r]=r,b|=1<<r;b=1<<h;for(r=0;12>r;r++)z.ea[r]==2*r&&(b|=1<<r);for(;4095!=b;)if(r=z.ea[h]>>1,r==h){for(r=-1;b>>++r&1;);mathlib.circle(z.ea,r,h);y.push(2*r)}else y.push(z.ea[h]),z.ea[h]=z.ea[r]^z.ea[h]&1,z.ea[r]=
r<<1,b|=1<<r;e=[[],[]];for(r=0;r<c.length;r++)h=c[r]&7,z=((c[r]>>3)+3-a)%3,165>>h&1&&(z=(3-z)%3),e[0].push(w[h].charAt((3-z)%3)),1==r%2&&e[0].push(" ");for(r=0;r<y.length;r++)h=y[r]^n,e[1].push(x[h>>1].charAt(h&1)),1==r%2&&e[1].push(" ");Va.html("C: "+e[0].join("")+"<br>E: "+e[1].join(""))}function Za(b){b&&(tools.isPuzzle("333")?(b.empty().append(w),a(Na,w),Ra()):b.html(IMAGE_UNAVAILABLE))}scrMgr.reg("nocache_333bldspec",function(){return z(Na,!0)});var r="UFR UFL UBL UBR DFR DFL DBL DBR UR UF UL UB DR DF DL DB FR FL BL BR",
Na={cbuff:[0,7],cfix:"",cnerrLR:[0,7],cscycLR:[0,3],cncodeLR:[0,10],ebuff:[1,7],efix:"",enerrLR:[0,11],escycLR:[0,5],encodeLR:[0,16],ceparity:3,scheme:"CJM DIF ARE BQN VKP ULG XSH WTO BM CI DE AQ VO UK XG WS JP LF RH TN"},Qa,y,Wa,Ua,Xa,Ta,Ya,Sa,n,db,lb,cb,jb,bb,gb,eb,Va=$('<div style="text-align:left;">'),w=$('<table style="border-spacing:0; border:none;" class="table">');$(function(){var a=JSON.parse(kernel.getProp("bldSets","{}"));for(b in Na)b in a&&(Na[b]=a[b]);Qa=$('<select id="scheme">');var b=
[["customed","Customed"],["speffz","Speffz"],["chichu","ChiChu"],["custom","Custom"]];for(a=0;a<b.length;a++)Qa.append('<option value="'+b[a][0]+'">'+b[a][1]+"</option>");y=$('<select id="bldsCorn">');Wa=$('<select data="bufcorn" id="cbuff0" style="width:2em">');Ua=$('<select id="cbuff1" style="width:2em">');Xa=$('<input id="cfix" type="text" style="width:4em" value="" pattern="[URFDLBurfdlb +]*">');Ta=$('<input id="cnerrLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');Ya=$('<input id="cscycLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');
Sa=$('<input id="cncodeLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');n=$('<select id="bldsEdge">');db=$('<select data="bufedge" id="ebuff0" style="width:2em">');lb=$('<select id="ebuff1" style="width:2em">');cb=$('<input id="efix" type="text" style="width:4em" value="" pattern="[URFDLBurfdlb +]*">');jb=$('<input id="enerrLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');bb=$('<input id="escycLR" type="text" style="width:4em" value=""> pattern="d{1,2}-d{1,2}"');
gb=$('<input id="encodeLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');eb=$('<select id="ceparity">');b=[["any",7],["ok",1],["flip",2],["move",4],["not ok",6],["ok/flip",3],["ok/move",5]];for(a=0;a<b.length;a++)Ua.append('<option value="'+b[a][1]+'">'+b[a][0]+"</option>"),lb.append('<option value="'+b[a][1]+'">'+b[a][0]+"</option>");b=[["parity",3],["even",1],["odd",2]];for(a=0;a<b.length;a++)eb.append('<option value="'+b[a][1]+'">'+b[a][0]+"</option>");b=[["$",0],["solved",
1],["any",2]];for(a=0;a<b.length;a++)y.append('<option value="'+b[a][1]+'">'+b[a][0].replace("$","Corner")+"</option>"),n.append('<option value="'+b[a][1]+'">'+b[a][0].replace("$","Edge")+"</option>");tools.regTool("bldhelper",TOOLS_BLDHELPER,Za)})});var replay=execMain(function(){function b(a){a!=ab&&(ab=a,cb.html(ab?" ":" "))}function Pa(){eb&&(clearTimeout(eb),eb=0);gb=+new Date-Oa;b(1);a()}function x(a,b){return b?0>a?-1:a*Ya[Sa]:0>a?-2E3:a/Ya[Sa]}function z(b){if(b>f)for(var c=f;c<b;c++)3<Math.abs(b-1-c)?Qa.applyMoves([w[c][0]]):Qa.addMoves([w[c][0]]);else if(b<f)for(c=f-1;c>=b;c--){var e=Qa.moveInv(w[c][0]);3<Math.abs(b-1-c)?Qa.applyMoves([e]):Qa.addMoves([e])}f=b;b=w[Math.max(0,b-1)];Oa=x(b?b[1]:0);a()}function c(a){a=$(a.target);if(a.hasClass("click")||
a.is("input")){var c=a.attr("data"),e=ab,h=x(Oa,!0);b(0);if("l"==c)0<f&&z(f-1);else if("n"==c)f<w.length&&z(f+1);else if("p"==c)0==e&&0<w.length&&Oa>=x(w[w.length-1][1])&&z(0),b(1-e),1==ab&&Pa();else if("s"==c)z(0);else if("e"==c)z(w.length);else if("r"==c)a:{a=Xa.val();for(c=0;c<w.length;c++)if(w[c][1]>=a){z(c);break a}z(w.length)}else"s+"==c?(Sa=Math.min(Sa+1,Ya.length-1),n.html(Ya[Sa]+"x"),Oa=x(h)):"s-"==c?(Sa=Math.max(Sa-1,0),n.html(Ya[Sa]+"x"),Oa=x(h)):"a"==c?$.clipboardCopy(db)&&logohint.push("share link copied"):
"o"==c&&((Ua=!Ua)?a.html(nb[1]):a.html(nb[0]),z(0),Ra(Wa))}}function e(){var a=+new Date-gb;eb&&(clearTimeout(eb),eb=0);if(0==ab)return Oa;for(;f<w.length&&x(w[f][1])<=a;)Qa.addMoves([w[f][0]]),f++;if(f>=w.length)return a;eb=setTimeout(e,x(w[f][1])-a);return a}function a(){Oa=e();var c=0<w.length?w[w.length-1][1]:0;Oa=Math.min(Oa,x(c));Xa.val(x(Oa,!0));Ta.html((0<=Oa?kernel.pretty(x(Oa,!0)):"--")+"/"+kernel.pretty(c));for(var h=[],n=-4;5>n;n++){var r=n+f;if(0>r||r>=w.length)h[n+4]='<span style="color:#888;">~</span>',
pad=mathlib.valuedArray(hb-1," ").join("");else{var y=Qa.move2str(w[r][0]);pad=mathlib.valuedArray(hb-y.length," ").join("");Qa.isRotation(w[r][0])&&(y='<span style="color:#888;">'+y+"</span>");h[n+4]=y}0==n&&(h[n+4]="<b><u>"+h[n+4]+"</u></b>");h[n+4]=pad+h[n+4]}bb.empty();bb.html(h.join("<br>"));Oa>=x(c)&&b(0);1==ab&&requestAnimFrame(a)}function h(a,b){if(!Ua||!/^\d+$/.exec(y))return b?[]:a;var c=kernel.getProp("giiOri");if("auto"==c)return b?[]:a;if(b)return Qa.parseScramble(mathlib.CubieCube.rot2str[c]);
c=mathlib.CubieCube.rotMulI[0][~~c];var e="URFDLB".indexOf(a[2]);e=mathlib.CubieCube.rotMulM[c][3*e]/3;a=a.slice();a[2]="URFDLB".charAt(e);return a}function Ra(a){Wa=a;lb.attr("href","https://alg.cubing.net/?alg="+encodeURIComponent((a||"").replace(/@(\d+)/g,"/*$1*/").replace(/-/g,"&#45;"))+"&setup="+encodeURIComponent(jb||""));var b=a.split(" "),c=[];a=[];for(var e=0;e<b.length;e++){var n=/^(.*)@(\d+)$/.exec(b[e]);n&&(c.push(n[1]),a.push(~~n[2]))}b=Qa.parseScramble(c.join(" "));if(b.length!=a.length)console.log("parse error");
else{Xa.attr("min",-1);Xa.attr("max",a[a.length-1]);w=h(null,!0);for(e=0;e<w.length;e++)w[e]=[w[e],-1];for(e=0;e<b.length;e++)0==a[e]&&Qa.isRotation(b[e])&&--a[e],w.push([h(b[e]),a[e]]);for(e=hb=0;e<w.length;e++)hb=Math.max(hb,(""+Qa.move2str(w[e][0])).length);f=0;Oa=x(-1);Pa()}}function Za(a,e,f){y=f||tools.puzzleType(tools.getCurScramble()[0]);f="222 333 444 555 666 777 888 999 101010 111111".split(" ").indexOf(y);jb=a;db=(new URL("?vrcreplay="+LZString.compressToEncodedURIComponent(JSON.stringify([a,
e,y])),location)).toString();var h={puzzle:"cube3"};-1!=f?h.puzzle="cube"+(f+2):-1!=["skb","mgm","pyr","sq1","clk"].indexOf(y)&&(h.puzzle=y);kernel.showDialog([r,function(){b(0)},void 0,function(){b(0)}],"share",VRCREPLAY_TITLE,function(){puzzleFactory.init(h,$.noop,Na,function(b,f){r.unbind("click").click(c);Xa.unbind("input click").bind("input",c);(Qa=b)&&Qa.resize();Va=Qa.parseScramble(a);Qa.applyMoves(Va);Ra(e)})})}var r,Na,Qa,y,Wa,Ua=!0,Xa,Ta,Ya=[.2,.3,.5,.7,1,1.5,2,3,5],Sa=4,n,db,lb,cb,jb,bb,
gb=0,eb=0,Va=[],w=[],f=0,Oa=0,ab=0,hb=0,nb=VRCREPLAY_ORI.split("|");$(function(){r=$('<table style="height:98%">');Na=$('<td style="height:80%">');Xa=$('<input type="range" style="width:50%;" data="r">');Ta=$('<span style="user-select:none;"></span>');n=$('<span style="user-select:none;">1x</span>');lb=$('<a target="_blank">Alg</a>');cb=$('<span class="click playbutton" data="%">$</span>'.replace("$"," ").replace("%","p"));bb=$('<td style="width:0%;font-family:monospace;white-space:pre;">');r.append($("<tr>").append($("<td>").append('<span class="click playbutton" data="%">$</span>'.replace("$",
nb[1]).replace("%","o"),"| ",lb," |",'<span class="click playbutton" data="%">$</span>'.replace("$",VRCREPLAY_SHARE).replace("%","a"))),$("<tr>").append(Na,bb),$("<tr>").append($('<td style="display:flex;justify-content:center;">').append(n," ",Xa," ",Ta)),$("<tr>").append($("<td>").append('<span class="click playbutton" data="%">$</span>'.replace("$"," ").replace("%","s-"),'<span class="click playbutton" data="%">$</span>'.replace("$"," ").replace("%","s+"),'<span class="click playbutton" data="%">$</span>'.replace("$",
" ").replace("%","s"),'<span class="click playbutton" data="%">$</span>'.replace("$"," ").replace("%","l"),cb,'<span class="click playbutton" data="%">$</span>'.replace("$"," ").replace("%","n"),'<span class="click playbutton" data="%">$</span>'.replace("$"," ").replace("%","e"))));var a=$.urlParam("vrcreplay");if(a){$.clearUrl("vrcreplay");try{a=JSON.parse(LZString.decompressFromEncodedURIComponent(decodeURIComponent(a))),setTimeout(function(){Za(a[0],a[1],a[2])},500)}catch(fb){console.log(fb)}}});
return{popupReplay:Za,bindDomElem:function(a,b,c,e){a.hasClass("click")||a.addClass("click");a.unbind("click").click(Za.bind(null,b,c,e))}}});var shortcuts=execMain(function(){function b(b,e){if(kernel.getProp("useKSC")){var a;e.altKey&&e.ctrlKey?a=z[e.which]:e.altKey?a=Pa[e.which]:e.ctrlKey&&(a=x[e.which]);void 0!=a&&(void 0==a[1]?kernel.setProp(a[0][0],a[0][1]):kernel.pushSignal(a[1],a[0]),kernel.clrKey(),kernel.blur())}}var Pa={49:[["scrType","sqrs"]],50:[["scrType","222so"]],51:[["scrType","333"]],52:[["scrType","444wca"]],53:[["scrType","555wca"]],54:[["scrType","666wca"]],55:[["scrType","777wca"]],67:[["scrType","clkwca"]],77:[["scrType",
"mgmp"]],80:[["scrType","pyrso"]],83:[["scrType","skbso"]],73:[["scrType","input"]],37:[["scramble","last"],"ctrl"],39:[["scramble","next"],"ctrl"],38:[["stats","-"],"ctrl"],40:[["stats","+"],"ctrl"],68:[["stats","clr"],"ctrl"],90:[["stats","undo"],"ctrl"]},x={49:[["stats","OK"],"ctrl"],50:[["stats","+2"],"ctrl"],51:[["stats","DNF"],"ctrl"]},z={84:[["input","t"]],73:[["input","i"]],83:[["input","s"]],77:[["input","m"]],86:[["input","v"]],71:[["input","g"]]};$(function(){kernel.regListener("shortcut",
"keydown",b);kernel.regProp("tools","useKSC",0,PROPERTY_USEKSC,[!0])})});var help=execMain(function(b,Pa,x){function z(){$(this).hasClass("enable")||c($(this).html())}function c(b){if(void 0===b)for(b in r)break;a(b)&&e(b)}function e(a,b){Qa.children().appendTo(kernel.temp);for(var c in r)$("<div />").html(c).addClass(c==a?"tab enable":"tab disable").click(z).appendTo(Qa)}function a(a,b){setTimeout(function(){r[a]&&Wa.scrollTop(Wa.scrollTop()+r[a].position().top-3)},0);return!0}function h(){var a=ABOUT_LANG,b;for(b in r)50<r[b].position().top||(a=r[b].is("h1, h2, h3")?
r[b].html():ABOUT_LANG);e(a)}function Ra(a){var b=$(a.target).val();kernel.blur();$(a.target).val("...");if(b in Ua)Pa("vrcKBL",b),Za(b);else if("other"==b&&(a=x("vrcKBL"),a=Ua[a]||a,a=prompt("input keyboard layout",a))){47!=a.length&&alert("Invalid Keyboard Layout");for(b=0;b<a.length;b++)if(-1==a.indexOf(Ua.qwerty.charAt(b))){alert("Invalid Keyboard Layout");return}Pa("vrcKBL",a);Za(a)}}function Za(a){a in Ua&&(a=Ua[a]);var b=[];a=a.toUpperCase();for(var c=0;c<Xa.length;c++){b.push("<tr>");for(var e=
0;e<Xa[c].length;e++)b.push("<td>"+a[Xa[c][e]]+"<br><span>"+Ta[c][e]+"</span></td>");b.push("</tr>")}c=$("#vrckey");c.find("tr:not(:first)").remove();e=$("<tr>");var h=$('<select id="vrckeylayout">');h.append($("<option />").val("...").html("select layout"));for(var r in Ua)h.append($("<option />").val(r).html(r));h.append($("<option />").val("other").html("..."));h.unbind("change").change(Ra);c.append(e.append($('<th colspan="10">').append("Layout: ",h)));c.append(b.join(""));b=Ua.qwerty.toUpperCase();
a=a.toUpperCase();r={96:192,45:189,61:187,91:219,93:221,92:220,59:186,39:222,44:188,46:190,47:191};Ya={};for(c=0;c<b.length;c++)e=b.charCodeAt(c),h=a.charCodeAt(c),e=r[e]||e,h=r[h]||h,e!=h&&(Ya[h]=e),186==h&&(Ya[59]=e)}var r={},Na=$('<table class="options" />'),Qa=$("<td />"),y=$("<td />").addClass("tabValue"),Wa=$('<div class="noScrollBar helptable">');Na.append($("<tr />").append(Qa,y.append(Wa)));var Ua={qwerty:"`1234567890-=qwertyuiop[]\\asdfghjkl;'zxcvbnm,./",dvorak:"`1234567890[]',.pyfgcrl/=\\aoeuidhtns-;qjkxbmwvz",
colemak:"`1234567890-=qwfpgjluy;[]\\arstdhneio'zxcvbkm,./"},Xa=[[1,2,3,4,5,6,7,8,9,10],[13,14,15,16,17,18,19,20,21,22],[26,27,28,29,30,31,32,33,34,35],[37,38,39,40,41,42,43,44,45,46]],Ta=["<br>,<br>,&lt;,&gt;,  M,  M,&lt;,&gt;,<br>,<br>".split(",")," z';  B; L';Lw';  x;  x; Rw;  R; B';  z".split(";")," y';  D;  L; U'; F';  F;  U; R'; D';  y".split(";")," Dw; M';Uw'; Lw; x'; x';Rw'; Uw; M';Dw'".split(";")],Ya={};$(function(){for(var a=$("#about").children(),e=0;e<a.length;e++){var y=a.eq(e),z=y.appendTo(Wa).html();
y.is("h1, h2, h3")&&!a.eq(e+1).is("h1, h2, h3")?r[z]=y:r[ABOUT_LANG]=r[ABOUT_LANG]||y}c();$("#about").html(Na);Wa.scrollTop();Wa.unbind("scroll").scroll(h);b("vrc","vrcKBL",-6,"VRC Keyboard Layout",["qwerty"]);a=x("vrcKBL");Za(a)});return{getMappedCode:function(a){return Ya[a]||a}}},[kernel.regProp,kernel.setProp,kernel.getProp]);var stackmat=execMain(function(){function b(b){e=b;a=c.createMediaStreamSource(b);h=c.createScriptProcessor(1024,1,1);h.onaudioprocess=function(a){a=a.inputBuffer.getChannelData(0);for(var b=0;b<a.length;b++){Na=Math.max(1E-4,Na+(a[b]*a[b]-Na)*Qa);var c=1/Math.sqrt(Na)*a[b];y.unshift(c);if((y.pop()-c)*(Wa?1:-1)>Xa&&Math.abs(c-(Wa?1:-1))-1>Ua&&Ta>.6*Ra){for(var e=0;e<Math.round(Ta/Ra);e++)Za(Wa);Wa^=1;Ta=0}else Ta>2*Ra&&(Za(Wa),Ta-=Ra);Ta++;10>cb?Ya=Math.max(1E-4,Ya+(Math.pow(c-(Wa?1:-1),2)-Ya)*Qa):
100<cb&&(Ya=1)}};a.connect(h);h.connect(c.destination)}function Pa(a){Sa.push(a);a!=lb?(lb=a,cb=1):cb++;jb++;if(10<cb)db=a,Sa=[],0!=n.length&&(n=[]),100<cb&&gb.on?(gb.on=!1,gb.noise=Math.min(1,Ya)||0,gb.power=Na,eb(gb)):700<jb&&(jb=100,gb.noise=Math.min(1,Ya)||0,gb.power=Na,eb(gb));else if(10==Sa.length)if(Sa[0]==db||Sa[9]!=db)Sa=Sa.slice(1);else{a=0;for(var b=8;0<b;b--)a=a<<1|(Sa[b]==db?1:0);n.push(String.fromCharCode(a));a:if(a=n,9==a.length||10==a.length){DEBUG&&console.log("[stackmat]",a);b=/[0-9]/;
var c=a[0];if(/[ SILRCA]/.exec(c)){for(var e=64,h=1;h<a.length-3;h++){if(!b.exec(a[h]))break a;e+=~~a[h]}e==a[a.length-3].charCodeAt(0)&&x(c,6E4*~~a[1]+1E3*~~(a[2]+a[3])+~~(a[4]+a[5]+(10==a.length?a[6]:"0")),9==a.length?10:1)}}Sa=[]}}function x(a,b,c){var e=$.now();200<e-bb&&DEBUG&&console.log("[stackmat] signal miss ",e-bb);bb=e;e={};e.time_milli=b;e.unit=c;e.on=!0;kernel.getProp("stkHead")||(a="S");b=c==gb.unit?e.time_milli>gb.time_milli:Math.floor(e.time_milli/10)>Math.floor(gb.time_milli/10);
e.greenLight="A"==a;e.leftHand="L"==a||"A"==a||"C"==a;e.rightHand="R"==a||"A"==a||"C"==a;e.running=("S"!=a||"S"==gb.signalHeader)&&(" "==a||b);e.signalHeader=a;e.unknownRunning=!gb.on;e.noise=Math.min(1,Ya)||0;e.power=Na;gb=e;jb=0;eb(gb)}function z(a){if(lb!=db&&1==cb&&(Sa.push(a),24==Sa.length)){for(var b=0,c=5;0<=c;c--){b*=10;for(var e=0;4>e;e++)b+=Sa[4*c+e]<<e}Sa=[];x("S",b,1)}a!=lb?(lb=a,cb=1):cb++;10<cb&&(db=a,Sa=[],n=[],1E3<cb&&gb.on?(gb.on=!1,gb.noise=Math.min(1,Ya)||0,gb.power=Na,eb(gb)):
4E3<cb&&(cb=1E3,gb.noise=Math.min(1,Ya)||0,gb.power=Na,eb(gb)))}var c,e,a,h,Ra,Za,r,Na=1,Qa=1E-4,y=[],Wa=0,Ua=.2,Xa=.7,Ta=0,Ya=0,Sa=[],n=[],db=0,lb=0,cb=0,jb=0,bb=0,gb={time_milli:0,unit:10,on:!1,greenLight:!1,leftHand:!1,rightHand:!1,running:!1,unknownRunning:!0,signalHeader:"I",noise:1,power:1},eb=$.noop;return{init:function(a,h,f){r=a;void 0===navigator.mediaDevices&&(navigator.mediaDevices={});void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(a){var b=
navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return b?new Promise(function(c,e){b.call(navigator,a,c,e)}):Promise.reject(Error("getUserMedia is not implemented in this browser"))});c=new (window.AudioContext||window.webkitAudioContext);"m"==r?(Ra=c.sampleRate/8E3,Za=z):(Ra=c.sampleRate/1200,Za=Pa);Qa=.001/Ra;y.length=Math.ceil(Ra/6);Sa=[];n=[];a={echoCancellation:!1,noiseSuppression:!1};h&&(a.deviceId={exact:h});return void 0==e?navigator.mediaDevices.getUserMedia({audio:a}).then(function(a){if("suspended"==
c.state&&!f)return Promise.reject();b(a)},console.log):Promise.resolve()},stop:function(){if(void 0!=e){try{a.disconnect(h),h.disconnect(c.destination),e.stop&&e.stop()}catch(Va){}e=void 0}},updateInputDevices:function(){var a=[],b=Promise.resolve(a);return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(c){for(var e=0;e<c.length;e++){var f=c[e];"audioinput"===f.kind&&a.push([f.deviceId,f.label||"microphone "+(a.length+1)])}return b}):
b},setCallBack:function(a){eb=a}}});
execMain(function(){window.nativeStackmat&&(stackmat=function(){DEBUG&&console.log("Use Native Stackmat");var b="stackmat_callback_"+~~(1E7*Math.random()),Pa;nativeStackmat.setCallback(b);window[b]=function(b){DEBUG&&console.log(JSON.stringify(b));Pa&&Pa(b)};return{init:function(){nativeStackmat.init();return Promise.resolve()},stop:function(){nativeStackmat.stop();return Promise.resolve()},updateInputDevices:function(){return Promise.resolve([[void 0,"native"]])},setCallBack:function(b){Pa=b}}}())});var stackmatutil=execMain(function(b){function Pa(a){a?(e=!0,a.empty().append(z,"<br>","Device:&nbsp;&nbsp;",c)):e=!1}function x(){stackmat.updateInputDevices().then(function(a){c.empty();for(var b=0;b<a.length;b++)c.append($("<option>").val(a[b][0]).text(a[b][1]));c.unbind("change").change(function(){stackmat.stop();console.log("select device ",c.val());stackmat.init(void 0,c.val(),!0);kernel.blur()})})}var z=$("<span>").html("status:  unknown"),c=$('<select style="font-size: 1rem;">'),e=!1;$(function(){tools.regTool("stackmatutil",
"stackmat",Pa);kernel.regProp("timer","stkHead",0,PROPERTY_STKHEAD,[!0]);x()});return{init:function(a,b){return stackmat.init(a,void 0,b).then(x)},stop:stackmat.stop,setCallBack:function(a){stackmat.setCallBack(function(b){if(e){var c="status:  "+(b.on?"on":"off")+"<br>";c+="noise:   "+~~(100*b.noise)+"%<br>";c+="power:   "+~~(100*Math.log10(b.power))/10+"dB<br>";c+="header:  "+b.signalHeader+"<br>";c+="pad:     "+(b.leftHand?"L":" ")+(b.rightHand?"R":" ")+"<br>";c+="running: "+(b.running?"yes":"no");
z.html(c.replace(/ /g,"&nbsp;"))}a&&a(b)})}}});var GiikerCube=execMain(function(){function b(a,b){return a.toUpperCase()==b.toUpperCase()}function Pa(){return z?Promise.resolve(x&&x.clear()).then(function(){z.removeEventListener("gattserverdisconnected",Ra);z.gatt.disconnect();z=null}):Promise.resolve()}var x=void 0,z=null,c=function(){function a(a){b(a.target.value)}function b(a){for(var b=$.now(),c=[],e=0;20>e;e++)c.push(a.getUint8(e));if(167==c[18]){a=[176,81,104,224,86,137,237,119,38,26,193,161,210,126,150,81,93,13,236,249,89,235,88,24,113,
81,214,131,130,199,2,169,39,165,171,41];var y=c[19]>>4&15,z=c[19]&15;for(e=0;18>e;e++)c[e]+=a[e+y]+a[e+z];c=c.slice(0,18)}a=[];for(e=0;e<c.length;e++)a.push(c[e]>>4&15),a.push(c[e]&15);e=[];for(c=0;3>c;c++)for(y=8;0!=y;y>>=1)e.push(a[c+28]&y?1:0);y=new mathlib.CubieCube;z=[-1,1,-1,1,1,-1,1,-1];for(c=0;8>c;c++)y.ca[c]=a[c]-1|(3+a[c+8]*z[c])%3<<3;for(c=0;12>c;c++)y.ea[c]=a[c+16]-1<<1|e[c];e=y.toFaceCube(r,x);z=a.slice(32,40);y=[];for(c=0;c<z.length;c+=2)y.push("BDLURF".charAt(z[c]-1)+" 2'".charAt((z[c+
1]-1)%7));if(DEBUG){z=[];for(c=0;40>c;c++)z.push("0123456789abcdef".charAt(a[c]));console.log("[giiker]","Raw Data: ",a.join(""));console.log("[giiker]","Current State: ",e);console.log("[giiker]","A Valid Generator: ",scramble_333.genFacelet(e));console.log("[giiker]","Previous Moves: ",y.reverse().join(" "));y.reverse()}Za(e,y,[b,b],h);return[e,y]}var c=null,e=null,h,r=[[26,15,29],[20,8,9],[18,38,6],[24,27,44],[51,35,17],[45,11,2],[47,0,36],[53,42,33]],x=[[25,28],[23,12],[19,7],[21,41],[32,16],
[5,10],[3,37],[30,43],[52,34],[48,14],[46,1],[50,39]];return{init:function(r){h=r.name.startsWith("Gi")?"Giiker":"Mi Smart";return r.gatt.connect().then(function(a){c=a;return a.getPrimaryService("0000aadb-0000-1000-8000-00805f9b34fb")}).then(function(a){return a.getCharacteristic("0000aadc-0000-1000-8000-00805f9b34fb")}).then(function(a){e=a;return e.startNotifications()}).then(function(){return e.readValue()}).then(function(c){b(c)[0]!=kernel.getProp("giiSolved",mathlib.SOLVED_FACELET)&&(c=kernel.getProp("giiRST"),
("a"==c||"p"==c&&confirm(CONFIRM_GIIRST))&&giikerutil.markSolved());return e.addEventListener("characteristicvaluechanged",a)})},opservs:["0000aadb-0000-1000-8000-00805f9b34fb","0000aaaa-0000-1000-8000-00805f9b34fb"],getBatteryLevel:function(){var a,b,e,r=function(a){e([a.target.value.getUint8(1),h]);b.removeEventListener("characteristicvaluechanged",r);b.stopNotifications()};return c.getPrimaryService("0000aaaa-0000-1000-8000-00805f9b34fb").then(function(b){a=b;return b.getCharacteristic("0000aaab-0000-1000-8000-00805f9b34fb")}).then(function(a){b=
a;return b.startNotifications()}).then(function(){return b.addEventListener("characteristicvaluechanged",r)}).then(function(){return a.getCharacteristic("0000aaac-0000-1000-8000-00805f9b34fb")}).then(function(a){a.writeValue((new Uint8Array([181])).buffer);return new Promise(function(a){e=a})})},clear:$.noop}}(),e=function(){function a(a){for(var b=[],c=0;c<a.byteLength;c++)b[c]=a.getUint8(c);if(null==nb)return b;a=nb.iv||[];if(16<b.length){var e=b.length-16,f=nb.decrypt(b.slice(e));for(c=0;16>c;c++)b[c+
e]=f[c]^~~a[c]}nb.decrypt(b);for(c=0;16>c;c++)b[c]^=~~a[c];return b}function c(){DEBUG&&console.log("[gancube] v1init start");return gb.getCharacteristic("00002a28-0000-1000-8000-00805f9b34fb").then(function(a){return a.readValue()}).then(function(a){var b=a.getUint8(0)<<16|a.getUint8(1)<<8|a.getUint8(2);DEBUG&&console.log("[gancube] version",b.toString(16));nb=null;if(65543<b&&65536==(b&16776704))return gb.getCharacteristic("00002a23-0000-1000-8000-00805f9b34fb").then(function(a){return a.readValue()}).then(function(a){var c=
mb[b>>8&255];if(c){c=JSON.parse(LZString.decompressFromEncodedURIComponent(c));for(var e=0;6>e;e++)c[e]=c[e]+a.getUint8(5-e)&255;a=c}else a=void 0;a?(DEBUG&&console.log("[gancube] key",JSON.stringify(a)),nb=$.aes128(a)):logohint.push("Not support your Gan cube")});logohint.push("Not support your Gan cube")}).then(function(){return bb.getCharacteristics()}).then(function(a){for(var c=0;c<a.length;c++){var e=a[c];DEBUG&&console.log("[gancube] v1init find chrct",e.uuid);b(e.uuid,"0000fff2-0000-1000-8000-00805f9b34fb")?
eb=e:b(e.uuid,"0000fff5-0000-1000-8000-00805f9b34fb")?Va=e:b(e.uuid,"0000fff6-0000-1000-8000-00805f9b34fb")?w=e:b(e.uuid,"0000fff7-0000-1000-8000-00805f9b34fb")&&(f=e)}}).then(db)}function e(){if(!z||!z.watchAdvertisements)return Promise.reject(-1);var a=new AbortController;return new Promise(function(b,c){var e=function(c){DEBUG&&console.log("[gancube] receive adv event",c);c=c.manufacturerData;if((c=c instanceof DataView?c:c.get(1))&&6<=c.byteLength){for(var f=[],h=0;6>h;h++)f.push((c.getUint8(c.byteLength-
h-1)+256).toString(16).slice(1));z&&z.removeEventListener("advertisementreceived",e);a.abort();b(f.join(":"))}};z.addEventListener("advertisementreceived",e);z.watchAdvertisements({signal:a.signal});setTimeout(function(){z&&z.removeEventListener("advertisementreceived",e);a.abort();c(-2)},5E3)})}function h(a,b){var c=JSON.parse(kernel.getProp("giiMacMap","{}")),e=c[$a];if(!e||a)e=prompt((b?"The key provided might be wrong. ":"")+"MAC address (xx:xx:xx:xx:xx:xx) of your cube, can be found in CubeStation or about://bluetooth-internals/#devices",
e||"xx:xx:xx:xx:xx:xx");/^([0-9a-f]{2}[:-]){5}[0-9a-f]{2}$/i.exec(e)?(e!=c[$a]&&(c[$a]=e,kernel.setProp("giiMacMap",JSON.stringify(c))),r(e)):(logohint.push("Not a valid mac address, cannot connect to your Gan cube"),nb=null)}function r(a){for(var b=[],c=0;6>c;c++)b.push(parseInt(a.slice(3*c,3*c+2),16));a=JSON.parse(LZString.decompressFromEncodedURIComponent(mb[2]));c=JSON.parse(LZString.decompressFromEncodedURIComponent(mb[3]));for(var e=0;6>e;e++)a[e]=(a[e]+b[5-e])%255,c[e]=(c[e]+b[5-e])%255;b=
[a,c];DEBUG&&console.log("[gancube] key",JSON.stringify(b));nb=$.aes128(b[0]);nb.iv=b[1]}function x(a){var b=mathlib.valuedArray(20,0);b[0]=a;if(hb){a=b.slice();if(null!=nb){for(var c=nb.iv||[],e=0;16>e;e++)a[e]^=~~c[e];nb.encrypt(a);if(16<a.length){var f=a.length-16,h=a.slice(f);for(e=0;16>e;e++)h[e]^=~~c[e];nb.encrypt(h);for(e=0;16>e;e++)a[e+f]=h[e]}}DEBUG&&console.log("[gancube] v2sendRequest",b,a);b=hb.writeValue((new Uint8Array(a)).buffer)}else DEBUG&&console.log("[gancube] v2sendRequest cannot find v2write chrct"),
b=void 0;return b}function Pa(){DEBUG&&console.log("[gancube] v2init start");Db=0;if(fb){var a=JSON.parse(kernel.getProp("giiMacMap","{}")),c=a[$a];c&&c.toUpperCase()==fb.toUpperCase()?DEBUG&&console.log("[gancube] v2init mac matched"):(DEBUG&&console.log("[gancube] v2init mac updated"),a[$a]=fb,kernel.setProp("giiMacMap",JSON.stringify(a)));r(fb)}else h(!0);return Oa.getCharacteristics().then(function(a){DEBUG&&console.log("[gancube] v2init find chrcts",a);for(var c=0;c<a.length;c++){var e=a[c];
DEBUG&&console.log("[gancube] v2init find chrct",e.uuid);b(e.uuid,"28be4cb6-cd67-11e9-a32f-2a2ae2dbcce4")?ab=e:b(e.uuid,"28be4a4a-cd67-11e9-a32f-2a2ae2dbcce4")&&(hb=e)}ab||DEBUG&&console.log("[gancube] v2init cannot find v2read chrct")}).then(function(){DEBUG&&console.log("[gancube] v2init v2read start notifications");return ab.startNotifications()}).then(function(){DEBUG&&console.log("[gancube] v2init v2read notification started");return ab.addEventListener("characteristicvaluechanged",lb)}).then(function(){return x(5)}).then(function(){return x(4)}).then(function(){return x(9)})}
function Ra(){var a=$.now();DEBUG&&console.log("[gancube]","init cube state");Za(tb,kb,[null,a],$a);ob.fromFacelet(tb);xb=vb;tb!=kernel.getProp("giiSolved",mathlib.SOLVED_FACELET)&&(a=kernel.getProp("giiRST"),("a"==a||"p"==a&&confirm(CONFIRM_GIIRST))&&giikerutil.markSolved())}function Sa(){return 50>Kb?Promise.resolve(!1):eb.readValue().then(function(b){b=a(b);for(var c=[],e=0;e<b.length-2;e+=3)for(var f=b[e^1]<<16|b[e+1^1]<<8|b[e+2^1],h=21;0<=h;h-=3)c.push("URFDLB".charAt(f>>h&7)),12==h&&c.push("URFDLB".charAt(e/
3));tb=c.join("");Kb=0;if(-1==xb)Ra();else return Promise.resolve(!0)})}function n(a,b){var c=vb-xb&255;DEBUG&&1<c&&console.log("[gancube]","bluetooth event was lost, moveDiff = "+c);xb=vb;Kb+=c;c>kb.length&&(Kb=50,c=kb.length);for(var e=wb+zb,f=c-1;0<=f;f--)e+=rb[f];2E3<Math.abs(a-e)&&(DEBUG&&console.log("[gancube]","time adjust",a-e,"@",a),wb+=a-e);for(f=c-1;0<=f;f--)c=3*"URFDLB".indexOf(kb[f][0])+" 2'".indexOf(kb[f][1]),mathlib.CubieCube.EdgeMult(ob,mathlib.CubieCube.moveCube[c],sb),mathlib.CubieCube.CornMult(ob,
mathlib.CubieCube.moveCube[c],sb),wb+=rb[f],Za(sb.toFaceCube(),kb.slice(f),[wb,0==f?a:null],$a+(b?"*":"")),c=sb,sb=ob,ob=c,DEBUG&&console.log("[gancube] move",kb[f],rb[f]);zb=a-wb}function db(){if(z)return Va.readValue().then(function(b){b=a(b);var c=$.now();vb=b[12];if(vb!=xb){kb=[];for(var e=0;6>e;e++){var f=b[13+e];kb.unshift("URFDLB".charAt(~~(f/3))+" 2'".charAt(f%3))}var h;return w.readValue().then(function(b){h=b=a(b);return Sa()}).then(function(a){if(!a){rb=[];for(var b=0;9>b;b++)rb.unshift(h[2*
b+1]|h[2*b+2]<<8);n(c,0);a&&ob.toFaceCube()!=tb&&(DEBUG&&console.log("[gancube]","Cube state check error"),DEBUG&&console.log("[gancube]","calc",ob.toFaceCube()),DEBUG&&console.log("[gancube]","read",tb),ob.fromFacelet(tb))}})}}).then(db)}function lb(a){null!=nb&&cb(a.target.value)}function cb(b){var c=$.now();b=a(b);for(var e=0;e<b.length;e++)b[e]=(b[e]+256).toString(2).slice(1);b=b.join("");e=parseInt(b.slice(0,4),2);if(1!=e)if(2==e){if(DEBUG&&console.log("[gancube]","v2 received move event",b),
vb=parseInt(b.slice(4,12),2),vb!=xb)if(-1==xb)xb=vb;else{rb=[];kb=[];var f=0;for(e=0;7>e;e++){var h=parseInt(b.slice(12+5*e,17+5*e),2);rb[e]=parseInt(b.slice(47+16*e,63+16*e),2);kb[e]="URFDLB".charAt(h>>1)+" '".charAt(h&1);12<=h&&(kb[e]="U ",f=1)}Db+=f;0==f&&n(c,1)}}else if(4==e){if(DEBUG&&console.log("[gancube]","v2 received facelets event",b),vb=parseInt(b.slice(4,12),2),vb==xb||-1==xb){f=new mathlib.CubieCube;h=0;var r=3840;for(e=0;7>e;e++){var w=parseInt(b.slice(12+3*e,15+3*e),2),x=parseInt(b.slice(33+
2*e,35+2*e),2);r-=x<<3;r^=w;f.ca[e]=x<<3|w}f.ca[7]=(r&4088)%24|r&7;for(e=0;11>e;e++)w=parseInt(b.slice(47+4*e,51+4*e),2),x=parseInt(b.slice(91+e,92+e),2),h^=w<<1|x,f.ea[e]=w<<1|x;f.ea[11]=h;0!=f.verify()?Db++:(tb=f.toFaceCube(),-1==xb?Ra():ob.toFaceCube()!=tb&&(DEBUG&&console.log("[gancube]","Cube state check error"),DEBUG&&console.log("[gancube]","calc",ob.toFaceCube()),DEBUG&&console.log("[gancube]","read",tb),ob.fromFacelet(tb),Za(tb,kb,[null,c],$a+"*")),xb=vb)}}else if(5==e){DEBUG&&console.log("[gancube]",
"v2 received hardware info event",b);c=parseInt(b.slice(8,16),2)+"."+parseInt(b.slice(16,24),2);f=parseInt(b.slice(24,32),2)+"."+parseInt(b.slice(32,40),2);h="";for(e=0;8>e;e++)h+=String.fromCharCode(parseInt(b.slice(40+8*e,48+8*e),2));b=1===parseInt(b.slice(104,105),2);DEBUG&&console.log("[gancube]","Hardware Version",c);DEBUG&&console.log("[gancube]","Software Version",f);DEBUG&&console.log("[gancube]","Device Name",h);DEBUG&&console.log("[gancube]","Gyro Enabled",b)}else 9==e?(DEBUG&&console.log("[gancube]",
"v2 received battery event",b),pb=parseInt(b.slice(8,16),2),giikerutil.updateBattery([pb,$a+"*"])):DEBUG&&console.log("[gancube]","v2 received unknown event",b)}function jb(){Oa=gb=bb=null;var a=Promise.resolve();ab&&(ab.removeEventListener("characteristicvaluechanged",lb),a=ab.stopNotifications()["catch"]($.noop),ab=null);fb=null;kb=[];rb=[];ob=new mathlib.CubieCube;sb=new mathlib.CubieCube;tb=mathlib.SOLVED_FACELET;wb=0;xb=-1;pb=100;return a}var bb,gb,eb,Va,w,f,Oa,ab,hb,nb=null,$a=null,fb=null,
mb=["NoRgnAHANATADDWJYwMxQOxiiEcfYgSK6Hpr4TYCs0IG1OEAbDszALpA","NoNg7ANATFIQnARmogLBRUCs0oAYN8U5J45EQBmFADg0oJAOSlUQF0g","NoRgNATGBs1gLABgQTjCeBWSUDsYBmKbCeMADjNnXxHIoIF0g","NoRg7ANAzBCsAMEAsioxBEIAc0Cc0ATJkgSIYhXIjhMQGxgC6QA"],kb=[],rb=[],ob=new mathlib.CubieCube,sb=new mathlib.CubieCube,tb=mathlib.SOLVED_FACELET,wb=0,zb=0,vb=-1,xb=-1,Kb=1E3,pb=100,Db=0;$.parseV2Data=cb;return{init:function(a){jb();$a=a.name;DEBUG&&console.log("[gancube] init gan cube start");return e().then(function(a){DEBUG&&console.log("[gancube] init gan adv get mac= "+
a);fb=a},function(a){DEBUG&&console.log("[gancube] init get adv failed, code="+a)}).then(function(){return a.gatt.connect()}).then(function(a){return a.getPrimaryServices()}).then(function(a){for(var e=0;e<a.length;e++){var f=a[e];DEBUG&&console.log("[gancube] checkHardware find service",f.uuid);b(f.uuid,"0000180a-0000-1000-8000-00805f9b34fb")?gb=f:b(f.uuid,"0000fff0-0000-1000-8000-00805f9b34fb")?bb=f:b(f.uuid,"6e400001-b5a3-f393-e0a9-e50e24dc4179")&&(Oa=f)}if(Oa)return Pa();if(bb&&gb)return c();
logohint.push("Not support your Gan cube")})},opservs:["0000fff0-0000-1000-8000-00805f9b34fb","0000180a-0000-1000-8000-00805f9b34fb","6e400001-b5a3-f393-e0a9-e50e24dc4179"],getBatteryLevel:function(){return Oa?Promise.resolve([pb,$a+"*"]):f?f.readValue().then(function(b){b=a(b);return Promise.resolve([b[7],$a])}):Promise.resolve([pb,$a])},clear:jb}}(),a=function(){function a(a){a=a.target.value;var c=$.now();if(!(4>a.byteLength)&&42==a.getUint8(0)&&13==a.getUint8(a.byteLength-2)&&10==a.getUint8(a.byteLength-
1)){var e=a.getUint8(2),y=a.byteLength-6;if(1==e)for(e=0;e<y;e+=2){var w=z[a.getUint8(3+e)>>1],f=[0,2][a.getUint8(3+e)&1],Na=3*w+f;DEBUG&&console.log("move","URFDLB".charAt(w)+" 2'".charAt(f));mathlib.CubieCube.EdgeMult(jb,mathlib.CubieCube.moveCube[Na],cb);mathlib.CubieCube.CornMult(jb,mathlib.CubieCube.moveCube[Na],cb);lb=cb.toFaceCube();Za(lb,["URFDLB".charAt(w)+" 2'".charAt(f)],[c,c],r);w=cb;cb=jb;jb=w;20<++Ra&&(Ra=0,h.writeValue((new Uint8Array([51])).buffer))}else if(2==e){c=[];for(y=0;6>y;y++)for(w=
9*z[y],f=n[y],c[w+4]="BFUDRL".charAt(a.getUint8(3+9*y)),e=0;8>e;e++)c[w+Pa[(e+f)%8]]="BFUDRL".charAt(a.getUint8(3+9*y+e+1));a=c.join("");a!=lb&&(DEBUG&&console.log("facelet",a),cb.fromFacelet(a))}else 3!=e&&(5==e?(x=a.getUint8(3),DEBUG&&console.log("battery level",x)):7==e?DEBUG&&console.log("offline stats",b(a)):8==e&&DEBUG&&console.log("cube type",b(a)))}}function b(a){for(var b=[],c=0;c<a.byteLength;c++)b.push(a.getUint8(c)>>4&15),b.push(a.getUint8(c)&15);return b}var c,e,h,r,x,z=[5,2,0,3,1,4],
Pa=[0,1,2,5,8,7,6,3],n=[0,0,6,2,0,0],Ra=100,lb=mathlib.SOLVED_FACELET,cb=new mathlib.CubieCube,jb=new mathlib.CubieCube;return{init:function(b){r=b.name.startsWith("GoCube")?"GoCube":"Rubiks Connected";return b.gatt.connect().then(function(a){return a.getPrimaryService("6e400001-b5a3-f393-e0a9-e50e24dcca9e")}).then(function(a){c=a;return c.getCharacteristic("6e400002-b5a3-f393-e0a9-e50e24dcca9e")}).then(function(a){h=a;return c.getCharacteristic("6e400003-b5a3-f393-e0a9-e50e24dcca9e")}).then(function(a){e=
a;return e.startNotifications()}).then(function(){return e.addEventListener("characteristicvaluechanged",a)}).then(function(){return h.writeValue((new Uint8Array([51])).buffer)})},opservs:["6e400001-b5a3-f393-e0a9-e50e24dcca9e"],getBatteryLevel:function(){h.writeValue((new Uint8Array([50])).buffer);return Promise.resolve([x,r])},clear:$.noop}}(),h=function(){function a(a,b){if("turn"==a){var c=b.target.value,h=$.now();if(!(1>c.byteLength)){var r=c.getUint8(0);if(!(c.byteLength<1+6*r))for(var x=0;x<
r;x++){var y=1+6*x,w=c.getUint8(y+1)<<24|c.getUint8(y+0)<<16|c.getUint8(y+3)<<8|c.getUint8(y+2);w=Math.round(w/65536*1E3);var f=c.getUint8(y+4),Na=Math.round(c.getUint8(y+5)/36);y=z[f];Na=z[f]+Na;z[f]=(Na+9)%9;f=[3,4,5,1,2,0][f];if(5<=y&&4>=Na)y=2;else if(4>=y&&5<=Na)y=0;else continue;w+=db;Na=3*f+y;DEBUG&&console.log("move","URFDLB".charAt(f)+" 2'".charAt(y));mathlib.CubieCube.EdgeMult(n,mathlib.CubieCube.moveCube[Na],Ra);mathlib.CubieCube.CornMult(n,mathlib.CubieCube.moveCube[Na],Ra);Pa=Ra.toFaceCube();
Za(Pa,["URFDLB".charAt(f)+" 2'".charAt(y)],[w,h],e);w=Ra;Ra=n;n=w}}}}var c,e,h,r,x,z=[0,0,0,0,0,0],Pa=mathlib.SOLVED_FACELET,Ra=new mathlib.CubieCube,n=new mathlib.CubieCube,db=0;return{init:function(n){e=n.name;return n.gatt.connect().then(function(a){return a.getPrimaryService("00001000-0000-1000-8000-00805f9b34fb")}).then(function(a){c=a;return c.getCharacteristics()}).then(function(a){for(var c=0;c<a.length;c++){var e=a[c];DEBUG&&console.log("[moyucube] init find chrct",e.uuid);b(e.uuid,"00001001-0000-1000-8000-00805f9b34fb")||
(b(e.uuid,"00001002-0000-1000-8000-00805f9b34fb")?h=e:b(e.uuid,"00001003-0000-1000-8000-00805f9b34fb")?r=e:b(e.uuid,"00001004-0000-1000-8000-00805f9b34fb")&&(x=e))}}).then(function(){h.addEventListener("characteristicvaluechanged",a.bind(null,"read"));r.addEventListener("characteristicvaluechanged",a.bind(null,"turn"));x.addEventListener("characteristicvaluechanged",a.bind(null,"gyro"));h.startNotifications();r.startNotifications();x.startNotifications()})},opservs:["00001000-0000-1000-8000-00805f9b34fb"],
getBatteryLevel:$.noop,clear:$.noop}}(),Ra=function(a,b){var c=Promise.resolve();"disconnect"==a&&(c=Promise.resolve(Pa()));return c.then(function(){return"function"==typeof r&&r(a,b)})}.bind(null,"disconnect"),Za=$.noop,r=$.noop;return{init:function(b){if(!window.navigator||!window.navigator.bluetooth)return alert("Bluetooth API is not available. Ensure https access, and try chrome with chrome://flags/#enable-experimental-web-platform-features enabled"),Promise.reject();b=Promise.resolve(!0);window.navigator.bluetooth.getAvailability&&
(b=window.navigator.bluetooth.getAvailability());return b.then(function(b){DEBUG&&console.log("[bluetooth]","is available",b);return b?window.navigator.bluetooth.requestDevice({filters:[{namePrefix:"Gi"},{namePrefix:"Mi Smart"},{namePrefix:"GAN"},{namePrefix:"MG"},{namePrefix:"GoCube"},{namePrefix:"Rubiks"},{namePrefix:"MHC"}],optionalServices:[].concat(c.opservs,e.opservs,a.opservs,h.opservs),optionalManufacturerData:[1]}):Promise.reject("Bluetooth is not available. Ensure HTTPS access, and check bluetooth is enabled on your device")}).then(function(b){DEBUG&&
console.log("[bluetooth]",b);z=b;b.addEventListener("gattserverdisconnected",Ra);return b.name.startsWith("Gi")||b.name.startsWith("Mi Smart Magic Cube")?(x=c,c.init(b)):b.name.startsWith("GAN")||b.name.startsWith("MG")?(x=e,e.init(b)):b.name.startsWith("GoCube")||b.name.startsWith("Rubiks")?(x=a,a.init(b)):b.name.startsWith("MHC")?(x=h,h.init(b)):Promise.reject("Cannot detect device type")})},stop:Pa,isConnected:function(){return null!=z},setCallback:function(a){Za=a},setEventCallback:function(a){r=
a},getCube:function(){return x}}});var GanTimerState={};GanTimerState[GanTimerState.DISCONNECT=0]="DISCONNECT";GanTimerState[GanTimerState.GET_SET=1]="GET_SET";GanTimerState[GanTimerState.HANDS_OFF=2]="HANDS_OFF";GanTimerState[GanTimerState.RUNNING=3]="RUNNING";GanTimerState[GanTimerState.STOPPED=4]="STOPPED";GanTimerState[GanTimerState.IDLE=5]="IDLE";GanTimerState[GanTimerState.HANDS_ON=6]="HANDS_ON";GanTimerState[GanTimerState.FINISHED=7]="FINISHED";
var GanTimerDriver=execMain(function(){function b(b){var a=[];if(b)for(var c=0;c<b.byteLength;c++)a.push(b.getUint8(c).toString(16).padStart(2,"0"));return a.join(" ")}function Pa(c){c=c.target.value;try{if(c&&0!=c.byteLength&&254==c.getUint8(0)){var a=c.getUint16(c.byteLength-2,!0),e=c.buffer.slice(2,c.byteLength-2),x=new DataView(e);e=65535;for(var Pa=0;Pa<x.byteLength;++Pa){e^=x.getUint8(Pa)<<8;for(var r=0;8>r;++r)e=0<(e&32768)?e<<1^4129:e<<1}var Na=a==(e&65535)}else Na=!1}catch(Qa){Na=!1}Na?"function"==
typeof z&&(Na=z,a={state:c.getUint8(3)},a.state==GanTimerState.STOPPED&&(x=c.getUint8(4),e=c.getUint8(5),c=c.getUint16(6,!0),a.recordedTime={minutes:x,seconds:e,milliseconds:c,asTimestamp:6E4*x+1E3*e+c}),Na(a)):console.log("GanTimerDriver: Invalid event data received from Timer: "+b(c))}function x(){c&&(c.removeEventListener("characteristicvaluechanged",Pa),c=void 0);"function"==typeof z&&z({state:GanTimerState.DISCONNECT})}var z,c;return{connect:function(){if(!window.navigator.bluetooth)return Promise.reject("Bluetooth API is not supported by this browser. Try fresh Chrome version!");
var b=Promise.resolve(!0);window.navigator.bluetooth.getAvailability&&(b=window.navigator.bluetooth.getAvailability());return b.then(function(a){if(!a)return Promise.reject("Bluetooth is not available. Ensure HTTPS access, and check bluetooth is enabled on your device")}).then(function(){return navigator.bluetooth.requestDevice({filters:[{namePrefix:"GAN"},{namePrefix:"gan"},{namePrefix:"Gan"}],optionalServices:["0000fff0-0000-1000-8000-00805f9b34fb"]})}).then(function(a){a.addEventListener("gattserverdisconnected",
x);return a.gatt.connect()}).then(function(a){return a.getPrimaryService("0000fff0-0000-1000-8000-00805f9b34fb")}).then(function(a){return a.getCharacteristic("0000fff5-0000-1000-8000-00805f9b34fb")}).then(function(a){c=a;c.addEventListener("characteristicvaluechanged",Pa);c.startNotifications()})},disconnect:function(){return c?(c.service.device.removeEventListener("gattserverdisconnected",x),c.removeEventListener("characteristicvaluechanged",Pa),c.stopNotifications().then(function(){c.service.device.gatt.disconnect();
c=void 0})):Promise.resolve()},setStateUpdateCallback:function(b){z=b}}});var csTimerWorker=execBoth(function(){if(!window.Worker)return{};var b=new Worker("js/cstimer.js"),Pa={},x=0;b.onmessage=function(b){b=b.data;var c=Pa[b[0]];delete Pa[b[0]];c&&c(b[2])};b.postMessage([0,"set",["SCRAMBLE_NOOBST",SCRAMBLE_NOOBST]]);b.postMessage([0,"set",["SCRAMBLE_NOOBSS",SCRAMBLE_NOOBSS]]);return{getScramble:function(z,c){++x;Pa[x]=c;b.postMessage([x,"scramble",z]);return x}}},function(){self.onmessage=function(b){var Pa=b.data;b=Pa[0];var x=Pa[1];Pa=Pa[2];var z=void 0;switch(x){case "scramble":z=
scrMgr.scramblers[Pa[0]];z=z.apply(z,Pa);break;case "set":self[Pa[0]]=Pa[1]}postMessage([b,x,z])};"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports={getScrambleTypes:function(){var b=[],Pa;for(Pa in scrMgr.scramblers)b.push(Pa);return b},getScramble:function(){var b=scrMgr.scramblers[arguments[0]];return b.apply(b,arguments)},setGlobal:function(b,Pa){self[b]=Pa}})});